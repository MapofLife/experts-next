!function(){function t(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,n,i){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,n,i||t)}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function i(t){var e=u();return function(){var n,i=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return r(this,n)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?o(t):e}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return a(t,arguments,c(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),l(i,t)})(t)}function a(t,e,n){return(a=u()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&l(r,n.prototype),r}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=p(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(u){r=!0,o=u}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+4jp":function(t,e,n){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function i(t){this.message=t||""}function r(t){this.message=t||""}function o(){}function s(t){return null===t?Rt:t.color}function a(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function l(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function f(){}function p(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var _=function(){};_.prototype.interfaces_=function(){return[]},_.prototype.getClass=function(){return _},_.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var v=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),m=function(){},b={MAX_VALUE:{configurable:!0}};m.isNaN=function(t){return Number.isNaN(t)},m.doubleToLongBits=function(t){return t},m.longBitsToDouble=function(t){return t},m.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(m,b);var x=function(){},E=function(){},I=function(){},w=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},N={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};w.prototype.setOrdinate=function(t,e){switch(t){case w.X:this.x=e;break;case w.Y:this.y=e;break;case w.Z:this.z=e;break;default:throw new v("Invalid ordinate index: "+t)}},w.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!_.equalsWithTolerance(this.x,e.x,n)&&!!_.equalsWithTolerance(this.y,e.y,n)}},w.prototype.getOrdinate=function(t){switch(t){case w.X:return this.x;case w.Y:return this.y;case w.Z:return this.z}throw new v("Invalid ordinate index: "+t)},w.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||m.isNaN(this.z))&&m.isNaN(t.z)},w.prototype.equals=function(t){return t instanceof w&&this.equals2D(t)},w.prototype.equalInZ=function(t,e){return _.equalsWithTolerance(this.z,t.z,e)},w.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},w.prototype.clone=function(){},w.prototype.copy=function(){return new w(this)},w.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},w.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},w.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},w.prototype.hashCode=function(){var t=17;return 37*(t=37*t+w.hashCode(this.x))+w.hashCode(this.y)},w.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},w.prototype.interfaces_=function(){return[x,E,e]},w.prototype.getClass=function(){return w},w.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=m.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},N.DimensionalComparator.get=function(){return C},N.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},N.NULL_ORDINATE.get=function(){return m.NaN},N.X.get=function(){return 0},N.Y.get=function(){return 1},N.Z.get=function(){return 2},Object.defineProperties(w,N);var C=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};C.prototype.compare=function(t,e){var n=t,i=e,r=C.compare(n.x,i.x);if(0!==r)return r;var o=C.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:C.compare(n.z,i.z)},C.prototype.interfaces_=function(){return[I]},C.prototype.getClass=function(){return C},C.compare=function(t,e){return t<e?-1:t>e?1:m.isNaN(t)?m.isNaN(e)?0:-1:m.isNaN(e)?1:0};var O=function(){};O.prototype.create=function(){},O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O};var P=function(){},S={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};P.prototype.interfaces_=function(){return[]},P.prototype.getClass=function(){return P},P.toLocationSymbol=function(t){switch(t){case P.EXTERIOR:return"e";case P.BOUNDARY:return"b";case P.INTERIOR:return"i";case P.NONE:return"-"}throw new v("Unknown location value: "+t)},S.INTERIOR.get=function(){return 0},S.BOUNDARY.get=function(){return 1},S.EXTERIOR.get=function(){return 2},S.NONE.get=function(){return-1},Object.defineProperties(P,S);var k=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},T=function(){},L={LOG_10:{configurable:!0}};T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T},T.log10=function(t){var e=Math.log(t);return m.isInfinite(e)||m.isNaN(e)?e:e/T.LOG_10},T.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},T.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},T.wrap=function(t,e){return t<0?e- -t%e:t%e},T.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=r;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},T.average=function(t,e){return(t+e)/2},L.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(T,L);var M=function(t){this.str=t};M.prototype.append=function(t){this.str+=t},M.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},M.prototype.toString=function(t){return this.str};var R=function(t){this.value=t};R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},R.isNaN=function(t){return Number.isNaN(t)};var A=function(){};A.isWhitespace=function(t){return t<=32&&t>=0||127===t},A.toUpperCase=function(t){return t.toUpperCase()};var D=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var i=arguments[0];t.call(this,t.parse(i))}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};D.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},D.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=D.magnitude(n._hi),r=D.TEN.pow(i);(n=n.divide(r)).gt(D.TEN)?(n=n.divide(D.TEN),i+=1):n.lt(D.ONE)&&(n=n.multiply(D.TEN),i-=1);for(var o=i+1,s=new M,a=D.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,s.append(h),n=n.subtract(D.valueOf(l)).multiply(D.TEN),c&&n.selfAdd(D.TEN);var f=!0,p=D.magnitude(n._hi);if(p<0&&Math.abs(p)>=a-u&&(f=!1),!f)break}return e[0]=i,s.toString()},D.prototype.sqr=function(){return this.multiply(this)},D.prototype.doubleValue=function(){return this._hi+this._lo},D.prototype.subtract=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},D.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},D.prototype.isZero=function(){return 0===this._hi&&0===this._lo},D.prototype.selfSubtract=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},D.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},D.prototype.min=function(t){return this.le(t)?this:t},D.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,l=null,c=null,h=null;return this._hi=h=(u=this._hi/n)+(l=(this._hi-(c=u*n)-(h=(r=(l=D.SPLIT*u)-(r=l-u))*(s=(h=D.SPLIT*n)-(s=h-n))-c+r*(a=n-s)+(o=u-r)*s+o*a)+this._lo-u*i)/n),this._lo=u-h+l,this}},D.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},D.prototype.divide=function(){if(arguments[0]instanceof D){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,s=null,a=null,u=null;return n=(o=this._hi/t._hi)-(e=(s=D.SPLIT*o)-(e=s-o)),u=e*(i=(u=D.SPLIT*t._hi)-(i=u-t._hi))-(a=o*t._hi)+e*(r=t._hi-i)+n*i+n*r,new D(u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi),o-u+s)}if("number"==typeof arguments[0]){var l=arguments[0];return m.isNaN(l)?D.createNaN():D.copy(this).selfDivide(l,0)}},D.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},D.prototype.pow=function(t){if(0===t)return D.valueOf(1);var e=new D(this),n=D.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},D.prototype.ceil=function(){if(this.isNaN())return D.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new D(t,e)},D.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},D.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},D.prototype.setValue=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},D.prototype.max=function(t){return this.ge(t)?this:t},D.prototype.sqrt=function(){if(this.isZero())return D.valueOf(0);if(this.isNegative())return D.NaN;var t=1/Math.sqrt(this._hi),e=D.valueOf(this._hi*t),n=this.subtract(e.sqr())._hi*(.5*t);return e.add(n)},D.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null;return this._hi=(n=(r=this._hi+e)+(s=e-(o=r-this._hi)+(this._hi-(r-o))+this._lo))+(i=s+(r-n)),this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var a=arguments[0],u=arguments[1],l=null,c=null,h=null,f=null,p=null,d=null,g=null;p=(f=this._hi+a)-(d=f-this._hi),h=(c=this._lo+u)-(g=c-this._lo);var y=(l=f+(d=(p=a-d+(this._hi-p))+c))+(d=(h=u-g+(this._lo-h))+(d+(f-l))),_=d+(l-y);return this._hi=y,this._lo=_,this}},D.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,l=null;r=(u=D.SPLIT*this._hi)-this._hi,r=u-r;var c=(u=this._hi*n)+(l=r*(s=(l=D.SPLIT*n)-(s=l-n))-u+r*(a=n-s)+(o=this._hi-r)*s+o*a+(this._hi*i+this._lo*n)),h=l+(r=u-c);return this._hi=c,this._lo=h,this}},D.prototype.selfSqr=function(){return this.selfMultiply(this)},D.prototype.floor=function(){if(this.isNaN())return D.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new D(t,e)},D.prototype.negate=function(){return this.isNaN()?this:new D(-this._hi,-this._lo)},D.prototype.clone=function(){},D.prototype.multiply=function(){if(arguments[0]instanceof D){var t=arguments[0];return t.isNaN()?D.createNaN():D.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return m.isNaN(e)?D.createNaN():D.copy(this).selfMultiply(e,0)}},D.prototype.isNaN=function(){return m.isNaN(this._hi)},D.prototype.intValue=function(){return Math.trunc(this._hi)},D.prototype.toString=function(){var t=D.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},D.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;return"."===n.charAt(0)?r="0"+n:i<0?r="0."+D.stringOfChar("0",-i)+n:-1===n.indexOf(".")&&(r=n+D.stringOfChar("0",i-n.length)+".0"),this.isNegative()?"-"+r:r},D.prototype.reciprocal=function(){var t,e,n,i,r=null,o=null,s=null,a=null;t=(n=1/this._hi)-(r=(s=D.SPLIT*n)-(r=s-n)),o=(a=D.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(i=n*this._hi)-(a=r*(o=a-o)-i+r*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new D(u,n-u+s)},D.prototype.toSciNotation=function(){if(this.isZero())return D.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=D.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},D.prototype.abs=function(){return this.isNaN()?D.NaN:this.isNegative()?this.negate():new D(this)},D.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},D.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},D.prototype.add=function(){if(arguments[0]instanceof D){var t=arguments[0];return D.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return D.copy(this).selfAdd(e)}},D.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof D){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},D.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},D.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},D.prototype.trunc=function(){return this.isNaN()?D.NaN:this.isPositive()?this.floor():this.ceil()},D.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},D.prototype.interfaces_=function(){return[e,x,E]},D.prototype.getClass=function(){return D},D.sqr=function(t){return D.valueOf(t).selfMultiply(t)},D.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return D.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new D(e)}},D.sqrt=function(t){return D.valueOf(t).sqrt()},D.parse=function(t){for(var e=0,n=t.length;A.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new D,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,A.isDigit(l)){var c=l-"0";o.selfMultiply(D.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=R.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-u;if(0===p)f=o;else if(p>0){var d=D.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=D.TEN.pow(-p);f=o.multiply(g)}return i?f.negate():f},D.createNaN=function(){return new D(m.NaN,m.NaN)},D.copy=function(t){return new D(t)},D.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},D.stringOfChar=function(t,e){for(var n=new M,i=0;i<e;i++)n.append(t);return n.toString()},F.PI.get=function(){return new D(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new D(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new D(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new D(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new D(m.NaN,m.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return D.valueOf(10)},F.ONE.get=function(){return D.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(D,F);var G=function(){},j={DP_SAFE_EPSILON:{configurable:!0}};G.prototype.interfaces_=function(){return[]},G.prototype.getClass=function(){return G},G.orientationIndex=function(t,e,n){var i=G.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=D.valueOf(e.x).selfAdd(-t.x),o=D.valueOf(e.y).selfAdd(-t.y),s=D.valueOf(n.x).selfAdd(-e.x),a=D.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},G.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},G.intersection=function(t,e,n,i){var r=D.valueOf(i.y).selfSubtract(n.y).selfMultiply(D.valueOf(e.x).selfSubtract(t.x)),o=D.valueOf(i.x).selfSubtract(n.x).selfMultiply(D.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=D.valueOf(i.x).selfSubtract(n.x).selfMultiply(D.valueOf(t.y).selfSubtract(n.y)),u=D.valueOf(i.y).selfSubtract(n.y).selfMultiply(D.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=D.valueOf(t.x).selfAdd(D.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=D.valueOf(e.x).selfSubtract(t.x).selfMultiply(D.valueOf(t.y).selfSubtract(n.y)),f=D.valueOf(e.y).selfSubtract(t.y).selfMultiply(D.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(s).doubleValue(),d=D.valueOf(n.y).selfAdd(D.valueOf(i.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new w(c,d)},G.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(o<=0)return G.signum(s);i=r+o}else{if(!(r<0))return G.signum(s);if(o>=0)return G.signum(s);i=-r-o}var a=G.DP_SAFE_EPSILON*i;return s>=a||-s>=a?G.signum(s):2},G.signum=function(t){return t>0?1:t<0?-1:0},j.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(G,j);var U=function(){},V={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};V.X.get=function(){return 0},V.Y.get=function(){return 1},V.Z.get=function(){return 2},V.M.get=function(){return 3},U.prototype.setOrdinate=function(t,e,n){},U.prototype.size=function(){},U.prototype.getOrdinate=function(t,e){},U.prototype.getCoordinate=function(){},U.prototype.getCoordinateCopy=function(t){},U.prototype.getDimension=function(){},U.prototype.getX=function(t){},U.prototype.clone=function(){},U.prototype.expandEnvelope=function(t){},U.prototype.copy=function(){},U.prototype.getY=function(t){},U.prototype.toCoordinateArray=function(){},U.prototype.interfaces_=function(){return[E]},U.prototype.getClass=function(){return U},Object.defineProperties(U,V);var B=function(){},z=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(B),q=function(){};q.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++},q.getProperty=function(t){return{"line.separator":"\n"}[t]};var Y=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof w&&arguments[1]instanceof w){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=h.y-f.y,y=f.x-h.x,_=h.x*f.y-f.x*h.y,v=p.y-d.y,m=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=y*b-m*_,this.y=v*_-g*b,this.w=g*m-v*y}};Y.prototype.getY=function(){var t=this.y/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new z;return t},Y.prototype.getX=function(){var t=this.x/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new z;return t},Y.prototype.getCoordinate=function(){var t=new w;return t.x=this.getX(),t.y=this.getY(),t},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-i.y,u=i.x-n.x,l=n.x*i.y-i.x*n.y,c=r*u-a*o,h=(o*l-u*s)/c,f=(a*s-r*l)/c;if(m.isNaN(h)||m.isInfinite(h)||m.isNaN(f)||m.isInfinite(f))throw new z;return new w(h,f)};var X=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof w){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},W={serialVersionUID:{configurable:!0}};X.prototype.getArea=function(){return this.getWidth()*this.getHeight()},X.prototype.equals=function(t){if(!(t instanceof X))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},X.prototype.intersection=function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new X:new X(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)},X.prototype.isNull=function(){return this._maxx<this._minx},X.prototype.getMaxX=function(){return this._maxx},X.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof X){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},X.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof w){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},X.prototype.getMinY=function(){return this._miny},X.prototype.getMinX=function(){return this._minx},X.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},X.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},X.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},X.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},X.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},X.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},X.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},X.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},X.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},X.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},X.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof w){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},X.prototype.centre=function(){return this.isNull()?null:new w((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},X.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},X.prototype.getMaxY=function(){return this._maxy},X.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},X.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+w.hashCode(this._minx))+w.hashCode(this._maxx))+w.hashCode(this._miny))+w.hashCode(this._maxy)},X.prototype.interfaces_=function(){return[x,e]},X.prototype.getClass=function(){return X},X.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(i.y,r.y),c=Math.max(i.y,r.y),l>u||c<a))}},W.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(X,W);var H={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Z=function(t){this.geometryFactory=t||new _e};Z.prototype.read=function(t){var e,n;t=t.replace(/[\n\r]/g," ");var i=H.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=H.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),J[n]&&(e=J[n].apply(this,[i[2]]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Z.prototype.write=function(t){return this.extractGeometry(t)},Z.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!K[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+K[e].apply(this,[t])+")"};var K={coordinate:function(t){return t.x+" "+t.y},point:function(t){return K.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+K.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(K.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(K.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+K.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+K.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+K.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+K.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},J={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(H.spaces);return this.geometryFactory.createPoint(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(H.trimParens,"$1"),i.push(J.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(H.spaces),i.push(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(H.spaces),i.push(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(H.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(H.trimParens,"$1"),i.push(J.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(H.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(H.trimParens,"$1"),n=J.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(H.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(H.trimParens,"$1"),i.push(J.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},Q=function(t){this.parser=new Z(t)};Q.prototype.write=function(t){return this.parser.write(t)},Q.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t;if(1===arguments.length)et.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new tt:new tt(t)},et.equals=function(){var t,e,n;if(2===arguments.length)et.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(n=arguments[2],!(e=arguments[1]).equals(t=arguments[0])))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new w,this._intPt[1]=new w,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},it={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new M;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return Q.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Q.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},it.DONT_INTERSECT.get=function(){return 0},it.DO_INTERSECT.get=function(){return 1},it.COLLINEAR.get=function(){return 2},it.NO_INTERSECTION.get=function(){return 0},it.POINT_INTERSECTION.get=function(){return 1},it.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,it);var rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new X(this._inputLines[0][0],this._inputLines[0][1]),n=new X(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,X.intersects(n,i,e)&&0===at.orientationIndex(n,i,e)&&0===at.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=Y.intersection(t,n,i,r)}catch(s){if(!(s instanceof z))throw s;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new w(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=G.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);q.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&q.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new w(t),o=new w(e),s=new w(n),a=new w(i),u=new w;this.normalizeToEnvCentre(r,o,s,a,u);var l=this.safeHCoordinateIntersection(r,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=X.intersects(e,n,i),s=X.intersects(e,n,r),a=X.intersects(i,r,e),u=X.intersects(i,r,n);return o&&s?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,p=((s>c?s:c)+(u<f?u:f))/2;r.x=((o>l?o:l)+(a<h?a:h))/2,r.y=p,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!X.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=at.orientationIndex(e,n,i),s=at.orientationIndex(e,n,r);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=at.orientationIndex(i,r,e),u=at.orientationIndex(i,r,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,i,r):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new w(i):0===s?this._intPt[0]=new w(r):0===a?this._intPt[0]=new w(e):0===u&&(this._intPt[0]=new w(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=at.distancePointLine(t,n,i),s=at.distancePointLine(e,n,i);return s<o&&(o=s,r=e),(s=at.distancePointLine(n,t,e))<o&&(o=s,r=n),(s=at.distancePointLine(i,t,e))<o&&(o=s,r=i),r},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){return ot.signOfDet2x2(e.x-t.x,e.y-t.y,n.x-e.x,n.y-e.y)},ot.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if((i-=(s=Math.floor(n/t))*e)<0)return-r;if(i>e)return r;if(t>(n-=s*t)+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if((e-=(s=Math.floor(t/n))*i)<0)return r;if(e>i)return-r;if(n>(t-=s*n)+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.y-this._p.y,o=e.y-this._p.y,s=ot.signOfDet2x2(t.x-this._p.x,r,e.x-this._p.x,o);if(0===s)return this._isPointOnSegment=!0,null;o<r&&(s=-s),s>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==P.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?P.BOUNDARY:this._crossingCount%2==1?P.INTERIOR:P.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof w&&k(arguments[1],U)){for(var t=arguments[0],e=arguments[1],n=new st(t),i=new w,r=new w,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof w&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new st(s),l=1;l<a.length;l++){var c=a[l],h=a[l-1];if(u.countSegment(c,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var at=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,n){return G.orientationIndex(t,e,n)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(k(arguments[0],U)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new w,l=new w,c=new w;s.getCoordinate(0,l),s.getCoordinate(1,c);var h=l.x;c.x-=h;for(var f=0,p=1;p<a-1;p++)u.y=l.y,l.x=c.x,l.y=c.y,s.getCoordinate(p+1,c),c.x-=h,f+=l.x*(u.y-c.y);return f/2}},at.distanceLineLine=function(t,e,n,i){if(t.equals(e))return at.distancePointLine(t,n,i);if(n.equals(i))return at.distancePointLine(i,t,e);var r=!1;if(X.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,a=((t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y))/o;(a<0||a>1||s<0||s>1)&&(r=!0)}}else r=!0;return r?T.min(at.distancePointLine(t,n,i),at.distancePointLine(e,n,i),at.distancePointLine(n,t,e),at.distancePointLine(i,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==P.EXTERIOR},at.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new w;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,u=i.y,l=a-r,c=u-o;n+=Math.sqrt(l*l+c*c),r=a,o=u}return n},at.isCCW=function(t){var e=t.length-1;if(e<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var s=i;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==i);var a=i;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==i);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=at.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)},at.computeOrientation=function(t,e,n){return at.orientationIndex(t,e,n)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new v("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=at.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},at.isOnLine=function(t,e){for(var n=new rt,i=1;i<e.length;i++)if(n.computeIntersection(t,e[i-1],e[i]),n.hasIntersection())return!0;return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return at.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return at.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,ut);var lt=function(){};lt.prototype.filter=function(t){},lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new X(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[E,x,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return ft},Object.defineProperties(ct,ht);var ft=function(){};ft.interfaces_=function(){return[lt]},ft.filter=function(t){t.geometryChangedAction()};var pt=function(){};pt.prototype.filter=function(t){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return yt},gt.EndPointBoundaryNodeRule.get=function(){return _t},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return mt},gt.MOD2_BOUNDARY_RULE.get=function(){return new yt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var _t=function(){};_t.prototype.isInBoundary=function(t){return t>0},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>1},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var mt=function(){};mt.prototype.isInBoundary=function(t){return 1===t},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var xt=function(){};xt.prototype.hasNext=function(){},xt.prototype.next=function(){},xt.prototype.remove=function(){};var Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(i.prototype=new Error).name="NoSuchElementException";var It=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new wt(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Et),wt=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new i;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xt),Nt=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=!1,r=e.iterator();r.hasNext();)this.add(r.next(),n),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof w&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<a.length;l++)this.add(a[l],u);else for(var c=a.length-1;c>=0;c--)this.add(a[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof w){var h=arguments[0],f=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(h>0&&this.get(h-1).equals2D(f))return null;if(h<p&&this.get(h).equals2D(f))return null}}t.prototype.add.call(this,h,f)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],_=arguments[3],v=1;y>_&&(v=-1);for(var m=y;m!==_;m+=v)this.add(d[m],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new w(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(It),Ct=function(){},Ot={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Ot.ForwardComparator.get=function(){return Pt},Ot.BidirectionalComparator.get=function(){return St},Ot.coordArrayType.get=function(){return new Array(0).fill(null)},Ct.prototype.interfaces_=function(){return[]},Ct.prototype.getClass=function(){return Ct},Ct.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Ct.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(Ct.indexOf(i,e)<0)return i}return null},Ct.scroll=function(t,e){var n=Ct.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);q.arraycopy(t,n,i,0,t.length-n),q.arraycopy(t,0,i,t.length-n,n),q.arraycopy(i,0,t,0,t.length)},Ct.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1;return!0}},Ct.intersection=function(t,e){for(var n=new Nt,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},Ct.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Ct.removeRepeatedPoints=function(t){return Ct.hasRepeatedPoints(t)?new Nt(t,!1).toCoordinateArray():t},Ct.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},Ct.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},Ct.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new w(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new w(i[r+u])},Ct.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0},Ct.envelope=function(t){for(var e=new X,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Ct.toCoordinateArray=function(t){return t.toArray(Ct.coordArrayType)},Ct.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Ct.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Ct.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t[e].compareTo(t[t.length-1-e]);if(0!==n)return n}return 1},Ct.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},Ct.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Ct.extract=function(t,e,n){e=T.clamp(e,0,t.length);var i=(n=T.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r},Object.defineProperties(Ct,Ot);var Pt=function(){};Pt.prototype.compare=function(t,e){return Ct.compare(t,e)},Pt.prototype.interfaces_=function(){return[I]},Pt.prototype.getClass=function(){return Pt};var St=function(){};St.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Ct.compare(n,i);return Ct.isEqualReversed(n,i)?0:r},St.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Ct.increasingDirection(n),o=Ct.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(i[a]);if(0!==l)return l;s+=r,a+=o}return 0},St.prototype.interfaces_=function(){return[I]},St.prototype.getClass=function(){return St};var kt=function(){};kt.prototype.get=function(){},kt.prototype.put=function(){},kt.prototype.size=function(){},kt.prototype.values=function(){},kt.prototype.entrySet=function(){};var Tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(kt);(r.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Lt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Mt(this)},e}(o),Mt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new i;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new r},e}(xt),Rt=0;(h.prototype=new Tt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===l(a(a(t)))){var e=c(a(a(t)));1===s(e)?(u(a(t),Rt),u(e,Rt),u(a(a(t)),1),t=a(a(t))):(t===c(a(t))&&(t=a(t),this.rotateLeft(t)),u(a(t),Rt),u(a(a(t)),1),this.rotateRight(a(a(t))))}else{var n=l(a(a(t)));1===s(n)?(u(a(t),Rt),u(n,Rt),u(a(a(t)),1),t=a(a(t))):(t===l(a(t))&&(t=a(t),this.rotateRight(t)),u(a(t),Rt),u(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=Rt},h.prototype.values=function(){var t=new It,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new Lt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var At=function(){};At.prototype.interfaces_=function(){return[]},At.prototype.getClass=function(){return At},f.prototype=new o,(p.prototype=new f).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},p.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},p.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},p.prototype.remove=function(t){throw new r},p.prototype.size=function(){return this.array_.length},p.prototype.isEmpty=function(){return 0===this.array_.length},p.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},p.prototype.iterator=function(){return new Dt(this)};var Dt=function(t){this.treeSet_=t,this.position_=0};Dt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new i;return this.treeSet_.array_[this.position_++]},Dt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Dt.prototype.remove=function(){throw new r};var Ft=function(){};Ft.sort=function(){var t,e,n,i=arguments[0];if(1===arguments.length)i.sort((function(t,e){return t.compareTo(e)}));else if(2===arguments.length)n=arguments[1],i.sort((function(t,e){return n.compare(t,e)}));else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var r=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<r.length;t++)i.push(r[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],e.sort((function(t,e){return n.compare(t,e)})),r=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<r.length;t++)i.push(r[t])},Ft.asList=function(t){for(var e=new It,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var Gt=function(){},jt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};jt.P.get=function(){return 0},jt.L.get=function(){return 1},jt.A.get=function(){return 2},jt.FALSE.get=function(){return-1},jt.TRUE.get=function(){return-2},jt.DONTCARE.get=function(){return-3},jt.SYM_FALSE.get=function(){return"F"},jt.SYM_TRUE.get=function(){return"T"},jt.SYM_DONTCARE.get=function(){return"*"},jt.SYM_P.get=function(){return"0"},jt.SYM_L.get=function(){return"1"},jt.SYM_A.get=function(){return"2"},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt},Gt.toDimensionSymbol=function(t){switch(t){case Gt.FALSE:return Gt.SYM_FALSE;case Gt.TRUE:return Gt.SYM_TRUE;case Gt.DONTCARE:return Gt.SYM_DONTCARE;case Gt.P:return Gt.SYM_P;case Gt.L:return Gt.SYM_L;case Gt.A:return Gt.SYM_A}throw new v("Unknown dimension value: "+t)},Gt.toDimensionValue=function(t){switch(A.toUpperCase(t)){case Gt.SYM_FALSE:return Gt.FALSE;case Gt.SYM_TRUE:return Gt.TRUE;case Gt.SYM_DONTCARE:return Gt.DONTCARE;case Gt.SYM_P:return Gt.P;case Gt.SYM_L:return Gt.L;case Gt.SYM_A:return Gt.A}throw new v("Unknown dimension symbol: "+t)},Object.defineProperties(Gt,jt);var Ut=function(){};Ut.prototype.filter=function(t){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var Vt=function(){};Vt.prototype.filter=function(t,e){},Vt.prototype.isDone=function(){},Vt.prototype.isGeometryChanged=function(){},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var Bt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new X,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ft.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Gt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Gt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createGeometryCollection(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new p(Ft.asList(this._geometries)),n=new p(Ft.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var l=this.getGeometryN(u),c=o.getGeometryN(u),h=l.compareToSameClass(c,r);if(0!==h)return h;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){if(k(arguments[0],pt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(k(arguments[0],Vt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(k(arguments[0],Ut)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(k(arguments[0],lt)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),zt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Gt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new qt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[At]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Bt),qt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};qt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},qt.prototype.getBoundary=function(){return this._geom instanceof Zt?this.boundaryLineString(this._geom):this._geom instanceof zt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},qt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},qt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},qt.prototype.computeBoundaryCoordinates=function(t){var e=new It;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Ct.toCoordinateArray(e)},qt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Yt,this._endpointMap.put(t,e)),e.count++},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new qt(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new qt(e,n).getBoundary()}};var Yt=function(){this.count=null};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var Xt=function(){},Wt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},Xt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",s=new function(){}(new function(){}(Xt.getStackTrace(i))),a=0;a<r;a++)try{o+=s.readLine()+Xt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Xt.split=function(t,e){for(var n=e.length,i=new It,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);i.add(s),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a},Xt.toString=function(){if(1===arguments.length){var t=arguments[0];return Xt.SIMPLE_ORDINATE_FORMAT.format(t)}},Xt.spaces=function(t){return Xt.chars(" ",t)},Wt.NEWLINE.get=function(){return q.getProperty("line.separator")},Wt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Xt,Wt);var Ht=function(){};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},Ht.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,U.X)===t.getOrdinate(e-1,U.X)&&t.getOrdinate(0,U.Y)===t.getOrdinate(e-1,U.Y)},Ht.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||m.isNaN(s)&&m.isNaN(a)))return!1}return!0},Ht.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Ht.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)Ht.copy(e,r-1,i,o,1);return i},Ht.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Ht.swap(t,i,e-i)},Ht.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Ht.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)Ht.copyCoord(t,e+o,n,i+o)},Ht.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new M;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(Xt.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},Ht.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Ht.createClosedRing(t,e,4):e.getOrdinate(0,U.X)===e.getOrdinate(n-1,U.X)&&e.getOrdinate(0,U.Y)===e.getOrdinate(n-1,U.Y)?e:Ht.createClosedRing(t,e,n+1)},Ht.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Ht.copy(e,0,i,0,r);for(var o=r;o<n;o++)Ht.copy(e,0,i,o,1);return i};var Zt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new X:this._points.expandEnvelope(new X)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Ht.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Gt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(k(arguments[0],pt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(k(arguments[0],Vt)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(k(arguments[0],Ut)||k(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new qt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[At]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Kt=function(){};Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var Jt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new X;var t=new X;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Gt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(k(arguments[0],pt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(k(arguments[0],Vt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(k(arguments[0],Ut)||k(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Qt=function(){};Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt};var $t=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new v("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e,r=this._shell,o=i._shell;if(!r.equalsExact(o,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(i._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Ft.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);q.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=Ct.minCoordinate(e.getCoordinates());Ct.scroll(i,r),q.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],at.isCCW(e.getCoordinates())===n&&Ct.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,s=this._shell,a=o._shell,u=s.compareToSameClass(a,r);if(0!==u)return u;for(var l=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;h<l&&h<c;){var f=this.getInteriorRingN(h),p=o.getInteriorRingN(h),d=f.compareToSameClass(p,r);if(0!==d)return d;h++}return h<l?1:h<c?-1:0}},e.prototype.apply=function(t){if(k(t,pt)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(k(t,Vt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(k(t,Ut))t.filter(this);else if(k(t,lt)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Gt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Bt),ee=function(t){function e(e,n){e instanceof w&&n instanceof _e&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Gt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Zt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createMultiPolygon(t)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new It,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Bt),ie=function(t){this._factory=t||null,this._isUserDataCopied=!1},re={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ie.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ie.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ie.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Bt?this.editGeometryCollection(t,e):t instanceof $t?this.editPolygon(t,e):t instanceof Jt||t instanceof Zt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ie.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new It,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===te?this._factory.createMultiPoint(i.toArray([])):n.getClass()===zt?this._factory.createMultiLineString(i.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},ie.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new It,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this._factory.createPolygon(i,r.toArray([]))},ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie},ie.GeometryEditorOperation=function(){},re.NoOpGeometryOperation.get=function(){return oe},re.CoordinateOperation.get=function(){return se},re.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(ie,re);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var se=function(){};se.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Zt?e.createLineString(n):t instanceof Jt?n.length>0?e.createPoint(n[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=function(){};ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Zt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Jt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new w}else if(k(arguments[0],U)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new w}},le={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case U.X:this._coordinates[t].x=n;break;case U.Y:this._coordinates[t].y=n;break;case U.Z:this._coordinates[t].z=n;break;default:throw new v("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case U.X:return this._coordinates[t].x;case U.Y:return this._coordinates[t].y;case U.Z:return this._coordinates[t].z}return m.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new w(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new M(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[U,e]},ue.prototype.getClass=function(){return ue},le.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,le);var ce=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ue(t)}if(k(arguments[0],U)){var e=arguments[0];return new ue(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new ue(n):new ue(n,i)}},ce.prototype.interfaces_=function(){return[O,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ce},Object.defineProperties(ce,he);var fe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new It,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Lt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(kt),pe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pe.prototype.equals=function(t){return t instanceof pe&&this._modelType===t._modelType&&this._scale===t._scale},pe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new R(n).compareTo(new R(i))},pe.prototype.getScale=function(){return this._scale},pe.prototype.isFloating=function(){return this._modelType===pe.FLOATING||this._modelType===pe.FLOATING_SINGLE},pe.prototype.getType=function(){return this._modelType},pe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pe.FLOATING?t="Floating":this._modelType===pe.FLOATING_SINGLE?t="Floating-Single":this._modelType===pe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return m.isNaN(t)||this._modelType===pe.FLOATING_SINGLE?t:this._modelType===pe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof w){var e=arguments[0];if(this._modelType===pe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pe.FLOATING?t=16:this._modelType===pe.FLOATING_SINGLE?t=6:this._modelType===pe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pe.prototype.setScale=function(t){this._scale=Math.abs(t)},pe.prototype.interfaces_=function(){return[e,x]},pe.prototype.getClass=function(){return pe},pe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pe,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ye={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ye.serialVersionUID.get=function(){return-552860263173159e4},ye.nameToTypeMap.get=function(){return new fe},Object.defineProperties(ge,ye),pe.Type=ge,pe.FIXED=new ge("FIXED"),pe.FLOATING=new ge("FLOATING"),pe.FLOATING_SINGLE=new ge("FLOATING SINGLE");var _e=function t(){this._precisionModel=new pe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?k(arguments[0],O)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ve={serialVersionUID:{configurable:!0}};_e.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new w(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new w(t.getMinX(),t.getMinY()),new w(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new w(t.getMinX(),t.getMinY()),new w(t.getMinX(),t.getMaxY()),new w(t.getMaxX(),t.getMaxY()),new w(t.getMaxX(),t.getMinY()),new w(t.getMinX(),t.getMinY())]),null)},_e.prototype.createLineString=function(t){return t?t instanceof Array?new Zt(this.getCoordinateSequenceFactory().create(t),this):k(t,U)?new Zt(t,this):void 0:new Zt(this.getCoordinateSequenceFactory().create([]),this)},_e.prototype.createMultiLineString=function(){if(0===arguments.length)return new zt(null,this);if(1===arguments.length){var t=arguments[0];return new zt(t,this)}},_e.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(_e.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof $t)return this.createMultiPolygon(_e.toPolygonArray(t));if(a instanceof Zt)return this.createMultiLineString(_e.toLineStringArray(t));if(a instanceof Jt)return this.createMultiPoint(_e.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},_e.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},_e.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(k(arguments[0],U)){var e=arguments[0];return new Jt(e,this)}}},_e.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},_e.prototype.createPolygon=function(){if(0===arguments.length)return new $t(null,null,this);if(1===arguments.length){if(k(arguments[0],U)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new $t(i,r,this)}},_e.prototype.getSRID=function(){return this._SRID},_e.prototype.createGeometryCollection=function(){if(0===arguments.length)return new Bt(null,this);if(1===arguments.length){var t=arguments[0];return new Bt(t,this)}},_e.prototype.createGeometry=function(t){return new ie(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},_e.prototype.getPrecisionModel=function(){return this._precisionModel},_e.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(k(arguments[0],U)){var e=arguments[0];return new ee(e,this)}}},_e.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ne(null,this);if(1===arguments.length){var t=arguments[0];return new ne(t,this)}},_e.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new te(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(k(arguments[0],U)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Ht.copy(n,r,o,0,1),i[r]=this.createPoint(o)}return this.createMultiPoint(i)}}},_e.prototype.interfaces_=function(){return[e]},_e.prototype.getClass=function(){return _e},_e.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},_e.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ve.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(_e,ve);var me=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new _e};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!xe[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==me.indexOf(n)?xe[n].apply(this,[e.coordinates]):xe[n].apply(this,"GeometryCollection"===n?[e.geometries]:[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!Ee[e])throw new Error("Geometry is not supported");return Ee[e].apply(this,[t])};var xe={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){if(!xe[t.geometry.type])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xe.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new w(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new w(t[0],t[1]),new w(t[2],t[1]),new w(t[2],t[3]),new w(t[0],t[3]),new w(t[0],t[1])])},Point:function(t){var e=new w(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xe.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xe.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=xe.coordinates.apply(this,[t[r]]),s=this.geometryFactory.createLinearRing(o);i.push(s)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.Polygon.apply(this,[t[n]]));return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.read(t[n]));return this.geometryFactory.createGeometryCollection(e)}},Ee={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ee.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Ee.Point.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i)e.push(Ee.coordinate.apply(this,[n[i]]));return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Ee.LineString.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ee.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=Ee.LineString.apply(this,[t._holes[i]]);e.push(r.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Ee.Polygon.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(Ee[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},Ie=function(t){this.geometryFactory=t||new _e,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};Ie.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pe.FIXED&&this.reducePrecision(e),e},Ie.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var we=function(){this.parser=new be(this.geometryFactory)};we.prototype.write=function(t){return this.parser.write(t)};var Ne=function(){},Ce={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne},Ne.opposite=function(t){return t===Ne.LEFT?Ne.RIGHT:t===Ne.RIGHT?Ne.LEFT:t},Ce.ON.get=function(){return 0},Ce.LEFT.get=function(){return 1},Ce.RIGHT.get=function(){return 2},Object.defineProperties(Ne,Ce),(g.prototype=new Error).name="EmptyStackException",(y.prototype=new Et).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Oe=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Oe.prototype.getCoordinate=function(){return this._minCoord},Oe.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Oe.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=at.computeOrientation(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===at.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===at.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Oe.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Ne.LEFT;return n[e].y<n[e+1].y&&(i=Ne.RIGHT),i},Oe.prototype.getEdge=function(){return this._orientedDe},Oe.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Oe.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Oe.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ne.LEFT&&(this._orientedDe=this._minDe.getSym())},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe};var Pe=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new w(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($),Se=function(){this.array_=[]};Se.prototype.addLast=function(t){this.array_.push(t)},Se.prototype.removeFirst=function(){return this.array_.shift()},Se.prototype.isEmpty=function(){return 0===this.array_.length};var ke=function(){this._finder=null,this._dirEdgeList=new It,this._nodes=new It,this._rightMostCoord=null,this._env=null,this._finder=new Oe};ke.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},ke.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},ke.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new Pe("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},ke.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ne.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},ke.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},ke.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ne.RIGHT)>=1&&e.getDepth(Ne.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},ke.prototype.computeDepths=function(t){var e=new Lt,n=new Se,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},ke.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},ke.prototype.getEnvelope=function(){if(null===this._env){for(var t=new X,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},ke.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},ke.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ne.LEFT,t.getDepth(Ne.RIGHT)),e.setDepth(Ne.RIGHT,t.getDepth(Ne.LEFT))},ke.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},ke.prototype.getNodes=function(){return this._nodes},ke.prototype.getDirectedEdges=function(){return this._dirEdgeList},ke.prototype.interfaces_=function(){return[x]},ke.prototype.getClass=function(){return ke};var Te=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ne.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Ne.ON]=o,this.location[Ne.LEFT]=s,this.location[Ne.RIGHT]=a}};Te.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Te.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==P.NONE)return!1;return!0},Te.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===P.NONE&&(this.location[e]=t)},Te.prototype.isLine=function(){return 1===this.location.length},Te.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ne.ON]=this.location[Ne.ON],e[Ne.LEFT]=P.NONE,e[Ne.RIGHT]=P.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===P.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Te.prototype.getLocations=function(){return this.location},Te.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ne.LEFT];this.location[Ne.LEFT]=this.location[Ne.RIGHT],this.location[Ne.RIGHT]=t},Te.prototype.toString=function(){var t=new M;return this.location.length>1&&t.append(P.toLocationSymbol(this.location[Ne.LEFT])),t.append(P.toLocationSymbol(this.location[Ne.ON])),this.location.length>1&&t.append(P.toLocationSymbol(this.location[Ne.RIGHT])),t.toString()},Te.prototype.setLocations=function(t,e,n){this.location[Ne.ON]=t,this.location[Ne.LEFT]=e,this.location[Ne.RIGHT]=n},Te.prototype.get=function(t){return t<this.location.length?this.location[t]:P.NONE},Te.prototype.isArea=function(){return this.location.length>1},Te.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===P.NONE)return!0;return!1},Te.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ne.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Te.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(P.NONE)},Te.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Te.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te};var Le=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Te(e),this.elt[1]=new Te(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Te(n.elt[0]),this.elt[1]=new Te(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Te(P.NONE),this.elt[1]=new Te(P.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Te(o,s,a),this.elt[1]=new Te(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Te(P.NONE,P.NONE,P.NONE),this.elt[1]=new Te(P.NONE,P.NONE,P.NONE),this.elt[u].setLocations(l,c,h)}};Le.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Le.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Le.prototype.isNull=function(t){return this.elt[t].isNull()},Le.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Le.prototype.isLine=function(t){return this.elt[t].isLine()},Le.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Te(t.elt[e]):this.elt[e].merge(t.elt[e])},Le.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Le.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ne.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Le.prototype.toString=function(){var t=new M;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Le.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Le.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Le.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ne.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},Le.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Le.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Le.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Te(this.elt[t].location[0]))},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le},Le.toLineLabel=function(t){for(var e=new Le(P.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Me=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new It,this._pts=new It,this._label=new Le(P.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new It,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Me.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},Me.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Me.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Pe("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Pe("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();et.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Me.prototype.getLinearRing=function(){return this._ring},Me.prototype.getCoordinate=function(t){return this._pts.get(t)},Me.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Me.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;n&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}},Me.prototype.isHole=function(){return this._isHole},Me.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Me.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!at.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Me.prototype.addHole=function(t){this._holes.add(t)},Me.prototype.isShell=function(){return null===this._shell},Me.prototype.getLabel=function(){return this._label},Me.prototype.getEdges=function(){return this._edges},Me.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Me.prototype.getShell=function(){return this._shell},Me.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,Ne.RIGHT);if(i===P.NONE)return null;if(this._label.getLocation(n)===P.NONE)return this._label.setLocation(n,i),null}},Me.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Me.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me};var Re=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Me),Ae=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildMinimalRings=function(){var t=new It,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Re(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Me),De=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};De.prototype.setVisited=function(t){this._isVisited=t},De.prototype.setInResult=function(t){this._isInResult=t},De.prototype.isCovered=function(){return this._isCovered},De.prototype.isCoveredSet=function(){return this._isCoveredSet},De.prototype.setLabel=function(t){this._label=t},De.prototype.getLabel=function(){return this._label},De.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},De.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},De.prototype.isInResult=function(){return this._isInResult},De.prototype.isVisited=function(){return this._isVisited},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Fe=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Le(0,P.NONE)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=P.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==P.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Le(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Le)for(var n=arguments[0],i=0;i<2;i++){var r=this.computeMergedLocation(n,i);this._label.getLocation(i)===P.NONE&&this._label.setLocation(i,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=P.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case P.BOUNDARY:n=P.INTERIOR;break;case P.INTERIOR:default:n=P.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),Ge=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Ge.prototype.find=function(t){return this.nodeMap.get(t)},Ge.prototype.addNode=function(){if(arguments[0]instanceof w){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Fe){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},Ge.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ge.prototype.iterator=function(){return this.nodeMap.values().iterator()},Ge.prototype.values=function(){return this.nodeMap.values()},Ge.prototype.getBoundaryNodes=function(t){for(var e=new It,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===P.BOUNDARY&&e.add(i)}return e},Ge.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge};var je=function(){},Ue={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je},je.isNorthern=function(t){return t===je.NE||t===je.NW},je.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},je.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},je.isInHalfPlane=function(t,e){return e===je.SE?t===je.SE||t===je.SW:t===e||t===e+1},je.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?je.NE:je.SE:e>=0?je.NW:je.SW}if(arguments[0]instanceof w&&arguments[1]instanceof w){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?je.NE:je.SE:i.y>=n.y?je.NW:je.SW}},Ue.NE.get=function(){return 0},Ue.NW.get=function(){return 1},Ue.SW.get=function(){return 2},Ue.SE.get=function(){return 3},Object.defineProperties(je,Ue);var Ve=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._edge=e,this.init(n,i),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=r,this.init(o,s),this._label=a}};Ve.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},Ve.prototype.getDy=function(){return this._dy},Ve.prototype.getCoordinate=function(){return this._p0},Ve.prototype.setNode=function(t){this._node=t},Ve.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ve.prototype.compareTo=function(t){return this.compareDirection(t)},Ve.prototype.getDirectedCoordinate=function(){return this._p1},Ve.prototype.getDx=function(){return this._dx},Ve.prototype.getLabel=function(){return this._label},Ve.prototype.getEdge=function(){return this._edge},Ve.prototype.getQuadrant=function(){return this._quadrant},Ve.prototype.getNode=function(){return this._node},Ve.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ve.prototype.computeLabel=function(t){},Ve.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=je.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ve.prototype.interfaces_=function(){return[x]},Ve.prototype.getClass=function(){return Ve};var Be=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Le(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Pe("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ne.LEFT)===P.INTERIOR&&this._label.getLocation(e,Ne.RIGHT)===P.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ne.LEFT]+"/"+this._depth[Ne.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,P.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,P.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Ne.LEFT&&(i=-1);var r=Ne.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===P.EXTERIOR&&e===P.INTERIOR?1:t===P.INTERIOR&&e===P.EXTERIOR?-1:0},e}(Ve),ze=function(){};ze.prototype.createNode=function(t){return new Fe(t,null)},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze};var qe=function(){if(this._edges=new It,this._nodes=null,this._edgeEndList=new It,0===arguments.length)this._nodes=new Ge(new ze);else if(1===arguments.length){var t=arguments[0];this._nodes=new Ge(t)}};qe.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},qe.prototype.find=function(t){return this._nodes.find(t)},qe.prototype.addNode=function(){if(arguments[0]instanceof Fe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof w){var e=arguments[0];return this._nodes.addNode(e)}},qe.prototype.getNodeIterator=function(){return this._nodes.iterator()},qe.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},qe.prototype.debugPrintln=function(t){q.out.println(t)},qe.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===P.BOUNDARY},qe.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},qe.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&at.computeOrientation(t,e,i)===at.COLLINEAR&&je.quadrant(t,e)===je.quadrant(n,i)},qe.prototype.getEdgeEnds=function(){return this._edgeEndList},qe.prototype.debugPrint=function(t){q.out.print(t)},qe.prototype.getEdgeIterator=function(){return this._edges.iterator()},qe.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},qe.prototype.insertEdge=function(t){this._edges.add(t)},qe.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},qe.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new Be(n,!0),r=new Be(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},qe.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},qe.prototype.getNodes=function(){return this._nodes.values()},qe.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe},qe.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ye=function(){this._geometryFactory=null,this._shellList=new It;var t=arguments[0];this._geometryFactory=t};Ye.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},Ye.prototype.computePolygons=function(t){for(var e=new It,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},Ye.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new Pe("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},Ye.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new It,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},Ye.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ye.prototype.buildMaximalEdgeRings=function(t){for(var e=new It,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Ae(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},Ye.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},Ye.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ye.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&at.isPointInRing(r,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},Ye.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ye.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];qe.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new It,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Xe=function(){};Xe.prototype.getBounds=function(){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var We=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};We.prototype.getItem=function(){return this._item},We.prototype.getBounds=function(){return this._bounds},We.prototype.interfaces_=function(){return[Xe,e]},We.prototype.getClass=function(){return We};var He=function(){this._size=null,this._items=null,this._size=0,this._items=new It,this._items.add(null)};He.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},He.prototype.size=function(){return this._size},He.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},He.prototype.clear=function(){this._size=0,this._items.clear()},He.prototype.isEmpty=function(){return 0===this._size},He.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Ze=function(){};Ze.prototype.visitItem=function(t){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Ke=function(){};Ke.prototype.insert=function(t,e){},Ke.prototype.remove=function(t,e){},Ke.prototype.query=function(){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var Je=function(){if(this._childBoundables=new It,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Qe={serialVersionUID:{configurable:!0}};Je.prototype.getLevel=function(){return this._level},Je.prototype.size=function(){return this._childBoundables.size()},Je.prototype.getChildBoundables=function(){return this._childBoundables},Je.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Je.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Je.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Je.prototype.interfaces_=function(){return[Xe,e]},Je.prototype.getClass=function(){return Je},Qe.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Je,Qe);var $e=function(){};$e.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$e.min=function(t){return $e.sort(t),t.get(0)},$e.sort=function(t,e){var n=t.toArray();e?Ft.sort(n,e):Ft.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},$e.singletonList=function(t){var e=new It;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),i=tn.isComposite(this._boundable2);if(n&&i)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new v("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},tn.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),s=new tn(o,e,this._itemDistance);s.getDistance()<i&&n.add(s)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[x]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Je};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new It,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Je?t+=this.size(n):n instanceof We&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof We&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new It:t}if(1===arguments.length){for(var e=arguments[0],n=new It,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Je){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof We?n.add(r.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new We(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new It;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(et.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Je?this.boundablesAtLevel(n,s,r):(et.isTrue(s instanceof We),-1===n&&r.add(s))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new It;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(k(arguments[2],Ze)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var r=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof Je?this.query(r,l,s):l instanceof We?s.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(k(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var c=arguments[0],h=arguments[1],f=arguments[2],p=h.getChildBoundables(),d=0;d<p.size();d++){var g=p.get(d);this.getIntersectsOp().intersects(g.getBounds(),c)&&(g instanceof Je?this.query(c,g,f):g instanceof We?f.add(g.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Je&&(o=this.remove(n,u,r))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Je){var i=this.depth(n);i>t&&(t=i)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new It;n.add(this.createNode(e));var i=new It(t);$e.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var sn=function(t){function n(e){t.call(this,e=e||n.DEFAULT_NODE_CAPACITY)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new It,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},n.prototype.createNode=function(t){return new an(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new It;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(k(arguments[2],Ze)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var r=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,r,o,s)}else if(k(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new It(t);$e.sort(r,n.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(k(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var i=arguments[0];return this.nearestNeighbour(i,m.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&k(arguments[1],on)){var r=arguments[0],o=arguments[1],s=new tn(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=null,c=new He;for(c.add(a);!c.isEmpty()&&u>0;){var h=c.poll(),f=h.getDistance();if(f>=u)break;h.isLeaves()?(u=f,l=h):h.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[0],d=arguments[1],g=arguments[2],y=new We(p,d),_=new tn(this.getRoot(),y,g);return this.nearestNeighbour(_)[0]}},n.prototype.interfaces_=function(){return[Ke,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},i.STRtreeNode.get=function(){return an},i.serialVersionUID.get=function(){return 0x39920f7d5f261e0},i.xComparator.get=function(){return{interfaces_:function(){return[I]},compare:function(e,i){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(i.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[I]},compare:function(e,i){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(i.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,i),n}(en),an=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new X(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Je),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:t>e?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=un.relativeSign(e.x,n.x),r=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(i,r);case 1:return un.compareValue(r,i);case 2:return un.compareValue(r,-i);case 3:return un.compareValue(-i,r);case 4:return un.compareValue(-i,-r);case 5:return un.compareValue(-r,-i);case 6:return un.compareValue(-r,i);case 7:return un.compareValue(i,-r)}return et.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ln=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new w(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};ln.prototype.getCoordinate=function(){return this.coord},ln.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ln.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},ln.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ln.prototype.isInterior=function(){return this._isInterior},ln.prototype.interfaces_=function(){return[x]},ln.prototype.getClass=function(){return ln};var cn=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new Nt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new It;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new R(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new w(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new w(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new R(e[0])),i=r}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new w(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return r&&(o[s]=new w(e.coord)),new dn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new ln(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(et.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new $("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new $("bad split edge end point at "+r)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof w&&arguments[1]instanceof w){var r=arguments[0],o=arguments[1],s=o.x-r.x,a=o.y-r.y;if(0===s&&0===a)throw new v("Cannot compute the octant for two identical points "+r);return hn.octant(s,a)}};var fn=function(){};fn.prototype.getCoordinates=function(){},fn.prototype.size=function(){},fn.prototype.getCoordinate=function(t){},fn.prototype.isClosed=function(){},fn.prototype.setData=function(t){},fn.prototype.getData=function(){},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn};var pn=function(){};pn.prototype.addIntersection=function(t,e){},pn.prototype.interfaces_=function(){return[fn]},pn.prototype.getClass=function(){return pn};var dn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[3],o=new w(n.getIntersection(r));this.addIntersection(o,i)}},dn.prototype.toString=function(){return Q.toLineString(new ue(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;return i<this._pts.length&&t.equals2D(this._pts[i])&&(n=i),this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},dn.prototype.interfaces_=function(){return[pn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new It;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(i)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new w,this.p1=new w;else if(1===arguments.length){var t=arguments[0];this.p0=new w(t.p0),this.p1=new w(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new w(e,n),this.p1=new w(i,r)}},yn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),n=at.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof w){var i=arguments[0];return at.orientationIndex(this.p0,this.p1,i)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new rt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof w){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new w(t);var e=this.projectionFactor(t),n=new w;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var s=this.project(i.p0);r<0&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(i.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new gn(s,a)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?m.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=m.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(r=u.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=u),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return Y.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof z))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*r/s,u=e*o/s}return new w(n-u,i+a)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||m.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof w){var e=arguments[0];return at.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new w;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=m.doubleToLongBits(this.p0.x);t^=31*m.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=m.doubleToLongBits(this.p1.x);return n^=31*m.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[x,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new w((t.x+e.x)/2,(t.y+e.y)/2)},yn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,yn);var _n=function(){this.tempEnv1=new X,this.tempEnv2=new X,this._overlapSeg1=new gn,this._overlapSeg2=new gn};_n.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};vn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vn.prototype.computeSelect=function(t,e,n,i){if(i.tempEnv1.init(this._pts[e],this._pts[n]),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var r=Math.trunc((e+n)/2);e<r&&this.computeSelect(t,e,r,i),r<n&&this.computeSelect(t,r,n,i)},vn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vn.prototype.setId=function(t){this._id=t},vn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vn.prototype.getEnvelope=function(){return null===this._env&&(this._env=new X(this._pts[this._start],this._pts[this._end])),this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var s=this._pts[t],a=this._pts[e],u=n._pts[i],l=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);t<c&&(i<h&&this.computeOverlapsInternal(t,c,n,i,h,o),h<r&&this.computeOverlapsInternal(t,c,n,h,r,o)),c<e&&(i<h&&this.computeOverlapsInternal(c,e,n,i,h,o),h<r&&this.computeOverlapsInternal(c,e,n,h,r,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var mn=function(){};mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn},mn.getChainStartIndices=function(t){var e=0,n=new It;n.add(new R(e));do{var i=mn.findChainEnd(t,e);n.add(new R(i)),e=i}while(e<t.length-1);return mn.toIntArray(n)},mn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=je.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||je.quadrant(t[r-1],t[r])===i);)r++;return r-1},mn.getChains=function(){if(1===arguments.length){var t=arguments[0];return mn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new It,r=mn.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new vn(e,r[o],r[o+1],n);i.add(s)}return i}},mn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var xn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xn.prototype.setSegmentIntersector=function(t){this._segInt=t},xn.prototype.interfaces_=function(){return[bn]},xn.prototype.getClass=function(){return xn};var En=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new It,this._index=new sn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=mn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new In(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return In},Object.defineProperties(e,n),e}(xn),In=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],o=e.getContext(),s=i.getContext();this._si.processIntersections(o,n,s,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_n),wn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Nn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};wn.prototype.getEndCapStyle=function(){return this._endCapStyle},wn.prototype.isSingleSided=function(){return this._isSingleSided},wn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=wn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=wn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==wn.JOIN_ROUND&&(this._quadrantSegments=wn.DEFAULT_QUADRANT_SEGMENTS)},wn.prototype.getJoinStyle=function(){return this._joinStyle},wn.prototype.setJoinStyle=function(t){this._joinStyle=t},wn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},wn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},wn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},wn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},wn.prototype.getMitreLimit=function(){return this._mitreLimit},wn.prototype.setMitreLimit=function(t){this._mitreLimit=t},wn.prototype.setSingleSided=function(t){this._isSingleSided=t},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn},wn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Nn.CAP_ROUND.get=function(){return 1},Nn.CAP_FLAT.get=function(){return 2},Nn.CAP_SQUARE.get=function(){return 3},Nn.JOIN_ROUND.get=function(){return 1},Nn.JOIN_MITRE.get=function(){return 2},Nn.JOIN_BEVEL.get=function(){return 3},Nn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Nn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Nn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(wn,Nn);var Cn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},On={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Cn.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)},Cn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var r=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Cn.DELETE,r=!0,i=!0),e=this.findNextNonDeletedIndex(t=r?n:e),n=this.findNextNonDeletedIndex(e)}return i},Cn.prototype.isShallowConcavity=function(t,e,n,i){return at.computeOrientation(t,e,n)===this._angleOrientation&&at.distancePointLine(e,t,n)<i},Cn.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/Cn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<i;s+=o)if(!this.isShallow(t,e,this._inputLine[s],r))return!1;return!0},Cn.prototype.isConcave=function(t,e,n){return at.computeOrientation(t,e,n)===this._angleOrientation},Cn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Cn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Cn.DELETE;)e++;return e},Cn.prototype.isShallow=function(t,e,n,i){return at.distancePointLine(e,t,n)<i},Cn.prototype.collapseLine=function(){for(var t=new Nt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Cn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.simplify=function(t,e){return new Cn(t).simplify(e)},On.INIT.get=function(){return 0},On.DELETE.get=function(){return 1},On.KEEP.get=function(){return 1},On.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Cn,On);var Pn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new It},Sn={COORDINATE_ARRAY_TYPE:{configurable:!0}};Pn.prototype.getCoordinates=function(){return this._ptList.toArray(Pn.COORDINATE_ARRAY_TYPE)},Pn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Pn.prototype.addPt=function(t){var e=new w(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Pn.prototype.revere=function(){},Pn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},Pn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Pn.prototype.toString=function(){return(new _e).createLineString(this.getCoordinates()).toString()},Pn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new w(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Pn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Sn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Pn,Sn);var kn=function(){},Tn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},kn.toDegrees=function(t){return 180*t/Math.PI},kn.normalize=function(t){for(;t>Math.PI;)t-=kn.PI_TIMES_2;for(;t<=-Math.PI;)t+=kn.PI_TIMES_2;return t},kn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},kn.isAcute=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)>0},kn.isObtuse=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)<0},kn.interiorAngle=function(t,e,n){var i=kn.angle(e,t),r=kn.angle(e,n);return Math.abs(r-i)},kn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=kn.PI_TIMES_2;t>=kn.PI_TIMES_2&&(t=0)}else{for(;t>=kn.PI_TIMES_2;)t-=kn.PI_TIMES_2;t<0&&(t=0)}return t},kn.angleBetween=function(t,e,n){var i=kn.angle(e,t),r=kn.angle(e,n);return kn.diff(i,r)},kn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},kn.toRadians=function(t){return t*Math.PI/180},kn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?kn.COUNTERCLOCKWISE:n<0?kn.CLOCKWISE:kn.NONE},kn.angleBetweenOriented=function(t,e,n){var i=kn.angle(e,t),r=kn.angle(e,n)-i;return r<=-Math.PI?r+kn.PI_TIMES_2:r>Math.PI?r-kn.PI_TIMES_2:r},Tn.PI_TIMES_2.get=function(){return 2*Math.PI},Tn.PI_OVER_2.get=function(){return Math.PI/2},Tn.PI_OVER_4.get=function(){return Math.PI/4},Tn.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},Tn.CLOCKWISE.get=function(){return at.CLOCKWISE},Tn.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(kn,Tn);var Ln=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new rt,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===wn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},Mn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ln.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=at.computeOrientation(this._s0,this._s1,this._s2),i=n===at.CLOCKWISE&&this._side===Ne.LEFT||n===at.COUNTERCLOCKWISE&&this._side===Ne.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Ln.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),i=new gn;this.computeOffsetSegment(n,Ne.LEFT,this._distance,i);var r=new gn;this.computeOffsetSegment(n,Ne.RIGHT,this._distance,r);var o=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case wn.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,o+Math.PI/2,o-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case wn.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case wn.CAP_SQUARE:var s=new w;s.x=Math.abs(this._distance)*Math.cos(o),s.y=Math.abs(this._distance)*Math.sin(o);var a=new w(i.p1.x+s.x,i.p1.y+s.y),u=new w(r.p1.x+s.x,r.p1.y+s.y);this._segList.addPt(a),this._segList.addPt(u)}},Ln.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ln.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=Y.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof z))throw t;o=new w(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},Ln.prototype.addFilletCorner=function(t,e,n,i,r){var o=Math.atan2(e.y-t.y,e.x-t.x),s=Math.atan2(n.y-t.y,n.x-t.x);i===at.CLOCKWISE?o<=s&&(o+=2*Math.PI):o>=s&&(o-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,o,s,i,r),this._segList.addPt(n)},Ln.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ln.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===wn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===wn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Ln.prototype.createSquare=function(t){this._segList.addPt(new w(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new w(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new w(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new w(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Ln.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Ln.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ln.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ln.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Ln.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=kn.angle(r,this._seg0.p0),s=kn.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=kn.normalize(o+s),u=kn.normalize(a+Math.PI),l=i*n,c=n-l*Math.abs(Math.sin(s)),h=r.x+l*Math.cos(u),f=r.y+l*Math.sin(u),p=new w(h,f),d=new gn(r,p),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===Ne.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Ln.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===Ne.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=r*n*o/a,l=r*n*s/a;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u},Ln.prototype.addFilletArc=function(t,e,n,i,r){var o=i===at.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new w;l<s;){var h=e+o*l;c.x=t.x+r*Math.cos(h),c.y=t.y+r*Math.sin(h),this._segList.addPt(c),l+=u}},Ln.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ln.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new w((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new w((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Ln.prototype.createCircle=function(t){var e=new w(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ln.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Ln.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Pn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Ln.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ln.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===wn.JOIN_BEVEL||this._bufParams.getJoinStyle()===wn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},Ln.prototype.closeRing=function(){this._segList.closeRing()},Ln.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Mn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Mn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Mn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Mn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ln,Mn);var Rn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Rn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&Ct.reverse(o),o},Rn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=Cn.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ne.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=Cn.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],Ne.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},Rn.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Ne.RIGHT&&(i=-i);var r=Cn.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++)n.addNextSegment(r[s],1!==s);n.closeRing()},Rn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=Cn.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Ne.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=Cn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Ne.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Rn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case wn.CAP_ROUND:e.createCircle(t);break;case wn.CAP_SQUARE:e.createSquare(t)}},Rn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],i):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,i):this.computeLineBufferCurve(t,i),i.getCoordinates()},Rn.prototype.getBufferParameters=function(){return this._bufParams},Rn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Rn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Rn.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},Rn.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=Cn.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ne.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=Cn.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],Ne.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},Rn.prototype.getSegGen=function(t){return new Ln(this._precisionModel,this._bufParams,t)},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Rn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new w(t[n]);return e};var An=function(){this._subgraphs=null,this._seg=new gn,this._cga=new at;var t=arguments[0];this._subgraphs=t},Dn={DepthSegment:{configurable:!0}};An.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new It,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(k(arguments[2],Et)&&arguments[0]instanceof w&&arguments[1]instanceof Be){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var c=s.getDepth(Ne.LEFT);this._seg.p0.equals(u[l])||(c=s.getDepth(Ne.RIGHT));var h=new Fn(this._seg,c);a.add(h)}}else if(k(arguments[2],Et)&&arguments[0]instanceof w&&k(arguments[1],Et))for(var f=arguments[0],p=arguments[1],d=arguments[2],g=p.iterator();g.hasNext();){var y=g.next();y.isForward()&&this.findStabbedSegments(f,y,d)}},An.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$e.min(e)._leftDepth},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},Dn.DepthSegment.get=function(){return Fn},Object.defineProperties(An,Dn);var Fn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};Fn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fn.prototype.toString=function(){return this._upwardSeg.toString()},Fn.prototype.interfaces_=function(){return[x]},Fn.prototype.getClass=function(){return Fn};var Gn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Gn.prototype.area=function(){return Gn.area(this.p0,this.p1,this.p2)},Gn.prototype.signedArea=function(){return Gn.signedArea(this.p0,this.p1,this.p2)},Gn.prototype.interpolateZ=function(t){if(null===t)throw new v("Supplied point is null.");return Gn.interpolateZ(t,this.p0,this.p1,this.p2)},Gn.prototype.longestSideLength=function(){return Gn.longestSideLength(this.p0,this.p1,this.p2)},Gn.prototype.isAcute=function(){return Gn.isAcute(this.p0,this.p1,this.p2)},Gn.prototype.circumcentre=function(){return Gn.circumcentre(this.p0,this.p1,this.p2)},Gn.prototype.area3D=function(){return Gn.area3D(this.p0,this.p1,this.p2)},Gn.prototype.centroid=function(){return Gn.centroid(this.p0,this.p1,this.p2)},Gn.prototype.inCentre=function(){return Gn.inCentre(this.p0,this.p1,this.p2)},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn},Gn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Gn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Gn.det=function(t,e,n,i){return t*i-e*n},Gn.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,u=n.y-o,l=i.y-o,c=s*l-a*u,h=t.x-r,f=t.y-o;return e.z+(l*h-a*f)/c*(n.z-e.z)+(-u*h+s*f)/c*(i.z-e.z)},Gn.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s},Gn.isAcute=function(t,e,n){return!!kn.isAcute(t,e,n)&&!!kn.isAcute(e,n,t)&&!!kn.isAcute(n,t,e)},Gn.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,u=e.y-r,l=2*Gn.det(o,s,a,u),c=Gn.det(s,o*o+s*s,u,a*a+u*u),h=Gn.det(o,o*o+s*s,a,a*a+u*u);return new w(i-c/l,r+h/l)},Gn.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new Y(t.x+n/2,t.y+i/2,1),o=new Y(t.x-i+n/2,t.y+n+i/2,1);return new Y(r,o)},Gn.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n));return new w(t.x+r*(n.x-t.x),t.y+r*(n.y-t.y))},Gn.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=r*u-o*a,c=o*s-i*u,h=i*a-r*s;return Math.sqrt(l*l+c*c+h*h)/2},Gn.centroid=function(t,e,n){return new w((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},Gn.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o;return new w((i*t.x+r*e.x+o*n.x)/s,(i*t.y+r*e.y+o*n.y)/s)};var jn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new It;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};jn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,P.EXTERIOR,P.INTERIOR)},jn.prototype.addPolygon=function(t){var e=this._distance,n=Ne.LEFT;this._distance<0&&(e=-this._distance,n=Ne.RIGHT);var i=t.getExteriorRing(),r=Ct.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,P.EXTERIOR,P.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Ct.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Ne.opposite(n),P.INTERIOR,P.EXTERIOR)}},jn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Gn(t[0],t[1],t[2]),i=n.inCentre();return at.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},jn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Ct.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,P.EXTERIOR,P.INTERIOR)},jn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new dn(t,new Le(0,P.BOUNDARY,e,n));this._curveList.add(i)},jn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},jn.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=r,s=i,n=Ne.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},jn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $t?this.addPolygon(t):t instanceof Zt?this.addLineString(t):t instanceof Jt?this.addPoint(t):(t instanceof te||t instanceof zt||t instanceof ne||t instanceof Bt)&&this.addCollection(t)},jn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},jn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn};var Un=function(){};Un.prototype.locate=function(t){},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var Vn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Vn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Vn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new i;var t=this._parent.getGeometryN(this._index++);return t instanceof Bt?(this._subcollectionIterator=new Vn(t),this._subcollectionIterator.next()):t},Vn.prototype.remove=function(){throw new Error(this.getClass().getName())},Vn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Vn.prototype.interfaces_=function(){return[xt]},Vn.prototype.getClass=function(){return Vn},Vn.isAtomic=function(t){return!(t instanceof Bt)};var Bn=function(){this._geom=null;var t=arguments[0];this._geom=t};Bn.prototype.locate=function(t){return Bn.locate(t,this._geom)},Bn.prototype.interfaces_=function(){return[Un]},Bn.prototype.getClass=function(){return Bn},Bn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},Bn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Bn.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(Bn.isPointInRing(t,r))return!1}return!0},Bn.containsPoint=function(t,e){if(e instanceof $t)return Bn.containsPointInPolygon(t,e);if(e instanceof Bt)for(var n=new Vn(e);n.hasNext();){var i=n.next();if(i!==e&&Bn.containsPoint(t,i))return!0}return!1},Bn.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:Bn.containsPoint(t,e)?P.INTERIOR:P.EXTERIOR};var zn=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[P.NONE,P.NONE]};zn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},zn.prototype.propagateSideLabels=function(t){for(var e=P.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Ne.LEFT)!==P.NONE&&(e=i.getLocation(t,Ne.LEFT))}if(e===P.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Ne.ON)===P.NONE&&a.setLocation(t,Ne.ON,r),a.isArea(t)){var u=a.getLocation(t,Ne.LEFT),l=a.getLocation(t,Ne.RIGHT);if(l!==P.NONE){if(l!==r)throw new Pe("side location conflict",s.getCoordinate());u===P.NONE&&et.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=u}else et.isTrue(a.getLocation(t,Ne.LEFT)===P.NONE,"found single null side"),a.setLocation(t,Ne.RIGHT,r),a.setLocation(t,Ne.LEFT,r)}}},zn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},zn.prototype.print=function(t){q.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},zn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},zn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Ne.LEFT);et.isTrue(i!==P.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();et.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Ne.LEFT),u=s.getLocation(t,Ne.RIGHT);if(a===u)return!1;if(u!==r)return!1;r=a}return!0},zn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},zn.prototype.iterator=function(){return this.getEdges().iterator()},zn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new It(this._edgeMap.values())),this._edgeList},zn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===P.NONE&&(this._ptInAreaLocation[t]=Bn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},zn.prototype.toString=function(){var t=new M;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},zn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},zn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===P.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=P.NONE;if(e[u])l=P.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},zn.prototype.getDegree=function(){return this._edgeMap.size()},zn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn};var qn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Pe("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){this.insertEdgeEnd(t,t)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return je.isNorthern(r)&&je.isNorthern(o)?n:je.isNorthern(r)||je.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){q.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new It;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ne.LEFT),i=t.getDepth(Ne.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new Pe("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=o;u<s;u++){var l=this._edgeList.get(u);l.setEdgeDepths(Ne.RIGHT,a),a=l.getDepth(Ne.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=P.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=P.INTERIOR;break}if(i.isInResult()){t=P.EXTERIOR;break}}}if(t===P.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===P.INTERIOR):(s.isInResult()&&(r=P.EXTERIOR),a.isInResult()&&(r=P.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Le(P.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==P.INTERIOR&&o!==P.BOUNDARY||this._label.setLocation(r,P.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zn),Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createNode=function(t){return new Fe(t,new qn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ze),Xn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Xn.prototype.compareTo=function(t){return Xn.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},Xn.prototype.interfaces_=function(){return[x]},Xn.prototype.getClass=function(){return Xn},Xn.orientation=function(t){return 1===Ct.increasingDirection(t)},Xn.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=r)===s,f=(l+=o)===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var Wn=function(){this._edges=new It,this._ocaMap=new h};Wn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},Wn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Wn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Wn.prototype.iterator=function(){return this._edges.iterator()},Wn.prototype.getEdges=function(){return this._edges},Wn.prototype.get=function(t){return this._edges.get(t)},Wn.prototype.findEqualEdge=function(t){var e=new Xn(t.getCoordinates());return this._ocaMap.get(e)},Wn.prototype.add=function(t){this._edges.add(t);var e=new Xn(t.getCoordinates());this._ocaMap.put(e,t)},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Hn=function(){};Hn.prototype.processIntersections=function(t,e,n,i){},Hn.prototype.isDone=function(){},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Zn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Zn.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Zn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},Zn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Zn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Zn.prototype.getLineIntersector=function(){return this._li},Zn.prototype.hasProperIntersection=function(){return this._hasProper},Zn.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Zn.prototype.hasIntersection=function(){return this._hasIntersection},Zn.prototype.isDone=function(){return!1},Zn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Zn.prototype.interfaces_=function(){return[Hn]},Zn.prototype.getClass=function(){return Zn},Zn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Kn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new w(t),this.segmentIndex=e,this.dist=n};Kn.prototype.getSegmentIndex=function(){return this.segmentIndex},Kn.prototype.getCoordinate=function(){return this.coord},Kn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Kn.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},Kn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Kn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Kn.prototype.getDistance=function(){return this.dist},Kn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Kn.prototype.interfaces_=function(){return[x]},Kn.prototype.getClass=function(){return Kn};var Jn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Jn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Jn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Jn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},Jn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Jn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);i||n--;var r=new Array(n).fill(null),o=0;r[o++]=new w(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)r[o++]=this.edge.pts[s];return i&&(r[o]=e.coord),new ni(r,new Le(this.edge._label))},Jn.prototype.add=function(t,e,n){var i=new Kn(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},Jn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};var Qn=function(){};Qn.prototype.getChainStartIndices=function(t){var e=0,n=new It;n.add(new R(e));do{var i=this.findChainEnd(t,e);n.add(new R(i)),e=i}while(e<t.length-1);return Qn.toIntArray(n)},Qn.prototype.findChainEnd=function(t,e){for(var n=je.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&je.quadrant(t[i-1],t[i])===n;)i++;return i-1},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn},Qn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $n=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new X,this.env2=new X;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Qn;this.startIndex=e.getChainStartIndices(this.pts)};$n.prototype.getCoordinates=function(){return this.pts},$n.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},$n.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},$n.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[r],h=this.pts[o],f=s.pts[a],p=s.pts[u];if(o-r==1&&u-a==1)return l.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),g=Math.trunc((a+u)/2);r<d&&(a<g&&this.computeIntersectsForChain(r,d,s,a,g,l),g<u&&this.computeIntersectsForChain(r,d,s,g,u,l)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,l),g<u&&this.computeIntersectsForChain(d,o,s,g,u,l))}},$n.prototype.getStartIndexes=function(){return this.startIndex},$n.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var ti=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},ei={NULL_VALUE:{configurable:!0}};ti.prototype.getDepth=function(t,e){return this._depth[t][e]},ti.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},ti.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==ti.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===ti.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._depth[i][r]===ti.NULL_VALUE}},ti.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}},ti.prototype.getDelta=function(t){return this._depth[t][Ne.RIGHT]-this._depth[t][Ne.LEFT]},ti.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?P.EXTERIOR:P.INTERIOR},ti.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ti.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==P.EXTERIOR&&i!==P.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=ti.depthAtLocation(i):this._depth[e][n]+=ti.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===P.INTERIOR&&this._depth[r][o]++}},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ti.depthAtLocation=function(t){return t===P.EXTERIOR?0:t===P.INTERIOR?1:ti.NULL_VALUE},ei.NULL_VALUE.get=function(){return-1},Object.defineProperties(ti,ei);var ni=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Jn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ti,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Le.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(i=!1),this.pts[s].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $n(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new X;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new w(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;a<this.pts.length&&r.equals2D(this.pts[a])&&(o=a,s=0),this.eiList.add(r,o,s)},e.prototype.toString=function(){var t=new M;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ne.ON),e.getLocation(1,Ne.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ne.LEFT),e.getLocation(1,Ne.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ne.RIGHT),e.getLocation(1,Ne.RIGHT),2))},e}(De),ii=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Wn,this._bufParams=t||null};ii.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ii.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Le(t.getLabel())).flip(),n.merge(i);var r=ii.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ii.depthDelta(t.getLabel()))},ii.prototype.buildSubgraphs=function(t,e){for(var n=new It,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new An(n).getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},ii.prototype.createSubgraphs=function(t){for(var e=new It,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new ke;r.create(i),e.add(r)}}return $e.sort(e,$e.reverseOrder()),e},ii.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ii.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new En,n=new rt;return n.setPrecisionModel(t),e.setSegmentIntersector(new Zn(n)),e},ii.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new Rn(n,this._bufParams),r=new jn(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new qe(new Yn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Ye(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},ii.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new ni(r.getCoordinates(),new Le(s));this.insertUniqueEdge(a)}}},ii.prototype.setNoder=function(t){this._workingNoder=t},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.depthDelta=function(t){var e=t.getLocation(0,Ne.LEFT),n=t.getLocation(0,Ne.RIGHT);return e===P.INTERIOR&&n===P.EXTERIOR?1:e===P.EXTERIOR&&n===P.INTERIOR?-1:0},ii.convertSegStrings=function(t){for(var e=new _e,n=new It;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var ri=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ri.prototype.rescale=function(){if(k(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&q.out.println(n)}},ri.prototype.scale=function(){if(k(arguments[0],bt)){for(var t=arguments[0],e=new It,n=t.iterator();n.hasNext();){var i=n.next();e.add(new dn(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),s=0;s<r.length;s++)o[s]=new w(Math.round((r[s].x-this._offsetX)*this._scaleFactor),Math.round((r[s].y-this._offsetY)*this._scaleFactor),r[s].z);return Ct.removeRepeatedPoints(o)}},ri.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ri.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ri.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ri.prototype.interfaces_=function(){return[bn]},ri.prototype.getClass=function(){return ri};var oi=function(){this._li=new rt,this._segStrings=null;var t=arguments[0];this._segStrings=t},si={fact:{configurable:!0}};oi.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new $("found endpt/interior pt intersection at index "+o+" :pt "+n)},oi.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(r,u,o,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3];if(c===f&&h===p)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],y=f.getCoordinates()[p],_=f.getCoordinates()[p+1];if(this._li.computeIntersection(d,g,y,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,_)))throw new $("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+_)}},oi.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},oi.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},oi.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},oi.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new $("found non-noded collapse at "+oi.fact.createLineString([t,e,n]))},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},si.fact.get=function(){return new _e},Object.defineProperties(oi,si);var ai=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new v("Scale factor must be non-zero");1!==e&&(this._pt=new w(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new w,this._p1Scaled=new w),this.initCorners(this._pt)},ui={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ai.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return et.isTrue(!(s&&a),"Found bad envelope test"),a},ai.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new w(this._maxx,this._maxy),this._corner[1]=new w(this._minx,this._maxy),this._corner[2]=new w(this._minx,this._miny),this._corner[3]=new w(this._maxx,this._miny)},ai.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ai.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ai.prototype.getCoordinate=function(){return this._originalPt},ai.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ai.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ai.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new X(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ai.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ai.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},ai.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai},ui.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ai,ui);var li=function(){this.tempEnv1=new X,this.selectedSegment=new gn};li.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li};var ci=function(){this._index=null;var t=arguments[0];this._index=t},hi={HotPixelSnapAction:{configurable:!0}};ci.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new fi(e,n,i);return this._index.query(r,{interfaces_:function(){return[Ze]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},hi.HotPixelSnapAction.get=function(){return fi},Object.defineProperties(ci,hi);var fi=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],i=e.getContext();if(null!==this._parentEdge&&i===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(li),pi=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new It};pi.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},pi.prototype.isDone=function(){return!1},pi.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pi.prototype.interfaces_=function(){return[Hn]},pi.prototype.getClass=function(){return pi};var di=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new rt,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};di.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new oi(e);try{n.checkValid()}catch(t){if(!(t instanceof B))throw t;t.printStackTrace()}},di.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},di.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},di.prototype.findInteriorIntersections=function(t,e){var n=new pi(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},di.prototype.computeVertexSnaps=function(){if(k(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new ai(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},di.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new En,this._pointSnapper=new ci(this._noder.getIndex()),this.snapRound(t,this._li)},di.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new ai(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}},di.prototype.interfaces_=function(){return[bn]},di.prototype.getClass=function(){return di};var gi=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new wn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yi={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gi.prototype.bufferFixedPrecision=function(t){var e=new ri(new di(new pe(1)),t.getScale()),n=new ii(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gi.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gi.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Pe))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=gi.precisionScaleFactor(this._argGeom,this._distance,n),r=new pe(i);this.bufferFixedPrecision(r)}},gi.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gi.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gi.prototype.bufferOriginalPrecision=function(){try{var t=new ii(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $))throw t;this._saveException=t}},gi.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gi.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi},gi.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new gi(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2],o=new gi(n);return o.setQuadrantSegments(r),o.getResultGeometry(i)}if(arguments[2]instanceof wn&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=arguments[2];return new gi(s,u).getResultGeometry(a)}}else if(4===arguments.length){var l=arguments[0],c=arguments[1],h=arguments[2],f=arguments[3],p=new gi(l);return p.setQuadrantSegments(h),p.setEndCapStyle(f),p.getResultGeometry(c)}},gi.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=T.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},yi.CAP_ROUND.get=function(){return wn.CAP_ROUND},yi.CAP_BUTT.get=function(){return wn.CAP_FLAT},yi.CAP_FLAT.get=function(){return wn.CAP_FLAT},yi.CAP_SQUARE.get=function(){return wn.CAP_SQUARE},yi.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gi,yi);var _i=function(){this._pt=[new w,new w],this._distance=m.NaN,this._isNull=!0};_i.prototype.getCoordinates=function(){return this._pt},_i.prototype.getCoordinate=function(t){return this._pt[t]},_i.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},_i.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},_i.prototype.getDistance=function(){return this._distance},_i.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i};var vi=function(){};vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi},vi.computeDistance=function(){if(arguments[2]instanceof _i&&arguments[0]instanceof Zt&&arguments[1]instanceof w)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=t.getCoordinates(),r=new gn,o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof _i&&arguments[0]instanceof $t&&arguments[1]instanceof w){var a=arguments[0],u=arguments[1],l=arguments[2];vi.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)vi.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof _i&&arguments[0]instanceof ct&&arguments[1]instanceof w){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Zt)vi.computeDistance(h,f,p);else if(h instanceof $t)vi.computeDistance(h,f,p);else if(h instanceof Bt)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);vi.computeDistance(y,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof _i&&arguments[0]instanceof gn&&arguments[1]instanceof w){var _=arguments[0],v=arguments[1],m=arguments[2],b=_.closestPoint(v);m.setMinimum(b,v)}};var mi=function(t){this._maxPtDist=new _i,this._inputGeom=t||null},bi={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};mi.prototype.computeMaxMidpointDistance=function(t){var e=new Ei(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},mi.prototype.computeMaxVertexDistance=function(t){var e=new xi(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},mi.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},mi.prototype.getDistancePoints=function(){return this._maxPtDist},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi},bi.MaxPointDistanceFilter.get=function(){return xi},bi.MaxMidpointDistanceFilter.get=function(){return Ei},Object.defineProperties(mi,bi);var xi=function(t){this._maxPtDist=new _i,this._minPtDist=new _i,this._geom=t||null};xi.prototype.filter=function(t){this._minPtDist.initialize(),vi.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xi.prototype.getMaxPointDistance=function(){return this._maxPtDist},xi.prototype.interfaces_=function(){return[pt]},xi.prototype.getClass=function(){return xi};var Ei=function(t){this._maxPtDist=new _i,this._minPtDist=new _i,this._geom=t||null};Ei.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new w((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),vi.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ei.prototype.isDone=function(){return!1},Ei.prototype.isGeometryChanged=function(){return!1},Ei.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ei.prototype.interfaces_=function(){return[Vt]},Ei.prototype.getClass=function(){return Ei};var Ii=function(t){this._comps=t||null};Ii.prototype.filter=function(t){t instanceof $t&&this._comps.add(t)},Ii.prototype.interfaces_=function(){return[Ut]},Ii.prototype.getClass=function(){return Ii},Ii.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Ii.getPolygons(t,new It)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $t?n.add(e):e instanceof Bt&&e.apply(new Ii(n)),n}};var wi=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};wi.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Zt&&this._lines.add(t)},wi.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},wi.prototype.interfaces_=function(){return[lt]},wi.prototype.getClass=function(){return wi},wi.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(wi.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(wi.getLines(e,n))}},wi.getLines=function(){if(1===arguments.length){var t=arguments[0];return wi.getLines(t,!1)}if(2===arguments.length){if(k(arguments[0],bt)&&k(arguments[1],bt)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();wi.getLines(r,n)}return n}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new It;return o.apply(new wi(a,s)),a}if(arguments[0]instanceof ct&&k(arguments[1],bt)){var u=arguments[0],l=arguments[1];return u instanceof Zt?l.add(u):u.apply(new wi(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&k(arguments[0],bt)&&k(arguments[1],bt)){for(var c=arguments[0],h=arguments[1],f=arguments[2],p=c.iterator();p.hasNext();){var d=p.next();wi.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&k(arguments[1],bt)){var g=arguments[0],y=arguments[1],_=arguments[2];return g.apply(new wi(y,_)),y}}};var Ni=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new v("Rule must be non-null");this._boundaryRule=t}};Ni.prototype.locateInternal=function(){if(arguments[0]instanceof w&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];if(e.isEmpty())return P.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===P.EXTERIOR)return P.EXTERIOR;if(i===P.BOUNDARY)return P.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===P.INTERIOR)return P.EXTERIOR;if(s===P.BOUNDARY)return P.BOUNDARY}return P.INTERIOR}if(arguments[0]instanceof w&&arguments[1]instanceof Zt){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return P.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?at.isOnLine(a,l)?P.INTERIOR:P.EXTERIOR:P.BOUNDARY}if(arguments[0]instanceof w&&arguments[1]instanceof Jt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?P.INTERIOR:P.EXTERIOR}},Ni.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):P.EXTERIOR},Ni.prototype.intersects=function(t,e){return this.locate(t,e)!==P.EXTERIOR},Ni.prototype.updateLocationInfo=function(t){t===P.INTERIOR&&(this._isIn=!0),t===P.BOUNDARY&&this._numBoundaries++},Ni.prototype.computeLocation=function(t,e){if(e instanceof Jt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Zt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof zt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof ne)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof Bt)for(var u=new Vn(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},Ni.prototype.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:e instanceof Zt||e instanceof $t?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?P.BOUNDARY:this._numBoundaries>0||this._isIn?P.INTERIOR:P.EXTERIOR)},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni};var Ci=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._component=i,this._segIndex=r,this._pt=o}},Oi={INSIDE_AREA:{configurable:!0}};Ci.prototype.isInsideArea=function(){return this._segIndex===Ci.INSIDE_AREA},Ci.prototype.getCoordinate=function(){return this._pt},Ci.prototype.getGeometryComponent=function(){return this._component},Ci.prototype.getSegmentIndex=function(){return this._segIndex},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Oi.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ci,Oi);var Pi=function(t){this._pts=t||null};Pi.prototype.filter=function(t){t instanceof Jt&&this._pts.add(t)},Pi.prototype.interfaces_=function(){return[Ut]},Pi.prototype.getClass=function(){return Pi},Pi.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Jt?$e.singletonList(t):Pi.getPoints(t,new It)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Jt?n.add(e):e instanceof Bt&&e.apply(new Pi(n)),n}};var Si=function(){this._locations=null;var t=arguments[0];this._locations=t};Si.prototype.filter=function(t){(t instanceof Jt||t instanceof Zt||t instanceof $t)&&this._locations.add(new Ci(t,0,t.getCoordinate()))},Si.prototype.interfaces_=function(){return[Ut]},Si.prototype.getClass=function(){return Si},Si.getLocations=function(t){var e=new It;return t.apply(new Si(e)),e};var ki=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ni,this._minDistanceLocation=null,this._minDistance=m.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};ki.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=Ii.getPolygons(this._geom[e]);if(r.size()>0){var o=Si.getLocations(this._geom[i]);if(this.computeContainmentDistance(o,r,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&k(arguments[0],Et)&&k(arguments[1],Et)){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=0;l<s.size();l++)for(var c=s.get(l),h=0;h<a.size();h++)if(this.computeContainmentDistance(c,a.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ci&&arguments[1]instanceof $t){var f=arguments[0],p=arguments[1],d=arguments[2],g=f.getCoordinate();if(P.EXTERIOR!==this._ptLocator.locate(g,p))return this._minDistance=0,d[0]=f,d[1]=new Ci(p,g),null}},ki.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},ki.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=wi.getLines(this._geom[0]),n=wi.getLines(this._geom[1]),i=Pi.getPoints(this._geom[0]),r=Pi.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},ki.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},ki.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},ki.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},ki.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Zt&&arguments[1]instanceof Jt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var s=at.distancePointLine(r,i[o],i[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new gn(i[o],i[o+1]).closestPoint(r);n[0]=new Ci(t,o,a),n[1]=new Ci(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Zt&&arguments[1]instanceof Zt){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),f=l.getCoordinates(),p=0;p<h.length-1;p++)for(var d=0;d<f.length-1;d++){var g=at.distanceLineLine(h[p],h[p+1],f[d],f[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new gn(h[p],h[p+1]),_=new gn(f[d],f[d+1]),v=y.closestPoints(_);c[0]=new Ci(u,p,v[0]),c[1]=new Ci(l,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},ki.prototype.computeMinDistancePoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Ci(r,0,r.getCoordinate()),n[1]=new Ci(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},ki.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},ki.prototype.computeMinDistanceLines=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.distance=function(t,e){return new ki(t,e).distance()},ki.isWithinDistance=function(t,e,n){return new ki(t,e,n).distance()<=n},ki.nearestPoints=function(t,e){return new ki(t,e).nearestPoints()};var Ti=function(){this._pt=[new w,new w],this._distance=m.NaN,this._isNull=!0};Ti.prototype.getCoordinates=function(){return this._pt},Ti.prototype.getCoordinate=function(t){return this._pt[t]},Ti.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Ti.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Ti.prototype.toString=function(){return Q.toLineString(this._pt[0],this._pt[1])},Ti.prototype.getDistance=function(){return this._distance},Ti.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti};var Li=function(){};Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.computeDistance=function(){if(arguments[2]instanceof Ti&&arguments[0]instanceof Zt&&arguments[1]instanceof w)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new gn,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Ti&&arguments[0]instanceof $t&&arguments[1]instanceof w){var a=arguments[0],u=arguments[1],l=arguments[2];Li.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Li.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Ti&&arguments[0]instanceof ct&&arguments[1]instanceof w){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Zt)Li.computeDistance(h,f,p);else if(h instanceof $t)Li.computeDistance(h,f,p);else if(h instanceof Bt)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Li.computeDistance(y,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Ti&&arguments[0]instanceof gn&&arguments[1]instanceof w){var _=arguments[0],v=arguments[1],m=arguments[2],b=_.closestPoint(v);m.setMinimum(b,v)}};var Mi=function(){this._g0=null,this._g1=null,this._ptDist=new Ti,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Ri={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Mi.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Mi.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Mi.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Mi.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Mi.prototype.computeOrientedDistance=function(t,e,n){var i=new Ai(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new Di(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},Mi.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Mi(t,e).distance()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new Mi(n,i);return o.setDensifyFraction(r),o.distance()}},Ri.MaxPointDistanceFilter.get=function(){return Ai},Ri.MaxDensifiedByFractionDistanceFilter.get=function(){return Di},Object.defineProperties(Mi,Ri);var Ai=function(){this._maxPtDist=new Ti,this._minPtDist=new Ti,this._euclideanDist=new Li,this._geom=null;var t=arguments[0];this._geom=t};Ai.prototype.filter=function(t){this._minPtDist.initialize(),Li.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ai.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ai.prototype.interfaces_=function(){return[pt]},Ai.prototype.getClass=function(){return Ai};var Di=function(){this._maxPtDist=new Ti,this._minPtDist=new Ti,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Di.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,o=(i.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=new w(n.x+s*r,n.y+s*o);this._minPtDist.initialize(),Li.computeDistance(this._geom,a,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Di.prototype.isDone=function(){return!1},Di.prototype.isGeometryChanged=function(){return!1},Di.prototype.getMaxPointDistance=function(){return this._maxPtDist},Di.prototype.interfaces_=function(){return[Vt]},Di.prototype.getClass=function(){return Di};var Fi=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Gi={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fi.prototype.checkMaximumDistance=function(t,e,n){var i=new Mi(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Q.toLineString(r[0],r[1])+")"}},Fi.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Fi.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fi.VERBOSE&&q.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fi.prototype.checkNegativeValid=function(){if(!(this._input instanceof $t||this._input instanceof ne||this._input instanceof Bt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Fi.prototype.getErrorIndicator=function(){return this._errorIndicator},Fi.prototype.checkMinimumDistance=function(t,e,n){var i=new ki(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Q.toLineString(r[0],r[1])+" )"}},Fi.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Fi.prototype.getErrorLocation=function(){return this._errorLocation},Fi.prototype.getPolygonLines=function(t){for(var e=new It,n=new wi(e),i=Ii.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},Fi.prototype.getErrorMessage=function(){return this._errMsg},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi},Gi.VERBOSE.get=function(){return!1},Gi.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fi,Gi);var ji=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Ui={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};ji.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},ji.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*ji.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new X(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new X(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},ji.prototype.checkDistance=function(){var t=new Fi(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},ji.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},ji.prototype.checkPolygonal=function(){this._result instanceof $t||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},ji.prototype.getErrorIndicator=function(){return this._errorIndicator},ji.prototype.getErrorLocation=function(){return this._errorLocation},ji.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},ji.prototype.report=function(t){if(!ji.VERBOSE)return null;q.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},ji.prototype.getErrorMessage=function(){return this._errorMsg},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji},ji.isValidMsg=function(t,e,n){var i=new ji(t,e,n);return i.isValid()?null:i.getErrorMessage()},ji.isValid=function(t,e,n){return!!new ji(t,e,n).isValid()},Ui.VERBOSE.get=function(){return!1},Ui.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ji,Ui);var Vi=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Vi.prototype.getCoordinates=function(){return this._pts},Vi.prototype.size=function(){return this._pts.length},Vi.prototype.getCoordinate=function(t){return this._pts[t]},Vi.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Vi.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Vi.prototype.setData=function(t){this._data=t},Vi.prototype.getData=function(){return this._data},Vi.prototype.toString=function(){return Q.toLineString(new ue(this._pts))},Vi.prototype.interfaces_=function(){return[fn]},Vi.prototype.getClass=function(){return Vi};var Bi=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new It,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Bi.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Bi.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Bi.prototype.getIntersectionSegments=function(){return this._intSegments},Bi.prototype.count=function(){return this._intersectionCount},Bi.prototype.getIntersections=function(){return this._intersections},Bi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Bi.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Bi.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Bi.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Bi.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Bi.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Bi.prototype.interfaces_=function(){return[Hn]},Bi.prototype.getClass=function(){return Bi},Bi.createAllIntersectionsFinder=function(t){var e=new Bi(t);return e.setFindAllIntersections(!0),e},Bi.createAnyIntersectionFinder=function(t){return new Bi(t)},Bi.createIntersectionCounter=function(t){var e=new Bi(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var zi=function(){this._li=new rt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};zi.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},zi.prototype.getIntersections=function(){return this._segInt.getIntersections()},zi.prototype.isValid=function(){return this.execute(),this._isValid},zi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},zi.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Bi(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new En;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},zi.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Pe(this.getErrorMessage(),this._segInt.getInteriorIntersection())},zi.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Q.toLineString(t[0],t[1])+" and "+Q.toLineString(t[2],t[3])},zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi},zi.computeIntersections=function(t){var e=new zi(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var qi=function t(){this._nv=null;var e=arguments[0];this._nv=new zi(t.toSegmentStrings(e))};qi.prototype.checkValid=function(){this._nv.checkValid()},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi},qi.toSegmentStrings=function(t){for(var e=new It,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Vi(i.getCoordinates(),i))}return e},qi.checkValid=function(t){new qi(t).checkValid()};var Yi=function(t){this._mapOp=t};Yi.prototype.map=function(t){for(var e=new It,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(_e.toGeometryArray(e))},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi},Yi.map=function(t,e){return new Yi(e).map(t)};var Xi=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new It,this._resultLineList=new It;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Xi.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Xi.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Xi.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Xi.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Cr.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},Xi.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},Xi.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Xi.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},Xi.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Cr.isResultOfOp(i,e)&&e===Cr.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi};var Wi=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new It;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Wi.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Wi.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Cr.INTERSECTION)){var i=n.getLabel();Cr.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},Wi.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi};var Hi=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Hi.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Hi.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof ee&&!i.isEmpty()||(n=!1);for(var r=new It,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ee||(n=!1),r.add(s))}if(n)return this._factory.createPolygon(i,r.toArray([]));var a=new It;return null!==i&&a.add(i),a.addAll(r),this._factory.buildGeometry(a)},Hi.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Hi.prototype.getInputGeometry=function(){return this._inputGeom},Hi.prototype.transformMultiLineString=function(t,e){for(var n=new It,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Hi.prototype.transformCoordinates=function(t,e){return this.copy(t)},Hi.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Hi.prototype.transformMultiPoint=function(t,e){for(var n=new It,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Hi.prototype.transformMultiPolygon=function(t,e){for(var n=new It,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Hi.prototype.copy=function(t){return t.copy()},Hi.prototype.transformGeometryCollection=function(t,e){for(var n=new It,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(_e.toGeometryArray(n)):this._factory.buildGeometry(n)},Hi.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Jt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Zt)return this.transformLineString(t,null);if(t instanceof zt)return this.transformMultiLineString(t,null);if(t instanceof $t)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Bt)return this.transformGeometryCollection(t,null);throw new v("Unknown Geometry subtype: "+t.getClass().getName())},Hi.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi};var Zi=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Zt&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1];this._srcPts=i,this._isClosed=t.isClosed(i),this._snapTolerance=r}};Zi.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new w(o)),0===i&&this._isClosed&&t.set(t.size()-1,new w(o)))}},Zi.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Zi.prototype.snapTo=function(t){var e=new Nt(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Zi.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new w(r),!1)}},Zi.prototype.findSegmentIndexToSnap=function(t,e){for(var n=m.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},Zi.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Zi.prototype.interfaces_=function(){return[]},Zi.prototype.getClass=function(){return Zi},Zi.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Ki=function(t){this._srcGeom=t||null},Ji={SNAP_PRECISION_FACTOR:{configurable:!0}};Ki.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Qi(e,n).transform(this._srcGeom)},Ki.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new Qi(t,n,!0).transform(this._srcGeom),r=i;return e&&k(r,Qt)&&(r=i.buffer(0)),r},Ki.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Ki.prototype.extractTargetCoordinates=function(t){for(var e=new p,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},Ki.prototype.computeMinimumSegmentLength=function(t){for(var e=m.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki},Ki.snap=function(t,e,n){var i=new Array(2).fill(null),r=new Ki(t);i[0]=r.snapTo(e,n);var o=new Ki(e);return i[1]=o.snapTo(i[0],n),i},Ki.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Ki.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===pe.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(Ki.computeOverlaySnapTolerance(r),Ki.computeOverlaySnapTolerance(o))}},Ki.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Ki.SNAP_PRECISION_FACTOR},Ki.snapToSelf=function(t,e,n){return new Ki(t).snapToSelf(e,n)},Ji.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Ki,Ji);var Qi=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.snapLine=function(t,e){var n=new Zi(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hi),$i=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$i.prototype.getCommon=function(){return m.longBitsToDouble(this._commonBits)},$i.prototype.add=function(t){var e=m.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=$i.signExpBits(this._commonBits),this._isFirst=!1,null):$i.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$i.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=$i.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$i.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=m.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+m.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},$i.getBit=function(t,e){return 0!=(t&1<<e)?1:0},$i.signExpBits=function(t){return t>>52},$i.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$i.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if($i.getBit(t,i)!==$i.getBit(e,i))return n;n++}return 52};var tr=function(){this._commonCoord=null,this._ccFilter=new nr},er={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};tr.prototype.addCommonBits=function(t){var e=new ir(this._commonCoord);t.apply(e),t.geometryChanged()},tr.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new w(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ir(e);return t.apply(n),t.geometryChanged(),t},tr.prototype.getCommonCoordinate=function(){return this._commonCoord},tr.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},er.CommonCoordinateFilter.get=function(){return nr},er.Translater.get=function(){return ir},Object.defineProperties(tr,er);var nr=function(){this._commonBitsX=new $i,this._commonBitsY=new $i};nr.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},nr.prototype.getCommonCoordinate=function(){return new w(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},nr.prototype.interfaces_=function(){return[pt]},nr.prototype.getClass=function(){return nr};var ir=function(){this.trans=null;var t=arguments[0];this.trans=t};ir.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},ir.prototype.isDone=function(){return!1},ir.prototype.isGeometryChanged=function(){return!0},ir.prototype.interfaces_=function(){return[Vt]},ir.prototype.getClass=function(){return ir};var rr=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};rr.prototype.selfSnap=function(t){return new Ki(t).snapTo(t,this._snapTolerance)},rr.prototype.removeCommonBits=function(t){this._cbr=new tr,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rr.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rr.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Cr.overlayOp(e[0],e[1],t);return this.prepareResult(n)},rr.prototype.checkValid=function(t){t.isValid()||q.out.println("Snapped geometry is invalid")},rr.prototype.computeSnapTolerance=function(){this._snapTolerance=Ki.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rr.prototype.snap=function(t){var e=this.removeCommonBits(t);return Ki.snap(e[0],e[1],this._snapTolerance)},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.overlayOp=function(t,e,n){return new rr(t,e).getResultGeometry(n)},rr.union=function(t,e){return rr.overlayOp(t,e,Cr.UNION)},rr.intersection=function(t,e){return rr.overlayOp(t,e,Cr.INTERSECTION)},rr.symDifference=function(t,e){return rr.overlayOp(t,e,Cr.SYMDIFFERENCE)},rr.difference=function(t,e){return rr.overlayOp(t,e,Cr.DIFFERENCE)};var or=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};or.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=Cr.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof $))throw t;i=t}if(!n)try{e=rr.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $?i:t}return e},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.overlayOp=function(t,e,n){return new or(t,e).getResultGeometry(n)},or.union=function(t,e){return or.overlayOp(t,e,Cr.UNION)},or.intersection=function(t,e){return or.overlayOp(t,e,Cr.INTERSECTION)},or.symDifference=function(t,e){return or.overlayOp(t,e,Cr.SYMDIFFERENCE)},or.difference=function(t,e){return or.overlayOp(t,e,Cr.DIFFERENCE)};var sr=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};sr.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr};var ar=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},ur={INSERT:{configurable:!0},DELETE:{configurable:!0}};ar.prototype.isDelete=function(){return this._eventType===ar.DELETE},ar.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ar.prototype.getObject=function(){return this._obj},ar.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},ar.prototype.getInsertEvent=function(){return this._insertEvent},ar.prototype.isInsert=function(){return this._eventType===ar.INSERT},ar.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ar.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ar.prototype.interfaces_=function(){return[x]},ar.prototype.getClass=function(){return ar},ur.INSERT.get=function(){return 1},ur.DELETE.get=function(){return 2},Object.defineProperties(ar,ur);var lr=function(){};lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var cr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};cr.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(cr.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},cr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},cr.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},cr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},cr.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},cr.prototype.hasProperIntersection=function(){return this._hasProper},cr.prototype.hasIntersection=function(){return this._hasIntersection},cr.prototype.isDone=function(){return this._isDone},cr.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},cr.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},cr.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},cr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hr=function(t){function e(){t.call(this),this.events=new It,this.nOverlaps=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.prepareEvents=function(){$e.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof cr&&k(arguments[0],Et)&&k(arguments[1],Et)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&k(arguments[0],Et)&&arguments[1]instanceof cr){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new sr(n,r),s=new ar(e,n.getMinX(r),o);this.events.add(s),this.events.add(new ar(n.getMaxX(r),s))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();this.addEdge(o,i)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lr),fr=function(){this._min=m.POSITIVE_INFINITY,this._max=m.NEGATIVE_INFINITY},pr={NodeComparator:{configurable:!0}};fr.prototype.getMin=function(){return this._min},fr.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},fr.prototype.getMax=function(){return this._max},fr.prototype.toString=function(){return Q.toLineString(new w(this._min,0),new w(this._max,0))},fr.prototype.interfaces_=function(){return[]},fr.prototype.getClass=function(){return fr},pr.NodeComparator.get=function(){return dr},Object.defineProperties(fr,pr);var dr=function(){};dr.prototype.compare=function(t,e){var n=(t._min+t._max)/2,i=(e._min+e._max)/2;return n<i?-1:n>i?1:0},dr.prototype.interfaces_=function(){return[I]},dr.prototype.getClass=function(){return dr};var gr=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],i=arguments[2];this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fr),yr=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fr),_r=function(){this._leaves=new It,this._root=null,this._level=0};_r.prototype.buildTree=function(){$e.sort(this._leaves,new fr.NodeComparator);for(var t=this._leaves,e=null,n=new It;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},_r.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gr(t,e,n))},_r.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},_r.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},_r.prototype.printNode=function(t){q.out.println(Q.toLineString(new w(t._min,this._level),new w(t._max,this._level)))},_r.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},_r.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new yr(t.get(n),t.get(n+1));e.add(r)}}},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r};var vr=function(){this._items=new It};vr.prototype.visitItem=function(t){this._items.add(t)},vr.prototype.getItems=function(){return this._items},vr.prototype.interfaces_=function(){return[Ze]},vr.prototype.getClass=function(){return vr};var mr=function(){this._index=null;var t=arguments[0];if(!k(t,Qt))throw new v("Argument must be Polygonal");this._index=new Er(t)},br={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};mr.prototype.locate=function(t){var e=new st(t),n=new xr(e);return this._index.query(t.y,t.y,n),e.getLocation()},mr.prototype.interfaces_=function(){return[Un]},mr.prototype.getClass=function(){return mr},br.SegmentVisitor.get=function(){return xr},br.IntervalIndexedGeometry.get=function(){return Er},Object.defineProperties(mr,br);var xr=function(){this._counter=null;var t=arguments[0];this._counter=t};xr.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xr.prototype.interfaces_=function(){return[Ze]},xr.prototype.getClass=function(){return xr};var Er=function(){this._index=new _r;var t=arguments[0];this.init(t)};Er.prototype.init=function(t){for(var e=wi.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Er.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},Er.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vr;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er};var Ir=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new fe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ni,2===arguments.length){var e=arguments[0],n=arguments[1],i=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;i.getLocation(t,Ne.ON)===P.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new cr(n,!0,!1);o.setIsDoneIfProperInt(r);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof $t||this._parentGeom instanceof ne,u=i||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new cr(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Jt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,P.INTERIOR)}else if(arguments[0]instanceof w){var e=arguments[0];this.insertPoint(this._argIndex,e,P.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),P.EXTERIOR,P.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,P.INTERIOR,P.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],P.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],P.BOUNDARY)},e.prototype.addLineString=function(t){var e=Ct.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new ni(e,new Le(this._argIndex,P.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===P.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=Ct.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;at.isCCW(i)&&(r=n,o=e);var s=new ni(i,new Le(this._argIndex,P.BOUNDARY,r,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],P.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new Le(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hr},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof $t)this.addPolygon(e);else if(e instanceof Zt)this.addLineString(e);else if(e instanceof Jt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof zt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof Bt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return k(this._parentGeom,Qt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new mr(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?P.BOUNDARY:P.INTERIOR},e}(qe),wr=function(){if(this._li=new rt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ir(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ir(0,e,i),this._arg[1]=new Ir(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ir(0,r,s),this._arg[1]=new Ir(1,o,s)}};wr.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},wr.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr};var Nr=function(){};Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.map=function(){if(arguments[0]instanceof ct&&k(arguments[1],Nr.MapOp)){for(var t=arguments[0],e=arguments[1],n=new It,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(k(arguments[0],bt)&&k(arguments[1],Nr.MapOp)){for(var o=arguments[0],s=arguments[1],a=new It,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},Nr.MapOp=function(){};var Cr=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Ni,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Wn,this._resultPolyList=new It,this._resultLineList=new It,this._resultPointList=new It,this._graph=new qe(new Yn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Le(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new It;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==P.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new It,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new It;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),qi.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ye(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new Xi(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new Wi(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Ne.RIGHT),r.getLocation(1,Ne.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(et.isTrue(!i.isNull(r,Ne.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Ne.LEFT,i.getLocation(r,Ne.LEFT)),et.isTrue(!i.isNull(r,Ne.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Ne.RIGHT,i.getLocation(r,Ne.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(wr);Cr.overlayOp=function(t,e,n){return new Cr(t,e).getResultGeometry(n)},Cr.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Cr.createEmptyResult(Cr.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Yi.map(t,{interfaces_:function(){return[Nr.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Cr.INTERSECTION)},Cr.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Cr.createEmptyResult(Cr.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Cr.SYMDIFFERENCE)},Cr.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Cr.INTERSECTION:o=Math.min(i,r);break;case Cr.UNION:o=Math.max(i,r);break;case Cr.DIFFERENCE:o=i;break;case Cr.SYMDIFFERENCE:o=Math.max(i,r)}return o},Cr.createEmptyResult=function(t,e,n,i){var r=null;switch(Cr.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Cr.difference=function(t,e){return t.isEmpty()?Cr.createEmptyResult(Cr.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Cr.DIFFERENCE))},Cr.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Cr.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===P.BOUNDARY&&(r=P.INTERIOR),o===P.BOUNDARY&&(o=P.INTERIOR),s){case Cr.INTERSECTION:return r===P.INTERIOR&&o===P.INTERIOR;case Cr.UNION:return r===P.INTERIOR||o===P.INTERIOR;case Cr.DIFFERENCE:return r===P.INTERIOR&&o!==P.INTERIOR;case Cr.SYMDIFFERENCE:return r===P.INTERIOR&&o!==P.INTERIOR||r!==P.INTERIOR&&o===P.INTERIOR}return!1}},Cr.INTERSECTION=1,Cr.UNION=2,Cr.DIFFERENCE=3,Cr.SYMDIFFERENCE=4;var Or=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ni,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Or.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),i=0;i<n.size()-1;i++)if(n.getCoordinate(i,this._seg.p0),n.getCoordinate(i+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Or.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?P.BOUNDARY:this._ptLocator.locate(t,this._g)},Or.prototype.extractLinework=function(t){var e=new Pr;t.apply(e);var n=e.getLinework(),i=_e.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or};var Pr=function(){this._linework=null,this._linework=new It};Pr.prototype.getLinework=function(){return this._linework},Pr.prototype.filter=function(t){if(t instanceof $t){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Pr.prototype.interfaces_=function(){return[Ut]},Pr.prototype.getClass=function(){return Pr};var Sr=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Sr.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},Sr.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Sr.prototype.getPoints=function(t){for(var e=new It,n=wi.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},Sr.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,s=Math.sqrt(r*r+o*o),a=n*r/s,u=n*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new w(l-u,c+a);i.add(h)}if(this._doRight){var f=new w(l+u,c-a);i.add(f)}},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr};var kr=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new It;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new Or(this._geom[0],this._boundaryDistanceTolerance),new Or(this._geom[1],this._boundaryDistanceTolerance),new Or(this._geom[2],this._boundaryDistanceTolerance)]},Tr={TOLERANCE:{configurable:!0}};kr.prototype.reportResult=function(t,e,n){q.out.println("Overlay result invalid - A:"+P.toLocationSymbol(e[0])+" B:"+P.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+P.toLocationSymbol(e[2]))},kr.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},kr.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!kr.hasLocation(this._location,P.BOUNDARY)||this.isValidResult(i,this._location)}},kr.prototype.addTestPts=function(t){var e=new Sr(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},kr.prototype.isValidResult=function(t,e){var n=Cr.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===P.INTERIOR);return i||this.reportResult(t,e,n),i},kr.prototype.getInvalidLocation=function(){return this._invalidLocation},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},kr.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Ki.computeSizeBasedSnapTolerance(t),Ki.computeSizeBasedSnapTolerance(e))},kr.isValid=function(t,e,n,i){return new kr(t,e,i).isValid(n)},Tr.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(kr,Tr);var Lr=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Lr.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},Lr.prototype.combine=function(){for(var t=new It,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.combine=function(){if(1===arguments.length){var t=arguments[0];return new Lr(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Lr(Lr.createList(e,n)).combine()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];return new Lr(Lr.createList(i,r,o)).combine()}},Lr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Lr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new It;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=new It;return s.add(i),s.add(r),s.add(o),s}};var Mr=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new It)},Rr={STRTREE_NODE_CAPACITY:{configurable:!0}};Mr.prototype.reduceToGeometries=function(t){for(var e=new It,n=t.iterator();n.hasNext();){var i=n.next(),r=null;k(i,Et)?r=this.unionTree(i):i instanceof ct&&(r=i),e.add(r)}return e},Mr.prototype.extractByEnvelope=function(t,e,n){for(var i=new It,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},Mr.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return Lr.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},Mr.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new sn(Mr.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},Mr.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Mr.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Mr.getGeometry(e,n),Mr.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,i);return this.unionSafe(s,a)}},Mr.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},Mr.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Mr.prototype.unionActual=function(t,e){return Mr.restrictToPolygons(t.union(e))},Mr.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Mr.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new It,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);return i.add(s),Lr.combine(i)},Mr.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.restrictToPolygons=function(t){if(k(t,Qt))return t;var e=Ii.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(_e.toPolygonArray(e))},Mr.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Mr.union=function(t){return new Mr(t).union()},Rr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Mr,Rr);var Ar=function(){};Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Cr.createEmptyResult(Cr.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Cr.UNION)},t.GeoJSONReader=Ie,t.GeoJSONWriter=we,t.OverlayOp=Cr,t.UnionOp=Ar,t.BufferOp=gi,Object.defineProperty(t,"__esModule",{value:!0})}(e)},"/GEF":function(t,e,n){"use strict";var i,r=n("j/Z9"),o=n("BMqo"),s=n("DiD3"),a=n("vog+"),u=n("HK6I"),l=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e){var n=t.call(this)||this;return n.geometries_=e||null,n.changeEventsKeys_=[],n.listenGeometriesChange_(),n}return l(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(u.c),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(Object(u.a)(this.geometries_[t],r.a.CHANGE,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){if(i<Object(a.e)(this.getExtent(),t,e))return i;for(var r=this.geometries_,o=0,s=r.length;o<s;++o)i=r[o].closestPointXY(t,e,n,i);return i},e.prototype.containsXY=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Object(a.l)(t);for(var e=this.geometries_,n=0,i=e.length;n<i;++n)Object(a.q)(t,e[n].getExtent());return t},e.prototype.getGeometries=function(){return h(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,n=0,i=e.length;n<i;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],i=this.geometries_,r=!1,o=0,s=i.length;o<s;++o){var a=i[o],u=a.getSimplifiedGeometry(t);n.push(u),u!==a&&(r=!0)}if(r){var l=new e(null);return l.setGeometriesArray(n),l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return s.a.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)n[i].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,n){var i=n;i||(i=Object(a.x)(this.getExtent()));for(var r=this.geometries_,o=0,s=r.length;o<s;++o)r[o].scale(t,e,i);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(h(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)n[i].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(o.a);function h(t){for(var e=[],n=0,i=t.length;n<i;++n)e.push(t[n].clone());return e}e.a=c},"06eB":function(t,e,n){var i=n("ey2t"),r=n("qnX1"),o=n("eYkv"),s=n("UV1p"),a=n("R6B+"),u=n("hoKw"),l=Date.prototype.getTime;function c(t){return null==t}function h(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}t.exports=function t(e,n,f){var p=f||{};return!!(p.strict?o(e,n):e===n)||(!e||!n||"object"!=typeof e&&"object"!=typeof n?p.strict?o(e,n):e==n:function(e,n,o){var f,p;if(typeof e!=typeof n)return!1;if(c(e)||c(n))return!1;if(e.prototype!==n.prototype)return!1;if(r(e)!==r(n))return!1;var d=s(e),g=s(n);if(d!==g)return!1;if(d||g)return e.source===n.source&&a(e)===a(n);if(u(e)&&u(n))return l.call(e)===l.call(n);var y=h(e),_=h(n);if(y!==_)return!1;if(y||_){if(e.length!==n.length)return!1;for(f=0;f<e.length;f++)if(e[f]!==n[f])return!1;return!0}if(typeof e!=typeof n)return!1;try{var v=i(e),m=i(n)}catch(b){return!1}if(v.length!==m.length)return!1;for(v.sort(),m.sort(),f=v.length-1;f>=0;f--)if(v[f]!=m[f])return!1;for(f=v.length-1;f>=0;f--)if(!t(e[p=v[f]],n[p],o))return!1;return!0}(e,n,p))}},"3S/X":function(t,e,n){"use strict";var i=TypeError,r=Object.getOwnPropertyDescriptor;if(r)try{r({},"")}catch(y){r=null}var o=function(){throw new i},s=r?function(){try{return o}catch(t){try{return r(arguments,"callee").get}catch(e){return o}}}():o,a=n("V+Bs")(),u=Object.getPrototypeOf||function(t){return t.__proto__},l="undefined"==typeof Uint8Array?void 0:u(Uint8Array),c={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":a?u([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":a?u(u([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&a?u((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&a?u((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":a?u(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":a?Symbol:void 0,"%SymbolPrototype%":a?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":s,"%TypedArray%":l,"%TypedArrayPrototype%":l?l.prototype:void 0,"%TypeError%":i,"%TypeErrorPrototype%":i.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},h=n("5L5q").call(Function.call,String.prototype.replace),f=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,p=/\\(\\)?/g,d=function(t){var e=[];return h(t,f,(function(t,n,i,r){e[e.length]=i?h(r,p,"$1"):n||t})),e},g=function(t,e){if(!(t in c))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===c[t]&&!e)throw new i("intrinsic "+t+" exists, but is not available. Please file an issue!");return c[t]};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var n=d(t),o=g("%"+(n.length>0?n[0]:"")+"%",e),s=1;s<n.length;s+=1)if(null!=o)if(r&&s+1>=n.length){var a=r(o,n[s]);if(!e&&!(n[s]in o))throw new i("base intrinsic for "+t+" exists, but the property is not available.");o=a?a.get||a.value:o[n[s]]}else o=o[n[s]];return o}},"48gJ":function(t,e,n){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var i=Object.getOwnPropertySymbols(t);if(1!==i.length||i[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0}},"4oW2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("fJCm");function r(t,e,n){if(null!==t)for(var i,o,s,a,u,l,c,h,f=0,p=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,_=g?t.features.length:1,v=0;v<_;v++){u=(h=!!(c=g?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<u;m++){var b=0,x=0;if(null!==(a=h?c.geometries[m]:c)){l=a.coordinates;var E=a.type;switch(f=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===e(l,p,v,b,x))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,v,b,x))return!1;p++,"MultiPoint"===E&&b++}"LineString"===E&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-f;o++){if(!1===e(l[i][o],p,v,b,x))return!1;p++}"MultiLineString"===E&&b++,"Polygon"===E&&x++}"Polygon"===E&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,o=0;o<l[i].length;o++){for(s=0;s<l[i][o].length-f;s++){if(!1===e(l[i][o][s],p,v,b,x))return!1;p++}x++}b++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===r(a.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function a(t,e){var n,i,r,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,s=(u=!!(a=p?t.features[n].geometry:d?t.geometry:t)&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=u?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function u(t,e){a(t,(function(t,n,r,o,s){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(i.feature(t,r,{bbox:o,id:s}),n,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++)if(!1===e(i.feature({type:a,coordinates:t.coordinates[l]},r),n,l))return!1}))}function l(t,e){u(t,(function(t,n,o){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var u,l=0,c=0,h=0;return!1!==r(t,(function(r,a,f,p,d){if(void 0===u||n>l||p>c||d>h)return u=r,l=n,c=p,h=d,void(s=0);var g=i.lineString([u,r],t.properties);if(!1===e(g,n,o,d,s))return!1;s++,u=r}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.coordinates;switch(t.geometry.type){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(i.lineString(o[s],t.properties),n,r,s))return!1}}}))}e.coordEach=r,e.coordReduce=function(t,e,n,i){var o=n;return r(t,(function(t,i,r,s,a){o=0===i&&void 0===n?t:e(o,t,i,r,s,a)}),i),o},e.propEach=o,e.propReduce=function(t,e,n){var i=n;return o(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.featureEach=s,e.featureReduce=function(t,e,n){var i=n;return s(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.coordAll=function(t){var e=[];return r(t,(function(t){e.push(t)})),e},e.geomEach=a,e.geomReduce=function(t,e,n){var i=n;return a(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)})),i},e.flattenEach=u,e.flattenReduce=function(t,e,n){var i=n;return u(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i},e.segmentEach=l,e.segmentReduce=function(t,e,n){var i=n,r=!1;return l(t,(function(t,o,s,a,u){i=!1===r&&void 0===n?t:e(i,t,o,s,a,u),r=!0})),i},e.lineEach=c,e.lineReduce=function(t,e,n){var i=n;return c(t,(function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)})),i},e.findSegment=function(t,e){if(!i.isObject(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),u=u||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),i.lineString([l[a],l[a+1]],u,e);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a-1),i.lineString([l[s][a],l[s][a+1]],u,e);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),i.lineString([l[o][a],l[o][a+1]],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a-1),i.lineString([l[o][s][a],l[o][s][a+1]],u,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(!i.isObject(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),u=u||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return i.point(l,u,e);case"MultiPoint":return o<0&&(o=l.length+o),i.point(l[o],u,e);case"LineString":return a<0&&(a=l.length+a),i.point(l[a],u,e);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a),i.point(l[s][a],u,e);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),i.point(l[o][a],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a),i.point(l[o][s][a],u,e)}throw new Error("geojson is invalid")}},"5EX2":function(t,e){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},"5L5q":function(t,e,n){"use strict";var i=n("8iDC");t.exports=Function.prototype.bind||i},"8f5B":function(t,e,n){"use strict";e.a={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},"8iDC":function(t,e,n){"use strict";var i="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,o=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==o.call(e))throw new TypeError(i+e);for(var n,s=r.call(arguments,1),a=function(){if(this instanceof n){var i=e.apply(this,s.concat(r.call(arguments)));return Object(i)===i?i:this}return e.apply(t,s.concat(r.call(arguments)))},u=Math.max(0,e.length-s.length),l=[],c=0;c<u;c++)l.push("$"+c);if(n=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(a),e.prototype){var h=function(){};h.prototype=e.prototype,n.prototype=new h,h.prototype=null}return n}},ARQ1:function(t,e,n){"use strict";var i=function(t){return t!=t};t.exports=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!i(t)||!i(e))}},CmXO:function(t,e,n){"use strict";var i=n("zT+L").supportsDescriptors,r=n("IlOi"),o=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,u=Object.getPrototypeOf,l=/a/;t.exports=function(){if(!i||!u)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=r(),e=u(l),n=o(e,"flags");return n&&n.get===t||s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},D57K:function(t,e,n){"use strict";function i(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{u(i.next(t))}catch(e){o(e)}}function a(t){try{u(i.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))}function r(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){!function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)}(i,r,(e=t[n](e)).done,e.value)}))}}}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}))},F3Ih:function(t,e,n){"use strict";var i;if(!Object.keys){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=n("cTt9"),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),l=a.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!f["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(e){return!0}}catch(e){return!0}return!1}();i=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===o.call(t),i=s(t),a=e&&"[object String]"===o.call(t),f=[];if(!e&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var d=l&&n;if(a&&t.length>0&&!r.call(t,0))for(var g=0;g<t.length;++g)f.push(String(g));if(i&&t.length>0)for(var y=0;y<t.length;++y)f.push(String(y));else for(var _ in t)d&&"prototype"===_||!r.call(t,_)||f.push(String(_));if(u)for(var v=function(t){if("undefined"==typeof window||!p)return h(t);try{return h(t)}catch(e){return!1}}(t),m=0;m<c.length;++m)v&&"constructor"===c[m]||!r.call(t,c[m])||f.push(c[m]);return f}}t.exports=i},FGo3:function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},GM35:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return i}));var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;if(g(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}return _(t,[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,r)>=0)break;e[t]=s,t=o}e[t]=r}}]),t}();function r(t,e){return t<e?-1:t>e?1:0}},IVkz:function(t,e,n){"use strict";var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),r=new Uint8Array(16);function o(){if(!i)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)}for(var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(t){return"string"==typeof t&&s.test(t)},u=[],l=0;l<256;++l)u.push((l+256).toString(16).substr(1));e.a=function(t,e,n){var i=(t=t||{}).random||(t.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=i[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!a(n))throw TypeError("Stringified UUID is invalid");return n}(i)}},IlOi:function(t,e,n){"use strict";var i=n("YZE+"),r=n("zT+L").supportsDescriptors,o=Object.getOwnPropertyDescriptor,s=TypeError;t.exports=function(){if(!r)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return i}},"Kt/E":function(t,e,n){"use strict";var i,r=n("+cQG"),o=n("rjvG"),s=n("70ZC"),a=n("j/Z9"),u=n("fdeV"),l=n("DiD3"),c=n("mm/l"),h=n("oVSo"),f=n("H40N"),p=n("rHrS"),d=n("8f5B"),g=n("mTvk"),y=n("y1k7"),_=n("7Gkf"),v=n("vog+"),m=n("61KW"),b=n("m+aV"),x=n("I/d5"),E=n("hWN6"),I=n("A5l+"),w=n("lRKV"),N=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),C=[0,0,0,0],O=[],P=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.features=n,r.mapBrowserEvent=i,r}return N(e,t),e}(s.a),S=function(t){function e(e){var n,i,s=t.call(this,e)||this;if(s.boundHandleFeatureChange_=s.handleFeatureChange_.bind(s),s.condition_=e.condition?e.condition:_.i,s.defaultDeleteCondition_=function(t){return Object(_.b)(t)&&Object(_.k)(t)},s.deleteCondition_=e.deleteCondition?e.deleteCondition:s.defaultDeleteCondition_,s.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:_.d,s.vertexFeature_=null,s.vertexSegments_=null,s.lastPixel_=[0,0],s.ignoreNextSingleClick_=!1,s.featuresBeingModified_=null,s.rBush_=new p.a,s.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,s.snappedToVertex_=!1,s.changingFeature_=!1,s.dragSegments_=[],s.overlay_=new g.a({source:new y.a({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(n=Object(b.b)(),function(t,e){return n[l.a.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),s.SEGMENT_WRITERS_={Point:s.writePointGeometry_.bind(s),LineString:s.writeLineStringGeometry_.bind(s),LinearRing:s.writeLineStringGeometry_.bind(s),Polygon:s.writePolygonGeometry_.bind(s),MultiPoint:s.writeMultiPointGeometry_.bind(s),MultiLineString:s.writeMultiLineStringGeometry_.bind(s),MultiPolygon:s.writeMultiPolygonGeometry_.bind(s),Circle:s.writeCircleGeometry_.bind(s),GeometryCollection:s.writeGeometryCollectionGeometry_.bind(s)},s.source_=null,s.hitDetection_=null,e.features?i=e.features:e.source&&(s.source_=e.source,i=new r.a(s.source_.getFeatures()),s.source_.addEventListener(d.a.ADDFEATURE,s.handleSourceAdd_.bind(s)),s.source_.addEventListener(d.a.REMOVEFEATURE,s.handleSourceRemove_.bind(s))),!i)throw new Error("The modify interaction requires features, a source or a layer");return e.hitDetection&&(s.hitDetection_=e.hitDetection),s.features_=i,s.features_.forEach(s.addFeature_.bind(s)),s.features_.addEventListener(o.a.ADD,s.handleFeatureAdd_.bind(s)),s.features_.addEventListener(o.a.REMOVE,s.handleFeatureRemove_.bind(s)),s.lastPointerEvent_=null,s.delta_=[0,0],s}return N(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var n=this.SEGMENT_WRITERS_[e.getType()];n&&n(t,e)}var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),t.addEventListener(a.a.CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new r.a;for(var n=this.featuresBeingModified_.getArray(),i=0,o=e.length;i<o;++i){var s=e[i][0].feature;-1===n.indexOf(s)&&this.featuresBeingModified_.push(s)}this.dispatchEvent(new P("modifystart",this.featuresBeingModified_,t))}},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(a.a.CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,n=[];e.forEach((function(e){t===e.feature&&n.push(e)}));for(var i=n.length-1;i>=0;--i){for(var r=n[i],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===r&&this.dragSegments_.splice(o,1);e.remove(r)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){this.removeFeature_(t.element)},e.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates(),i={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i){var o=n[i],s={feature:t,geometry:e,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length-1;i<r;++i){var o=n.slice(i,i+2),s={feature:t,geometry:e,index:i,segment:o};this.rBush_.insert(Object(v.b)(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),l={feature:t,geometry:e,depth:[i],index:s,segment:u};this.rBush_.insert(Object(v.b)(u),l)}},e.prototype.writePolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),l={feature:t,geometry:e,depth:[i],index:s,segment:u};this.rBush_.insert(Object(v.b)(u),l)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],s=0,a=o.length;s<a;++s)for(var u=o[s],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),f={feature:t,geometry:e,depth:[s,i],index:l,segment:h};this.rBush_.insert(Object(v.b)(h),f)}},e.prototype.writeCircleGeometry_=function(t,e){var n=e.getCenter(),i={feature:t,geometry:e,index:0,segment:[n,n]},r={feature:t,geometry:e,index:1,segment:[n,n]},o=[i,r];i.featureSegments=o,r.featureSegments=o,this.rBush_.insert(Object(v.m)(n),i);var s=e,a=Object(I.k)();if(a&&this.getMap()){var u=this.getMap().getView().getProjection();s=s.clone().transform(a,u),s=Object(E.b)(s).transform(u,a)}this.rBush_.insert(s.getExtent(),r)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var n=e.getGeometriesArray(),i=0;i<n.length;++i){var r=n[i];(0,this.SEGMENT_WRITERS_[r.getType()])(t,r)}},e.prototype.createOrUpdateVertexFeature_=function(t,e,n){var i=this.vertexFeature_;return i?i.getGeometry().setCoordinates(t):(i=new u.a(new h.a(t)),this.vertexFeature_=i,this.overlay_.getSource().addFeature(i)),i.set("features",e),i.set("geometries",n),i},e.prototype.handleEvent=function(e){return!e.originalEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=c.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(n=!(e.type!=c.a.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==c.a.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!n);var n},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);for(var e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],n=[],i=[],r=0,o=this.dragSegments_.length;r<o;++r){var s=this.dragSegments_[r],a=s[0],u=a.feature;-1===n.indexOf(u)&&n.push(u);var c=a.geometry;-1===i.indexOf(c)&&i.push(c);for(var h=a.depth,f=void 0,p=a.segment,d=s[1];e.length<c.getStride();)e.push(p[d][e.length]);switch(c.getType()){case l.a.POINT:f=e,p[0]=e,p[1]=e;break;case l.a.MULTI_POINT:(f=c.getCoordinates())[a.index]=e,p[0]=e,p[1]=e;break;case l.a.LINE_STRING:(f=c.getCoordinates())[a.index+d]=e,p[d]=e;break;case l.a.MULTI_LINE_STRING:case l.a.POLYGON:(f=c.getCoordinates())[h[0]][a.index+d]=e,p[d]=e;break;case l.a.MULTI_POLYGON:(f=c.getCoordinates())[h[1]][h[0]][a.index+d]=e,p[d]=e;break;case l.a.CIRCLE:if(p[0]=e,p[1]=e,0===a.index)this.changingFeature_=!0,c.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var g=t.map.getView().getProjection(),y=Object(m.c)(Object(I.e)(c.getCenter(),g),Object(I.e)(e,g)),_=Object(I.k)();if(_){var v=c.clone().transform(_,g);v.setRadius(y),y=v.transform(g,_).getRadius()}c.setRadius(y),this.changingFeature_=!1}}f&&this.setGeometryCoordinates_(c,f)}this.createOrUpdateVertexFeature_(e,n,i)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;var n=this.vertexFeature_;if(n){var i=t.map.getView().getProjection(),r=[],o=n.getGeometry().getCoordinates(),s=Object(v.b)([o]),a=this.rBush_.getInExtent(s),u={};a.sort(k);for(var c=0,h=a.length;c<h;++c){var f=a[c],p=f.segment,d=Object(w.c)(f.geometry),g=f.depth;if(g&&(d+="-"+g.join("-")),u[d]||(u[d]=new Array(2)),f.geometry.getType()!==l.a.CIRCLE||1!==f.index)if(!Object(m.d)(p[0],o)||u[d][0])if(!Object(m.d)(p[1],o)||u[d][1])Object(w.c)(p)in this.vertexSegments_&&!u[d][0]&&!u[d][1]&&this.insertVertexCondition_(t)&&r.push(f);else{if((f.geometry.getType()===l.a.LINE_STRING||f.geometry.getType()===l.a.MULTI_LINE_STRING)&&u[d][0]&&0===u[d][0].index)continue;this.dragSegments_.push([f,1]),u[d][1]=f}else this.dragSegments_.push([f,0]),u[d][0]=f;else{var y=L(e,f,i);Object(m.d)(y,o)&&!u[d][0]&&(this.dragSegments_.push([f,0]),u[d][0]=f)}}r.length&&this.willModifyFeatures_(t,[r]);for(var _=r.length-1;_>=0;--_)this.insertVertex_(r[_],o)}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var n=this.dragSegments_[e][0],i=n.geometry;if(i.getType()===l.a.CIRCLE){var r=i.getCenter(),o=n.featureSegments[0],s=n.featureSegments[1];o.segment[0]=r,o.segment[1]=r,s.segment[0]=r,s.segment[1]=r,this.rBush_.update(Object(v.m)(r),o);var a=i,u=Object(I.k)();if(u){var c=t.map.getView().getProjection();a=a.clone().transform(u,c),a=Object(E.b)(a).transform(c,u)}this.rBush_.update(a.getExtent(),s)}else this.rBush_.update(Object(v.b)(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new P("modifyend",this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,n){var i,r,o=this,s=n||e.getCoordinateFromPixel(t),a=e.getView().getProjection();if(this.hitDetection_&&e.forEachFeatureAtPixel(t,(function(t,e,n){if((n=n||t.getGeometry()).getType()===l.a.POINT){r=n;var o=n.getCoordinates();i=[{feature:t,geometry:n,segment:[o,o]}]}return!0}),{layerFilter:"object"==typeof this.hitDetection_?function(t){return t===o.hitDetection_}:void 0}),!i){var u=Object(I.f)(Object(v.m)(s,C),a),c=e.getView().getResolution()*this.pixelTolerance_,h=Object(I.n)(Object(v.c)(u,c,C),a);i=this.rBush_.getInExtent(h)}if(i&&i.length>0){var f=i.sort((function(t,e){return T(s,t,a)-T(s,e,a)}))[0],p=f.segment,d=L(s,f,a),g=e.getPixelFromCoordinate(d),y=Object(m.c)(t,g);if(r||y<=this.pixelTolerance_){var _={};if(_[Object(w.c)(p)]=!0,this.delta_[0]=d[0]-s[0],this.delta_[1]=d[1]-s[1],f.geometry.getType()===l.a.CIRCLE&&1===f.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(d,[f.feature],[f.geometry]);else{var b=e.getPixelFromCoordinate(p[0]),x=e.getPixelFromCoordinate(p[1]),E=Object(m.h)(g,b),N=Object(m.h)(g,x);y=Math.sqrt(Math.min(E,N)),this.snappedToVertex_=y<=this.pixelTolerance_,this.snappedToVertex_&&(d=E>N?p[1]:p[0]),this.createOrUpdateVertexFeature_(d,[f.feature],[f.geometry]);var O={};O[Object(w.c)(f.geometry)]=!0;for(var P=1,S=i.length;P<S;++P){var k=i[P].segment;if(!(Object(m.d)(p[0],k[0])&&Object(m.d)(p[1],k[1])||Object(m.d)(p[0],k[1])&&Object(m.d)(p[1],k[0])))break;var M=Object(w.c)(i[P].geometry);M in O||(O[M]=!0,_[Object(w.c)(k)]=!0)}}return void(this.vertexSegments_=_)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var n,i=t.segment,r=t.feature,o=t.geometry,s=t.depth,a=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case l.a.MULTI_LINE_STRING:case l.a.POLYGON:(n=o.getCoordinates())[s[0]].splice(a+1,0,e);break;case l.a.MULTI_POLYGON:(n=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case l.a.LINE_STRING:(n=o.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(o,n);var u=this.rBush_;u.remove(t),this.updateSegmentIndices_(o,a,s,1);var c={segment:[i[0],e],feature:r,geometry:o,depth:s,index:a};u.insert(Object(v.b)(c.segment),c),this.dragSegments_.push([c,1]);var h={segment:[e,i[1]],feature:r,geometry:o,depth:s,index:a+1};u.insert(Object(v.b)(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=c.a.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);var e=this.removeVertex_();return this.dispatchEvent(new P("modifyend",this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1},e.prototype.removeVertex_=function(){var t,e,n,i,r,o,s,a,u,c,h,f=this.dragSegments_,p={},d=!1;for(r=f.length-1;r>=0;--r)c=(n=f[r])[0],h=Object(w.c)(c.feature),c.depth&&(h+="-"+c.depth.join("-")),h in p||(p[h]={}),0===n[1]?(p[h].right=c,p[h].index=c.index):1==n[1]&&(p[h].left=c,p[h].index=c.index+1);for(h in p){switch(u=p[h].right,(a=(o=p[h].index)-1)<0&&(a=0),t=e=(i=(c=void 0!==(s=p[h].left)?s:u).geometry).getCoordinates(),d=!1,i.getType()){case l.a.MULTI_LINE_STRING:e[c.depth[0]].length>2&&(e[c.depth[0]].splice(o,1),d=!0);break;case l.a.LINE_STRING:e.length>2&&(e.splice(o,1),d=!0);break;case l.a.MULTI_POLYGON:t=t[c.depth[1]];case l.a.POLYGON:(t=t[c.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),d=!0,0===o&&(t.pop(),t.push(t[0]),a=t.length-1))}if(d){this.setGeometryCoordinates_(i,e);var g=[];if(void 0!==s&&(this.rBush_.remove(s),g.push(s.segment[0])),void 0!==u&&(this.rBush_.remove(u),g.push(u.segment[1])),void 0!==s&&void 0!==u){var y={depth:c.depth,feature:c.feature,geometry:c.geometry,index:a,segment:g};this.rBush_.insert(Object(v.b)(y.segment),y)}this.updateSegmentIndices_(i,o,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),f.length=0}}return d},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,n,i){this.rBush_.forEachInExtent(t.getExtent(),(function(r){r.geometry===t&&(void 0===n||void 0===r.depth||Object(x.b)(r.depth,n))&&r.index>e&&(r.index+=i)}))},e}(f.b);function k(t,e){return t.index-e.index}function T(t,e,n){var i=e.geometry;if(i.getType()===l.a.CIRCLE){var r=i;if(1===e.index){var o=Object(I.k)();o&&(r=r.clone().transform(o,n));var s=Object(m.h)(r.getCenter(),Object(I.e)(t,n)),a=Math.sqrt(s)-r.getRadius();return a*a}}var u=Object(I.e)(t,n);return O[0]=Object(I.e)(e.segment[0],n),O[1]=Object(I.e)(e.segment[1],n),Object(m.i)(u,O)}function L(t,e,n){var i=e.geometry;if(i.getType()===l.a.CIRCLE&&1===e.index){var r=i,o=Object(I.k)();return o&&(r=r.clone().transform(o,n)),Object(I.m)(r.getClosestPoint(Object(I.e)(t,n)),n)}var s=Object(I.e)(t,n);return O[0]=Object(I.e)(e.segment[0],n),O[1]=Object(I.e)(e.segment[1],n),Object(I.m)(Object(m.b)(s,O),n)}e.a=S},Mi3R:function(t,e,n){"use strict";var i=n("Z4rD"),r=n("zT+L");t.exports=function(){var t=i();return r(Object,{is:t},{is:function(){return Object.is!==t}}),t}},PewW:function(t,e,n){"use strict";n.d(e,"b",(function(){return de})),n.d(e,"a",(function(){return me}));var i,r=n("EM62"),o=n("C05f"),s=n("D57K"),a=n("6q3V"),u=n("fdeV"),l=n("+cQG"),c=n("XZLj"),p=n("g+5l"),d=n("8bJt"),y=n("IVkz"),v=n("4KU7"),m=n("/GEF"),b=n("YibT"),x=n("DiD3"),E=n("5urs"),I=n("vxo4"),w=n("Qs0z"),N=n("oVSo"),C=n("hWN6"),O=n("jFox"),P=n("yki2"),S=n("lRKV"),k=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function T(t){return"string"==typeof t?t:""}var L,M=function(t){function e(){return t.call(this)||this}return k(e,t),e.prototype.getType=function(){return P.a.TEXT},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(T(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return Object(S.b)()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(T(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return Object(S.b)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(T(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return Object(S.b)()},e.prototype.readProjection=function(t){return this.readProjectionFromText(T(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return Object(S.b)()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return Object(S.b)()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return Object(S.b)()},e}(O.a),R=(L=function(t,e){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}L(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),A={POINT:N.a,LINESTRING:E.a,POLYGON:C.a,MULTIPOINT:w.a,MULTILINESTRING:I.a,MULTIPOLYGON:v.a},D={};for(var F in x.a)D[F]=x.a[F].toUpperCase();var G=function(){function t(t){this.wkt=t,this.index_=-1}return t.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},t.prototype.nextToken=function(){var t,e=this.nextChar_(),n=this.index_,i=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.isNumeric_(e)||"-"==e)t=4,i=this.readNumber_();else if(this.isAlpha_(e))t=1,i=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=6}return{position:n,value:i,type:t}},t.prototype.readNumber_=function(){var t,e=this.index_,n=!1,i=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},t.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},t}(),j=function(){function t(t){this.lexer_=t,this.layout_=b.a.XY}return t.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},t.prototype.isTokenType=function(t){return this.token_.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},t.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},t.prototype.parseGeometryLayout_=function(){var t=b.a.XY,e=this.token_;if(this.isTokenType(1)){var n=e.value;"Z"===n?t=b.a.XYZ:"M"===n?t=b.a.XYM:"ZM"===n&&(t=b.a.XYZM),t!==b.a.XY&&this.consume_()}return t},t.prototype.parseGeometryCollectionText_=function(){if(this.match(2)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePointText_=function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},t.prototype.parseLineStringText_=function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePolygonText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPointText_=function(){var t;if(this.match(2)){if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiLineStringText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPolygonText_=function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,n=0;n<e;++n){var i=this.token_;if(!this.match(4))break;t.push(i.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},t.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t},t.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t},t.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t},t.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t},t.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(1)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t},t.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},t.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(1)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var n=this.parseGeometryCollectionText_();return new m.a(n)}var i=A[e];if(!i)throw new Error("Invalid geometry type: "+e);var r=void 0;switch(e){case"POINT":r=this.parsePointText_();break;case"LINESTRING":r=this.parseLineStringText_();break;case"POLYGON":r=this.parsePolygonText_();break;case"MULTIPOINT":r=this.parseMultiPointText_();break;case"MULTILINESTRING":r=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":r=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return r||(r=i===A.POINT?[NaN,NaN]:[]),new i(r,this.layout_)}throw new Error(this.formatErrorMessage_())},t}(),U=function(t){function e(e){var n=t.call(this)||this,i=e||{};return n.splitCollection_=void 0!==i.splitCollection&&i.splitCollection,n}return R(e,t),e.prototype.parse_=function(t){var e=new G(t);return new j(e).parse()},e.prototype.readFeatureFromText=function(t,e){var n=this.readGeometryFromText(t,e);if(n){var i=new u.a;return i.setGeometry(n),i}return null},e.prototype.readFeaturesFromText=function(t,e){for(var n,i=this.readGeometryFromText(t,e),r=[],o=0,s=(n=this.splitCollection_&&i.getType()==x.a.GEOMETRY_COLLECTION?i.getGeometriesArray():[i]).length;o<s;++o){var a=new u.a;a.setGeometry(n[o]),r.push(a)}return r},e.prototype.readGeometryFromText=function(t,e){var n=this.parse_(t);return n?Object(O.b)(n,!1,e):null},e.prototype.writeFeatureText=function(t,e){var n=t.getGeometry();return n?this.writeGeometryText(n,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var n=[],i=0,r=t.length;i<r;++i)n.push(t[i].getGeometry());var o=new m.a(n);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return Y(Object(O.b)(t,!0,e))},e}(M);function V(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function B(t){for(var e=t.getCoordinates(),n=[],i=0,r=e.length;i<r;++i)n.push(e[i].join(" "));return n.join(",")}function z(t){for(var e=[],n=t.getLinearRings(),i=0,r=n.length;i<r;++i)e.push("("+B(n[i])+")");return e.join(",")}var q={Point:V,LineString:B,Polygon:z,MultiPoint:function(t){for(var e=[],n=t.getPoints(),i=0,r=n.length;i<r;++i)e.push("("+V(n[i])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],n=t.getLineStrings(),i=0,r=n.length;i<r;++i)e.push("("+B(n[i])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],n=t.getPolygons(),i=0,r=n.length;i<r;++i)e.push("("+z(n[i])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],n=t.getGeometries(),i=0,r=n.length;i<r;++i)e.push(Y(n[i]));return e.join(",")}};function Y(t){var e=t.getType(),n=(0,q[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var i=function(t){var e=t.getLayout(),n="";return e!==b.a.XYZ&&e!==b.a.XYZM||(n+="Z"),e!==b.a.XYM&&e!==b.a.XYZM||(n+="M"),n}(t);i.length>0&&(e+=" "+i)}return 0===n.length?e+" EMPTY":e+"("+n+")"}var X,W=U,H=n("nsO7"),Z=n("Jr41"),K=n("nkxq"),J=n("W1gw"),Q=n("OZ4H"),$=n("sEIs"),tt=n("2kYt"),et=n("UwWW"),nt=n("VkHG"),it=n("seVz"),rt=n("QcI7"),ot=n("Sv/w"),st=n("wqpa"),at=n("i8+0"),ut=((X=function t(){g(this,t)}).\u0275fac=function(t){return new(t||X)},X.\u0275cmp=r.Jb({type:X,selectors:[["mol-species-dataset-menu-legend-overlay"]],decls:25,vars:0,consts:[[1,"legend-box"],["src","https://cdn.mol.org/static/images/legends/ranges/seasonality-breeding.png",1,"legend-img"],["src","https://cdn.mol.org/static/images/legends/ranges/seasonality-non-breeding.png",1,"legend-img"],["src","https://cdn.mol.org/static/images/legends/ranges/seasonality-resident.png",1,"legend-img"],["src","https://cdn.mol.org/static/images/legends/ranges/seasonality-passage.png",1,"legend-img"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"h3"),r.Ic(2,"Expert range maps key"),r.Ub(),r.Vb(3,"table"),r.Vb(4,"tbody"),r.Vb(5,"tr"),r.Vb(6,"td"),r.Qb(7,"img",1),r.Ub(),r.Vb(8,"td"),r.Ic(9," Breeding "),r.Ub(),r.Ub(),r.Vb(10,"tr"),r.Vb(11,"td"),r.Qb(12,"img",2),r.Ub(),r.Vb(13,"td"),r.Ic(14," Non-breeding "),r.Ub(),r.Ub(),r.Vb(15,"tr"),r.Vb(16,"td"),r.Qb(17,"img",3),r.Ub(),r.Vb(18,"td"),r.Ic(19," Resident "),r.Ub(),r.Ub(),r.Vb(20,"tr"),r.Vb(21,"td"),r.Qb(22,"img",4),r.Ub(),r.Vb(23,"td"),r.Ic(24," Passage "),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub())},styles:[".legend-box[_ngcontent-%COMP%]{background-color:#fff;padding:10px;display:block;top:-16px;left:80px;box-shadow:0 4px 7px 0 rgba(0,0,0,.2),0 4px 4px 0 rgba(0,0,0,.14),0 5px 4px -4px rgba(0,0,0,.12)}h3[_ngcontent-%COMP%]{padding:0;margin:0;font-size:1em}.legend-img[_ngcontent-%COMP%]{width:25px;height:25px;padding:3px}table[_ngcontent-%COMP%]{border-spacing:0;font-size:.5em;border-collapse:collapse}"]}),X),lt=n("aiQ1"),ct=n("HYj3"),ht=n("PBFl"),ft=n("Y2X+"),pt=n("bFHC"),dt=n("s2Ay");function gt(t,e){1&t&&r.Qb(0,"button",13)}function yt(t,e){1&t&&(r.Vb(0,"button",14),r.Qb(1,"i",15),r.Ub())}var _t=function(){return{"feature-count":!0}};function vt(t,e){if(1&t){var n=r.Wb();r.Vb(0,"mat-tree-node",3),r.Vb(1,"div",4),r.Vb(2,"div",5),r.Gc(3,gt,1,0,"button",6),r.Gc(4,yt,2,0,"button",7),r.Vb(5,"button",8),r.dc("click",(function(){r.yc(n);var t=e.$implicit;return r.hc().toggleDataset(t.data)})),r.Vb(6,"mat-icon"),r.Ic(7),r.Ub(),r.Ub(),r.Vb(8,"div",9),r.dc("click",(function(){r.yc(n);var t=e.$implicit;return r.hc().info(t,!0)})),r.Ic(9),r.Ub(),r.Vb(10,"span",10),r.Ic(11),r.Ub(),r.Vb(12,"button",11),r.dc("click",(function(){r.yc(n);var t=e.$implicit;return r.hc().zoom(t)})),r.ic(13,"translate"),r.Vb(14,"mat-icon"),r.Ic(15,"zoom_in"),r.Ub(),r.Ub(),r.Vb(16,"button",11),r.dc("click",(function(){r.yc(n);var t=e.$implicit;return r.hc().info(t,!0)})),r.ic(17,"translate"),r.Qb(18,"i",12),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&t){var i=e.$implicit;r.Cb(3),r.nc("ngIf",!i.data.user_dataset),r.Cb(1),r.nc("ngIf",i.data.user_dataset),r.Cb(3),r.Kc(" ",i.data.visible?"check_box":"check_box_outline_blank"," "),r.Cb(1),r.nc("matTooltip",i.data.dataset_title)("matTooltipShowDelay",500),r.Cb(1),r.Kc(" ",i.data.dataset_title," "),r.Cb(1),r.Eb(r.pc(16,_t)),r.nc("matTooltip",i.data.tooltip),r.Cb(1),r.Jc(i.data.n_display),r.Cb(1),r.nc("matTooltip",r.jc(13,12,"info_zoom_dataset")),r.Cb(4),r.nc("matTooltip",r.jc(17,14,"info_about_dataset"))}}function mt(t,e){if(1&t&&(r.Vb(0,"div",22),r.Ic(1),r.ic(2,"translate"),r.Ub()),2&t){var n=r.hc().$implicit;r.Db("aria-label","toggle "+n.data.type_title),r.Cb(1),r.Kc(" ",r.jc(2,2,"src_"+n.data.product_type)," ")}}function bt(t,e){if(1&t&&(r.Vb(0,"div",22),r.Ic(1),r.Ub()),2&t){var n=r.hc().$implicit;r.Db("aria-label","toggle "+n.data.type_title),r.Cb(1),r.Kc(" ",n.data.type_title," ")}}function xt(t,e){if(1&t&&(r.Vb(0,"div",22),r.Ic(1," Movement "),r.Ub()),2&t){var n=r.hc().$implicit;r.Db("aria-label","toggle "+n.data.type_title)}}function Et(t,e){if(1&t){var n=r.Wb();r.Vb(0,"mat-tree-node",3),r.Vb(1,"button",16),r.Vb(2,"mat-icon",17),r.Ic(3),r.Ub(),r.Ub(),r.Vb(4,"button",18),r.dc("click",(function(){r.yc(n);var t=e.$implicit;return r.hc().toggleDatatype(t)})),r.Vb(5,"mat-icon"),r.Ic(6),r.Ub(),r.Ub(),r.Gc(7,mt,3,4,"div",19),r.Gc(8,bt,2,2,"div",19),r.Gc(9,xt,2,1,"div",19),r.Qb(10,"img",20),r.Vb(11,"span",21),r.Ic(12),r.Ub(),r.Vb(13,"button",11),r.dc("click",(function(){r.yc(n);var t=e.$implicit;return r.hc().zoom(t)})),r.ic(14,"translate"),r.Vb(15,"mat-icon"),r.Ic(16,"zoom_in"),r.Ub(),r.Ub(),r.Vb(17,"button",11),r.dc("click",(function(){r.yc(n);var t=e.$implicit;return r.hc().info(t,!1)})),r.ic(18,"translate"),r.Qb(19,"i",12),r.Ub(),r.Ub()}if(2&t){var i=e.$implicit,o=r.hc();r.Cb(1),r.Db("aria-label","toggle "+i.data.type_title),r.Cb(2),r.Kc(" ",o.treeControl.isExpanded(i)?"expand_more":"chevron_right"," "),r.Cb(3),r.Kc(" ",i.data.icon," "),r.Cb(1),r.nc("ngIf","movement"!=i.data.product_type&&"alienchecklist"!=i.data.product_type),r.Cb(1),r.nc("ngIf","alienchecklist"==i.data.product_type),r.Cb(1),r.nc("ngIf","movement"==i.data.product_type),r.Cb(1),r.nc("src","https://cdn.mol.org/static/images/legends/datatypes/"+("points"===i.data.product_type?"points_agg":i.data.product_type)+".png",r.Ac),r.Cb(1),r.nc("matTooltip",i.data.tooltip),r.Cb(1),r.Jc(i.data.n_display),r.Cb(1),r.nc("matTooltip",r.jc(14,11,"info_zoom_data_type")),r.Cb(4),r.nc("matTooltip",r.jc(18,13,"info_about_data_type"))}}var It,wt=function(t,e){return{expandable:!!t.children&&t.children.length>0,data:t.data,level:e}},Nt=((It=function(){function t(e,n,i,o,s){g(this,t),this.species=e,this.datasetService=n,this.dialog=i,this.decimal=o,this.overlay=s,this.scientificname="",this.defaultSelected=[],this.defaultDatasetType="",this.selectedDatasetIdsChanged=new r.o,this.selectedDatasets=new r.o,this.selectedOccurrenceDatasetIdsChanged=new r.o,this.selectedModelDatasets=new r.o,this.zoomToDatasetExtent=new r.o,this.datasets=[],this.selectedDatasetIds=[],this.maxOcc=st.b,this.first=!0,this.modelThresholdStore={},this.treeControl=new it.j((function(t){return t.level}),(function(t){return t.expandable})),this.treeFlattener=new rt.c(wt,(function(t){return t.level}),(function(t){return t.expandable}),(function(t){return t.children})),this.dataSource=new rt.b(this.treeControl,this.treeFlattener),this.countFormatter=new Intl.NumberFormat(void 0,{notation:"compact",maximumFractionDigits:0}),this.hasChild=function(t,e){return e.expandable}}return _(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(t){var e=this;t.scientificname.currentValue!==t.scientificname.previousValue&&this.species.getDatasets(this.scientificname).subscribe((function(t){e.datasets=t,e.dataSource.data=e.makeHierarchical(t),e.updatedSelectedDatasetIds()}))}},{key:"makeHierarchical",value:function(t){var e=this,n=Array.from(new Set(t.map((function(t){return t.product_type})))),i={},r=t.find((function(t){return"704898e7-b945-4721-b201-9286bd00c0a9"===t.dataset_id})),o=t.find((function(t){return"d542e050-2ae5-457e-8476-027741538965"===t.dataset_id})),s=t.find((function(t){return"ec694c34-bddd-4111-ba99-926a5f7866e8"===t.dataset_id}));return s&&(t.filter((function(t){return"range"===t.product_type})).forEach((function(t){t.visible=!1})),s.visible=!0),r&&o&&(r.visible=!1),t.forEach((function(t){if(i[t.product_type]){var n=i[t.product_type];n.data.bounds.northEast.lat=Math.max(n.data.bounds.northEast.lat,t.bounds.northEast.lat),n.data.bounds.northEast.lng=Math.max(n.data.bounds.northEast.lng,t.bounds.northEast.lng),n.data.bounds.southWest.lat=Math.min(n.data.bounds.southWest.lat,t.bounds.southWest.lat),n.data.bounds.southWest.lng=Math.min(n.data.bounds.southWest.lng,t.bounds.southWest.lng),n.data.no_rows+=t.no_rows,n.children.push({data:t}),t.visible&&!n.data.visible&&(n.data.visible=!0,n.data.icon="indeterminate_check_box")}else i[t.product_type]={expandable:!0,data:Object.assign({icon:t.visible?"check_box":"check_box_outline_blank"},t),children:[{data:t}]};"model"===t.product_type&&(t.visible=!1,e.species.getModelInfo(e.scientificname).subscribe((function(n){n.forEach((function(n){e.modelThresholdStore[t.dataset_id]=[];var i=["th05","th10"];Object.keys(n).forEach((function(r){if(Object(lt.isNumber)(n[r])&&i.indexOf(r)>-1){var o={code:r,threshold:n[r],visible:r===i[0]};e.modelThresholdStore[t.dataset_id].push(o),t.thresholds?t.thresholds.push(o):t.thresholds=[o]}}))}))})))})),n.forEach((function(t){var n=e.countDataTypeTooltip(i[t]);i[t].data.tooltip=n,i[t].children.forEach((function(t){t.data.tooltip=e.countDatasetTooltip(t)}))})),n.map((function(t){return i[t]}))}},{key:"legend",value:function(t){t.data.legend=!t.data.legend}},{key:"toggleDataset",value:function(t){t.visible=!t.visible;var e=this.dataSource.data.find((function(e){return e.data.product_type===t.product_type}));e.children.every((function(e){return e.data.visible===t.visible}))&&e.data.visible!==t.visible&&(e.data.visible=t.visible),this.updatedSelectedDatasetIds()}},{key:"toggleDatatype",value:function(t){t.data.visible=!t.data.visible,this.datasets.filter((function(e){return e.product_type===t.data.product_type})).forEach((function(e){return e.visible=t.data.visible})),this.updatedSelectedDatasetIds()}},{key:"updatedSelectedDatasetIds",value:function(){var t=this;this.first&&(this.defaultSelected.length>=1?this.datasets.forEach((function(e){e.visible=-1!==t.defaultSelected.indexOf(e.dataset_id)})):""!==this.defaultDatasetType&&this.datasets.forEach((function(e){e.product_type!==t.defaultDatasetType&&(e.visible=!1)})),this.first=!1),this.dataSource.data.map((function(t){var e=t.children.map((function(t){return t.data.visible})),n=-1!==e.indexOf(!0),i=-1!==e.indexOf(!1);!n&&i?(t.data.visible=!1,t.data.icon="check_box_outline_blank"):n&&!i?(t.data.visible=!0,t.data.icon="check_box"):n&&i&&(t.data.visible=!0,t.data.icon="indeterminate_check_box")}));var e=this.datasets.filter((function(t){return t.visible})),n=e.filter((function(t){return"points"===t.product_type})).map((function(t){return t.dataset_id})),i=e.filter((function(t){return"model"===t.product_type})).map((function(t){return t.dataset_id})).map((function(e){return{thresholds:t.modelThresholdStore[e],dataset_id:e}}));this.selectedDatasets.emit(e),this.selectedDatasetIds=e.map((function(t){return t.dataset_id})),this.selectedOccurrenceDatasetIdsChanged.emit(n),this.selectedModelDatasets.emit(i.length>0?i[0]:null),this.selectedDatasetIdsChanged.emit(this.selectedDatasetIds)}},{key:"countDatasetTooltip",value:function(t){var e=t.data.no_rows;return t.data.n_display=this.countFormatter.format(e),"".concat(this.decimal.transform(e)," features available in ").concat(t.data.dataset_title,".")}},{key:"countDataTypeTooltip",value:function(t){if(!t)return"";var e=this.datasets.filter((function(e){return e.product_type===t.data.product_type})).length;return t.data.n_display=this.countFormatter.format(t.data.no_rows),"".concat(this.decimal.transform(t.data.no_rows)," ").concat(t.data.type_title," features available across ").concat(e," datasets.")}},{key:"zoom",value:function(t){this.zoomToDatasetExtent.emit(t.data.bounds)}},{key:"info",value:function(t,e){var n=this;e?this.datasetService.metadata(t.data.dataset_id).subscribe((function(e){n.openInfoModal({info:e.metadata,dataset_id:t.data.dataset_id,heading:t.data.dataset_title})})):this.datasetService.type(t.data.product_type).subscribe((function(t){t.length>=1&&n.openInfoModal({info:[{children:t}],heading:t[0].value})}))}},{key:"openInfoModal",value:function(t){this.dialog.open(at.a,{data:t})}},{key:"openLegendOverlay",value:function(t,e){var n=this;if("range"===e.data.product_type){var i=this.overlay.position().flexibleConnectedTo(t.srcElement).withPositions([{originX:"start",originY:"center",overlayX:"end",overlayY:"center"}]);this.overlayRef=this.overlay.create({positionStrategy:i,hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop"}),this.overlayRef.attach(new ot.c(ut)),this.overlayRef.backdropClick().subscribe((function(){return n.overlayRef.dispose()})),setTimeout((function(){n.overlayRef.dispose()}),1e3)}}}]),t}()).\u0275fac=function(t){return new(t||It)(r.Pb(c.g),r.Pb(c.c),r.Pb(Q.b),r.Pb(tt.g),r.Pb(ct.c))},It.\u0275cmp=r.Jb({type:It,selectors:[["mol-species-dataset-menu"]],inputs:{scientificname:"scientificname",defaultSelected:"defaultSelected",defaultDatasetType:"defaultDatasetType"},outputs:{selectedDatasetIdsChanged:"selectedDatasetIdsChanged",selectedDatasets:"selectedDatasets",selectedOccurrenceDatasetIdsChanged:"selectedOccurrenceDatasetIdsChanged",selectedModelDatasets:"selectedModelDatasets",zoomToDatasetExtent:"zoomToDatasetExtent"},features:[r.Bb([tt.g]),r.Ab],decls:3,vars:3,consts:[[3,"dataSource","treeControl"],["matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding",""],[1,"node-container"],[1,"node-row"],["mat-icon-button","","disabled","",4,"ngIf"],["mat-icon-button","",4,"ngIf"],["mat-icon-button","","matTooltip","Toggle dataset visibility.",3,"click"],["mat-flat-button","",1,"dataset-button",3,"matTooltip","matTooltipShowDelay","click"],["matTooltipPosition","right",3,"matTooltip"],["mat-icon-button","","matTooltipPosition","right",3,"matTooltip","click"],[1,"fa","fa-info"],["mat-icon-button","","disabled",""],["mat-icon-button",""],[1,"fa","fa-user"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["mat-icon-button","",3,"click"],["mat-flat-button","","matTreeNodeToggle","","class","product-type-button",4,"ngIf"],[1,"product-type-logo",3,"src"],["matTooltipPosition","right",1,"feature-count",3,"matTooltip"],["mat-flat-button","","matTreeNodeToggle","",1,"product-type-button"]],template:function(t,e){1&t&&(r.Vb(0,"mat-tree",0),r.Gc(1,vt,19,17,"mat-tree-node",1),r.Gc(2,Et,20,15,"mat-tree-node",2),r.Ub()),2&t&&(r.nc("dataSource",e.dataSource)("treeControl",e.treeControl),r.Cb(2),r.nc("matTreeNodeDefWhen",e.hasChild))},directives:[rt.a,rt.f,rt.e,rt.g,tt.t,ht.b,ft.a,pt.a,rt.h],pipes:[dt.d],styles:["strong[_ngcontent-%COMP%]{display:block;margin:10px 0 0 10px;font-size:1.1em}.product-type-logo[_ngcontent-%COMP%]{height:25px;width:25px}.dataset-button[_ngcontent-%COMP%], .product-type-button[_ngcontent-%COMP%]{cursor:pointer;width:150px;min-width:150px;max-width:150px;text-decoration:underline;font-weight:300;text-align:left;padding:0;display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.dataset-button[_ngcontent-%COMP%]{min-width:135px;max-width:135px;width:135px;line-height:40px}.feature-count[_ngcontent-%COMP%]{display:inline;width:50px;max-width:50px;min-width:50px;line-height:30px;padding:5px 0;font-weight:700;text-align:center;word-break:keep-all}.feature-count.points[_ngcontent-%COMP%]{text-align:center;width:100px}.node-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.node-container[_ngcontent-%COMP%]   .node-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:middle;width:100%}.dataset-menu-button[_ngcontent-%COMP%]{height:25px;line-height:25px;margin:3px}@media screen and (max-device-width:480px){.mat-icon-button[_ngcontent-%COMP%]{width:34px}}"]}),It),Ct=["sliderInput"],Ot=function(t){return{left:t}};function Pt(t,e){if(1&t&&(r.Vb(0,"div",12),r.Vb(1,"div",13),r.Ic(2),r.Ub(),r.Ub()),2&t){var n=r.hc();r.nc("ngStyle",r.qc(2,Ot,n.bestValueLeftPos+"px")),r.Cb(2),r.Jc(n.round(n.bestValue))}}function St(t,e){if(1&t&&(r.Vb(0,"div",14),r.Vb(1,"div",13),r.Ic(2),r.Ub(),r.Ub()),2&t){var n=r.hc();r.nc("ngStyle",r.qc(2,Ot,n.defaultValueLeftPos+"px")),r.Cb(2),r.Jc(n.round(n.defaultValue))}}function kt(t,e){if(1&t&&(r.Vb(0,"span"),r.Ic(1),r.Ub()),2&t){var n=r.hc();r.Cb(1),r.Kc(" ",n.round(n.min)," ")}}function Tt(t,e){if(1&t&&(r.Vb(0,"span"),r.Ic(1),r.Ub()),2&t){var n=r.hc();r.Cb(1),r.Kc(" ",n.round(n.min+(n.max-n.min)/2)," ")}}function Lt(t,e){if(1&t&&(r.Vb(0,"span"),r.Ic(1),r.Ub()),2&t){var n=r.hc();r.Cb(1),r.Kc(" ",n.round(n.max)," ")}}var Mt,Rt=((Mt=function(){function t(){g(this,t),this.step=.01,this.valueChanges=new r.o,this.clickLike=new r.o,this.thumbIconLeftPos=0,this.bestValueLeftPos=0,this.defaultValueLeftPos=0,this.currentValue=0,this.defaultValue=0}return _(t,[{key:"ngOnInit",value:function(){this.currentValue=this.bestValue,this.defaultValue=this.value,this.calculateLeftPos(this.bestValue)}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout((function(){t.sliderInput.nativeElement.value=t.bestValue,t.calculateBestValuePos(),t.calculateDefaultValuePos(),t.calculateLeftPos(t.bestValue)}),0)}},{key:"onInput",value:function(){var t=+this.sliderInput.nativeElement.value;this.calculateLeftPos(t),this.currentValue=t,this.valueChanges.emit(this.currentValue)}},{key:"setLikeValue",value:function(){this.bestValue=this.currentValue,this.calculateBestValuePos(),this.calculateLeftPos(this.bestValue),this.clickLike.emit(this.bestValue)}},{key:"calculateBestValuePos",value:function(){this.bestValueLeftPos=this.round(this.sliderInput.nativeElement.clientWidth*((this.bestValue-this.min)/(this.max-this.min)))}},{key:"calculateDefaultValuePos",value:function(){this.defaultValueLeftPos=this.round(this.sliderInput.nativeElement.clientWidth*((this.defaultValue-this.min)/(this.max-this.min)))}},{key:"calculateLeftPos",value:function(t){var e,n=null===(e=this.sliderInput)||void 0===e?void 0:e.nativeElement.clientWidth,i=(t-this.min)/(this.max-this.min);this.thumbIconLeftPos=this.round(n*i-25*i),this.isMinMarkVisible=this.thumbIconLeftPos>25,this.isMiddleMarkVisible=this.thumbIconLeftPos<n/2-25||this.thumbIconLeftPos>n/2,this.isMaxMarkVisible=this.thumbIconLeftPos<n-25,this.isBestValueVisible=this.thumbIconLeftPos<this.bestValueLeftPos-25||this.thumbIconLeftPos>this.bestValueLeftPos,this.isDefaultValueVisible=this.thumbIconLeftPos<this.defaultValueLeftPos-25||this.thumbIconLeftPos>this.defaultValueLeftPos}},{key:"round",value:function(t){return Math.round(100*t)/100}},{key:"min",get:function(){return this._min},set:function(t){this._min=this.round(t)}},{key:"max",get:function(){return this._max},set:function(t){this._max=this.round(t)}},{key:"value",get:function(){return this._value},set:function(t){this._value=this.round(t)}},{key:"bestValue",get:function(){return this._bestValue},set:function(t){this._bestValue=this.round(t)}}]),t}()).\u0275fac=function(t){return new(t||Mt)},Mt.\u0275cmp=r.Jb({type:Mt,selectors:[["mol-threshold-slider"]],viewQuery:function(t,e){var n;1&t&&r.Nc(Ct,!0),2&t&&r.tc(n=r.ec())&&(e.sliderInput=n.first)},inputs:{min:"min",max:"max",step:"step",value:"value",bestValue:"bestValue",disabled:"disabled"},outputs:{valueChanges:"valueChanges",clickLike:"clickLike"},decls:15,vars:15,consts:[["class","slider-best-value",3,"ngStyle",4,"ngIf"],["class","slider-default-value",3,"ngStyle",4,"ngIf"],["type","range",1,"slider",3,"min","max","step","disabled","input"],["sliderInput",""],[1,"slider-thumb-info",3,"ngStyle"],[1,"slider-thumb-icon",3,"click"],[1,"slider-thumb-value"],[1,"slider-range-marks"],[1,"min-mark"],[4,"ngIf"],[1,"middle-mark"],[1,"max-mark"],[1,"slider-best-value",3,"ngStyle"],[1,"value"],[1,"slider-default-value",3,"ngStyle"]],template:function(t,e){1&t&&(r.Gc(0,Pt,3,4,"div",0),r.Gc(1,St,3,4,"div",1),r.Vb(2,"input",2,3),r.dc("input",(function(){return e.onInput()})),r.Ub(),r.Vb(4,"div",4),r.Vb(5,"div",5),r.dc("click",(function(){return e.setLikeValue()})),r.Ub(),r.Vb(6,"div",6),r.Ic(7),r.Ub(),r.Ub(),r.Vb(8,"div",7),r.Vb(9,"div",8),r.Gc(10,kt,2,1,"span",9),r.Ub(),r.Vb(11,"div",10),r.Gc(12,Tt,2,1,"span",9),r.Ub(),r.Vb(13,"div",11),r.Gc(14,Lt,2,1,"span",9),r.Ub(),r.Ub()),2&t&&(r.nc("ngIf",e.isBestValueVisible&&!e.disabled),r.Cb(1),r.nc("ngIf",e.isDefaultValueVisible&&!e.disabled),r.Cb(1),r.nc("min",e.min)("max",e.max)("step",e.step)("disabled",e.disabled),r.Cb(2),r.nc("ngStyle",r.qc(13,Ot,e.thumbIconLeftPos+"px")),r.Cb(1),r.Gb("is-best",e.currentValue===e.bestValue),r.Cb(2),r.Kc(" ",e.round(e.currentValue)," "),r.Cb(3),r.nc("ngIf",e.isMinMarkVisible),r.Cb(2),r.nc("ngIf",e.isMiddleMarkVisible),r.Cb(2),r.nc("ngIf",e.isMaxMarkVisible))},directives:[tt.t,tt.w],styles:['[_nghost-%COMP%]{display:block;width:100%;height:82px;position:relative;overflow:visible;z-index:1;padding-top:40px;padding-bottom:26px;margin-top:12px}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;height:5px;background:linear-gradient(270deg,#00692d,#348a55 50.04%,#e5f5ec);outline:none;border-radius:0}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]:disabled{background:#6d7278}[_nghost-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{position:relative;-webkit-appearance:none;appearance:none;width:25px;height:25px;border-radius:50%;border:0;background:url(https://mapoflife.github.io/experts-next/icon-slider.67d48475bc8dbb9cd1cb.svg);background-size:contain;cursor:-webkit-grab;cursor:grab;overflow:visible;pointer-events:none}[_nghost-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb:active{cursor:-webkit-grabbing;cursor:grabbing}[_nghost-%COMP%]   .slider-thumb-info[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;justify-content:space-between;height:80px;top:0;width:25px;align-items:center;z-index:2;transform:rotate(1turn);pointer-events:none}[_nghost-%COMP%]   .slider-thumb-info[_ngcontent-%COMP%] > .slider-thumb-icon[_ngcontent-%COMP%]{position:relative;width:36px;height:36px;pointer-events:all;background:url(https://mapoflife.github.io/experts-next/icon-thumbsup.47c92c6002d25b843819.svg);background-size:cover;z-index:2}[_nghost-%COMP%]   .slider-thumb-info[_ngcontent-%COMP%] > .slider-thumb-icon.is-best[_ngcontent-%COMP%]{background:url(https://mapoflife.github.io/experts-next/icon-thumbsup-green.0706b99d697f723f9839.svg);background-size:cover}[_nghost-%COMP%]   .slider-thumb-info[_ngcontent-%COMP%] > .slider-thumb-value[_ngcontent-%COMP%]{color:#000;font-family:Fira Sans;font-size:10px;font-weight:300;letter-spacing:0;line-height:12px}[_nghost-%COMP%]   .slider-best-value[_ngcontent-%COMP%]{position:absolute;top:47px;display:block;height:8px;width:1px;background:#333;box-sizing:border-box;z-index:0}[_nghost-%COMP%]   .slider-best-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#000;font-family:Fira Sans;font-size:10px;font-weight:300;letter-spacing:0;line-height:12px;display:flex;justify-content:center;margin-top:12px}[_nghost-%COMP%]   .slider-best-value[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-17px;left:-6px;width:13px;height:13px;background-image:url(https://mapoflife.github.io/experts-next/icon-like.c9766e4ce04606187f36.svg);background-size:contain}[_nghost-%COMP%]   .slider-default-value[_ngcontent-%COMP%]{position:absolute;top:47px;display:block;height:8px;width:1px;background:#333;box-sizing:border-box;z-index:0}[_nghost-%COMP%]   .slider-default-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#000;font-family:Fira Sans;font-size:10px;font-weight:300;letter-spacing:0;line-height:12px;display:flex;justify-content:center;margin-top:12px}[_nghost-%COMP%]   .slider-range-marks[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:6px}[_nghost-%COMP%]   .slider-range-marks[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;width:18px;height:17px;line-height:17px;font-size:14px;color:#000;font-family:Fira Sans;font-weight:300;letter-spacing:0}[_nghost-%COMP%]   .slider-range-marks[_ngcontent-%COMP%]   .min-mark[_ngcontent-%COMP%]{justify-content:flex-start}[_nghost-%COMP%]   .slider-range-marks[_ngcontent-%COMP%]   .middle-mark[_ngcontent-%COMP%]{justify-content:center}[_nghost-%COMP%]   .slider-range-marks[_ngcontent-%COMP%]   .max-mark[_ngcontent-%COMP%]{justify-content:flex-end}']}),Mt),At=n("+Tre");function Dt(t,e){if(1&t&&(r.Vb(0,"div",12),r.Vb(1,"h2"),r.Ic(2),r.Ub(),r.Ub()),2&t){var n=r.hc();r.Cb(2),r.Lc("",n.title,": ",n.taxa,"")}}function Ft(t,e){if(1&t&&(r.Vb(0,"div",12),r.Vb(1,"h2"),r.Ic(2),r.Ub(),r.Ub()),2&t){var n=r.hc();r.Cb(2),r.Jc(n.title)}}function Gt(t,e){if(1&t&&(r.Vb(0,"div",29),r.Ic(1),r.Ub()),2&t){var n=r.hc().$implicit;r.Cb(1),r.Kc(" (",n.features.getLength(),") ")}}function jt(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",31),r.Vb(1,"div",32),r.Ic(2),r.Ub(),r.Vb(3,"button",33),r.dc("click",(function(){r.yc(n);var t=e.$implicit,i=r.hc(2).$implicit;return r.hc(2).openEditAttributeModal(i.speciesScientificName,t.feature.ol_uid,null==t?null:t.attributes)})),r.Ic(4," Edit attributes "),r.Ub(),r.Ub()}if(2&t){var i=e.index;r.Cb(2),r.Kc("Feature ",i+1,"")}}function Ut(t,e){if(1&t&&(r.Tb(0),r.Gc(1,jt,5,1,"div",30),r.Sb()),2&t){var n=r.hc().$implicit;r.Cb(1),r.nc("ngForOf",n.features.getArray())}}function Vt(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",18),r.Vb(1,"div",19),r.Vb(2,"div",20),r.dc("click",(function(){r.yc(n);var t=e.$implicit;return r.hc(2).setActiveSpecies(t.speciesScientificName)})),r.Vb(3,"div",21),r.Vb(4,"div",22),r.Vb(5,"span",23),r.dc("click",(function(){r.yc(n);var t=e.$implicit;return r.hc(2).toggleSpeciesFeatures(t.speciesScientificName)})),r.Ic(6," keyboard_arrow_up "),r.Ub(),r.Ub(),r.Vb(7,"div",24),r.Ic(8),r.Ub(),r.Gc(9,Gt,2,1,"div",25),r.Qb(10,"div",26),r.Ub(),r.Vb(11,"div",27),r.Vb(12,"span",28),r.dc("click",(function(){r.yc(n);var t=e.$implicit;return r.hc(2).deleteSelectedSpecies(t.speciesScientificName)})),r.Ic(13," delete "),r.Ub(),r.Ub(),r.Ub(),r.Gc(14,Ut,2,1,"ng-container",6),r.Ub(),r.Ub()}if(2&t){var i=e.$implicit,o=r.hc(2);r.Cb(1),r.Gb("active",o.isActiveSpecies(i.speciesScientificName)),r.Cb(4),r.Gb("rotate",i.isOpenFeatures),r.Cb(3),r.Kc(" ",i.speciesScientificName," "),r.Cb(1),r.nc("ngIf",0!==i.features.length),r.Cb(5),r.nc("ngIf",i.isOpenFeatures)}}function Bt(t,e){if(1&t&&(r.Tb(0),r.Gc(1,Vt,15,7,"div",17),r.Sb()),2&t){var n=r.hc();r.Cb(1),r.nc("ngForOf",n.selectedSpecies)}}function zt(t,e){if(1&t){var n=r.Wb();r.Tb(0),r.Vb(1,"mol-search-select",34),r.dc("selectedItem",(function(t){return r.yc(n),r.hc().selectedItem(t)})),r.Ub(),r.Sb()}if(2&t){var i=r.hc(),o=r.uc(12);r.Cb(1),r.nc("title","Species")("searchFn",i.speciesSearchFn)("displayFn",i.speciesDisplayFn)("defaultValue",i.activeSpeciesScientificName)("itemTemplate",o)}}function qt(t,e){if(1&t&&(r.Vb(0,"div"),r.Ic(1),r.Ub(),r.Vb(2,"div"),r.Ic(3),r.Ub()),2&t){var n=e.$implicit;r.Cb(1),r.Jc(n.scientificname),r.Cb(2),r.Jc(n.vernacular)}}function Yt(t,e){if(1&t){var n=r.Wb();r.Tb(0),r.Vb(1,"mol-search-select",39),r.dc("selectedItem",(function(t){return r.yc(n),r.hc(2).selectedItem(t)})),r.Ub(),r.Sb()}if(2&t){var i=r.hc(2),o=r.uc(12);r.Cb(1),r.nc("title","")("searchFn",i.speciesSearchFn)("displayFn",i.speciesDisplayFn)("itemTemplate",o)}}function Xt(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",35),r.Vb(1,"div",36),r.Vb(2,"span",37),r.dc("click",(function(){return r.yc(n),r.hc().toggleAddMoreSpecies()})),r.Ic(3," add "),r.Ub(),r.Vb(4,"div",38),r.Ic(5,"Add new species"),r.Ub(),r.Ub(),r.Gc(6,Yt,2,4,"ng-container",6),r.Ub()}if(2&t){var i=r.hc();r.Cb(6),r.nc("ngIf",i.isAddMoreSpecies)}}function Wt(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",40),r.Vb(1,"mol-button",41),r.dc("click",(function(){return r.yc(n),r.hc().openSavingModal()})),r.Ub(),r.Ub()}if(2&t){var i=r.hc();r.Cb(1),r.nc("title","Save dataset")("disabled",i.isDialogOpen||i.isEmptyFeatures)}}function Ht(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",42),r.Vb(1,"div",43),r.Ic(2),r.Ub(),r.Vb(3,"mol-species-dataset-menu",44),r.dc("selectedDatasetIdsChanged",(function(t){return r.yc(n),r.hc().changedSelectedDetailedDatasetIds(t)}))("zoomToDatasetExtent",(function(t){return r.yc(n),r.hc().zoomToDatasetExtent(t)}))("selectedOccurrenceDatasetIdsChanged",(function(t){return r.yc(n),r.hc().changedSelectedOccurrenceDatasetIds(t)})),r.Ub(),r.Ub()}if(2&t){var i=r.hc();r.Cb(2),r.Kc(" Sources for ",i.activeSpeciesScientificName," "),r.Cb(1),r.nc("scientificname",i.activeSpeciesScientificName)}}function Zt(t,e){1&t&&(r.Vb(0,"p",45),r.Ic(1," Select a model and a threshold and vote positive or negative. "),r.Ub())}function Kt(t,e){1&t&&(r.Vb(0,"p",45),r.Ic(1," No species distribution models available for this species. "),r.Ub())}function Jt(t,e){1&t&&(r.Vb(0,"span",52),r.Ic(1,"stars"),r.Ub())}function Qt(t,e){1&t&&(r.Vb(0,"span",53),r.Ic(1,"highlight_off"),r.Ub())}function $t(t,e){if(1&t&&r.Qb(0,"img",64),2&t){var n=r.hc(3);r.nc("src",n.modelThumb,r.Ac)}}function te(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",71),r.dc("click",(function(){r.yc(n);var t=r.hc(3).index;return r.hc().toggleBestModel(t)})),r.Vb(1,"span",72),r.Ic(2,"stars"),r.Ub(),r.Vb(3,"div",73),r.Ic(4),r.Ub(),r.Ub()}if(2&t){var i=r.hc(3).$implicit;r.Cb(1),r.nc("ngClass",i.isBest?"material-icons":"material-icons-outlined"),r.Cb(3),r.Kc(" ",i.isBest?"Unmark best model":"Mark as best model"," ")}}function ee(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",65),r.Vb(1,"div",66),r.Ic(2,"Choose a suitability threshold:"),r.Ub(),r.Vb(3,"mol-threshold-slider",67),r.dc("valueChanges",(function(t){r.yc(n);var e=r.hc(2).index;return r.hc().clickedModelThreshold(t,e)}))("clickLike",(function(t){r.yc(n);var e=r.hc(2).index;return r.hc().clickModelLike(t,e)})),r.Ub(),r.Vb(4,"div",68),r.Vb(5,"mat-checkbox",69),r.dc("click",(function(t){r.yc(n);var e=r.hc(2).index;return r.hc().toggleBinaryModel(t,e)})),r.Ic(6," Binary"),r.Ub(),r.Ub(),r.Gc(7,te,5,2,"div",70),r.Ub()}if(2&t){var i=r.hc(2).$implicit,o=r.hc();r.Cb(3),r.nc("min",i.minSuitability)("max",i.maxSuitability)("value",i.suitability)("bestValue",i.temporarySuitability),r.Cb(2),r.nc("checked",i.isBinary)("checked",i.isBinary),r.Cb(2),r.nc("ngIf",!o.isBestModelSelected()||i.isBest)}}function ne(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",54),r.Vb(1,"div",55),r.Gc(2,$t,1,1,"img",56),r.Vb(3,"div",57),r.Vb(4,"div",58),r.dc("click",(function(){r.yc(n);var t=r.hc().index;return r.hc().setModelRetain(t)})),r.Vb(5,"span",59),r.Ic(6," check_circle "),r.Ub(),r.Vb(7,"div",60),r.Ic(8,"Retain"),r.Ub(),r.Ub(),r.Vb(9,"div",61),r.dc("click",(function(){r.yc(n);var t=r.hc().index;return r.hc().setModelDiscard(t)})),r.Vb(10,"span",62),r.Ic(11," highlight_off "),r.Ub(),r.Vb(12,"div",60),r.Ic(13,"Discard"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Gc(14,ee,8,7,"div",63),r.Ub()}if(2&t){var i=r.hc().$implicit,o=r.hc();r.Cb(2),r.nc("ngIf",!!o.modelThumb),r.Cb(3),r.nc("ngClass","RETAINED"===i.status?"material-icons":"material-icons-outlined"),r.Cb(5),r.nc("ngClass","DISCARDED"===i.status?"material-icons-round":"material-icons"),r.Cb(4),r.nc("ngIf","RETAINED"===i.status||"BEST"===i.status)}}function ie(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",46),r.Vb(1,"div",47),r.Vb(2,"div",21),r.Vb(3,"span",23),r.dc("click",(function(){r.yc(n);var t=e.index;return r.hc().toggleModel(t)})),r.Ic(4," keyboard_arrow_up "),r.Ub(),r.Vb(5,"div",48),r.Ic(6),r.Ub(),r.Gc(7,Jt,2,0,"span",49),r.Gc(8,Qt,2,0,"span",50),r.Ub(),r.Vb(9,"div",27),r.Ic(10,"\u2139"),r.Ub(),r.Ub(),r.Gc(11,ne,15,4,"div",51),r.Ub()}if(2&t){var i=e.$implicit,o=e.index;r.Gb("active",i.isOpen),r.Cb(3),r.Gb("rotate",i.isOpen),r.Cb(3),r.Kc("Model ",o+1,""),r.Cb(1),r.nc("ngIf",i.isBest),r.Cb(1),r.nc("ngIf","DISCARDED"===i.status),r.Cb(3),r.nc("ngIf",i.isOpen)}}var re,oe=((re=function(){function t(e,n,i,s,u,l,c){var h=this;g(this,t),this.speciesService=e,this.userDatasetService=n,this.authService=i,this.snackBar=s,this.dialog=u,this.actRoute=l,this.router=c,this.drawedPolygon=new o.a(null),this.updatedPolygons=new o.a(null),this.deletedPolygon=new r.o(null),this.setActiveLayer=new o.a(null),this.deleteLayer=new o.a(null),this.selectedDetailedDatasetIds=new o.a([]),this.selectedOccurrenceDatasetIds=new o.a([]),this.zoomToDatasetExtentData=new o.a(null),this.isCanClose=new r.o(!0),this.updateSpeciesModel=new r.o,this.disableSpeciesModel=new r.o,this.deletePolygon=new r.o(null),this.unselectSelectedPolygons=new r.o,this.setupVotingMode=new r.o,this.createPolygon=new r.o(null),this.isOpenSidebar=!0,this.isAddMoreSpecies=!1,this.latestModalAttributes={presence:a.d[0],origin:a.c[0],season:a.e[0],temporalScope:{from:Object(K.a)(new Date(2e3,0,1).toUTCString()),to:Object(K.a)((new Date).toUTCString())}},this.isVotingMode=!1,this.selectedSpecies=[],this.activeSpeciesScientificName="",this.title="",this.taxa="",this.userFullName="",this.models=[],this.isSpeciesModelFetched=!1,this.authService.currentUser.subscribe((function(t){h.userFullName=t.fullname}))}return _(t,[{key:"selectedItem",value:function(t){this.setActiveSpecies(t.scientificname)}},{key:"changedSelectedDetailedDatasetIds",value:function(t){this.selectedDetailedDatasetIds.next(t)}},{key:"zoomToDatasetExtent",value:function(t){this.zoomToDatasetExtentData.next(t)}},{key:"changedSelectedOccurrenceDatasetIds",value:function(t){this.selectedOccurrenceDatasetIds.next(t)}},{key:"ngOnInit",value:function(){var t=this;this.datasetId=this.actRoute.snapshot.params.datasetId,"vote"===this.datasetId?(this.title=this.actRoute.snapshot.queryParamMap.get("dataset"),this.setupVotingMode.emit(),this.isVotingMode=!0,this.speciesService.getSpeciesModels(this.title).subscribe((function(e){t.isSpeciesModelFetched=!0,t.models=e.map((function(t){return{molid:t.molid,maxSuitability:t.vis.max,minSuitability:t.vis.min,suitability:t.vis.default,isBest:"BEST"===t.user.status,isOpen:!1,isBinary:!0,temporarySuitability:t.user.threshold||t.vis.default,status:t.user.status}}))}))):(this.setActiveSpecies(this.actRoute.snapshot.queryParams.species),this.userDatasetService.overview(this.datasetId).subscribe((function(e){t.taxa=e[0].summary.taxa,t.title=e[0].summary.dataset_title,t.dataset=e[0],t.speciesService.availableTaxa().subscribe((function(e){var n=e.find((function(e){return e.title===t.taxa})).taxa;t.speciesSearchFn=function(e){return t.speciesService.search(e,n)}}))})),this.userDatasetService.records(this.datasetId).subscribe((function(e){var n=Object(H.uniqBy)(e.records,"scientificname"),i=n.map((function(t){return t.scientificname}));n.map((function(n){return Object(s.b)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.userDatasetService.speciesGeometry(this.datasetId,n.scientificname).subscribe((function(t){t.records.map((function(t){var n,r,o,s=new v.a(t.geom.coordinates);s.transform("EPSG:4326","EPSG:3857");var c=e.records.find((function(e){return e.recid===t.recid})),h={presence:{value:+c.metadata.presence,label:null===(n=a.d.find((function(t){return t.value===+c.metadata.presence})))||void 0===n?void 0:n.label},origin:{value:c.metadata.origin,label:null===(r=a.c.find((function(t){return t.value===c.metadata.origin})))||void 0===r?void 0:r.label},season:{value:+c.metadata.season,label:null===(o=a.e.find((function(t){return t.value===+c.metadata.season})))||void 0===o?void 0:o.label},temporalScope:{from:Object(K.a)(c.metadata.temporal_scope_start),to:Object(K.a)(c.metadata.temporal_scope_end)}},f=new u.a(s);-1===i.selectedSpecies.findIndex((function(t){return t.speciesScientificName===c.scientificname}))?i.selectedSpecies.push({features:new l.a([{feature:f,molidId:t.recid,geomId:t.geom_id,featureId:f.ol_uid,attributes:h}]),isOpenFeatures:i.activeSpeciesScientificName===c.scientificname,speciesScientificName:c.scientificname}):i.selectedSpecies.find((function(t){return t.speciesScientificName===c.scientificname})).features.push({feature:f,featureId:f.ol_uid,geomId:t.geom_id,molidId:t.recid,attributes:h}),i.createPolygon.emit({key:c.scientificname,value:f})}))}));case 1:case"end":return t.stop()}}),t,this)})))}));var r=t.actRoute.snapshot.queryParams.species;i.includes(r)?t.setActiveSpecies(r):t.setActiveSpecies(i[0])})),this.speciesDisplayFn=function(t){return null==t?void 0:t.scientificname},this.speciesSearchFn=function(e){return t.speciesService.search(e)},this.setActiveLayer.subscribe((function(e){e&&(t.isSpeciesModelFetched=!1,t.speciesService.getSpeciesModels(e).subscribe((function(e){t.isSpeciesModelFetched=!0,t.models=e.map((function(t){return{molid:t.molid,maxSuitability:t.vis.max,minSuitability:t.vis.min,suitability:t.vis.default,isBest:"BEST"===t.user.status,isOpen:!1,isBinary:!0,temporarySuitability:t.user.threshold||t.vis.default,status:t.user.status}}))})))})),this.drawedPolygon.subscribe((function(e){if(e){var n=e.key,i=e.value,r=t.dialog.open(a.a,{data:t.latestModalAttributes,height:"700px",position:{left:"50px"}});t.isCanClose.emit(!1),r.afterClosed().toPromise().then((function(e){if(e&&e.attributes){if(n===t.activeSpeciesScientificName){var r=i.ol_uid,o=y.a(),s=y.a();t.latestModalAttributes=e.attributes,t.isActiveSpesiecInSelectedSpecies()?t.selectedSpecies.find((function(t){return t.speciesScientificName===n})).features.push({feature:i,molidId:o,geomId:s,featureId:r,attributes:e.attributes}):(t.selectedSpecies.push({features:new l.a([{feature:i,molidId:o,geomId:s,featureId:r,attributes:e.attributes}]),isOpenFeatures:!1,speciesScientificName:t.activeSpeciesScientificName}),t.isAddMoreSpecies=!1),t.addFeatureToDataset(o,i,e.attributes).then((function(){return t.isCanClose.emit(!0)}))}}else t.isCanClose.emit(!0),t.deletePolygon.next(i.ol_uid)}))}})),this.updatedPolygons.subscribe((function(e){if(e){t.isCanClose.emit(!1);var n=e.key;e.value.getArray().map((function(e){var i=t.selectedSpecies.find((function(t){return t.speciesScientificName===n})).features.getArray().find((function(t){return t.feature.getId()===e.getId()}));i.feature=e,t.addFeatureToDataset(i.molidId,e,i.attributes,i.geomId).then((function(){return t.isCanClose.emit(!0)}),(function(){return t.snackBar.open("API Error: Error on saving feature to dataset","Dismiss")}))}))}})),this.deletedPolygon.subscribe((function(e){if(e){t.isCanClose.emit(!1);var n=e.key,i=e.value,r=t.selectedSpecies.find((function(t){return t.speciesScientificName===n})),o=r.features.getArray().find((function(t){return t.feature.ol_uid===i.ol_uid}));t.userDatasetService.deleteFeature(t.datasetId,o.molidId).subscribe((function(){t.isCanClose.emit(!0),r.features.remove(o),0===r.features.getLength()&&(t.selectedSpecies.splice(t.selectedSpecies.indexOf(r),1),t.isCanClose.emit(0===t.selectedSpecies.length))}),(function(){return t.snackBar.open("API Error: Error on deleting feature from dataset","Dismiss")}))}})))}},{key:"isActiveSpesiecInSelectedSpecies",value:function(){var t=this;return this.selectedSpecies.some((function(e){return e.speciesScientificName===t.activeSpeciesScientificName}))}},{key:"isActiveSpecies",value:function(t){return this.activeSpeciesScientificName&&this.activeSpeciesScientificName===t}},{key:"setActiveSpecies",value:function(t){if(this.activeSpeciesScientificName!==t)return this.activeSpeciesScientificName=t,this.selectedDetailedDatasetIds.next([]),this.selectedOccurrenceDatasetIds.next([]),this.disableSpeciesModel.emit(),this.router.navigate([],{relativeTo:this.actRoute,queryParamsHandling:"merge",queryParams:{species:t}}),this.openSpeciesFeatureAndCloseAnother(t),this.setActiveLayer.next(t)}},{key:"addFeatureToDataset",value:function(t,e,n,i){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,s,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=i||y.a(),s={geom_id:o,wkt:(new W).writeFeature(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})},a=[{molid:t,metadata_field:"scientificname",metadata_value:this.activeSpeciesScientificName},{molid:t,metadata_field:"recordedby",metadata_value:this.userFullName}],r.abrupt("return",(Object.entries(n).map((function(e){var n=f(e,2),i=n[0],r=n[1];null!==r&&(r.value?a.push({molid:t,metadata_field:i,metadata_value:r.value.toString()}):r.from?(a.push({molid:t,metadata_field:"temporal_scope_start",metadata_value:Object(K.b)(r.from)}),a.push({molid:t,metadata_field:"temporal_scope_end",metadata_value:Object(K.b)(r.to)})):a.push({molid:t,metadata_field:i,metadata_value:r.toString()}))})),this.userDatasetService.addFeature({molid:t,geom_id:s.geom_id,dataset_id:this.datasetId,product_type:"range",scientificname:this.activeSpeciesScientificName},a,{geom_id:o,wkt:s.wkt}).toPromise()));case 2:case"end":return r.stop()}}),r,this)})))}},{key:"openEditAttributeModal",value:function(t,e,n){var i=this;this.dialog.open(a.a,{data:Object.assign(Object.assign({},n),{isEdit:!0}),position:{left:"50px"}}).afterClosed().toPromise().then((function(n){if(n&&n.attributes){var r=i.selectedSpecies.find((function(e){return e.speciesScientificName===t})).features.getArray().find((function(t){return t.feature.ol_uid===e}));r.attributes=n.attributes,i.addFeatureToDataset(r.molidId,r.feature,n.attributes)}else if(n&&n.isDelete){var o=i.selectedSpecies.find((function(e){return e.speciesScientificName===t})).features.getArray().findIndex((function(t){return t.feature.ol_uid===e})),s=i.selectedSpecies.find((function(e){return e.speciesScientificName===t})).features.getArray()[o];i.userDatasetService.deleteFeature(i.datasetId,s.molidId).toPromise().then((function(){i.selectedSpecies.find((function(e){return e.speciesScientificName===t})).features.getArray().splice(o,1),i.deletePolygon.next(s.feature.ol_uid)}))}}))}},{key:"openSavingModal",value:function(){var t=this;if(!this.isDialogOpen&&!this.isEmptyFeatures){this.unselectSelectedPolygons.emit();var e={datasetId:this.datasetId,title:this.title,description:Object(H.get)(Object(H.find)(this.dataset.metadata[0].children,{id:"description"}),"value",""),notes:Object(H.get)(Object(H.find)(this.dataset.metadata[0].children,{id:"notes"}),"value",""),project_url:Object(H.get)(Object(H.find)(this.dataset.metadata[0].children,{id:"project_url"}),"value",""),citation:Object(H.get)(Object(H.find)(this.dataset.metadata[0].children,{id:"citation_formatted"}),"value",""),release_date:this.dataset.summary.release_date,keywords:Object(H.get)(Object(H.find)(this.dataset.metadata[0].children,{id:"keywords"}),"value",""),license:Object(H.get)(Object(H.find)(this.dataset.metadata[0].children,{id:"license"}),"value",null),license_holder:Object(H.get)(Object(H.find)(this.dataset.metadata[0].children,{id:"license_holder"}),"value",""),allow_download:this.dataset.summary.allow_download,public:this.dataset.summary.public,mol_modeling:this.dataset.summary.mol_modeling,taxa:this.taxa,species:this.selectedSpecies};this.dialog.open(p.a,{width:"600px",height:"630px",hasBackdrop:!1,data:e}).afterClosed().toPromise().then((function(e){e&&(t.isCanClose.next(!0),t.router.navigate(["dataset",e]))}))}}},{key:"toggleSidebar",value:function(){this.isOpenSidebar=!this.isOpenSidebar}},{key:"toggleAddMoreSpecies",value:function(){this.isAddMoreSpecies=!this.isAddMoreSpecies}},{key:"toggleSpeciesFeatures",value:function(t){var e,n=h(this.selectedSpecies);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.speciesScientificName===t&&(i.isOpenFeatures=!i.isOpenFeatures)}}catch(r){n.e(r)}finally{n.f()}}},{key:"openSpeciesFeatureAndCloseAnother",value:function(t){var e,n=h(this.selectedSpecies);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.isOpenFeatures=i.speciesScientificName===t}}catch(r){n.e(r)}finally{n.f()}}},{key:"deleteSelectedSpecies",value:function(t){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.dialog.open(Z.a,{data:{title:"Deleting species",question:"Are you sure want to delete this species?"}}).afterClosed().toPromise().then((function(e){return Object(s.b)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var i,r,o,a,u,l,c,h=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=27;break}n.prev=1,a=Object(s.a)(this.selectedSpecies.entries());case 3:return n.next=5,a.next();case 5:if((o=n.sent).done){n.next=10;break}u=f(o.value,2),l=u[0],(c=u[1]).speciesScientificName===t&&(this.deleteLayer.next(t),c.features.getArray().map((function(t){h.userDatasetService.deleteFeature(h.datasetId,t.molidId).toPromise()})),this.selectedSpecies.splice(l,1),this.isCanClose.emit(0===this.selectedSpecies.length));case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),i={error:n.t0};case 15:if(n.prev=15,n.prev=16,n.t1=o&&!o.done&&(r=a.return),!n.t1){n.next=21;break}return n.next=21,r.call(a);case 21:if(n.prev=21,!i){n.next=24;break}throw i.error;case 24:return n.finish(21);case 25:return n.finish(15);case 26:0!==this.selectedSpecies.length&&this.setActiveSpecies(this.selectedSpecies[0].speciesScientificName);case 27:case"end":return n.stop()}}),n,this,[[1,12,15,26],[16,,21,25]])})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"toggleModel",value:function(t){var e=this;this.models.map((function(n,i){i!==t&&n.isOpen&&(n.isOpen=!1,e.disableSpeciesModel.emit())}));var n=this.models[t];n.isOpen?(n.isOpen=!1,this.disableSpeciesModel.emit()):(n.isOpen=!0,this.speciesService.getSpeciesModelThumb(n.molid,340,340).subscribe((function(t){return e.modelThumb=t})),this.updateSpeciesModel.emit({threshold_raw:n.temporarySuitability,molid:n.molid,as_binary:n.isBinary}))}},{key:"toggleBestModel",value:function(t){var e,n=this,i=h(this.models.entries());try{for(i.s();!(e=i.n()).done;){var r=f(e.value,2),o=r[0],s=r[1];o===t?s.isBest?(s.isBest=!1,s.status=d.a.RETAINED,this.speciesService.setSpeciesModelVote(s.molid,null,s.status).subscribe((function(){return n.snackBar.open("Your vote for best model has been counted."," Dismiss")}),(function(){return n.snackBar.open("Something went wrong on voting","Dismiss")}))):(s.isBest=!0,s.status=d.a.BEST,this.speciesService.setSpeciesModelVote(s.molid,null,s.status).subscribe((function(){return n.snackBar.open("Your vote for best model has been counted."," Dismiss")}),(function(){return n.snackBar.open("Something went wrong on voting","Dismiss")}))):(s.isBest=!1,s.status===d.a.BEST&&(s.status=d.a.RETAINED))}}catch(a){i.e(a)}finally{i.f()}}},{key:"clickedModelThreshold",value:function(t,e){var n=this.models[e];this.updateSpeciesModel.emit({threshold_raw:t,molid:n.molid,as_binary:n.isBinary})}},{key:"setModelRetain",value:function(t){var e=this,n=this.models[t];n.status=d.a.RETAINED,n.isBest=!1,this.speciesService.setSpeciesModelVote(n.molid,null,n.status).subscribe((function(){return e.snackBar.open("Your vote to keep this model has been counted."," Dismiss")}),(function(){return e.snackBar.open("Something went wrong on voting","Dismiss")}))}},{key:"setModelDiscard",value:function(t){var e=this,n=this.models[t];n.status=d.a.DISCARDED,this.disableSpeciesModel.emit(),n.isBest=!1,n.isOpen=!1,this.speciesService.setSpeciesModelVote(n.molid,null,n.status).subscribe((function(){return e.snackBar.open("Your vote to discard this model has been counted."," Dismiss")}),(function(){return e.snackBar.open("Something went wrong on voting","Dismiss")}))}},{key:"toggleBinaryModel",value:function(t,e){t.preventDefault(),this.snackBar.open("Displaying SDM`s in non-binary mode is planned in future updates.","Dismiss")}},{key:"clickModelLike",value:function(t,e){var n=this,i=this.models[e];i.suitability=t,this.speciesService.setSpeciesModelVote(i.molid,i.suitability,i.status).subscribe((function(){return n.snackBar.open("You have chosen ".concat(i.suitability," as the best threshold for this model.")," Dismiss")}),(function(){return n.snackBar.open("Something went wrong on voting","Dismiss")}))}},{key:"isBestModelSelected",value:function(){return!!this.models.find((function(t){return t.isBest}))}},{key:"isDialogOpen",get:function(){return 0!==this.dialog.openDialogs.length}},{key:"isEmptyFeatures",get:function(){return 0===this.selectedSpecies.length}},{key:"isSpeciesSelected",get:function(){return 0!==this.selectedSpecies.length}}]),t}()).\u0275fac=function(t){return new(t||re)(r.Pb(c.g),r.Pb(c.k),r.Pb(c.b),r.Pb(J.a),r.Pb(Q.b),r.Pb($.a),r.Pb($.f))},re.\u0275cmp=r.Jb({type:re,selectors:[["mol-sidebar"]],inputs:{drawedPolygon:"drawedPolygon",updatedPolygons:"updatedPolygons",deletedPolygon:"deletedPolygon"},outputs:{setActiveLayer:"setActiveLayer",deleteLayer:"deleteLayer",selectedDetailedDatasetIds:"selectedDetailedDatasetIds",selectedOccurrenceDatasetIds:"selectedOccurrenceDatasetIds",zoomToDatasetExtentData:"zoomToDatasetExtentData",isCanClose:"isCanClose",updateSpeciesModel:"updateSpeciesModel",disableSpeciesModel:"disableSpeciesModel",deletePolygon:"deletePolygon",unselectSelectedPolygons:"unselectSelectedPolygons",setupVotingMode:"setupVotingMode",createPolygon:"createPolygon"},decls:25,vars:14,consts:[[1,"sidebar__wrapper"],[1,"heading"],["routerLink","/dashboard",1,"go-back"],[1,"material-icons","go-back-icon"],[1,"go-back-title"],["class","title",4,"ngIf"],[4,"ngIf"],["speciesSearchTemplate",""],["class","add-new-species__wrapper",4,"ngIf"],["class","button-wrapper",4,"ngIf"],["class","sources__wrapper",4,"ngIf"],[1,"models__wrapper"],[1,"title"],["class","description",4,"ngIf"],["class","model-item",3,"active",4,"ngFor","ngForOf"],[1,"toggle-btn",3,"click"],[1,"material-icons","arrow-left"],["class","species-list",4,"ngFor","ngForOf"],[1,"species-list"],[1,"species-item"],[1,"species-name__wrapper",3,"click"],[1,"left-part"],[1,"species-arrow"],[1,"material-icons","arrow-up",3,"click"],[1,"species-name"],["class","species-features-amount",4,"ngIf"],[1,"species-color"],[1,"right-part"],[1,"species-delete","material-icons","delete",3,"click"],[1,"species-features-amount"],["class","species-features",4,"ngFor","ngForOf"],[1,"species-features"],[1,"feature-number"],[1,"sidebar_edit-attribute-btn",3,"click"],["theme","light",3,"title","searchFn","displayFn","defaultValue","itemTemplate","selectedItem"],[1,"add-new-species__wrapper"],[1,"add-new-species-title__wrapper"],[1,"material-icons","add",3,"click"],[1,"add-new-species-title"],["theme","light",3,"title","searchFn","displayFn","itemTemplate","selectedItem"],[1,"button-wrapper"],["inverseStyle","true",3,"title","disabled","click"],[1,"sources__wrapper"],[1,"sources-title"],[3,"scientificname","selectedDatasetIdsChanged","zoomToDatasetExtent","selectedOccurrenceDatasetIdsChanged"],[1,"description"],[1,"model-item"],[1,"model-title__wrapper"],[1,"model-title"],["class","material-icons stars star-icon","md-16","",4,"ngIf"],["class","material-icons highlight_off button-icon","md-16","",4,"ngIf"],["class","model-content__wrapper",4,"ngIf"],["md-16","",1,"material-icons","stars","star-icon"],["md-16","",1,"material-icons","highlight_off","button-icon"],[1,"model-content__wrapper"],[1,"model-map-image"],[3,"src",4,"ngIf"],[1,"buttons__wrapper"],[1,"button","retain",3,"click"],[1,"check_circle","button-icon",3,"ngClass"],[1,"button-text"],[1,"button","discard",3,"click"],[1,"highlight_off","button-icon",3,"ngClass"],["class","model-subcontent__wrapper",4,"ngIf"],[3,"src"],[1,"model-subcontent__wrapper"],[1,"subtitle"],[3,"min","max","value","bestValue","valueChanges","clickLike"],[1,"binary-checkbox"],["color","primary",1,"radio-button",3,"checked","click"],["class","best-model-star",3,"click",4,"ngIf"],[1,"best-model-star",3,"click"],[1,"stars","star-icon",3,"ngClass"],[1,"star-text"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"a",2),r.Vb(3,"span",3),r.Ic(4," arrow_back "),r.Ub(),r.Vb(5,"span",4),r.Ic(6," Dashboard "),r.Ub(),r.Ub(),r.Gc(7,Dt,3,2,"div",5),r.Gc(8,Ft,3,1,"div",5),r.Gc(9,Bt,2,1,"ng-container",6),r.Gc(10,zt,2,5,"ng-container",6),r.Gc(11,qt,4,2,"ng-template",null,7,r.Hc),r.Gc(13,Xt,7,1,"div",8),r.Gc(14,Wt,2,2,"div",9),r.Ub(),r.Gc(15,Ht,4,2,"div",10),r.Vb(16,"div",11),r.Vb(17,"div",12),r.Ic(18,"Species distribution models:"),r.Ub(),r.Gc(19,Zt,2,0,"p",13),r.Gc(20,Kt,2,0,"p",13),r.Gc(21,ie,12,8,"div",14),r.Ub(),r.Ub(),r.Vb(22,"div",15),r.dc("click",(function(){return e.toggleSidebar()})),r.Vb(23,"span",16),r.Ic(24," keyboard_arrow_left "),r.Ub(),r.Ub()),2&t&&(r.Gb("hide",!e.isOpenSidebar),r.Cb(7),r.nc("ngIf",!e.isVotingMode),r.Cb(1),r.nc("ngIf",e.isVotingMode),r.Cb(1),r.nc("ngIf",!e.isVotingMode),r.Cb(1),r.nc("ngIf",!e.isSpeciesSelected&&!e.isVotingMode),r.Cb(3),r.nc("ngIf",e.isSpeciesSelected&&!e.isVotingMode),r.Cb(1),r.nc("ngIf",!e.isVotingMode),r.Cb(1),r.nc("ngIf",!!e.activeSpeciesScientificName),r.Cb(4),r.nc("ngIf",e.isSpeciesModelFetched&&0!==e.models.length),r.Cb(1),r.nc("ngIf",e.isSpeciesModelFetched&&0===e.models.length),r.Cb(1),r.nc("ngForOf",e.models),r.Cb(2),r.Gb("rotate",!e.isOpenSidebar))},directives:[$.i,tt.t,tt.s,et.a,nt.a,Nt,tt.q,Rt,At.a],styles:["[_nghost-%COMP%]{position:relative}.sidebar__wrapper[_ngcontent-%COMP%]{height:100%;width:420px;overflow:scroll;transition:all .3s}.sidebar__wrapper.hide[_ngcontent-%COMP%]{width:0}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{background-color:#062d66;padding:30px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .go-back[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;margin-bottom:20px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .go-back[_ngcontent-%COMP%]   .go-back-icon[_ngcontent-%COMP%]{font-size:22px;color:#fff;margin-right:14px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .go-back[_ngcontent-%COMP%]   .go-back-title[_ngcontent-%COMP%]{color:#fff;font-family:Fira Sans;font-size:14px;letter-spacing:0;line-height:17px;text-transform:uppercase;font-weight:300}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:20px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-family:Fira Sans;font-size:21px;font-weight:500;letter-spacing:0;line-height:31px;margin:0}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]{margin-top:10px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]{margin-left:-30px;margin-right:-30px;padding:6px 30px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item.active[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1)}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]{display:flex;color:#fff;justify-content:space-between}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]{display:flex}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]   .species-arrow[_ngcontent-%COMP%]{cursor:pointer}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]   .species-name[_ngcontent-%COMP%]{font-size:16px;line-height:24px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]   .species-features-amount[_ngcontent-%COMP%]{margin-left:5px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]   .species-color[_ngcontent-%COMP%]{margin-left:12px;border-radius:50%}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]   .species-delete[_ngcontent-%COMP%]{cursor:pointer;margin-left:50px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-features[_ngcontent-%COMP%]{margin-left:36px;color:#fff;display:flex}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .add-new-species__wrapper[_ngcontent-%COMP%]{margin-top:16px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .add-new-species__wrapper[_ngcontent-%COMP%]   .add-new-species-title__wrapper[_ngcontent-%COMP%]{display:flex}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .add-new-species__wrapper[_ngcontent-%COMP%]   .add-new-species-title__wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;background-color:#fff}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .add-new-species__wrapper[_ngcontent-%COMP%]   .add-new-species-title__wrapper[_ngcontent-%COMP%]   .add-new-species-title[_ngcontent-%COMP%]{margin-left:13px;color:#fff;font-size:16px;line-height:24px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-dropdown_label[_ngcontent-%COMP%]{color:#fff;font-family:Fira Sans;font-size:16px;font-weight:500;letter-spacing:0;line-height:23px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:center}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]     mol-button span{margin-left:32px;margin-right:32px}.sidebar__wrapper[_ngcontent-%COMP%]   .sources__wrapper[_ngcontent-%COMP%]{padding:30px;width:100%;background-color:#fff}.sidebar__wrapper[_ngcontent-%COMP%]   .sources__wrapper[_ngcontent-%COMP%]   .sources-title[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:16px;margin-bottom:20px}.sidebar__wrapper[_ngcontent-%COMP%]   .sources__wrapper[_ngcontent-%COMP%]   .sources__wrapper[_ngcontent-%COMP%]:not(:last-child){margin-bottom:20px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]{width:100%;padding:30px;background-color:#e9e9e9}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#333;font-family:Fira Sans;font-size:16px;font-weight:500;letter-spacing:0;line-height:23px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#333;font-family:Fira Sans;font-size:14px;font-weight:300;letter-spacing:0;line-height:22px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]{border-radius:4px;padding-left:10px;padding-right:10px;padding-bottom:10px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item.active[_ngcontent-%COMP%]{background-color:#fff}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-top:20px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]{display:flex;align-items:center}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s;transform:rotate(0)}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]   span.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]   .model-title[_ngcontent-%COMP%]{margin-left:10px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{color:#70c36f;font-size:16px;margin-left:8px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]   .highlight_off[_ngcontent-%COMP%]{color:red;font-size:16px;margin-left:8px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .right-part[_ngcontent-%COMP%]{font-size:20px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]{margin-top:12px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]{height:180px;width:340px;position:relative}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;max-height:100%}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]   .buttons__wrapper[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:space-around;top:calc(50% - 20px);width:100%}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]   .buttons__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;justify-content:center;width:100px;background-color:#fff;border-radius:4px;border:2px solid #ccc;height:40px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]   .buttons__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-icon.check_circle[_ngcontent-%COMP%]{color:#70c36f}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]   .buttons__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-icon.highlight_off[_ngcontent-%COMP%]{color:red}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]   .buttons__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]{margin-left:6px;font-size:16px;font-weight:500;letter-spacing:0}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin-top:12px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .binary-checkbox[_ngcontent-%COMP%]{margin-top:13px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .best-model-star[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;margin-top:8px;cursor:pointer}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .best-model-star[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{color:#70c36f}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .best-model-star[_ngcontent-%COMP%]   .star-text[_ngcontent-%COMP%]{margin-left:10px;color:#333;font-size:14px}.toggle-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;cursor:pointer;height:45px;width:45px;background-color:#fff;right:-45px;top:0;z-index:10}.material-icons[_ngcontent-%COMP%]{transform:rotate(0);transition:all .5s}.material-icons.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.sidebar_edit-attribute-btn[_ngcontent-%COMP%]{color:#fff;font-family:Fira Sans;font-size:14px;font-weight:300;letter-spacing:0;line-height:17px;border:none;background:transparent;text-decoration:underline;cursor:pointer;outline:none;padding:0;margin-left:16px}"]}),re),se=n("SWYI");function ae(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",7),r.Vb(1,"div",8),r.dc("click",(function(){return r.yc(n),r.hc().togglePresentActiveLayer()})),r.Ic(2),r.Ub(),r.Ub()}if(2&t){var i=r.hc();r.Cb(1),r.Gb("active",!i.isPesentActiveLayer),r.Cb(1),r.Kc(" ",i.isPesentActiveLayer?"Hide polygons":"Show polygons"," ")}}function ue(t,e){1&t&&(r.Vb(0,"span",14),r.Ic(1," clear "),r.Ub())}function le(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",8),r.dc("click",(function(t){return r.yc(n),r.hc(3).createMinimumConvexPolygon(t)})),r.Vb(1,"div",19),r.Ic(2," Add a minimum convex polygon "),r.Ub(),r.Ub()}}function ce(t,e){if(1&t){var n=r.Wb();r.Tb(0),r.Vb(1,"div",8),r.dc("click",(function(){return r.yc(n),r.hc(2).startMapDrawing()})),r.ic(2,"async"),r.Vb(3,"div",15),r.Ic(4," Draw on the map "),r.Ub(),r.Ub(),r.Gc(5,le,3,0,"div",16),r.Vb(6,"div",17),r.Vb(7,"span",18),r.Ic(8," info "),r.Ub(),r.Vb(9,"div",12),r.Ic(10,"Click on a feature to copy its geometry"),r.Ub(),r.Ub(),r.Sb()}if(2&t){var i=r.hc(2);r.Cb(1),r.Gb("active",r.jc(2,3,i.isDrawingMode)),r.Cb(4),r.nc("ngIf",i.isReadyForCreateMinimumConvexPolygon)}}function he(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",9),r.Vb(1,"div",10),r.dc("click",(function(){return r.yc(n),r.hc().toggleEditingSection()})),r.Gc(2,ue,2,0,"span",11),r.Vb(3,"div",12),r.Ic(4),r.Ub(),r.Ub(),r.Gc(5,ce,11,5,"ng-container",13),r.Ub()}if(2&t){var i=r.hc();r.Cb(1),r.Gb("closed",!i.isOpenButtonsGroup),r.Cb(1),r.nc("ngIf",i.isOpenButtonsGroup),r.Cb(1),r.Gb("space",i.isOpenButtonsGroup),r.Cb(1),r.Kc(" ",i.isOpenButtonsGroup?"Close editing mode":"Start editing ranges"," "),r.Cb(1),r.nc("ngIf",i.isOpenButtonsGroup)}}var fe,pe,de=((fe=function(){function t(){g(this,t),this.isDrawingMode=new o.a(!1),this.isReadyForDraw=!1,this.isPesentActiveLayer=!0,this.isOpenButtonsGroup=!1,this.drawingLayer=new o.a(null),this.deleteLayer=new o.a(null),this.drawedPolygon=new o.a(null),this.presentActiveLayer=new r.o(null),this.updatedPolygons=new o.a(null),this.deletedPolygon=new r.o(null),this.deletePolygonFromMap=new r.o(null),this.createPolygonFromMap=new r.o(null),this.isCanClose=!0,this.detailedDatasetIds=new o.a([]),this.speciesModel=new r.o,this.disableSpeciesModel=new r.o,this.unselectSelectedPolygons=new r.o,this.occurrenceDatasetIds=new o.a([]),this.zoomDatasetExtentData=new o.a(null),this.createMinimumConvexPolygonEvent=new r.o,this.isVotingMode=!1}return _(t,[{key:"ngOnInit",value:function(){var t=this;this.drawingLayer.subscribe((function(e){t.isReadyForDraw=!!e}))}},{key:"canDeactivate",value:function(){return this.isCanClose}},{key:"setupVotingMode",value:function(){this.isVotingMode=!0}},{key:"togglePresentActiveLayer",value:function(){this.isPesentActiveLayer=!this.isPesentActiveLayer,this.presentActiveLayer.emit(this.isPesentActiveLayer)}},{key:"checkCanExit",value:function(t){if(!this.isCanClose)return t.preventDefault(),confirm("WARNING: You have unsaved changes. Press Cancel to go back and save these changes, or OK to lose these changes.")}},{key:"isReadyForCreateMinimumConvexPolygon",value:function(){return this.isDrawingMode.getValue()}},{key:"createMinimumConvexPolygon",value:function(t){this.createMinimumConvexPolygonEvent.emit(t)}},{key:"updateSpeciesModel",value:function(t){this.speciesModel.emit(t)}},{key:"setDisableSpeciesModel",value:function(){this.disableSpeciesModel.emit()}},{key:"setUnselectSelectedPolygons",value:function(){this.unselectSelectedPolygons.emit()}},{key:"setZoomToDatasetExtent",value:function(t){this.zoomDatasetExtentData.next(t)}},{key:"createdPolygon",value:function(t){this.drawedPolygon.next(t)}},{key:"changeIsCanClose",value:function(t){this.isCanClose=t}},{key:"updatePolygons",value:function(t){this.updatedPolygons.next(t)}},{key:"deletePolygon",value:function(t){this.deletedPolygon.emit(t)}},{key:"deletePolygonFromMapEvent",value:function(t){this.deletePolygonFromMap.emit(t)}},{key:"createPolygonFromMapEvent",value:function(t){this.createPolygonFromMap.emit(t)}},{key:"startMapDrawing",value:function(){this.isDrawingMode.next(!0)}},{key:"toggleEditingSection",value:function(){this.isOpenButtonsGroup&&this.isDrawingMode.next(!1),this.isOpenButtonsGroup=!this.isOpenButtonsGroup}},{key:"setActiveLayer",value:function(t){t&&this.drawingLayer.next(t)}},{key:"deleteLayerFromMap",value:function(t){this.deleteLayer.next(t)}},{key:"setSelectedDetailedDatasetIds",value:function(t){this.detailedDatasetIds.next(t)}},{key:"setSelectedOccurrenceDatasetIds",value:function(t){this.occurrenceDatasetIds.next(t)}}]),t}()).\u0275fac=function(t){return new(t||fe)},fe.\u0275cmp=r.Jb({type:fe,selectors:[["mol-map-root"]],hostBindings:function(t,e){1&t&&r.dc("beforeunload",(function(t){return e.checkCanExit(t)}),!1,r.xc)},decls:7,vars:19,consts:[[1,"map-page__wrapper"],[1,"green-header"],[1,"content"],[3,"drawedPolygon","updatedPolygons","deletedPolygon","setActiveLayer","deleteLayer","deletePolygon","createPolygon","selectedDetailedDatasetIds","zoomToDatasetExtentData","selectedOccurrenceDatasetIds","updateSpeciesModel","disableSpeciesModel","isCanClose","unselectSelectedPolygons","setupVotingMode"],[3,"drawingLayer","speciesModelMap","disableSpeciesModel","isDrawingMode","deleteLayer","detailedDatasetIds","unselectSelectedPolygons","zoomToDatasetExtent","occurrenceDatasetIds","createMinimumConvexPolygonEvent","deletePolygon","createPolygon","presentActiveLayer","readOnly","createdPolygon","updatedPolygons","deletedPolygon"],["class","button__wrapper",4,"ngIf"],["class","buttons-block__wrapper",4,"ngIf"],[1,"button__wrapper"],[1,"button",3,"click"],[1,"buttons-block__wrapper"],[1,"button","blue",3,"click"],["class","material-icons clear button-icon",4,"ngIf"],[1,"button-text"],[4,"ngIf"],[1,"material-icons","clear","button-icon"],["matTooltip","Click to draw and modify polygons","matTooltipPosition","before","matTooltipClass","increased-tooltip",1,"button-text"],["class","button",3,"click",4,"ngIf"],[1,"button","inactive"],["matTooltip","Click on a feature to copy its geometry.","matTooltipPosition","before","matTooltipClass","increased-tooltip",1,"material-icons","info"],["matTooltip","Create minimum convex polygons based on existing occurrence ranges.","matTooltipPosition","before","matTooltipClass","increased-tooltip",1,"button-text"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Qb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"mol-sidebar",3),r.dc("setActiveLayer",(function(t){return e.setActiveLayer(t)}))("deleteLayer",(function(t){return e.deleteLayerFromMap(t)}))("deletePolygon",(function(t){return e.deletePolygonFromMapEvent(t)}))("createPolygon",(function(t){return e.createPolygonFromMapEvent(t)}))("selectedDetailedDatasetIds",(function(t){return e.setSelectedDetailedDatasetIds(t)}))("zoomToDatasetExtentData",(function(t){return e.setZoomToDatasetExtent(t)}))("selectedOccurrenceDatasetIds",(function(t){return e.setSelectedOccurrenceDatasetIds(t)}))("updateSpeciesModel",(function(t){return e.updateSpeciesModel(t)}))("disableSpeciesModel",(function(){return e.setDisableSpeciesModel()}))("isCanClose",(function(t){return e.changeIsCanClose(t)}))("unselectSelectedPolygons",(function(){return e.setUnselectSelectedPolygons()}))("setupVotingMode",(function(){return e.setupVotingMode()})),r.Ub(),r.Vb(4,"mol-erm-map",4),r.dc("createdPolygon",(function(t){return e.createdPolygon(t)}))("updatedPolygons",(function(t){return e.updatePolygons(t)}))("deletedPolygon",(function(t){return e.deletePolygon(t)})),r.Ub(),r.Gc(5,ae,3,3,"div",5),r.Gc(6,he,6,7,"div",6),r.Ub(),r.Ub()),2&t&&(r.Cb(3),r.nc("drawedPolygon",e.drawedPolygon)("updatedPolygons",e.updatedPolygons)("deletedPolygon",e.deletedPolygon),r.Cb(1),r.nc("drawingLayer",e.drawingLayer)("speciesModelMap",e.speciesModel)("disableSpeciesModel",e.disableSpeciesModel)("isDrawingMode",e.isDrawingMode)("deleteLayer",e.deleteLayer)("detailedDatasetIds",e.detailedDatasetIds)("unselectSelectedPolygons",e.unselectSelectedPolygons)("zoomToDatasetExtent",e.zoomDatasetExtentData)("occurrenceDatasetIds",e.occurrenceDatasetIds)("createMinimumConvexPolygonEvent",e.createMinimumConvexPolygonEvent)("deletePolygon",e.deletePolygonFromMap)("createPolygon",e.createPolygonFromMap)("presentActiveLayer",e.presentActiveLayer)("readOnly",e.isVotingMode),r.Cb(1),r.nc("ngIf",e.isReadyForDraw),r.Cb(1),r.nc("ngIf",e.isReadyForDraw))},directives:[oe,se.a,tt.t,ft.a],pipes:[tt.b],styles:["[_nghost-%COMP%]{display:block;flex-grow:1}.map-page__wrapper[_ngcontent-%COMP%]{height:calc(100vh - 85px)}.map-page__wrapper[_ngcontent-%COMP%]   .green-header[_ngcontent-%COMP%]{height:15px;background-color:#8cbf44}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;height:calc(100% - 15px);position:relative}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   mol-erm-map[_ngcontent-%COMP%]{height:100%;flex-grow:1;position:relative}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button__wrapper[_ngcontent-%COMP%]{right:120px;position:absolute;right:330px;top:18px;width:145px}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;justify-content:center;height:45px;background-color:#062d66;border-radius:4px 4px 4px 4px;color:#fff;font-size:16px;letter-spacing:0}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button__wrapper[_ngcontent-%COMP%]   .button.active[_ngcontent-%COMP%]{background-color:#fff;color:#333}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]{position:absolute;right:79px;top:18px}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;width:245px;height:45px;background-color:#fff;color:#333;font-size:14px;letter-spacing:0}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button.active[_ngcontent-%COMP%]{background-color:#e9e9e9}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button.inactive[_ngcontent-%COMP%]{cursor:default}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button.inactive[_ngcontent-%COMP%]:hover{background-color:#fff}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#e9e9e9}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button.blue[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:500;background-color:#062d66}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button.blue[_ngcontent-%COMP%]:hover{background-color:#062d66}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:first-of-type{border-radius:4px 4px 0 0}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:last-of-type{border-radius:0 0 4px 4px}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button.closed[_ngcontent-%COMP%]{justify-content:center;border-radius:4px 4px 4px 4px}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]{margin-left:14px;max-width:157px}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-text.space[_ngcontent-%COMP%]{margin-left:14px}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-text.center[_ngcontent-%COMP%]{margin:5px auto}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin-left:32px;height:23px;width:23px}"]}),fe),ge=n("jxfh"),ye=n("M0ag"),_e=n("nIj0"),ve=n("F1o0"),me=((pe=function t(){g(this,t)}).\u0275mod=r.Nb({type:pe}),pe.\u0275inj=r.Mb({factory:function(t){return new(t||pe)},providers:[],imports:[[tt.c,ye.a,$.j,ve.d,At.b,ft.b,ge.d,ge.c,_e.l,_e.B]]}),pe)},QrlV:function(t,e,n){!function(t){"use strict";var e=134217729;function n(t,e,n,i,r){var o,s,a,u,l=e[0],c=i[0],h=0,f=0;c>l==c>-l?(o=l,l=e[++h]):(o=c,c=i[++f]);var p=0;if(h<t&&f<n)for(c>l==c>-l?(a=o-((s=l+o)-l),l=e[++h]):(a=o-((s=c+o)-c),c=i[++f]),o=s,0!==a&&(r[p++]=a);h<t&&f<n;)c>l==c>-l?(a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++h]):(a=o-((s=o+c)-(u=s-o))+(c-u),c=i[++f]),o=s,0!==a&&(r[p++]=a);for(;h<t;)a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++h],o=s,0!==a&&(r[p++]=a);for(;f<n;)a=o-((s=o+c)-(u=s-o))+(c-u),c=i[++f],o=s,0!==a&&(r[p++]=a);return 0===o&&0!==p||(r[p++]=o),p}function i(t){return new Float64Array(t)}var r=i(4),o=i(8),s=i(12),a=i(16),u=i(4);t.orient2d=function(t,i,l,c,h,f){var p=(i-f)*(l-h),d=(t-h)*(c-f),g=p-d;if(0===p||0===d||p>0!=d>0)return g;var y=Math.abs(p+d);return Math.abs(g)>=33306690738754716e-32*y?g:-function(t,i,l,c,h,f,p){var d,g,y,_,v,m,b,x,E,I,w,N,C,O,P,S,k,T,L=t-h,M=l-h,R=i-f,A=c-f;v=(P=(x=L-(b=(m=e*L)-(m-L)))*(I=A-(E=(m=e*A)-(m-A)))-((O=L*A)-b*E-x*E-b*I))-(w=P-(k=(x=R-(b=(m=e*R)-(m-R)))*(I=M-(E=(m=e*M)-(m-M)))-((S=R*M)-b*E-x*E-b*I))),r[0]=P-(w+v)+(v-k),v=(C=O-((N=O+w)-(v=N-O))+(w-v))-(w=C-S),r[1]=C-(w+v)+(v-S),v=(T=N+w)-N,r[2]=N-(T-v)+(w-v),r[3]=T;var D=function(t,e){for(var n=e[0],i=1;i<4;i++)n+=e[i];return n}(0,r),F=22204460492503146e-32*p;if(D>=F||-D>=F)return D;if(d=t-(L+(v=t-L))+(v-h),y=l-(M+(v=l-M))+(v-h),g=i-(R+(v=i-R))+(v-f),_=c-(A+(v=c-A))+(v-f),0===d&&0===g&&0===y&&0===_)return D;if(F=11093356479670487e-47*p+33306690738754706e-32*Math.abs(D),(D+=L*_+A*d-(R*y+M*g))>=F||-D>=F)return D;v=(P=(x=d-(b=(m=e*d)-(m-d)))*(I=A-(E=(m=e*A)-(m-A)))-((O=d*A)-b*E-x*E-b*I))-(w=P-(k=(x=g-(b=(m=e*g)-(m-g)))*(I=M-(E=(m=e*M)-(m-M)))-((S=g*M)-b*E-x*E-b*I))),u[0]=P-(w+v)+(v-k),v=(C=O-((N=O+w)-(v=N-O))+(w-v))-(w=C-S),u[1]=C-(w+v)+(v-S),v=(T=N+w)-N,u[2]=N-(T-v)+(w-v),u[3]=T;var G=n(4,r,4,u,o);v=(P=(x=L-(b=(m=e*L)-(m-L)))*(I=_-(E=(m=e*_)-(m-_)))-((O=L*_)-b*E-x*E-b*I))-(w=P-(k=(x=R-(b=(m=e*R)-(m-R)))*(I=y-(E=(m=e*y)-(m-y)))-((S=R*y)-b*E-x*E-b*I))),u[0]=P-(w+v)+(v-k),v=(C=O-((N=O+w)-(v=N-O))+(w-v))-(w=C-S),u[1]=C-(w+v)+(v-S),v=(T=N+w)-N,u[2]=N-(T-v)+(w-v),u[3]=T;var j=n(G,o,4,u,s);v=(P=(x=d-(b=(m=e*d)-(m-d)))*(I=_-(E=(m=e*_)-(m-_)))-((O=d*_)-b*E-x*E-b*I))-(w=P-(k=(x=g-(b=(m=e*g)-(m-g)))*(I=y-(E=(m=e*y)-(m-y)))-((S=g*y)-b*E-x*E-b*I))),u[0]=P-(w+v)+(v-k),v=(C=O-((N=O+w)-(v=N-O))+(w-v))-(w=C-S),u[1]=C-(w+v)+(v-S),v=(T=N+w)-N,u[2]=N-(T-v)+(w-v),u[3]=T;var U=n(j,s,4,u,a);return a[U-1]}(t,i,l,c,h,f,y)},t.orient2dfast=function(t,e,n,i,r,o){return(e-o)*(n-r)-(t-r)*(i-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},"R6B+":function(t,e,n){"use strict";var i=n("zT+L"),r=n("RtUh"),o=n("YZE+"),s=n("IlOi"),a=n("CmXO"),u=r(o);i(u,{getPolyfill:s,implementation:o,shim:a}),t.exports=u},RtUh:function(t,e,n){"use strict";var i=n("5L5q"),r=n("3S/X"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||i.call(s,o);t.exports=function(){return a(i,s,arguments)},t.exports.apply=function(){return a(i,o,arguments)}},SWYI:function(r,u,l){"use strict";l.d(u,"a",(function(){return Xr}));var f=l("EM62"),p=l("auRg"),d=l("Kt/E"),y=function(t){n(r,t);var e=i(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).name=Object.keys({Exception:r})[0],n}return _(r,[{key:"toString",value:function(){return this.message}}]),r}(s(Error)),v=function(t){n(r,t);var e=i(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).name=Object.keys({IllegalArgumentException:r})[0],n}return r}(y),m=function(){function t(){g(this,t)}return _(t,null,[{key:"toLocationSymbol",value:function(e){switch(e){case t.EXTERIOR:return"e";case t.BOUNDARY:return"b";case t.INTERIOR:return"i";case t.NONE:return"-"}throw new v("Unknown location value: "+e)}}]),t}();m.INTERIOR=0,m.BOUNDARY=1,m.EXTERIOR=2,m.NONE=-1;var b=function(){function t(){g(this,t)}return _(t,[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),t}(),x=function(t){n(r,t);var e=i(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).name=Object.keys({NoSuchElementException:r})[0],n}return r}(y),E=function(t){n(r,t);var e=i(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).name=Object.keys({UnsupportedOperationException:r})[0],n}return r}(y),I=function(t){n(r,t);var e=i(r);function r(){return g(this,r),e.apply(this,arguments)}return _(r,[{key:"contains",value:function(){}}]),r}(b),w=function(t){n(r,t);var e=i(r);function r(t){var n;return g(this,r),(n=e.call(this)).array=[],t instanceof b&&n.addAll(t),n}return _(r,[{key:"contains",value:function(t){var e,n=h(this.array);try{for(n.s();!(e=n.n()).done;){if(0===e.value.compareTo(t))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"add",value:function(t){if(this.contains(t))return!1;for(var e=0,n=this.array.length;e<n;e++)if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t);return this.array.push(t),!0}},{key:"addAll",value:function(t){var e,n=h(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(r){n.e(r)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new E}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new N(this.array)}}]),r}(function(t){n(r,t);var e=i(r);function r(){return g(this,r),e.apply(this,arguments)}return r}(I)),N=function(){function t(e){g(this,t),this.array=e,this.position=0}return _(t,[{key:"next",value:function(){if(this.position===this.array.length)throw new x;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new E}}]),t}(),C=function(){function t(){g(this,t)}return _(t,[{key:"filter",value:function(t){}}]),t}();function O(){}function P(){}function S(){}var k,T,L,M,R,A,D=function(){function t(){g(this,t)}return _(t,null,[{key:"equalsWithTolerance",value:function(t,e,n){return Math.abs(t-e)<=n}}]),t}(),F=function(){function t(e,n){g(this,t),this.low=n||0,this.high=e||0}return _(t,null,[{key:"toBinaryString",value:function(t){var e,n="";for(e=2147483648;e>0;e>>>=1)n+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)n+=(t.low&e)===e?"1":"0";return n}}]),t}();function G(){}function j(){}G.NaN=NaN,G.isNaN=function(t){return Number.isNaN(t)},G.isInfinite=function(t){return!Number.isFinite(t)},G.MAX_VALUE=Number.MAX_VALUE,G.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,G.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?(R=new Float64Array(1),A=new Int32Array(R.buffer),G.doubleToLongBits=function(t){R[0]=t;var e=0|A[0],n=0|A[1];return 2146435072==(2146435072&n)&&0!=(1048575&n)&&0!==e&&(e=0,n=2146959360),new F(n,e)},G.longBitsToDouble=function(t){return A[0]=t.low,A[1]=t.high,R[0]}):(k=Math.log2,T=Math.floor,L=Math.pow,M=function(){for(var t=53;t>0;t--){var e=L(2,t)-1;if(T(k(e))+1===t)return e}return 0}(),G.doubleToLongBits=function(t){var e,n,i,r,o,s,a,u,l;if(t<0||1/t===Number.NEGATIVE_INFINITY?(s=1<<31,t=-t):s=0,0===t)return new F(u=s,l=0);if(t===1/0)return new F(u=2146435072|s,l=0);if(t!=t)return new F(u=2146959360,l=0);if(r=0,l=0,(e=T(t))>1)if(e<=M)(r=T(k(e)))<=20?(l=0,u=e<<20-r&1048575):(l=e%(n=L(2,i=r-20))<<32-i,u=e/n&1048575);else for(i=e,l=0;0!==(i=T(n=i/2));)r++,l>>>=1,l|=(1&u)<<31,u>>>=1,n!==i&&(u|=524288);if(a=r+1023,o=0===e,e=t-e,r<52&&0!==e)for(i=0;;){if((n=2*e)>=1?(e=n-1,o?(a--,o=!1):(i<<=1,i|=1,r++)):(e=n,o?0==--a&&(r++,o=!1):(i<<=1,r++)),20===r)u|=i,i=0;else if(52===r){l|=i;break}if(1===n){r<20?u|=i<<20-r:r<52&&(l|=i<<52-r);break}}return u|=a<<20,new F(u|=s,l)},G.longBitsToDouble=function(t){var e,n,i,r,o=t.high,s=t.low,a=o&1<<31?-1:1;for(i=((2146435072&o)>>20)-1023,r=0,n=1<<19,e=1;e<=20;e++)o&n&&(r+=L(2,-e)),n>>>=1;for(n=1<<31,e=21;e<=52;e++)s&n&&(r+=L(2,-e)),n>>>=1;if(-1023===i){if(0===r)return 0*a;i=-1022}else{if(1024===i)return 0===r?a/0:NaN;r+=1}return a*r*L(2,i)});var U=function(t){n(r,t);var e=i(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).name=Object.keys({RuntimeException:r})[0],n}return r}(y),V=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),t=e.call(this),r.constructor_.apply(o(t),arguments),t}return _(r,null,[{key:"constructor_",value:function(){0===arguments.length?U.constructor_.call(this):1===arguments.length&&U.constructor_.call(this,arguments[0])}}]),r}(U),B=function(){function t(){g(this,t)}return _(t,null,[{key:"shouldNeverReachHere",value:function(){if(0===arguments.length)t.shouldNeverReachHere(null);else if(1===arguments.length){var e=arguments[0];throw new V("Should never reach here"+(null!==e?": "+e:""))}}},{key:"isTrue",value:function(){if(1===arguments.length)t.isTrue(arguments[0],null);else if(2===arguments.length){var e=arguments[1];if(!arguments[0])throw null===e?new V:new V(e)}}},{key:"equals",value:function(){if(2===arguments.length)t.equals(arguments[0],arguments[1],null);else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(!n.equals(e))throw new V("Expected "+e+" but encountered "+n+(null!==i?": "+i:""))}}}]),t}(),z=new ArrayBuffer(8),q=new Float64Array(z),Y=new Int32Array(z),X=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getM",value:function(){return G.NaN}},{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;case t.Z:this.setZ(n);break;default:throw new v("Invalid ordinate index: "+e)}}},{key:"equals2D",value:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!D.equalsWithTolerance(this.x,e.x,n)&&!!D.equalsWithTolerance(this.y,e.y,n)}}},{key:"setM",value:function(e){throw new v("Invalid ordinate index: "+t.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y;case t.Z:return this.getZ()}throw new v("Invalid ordinate index: "+e)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||G.isNaN(this.getZ())&&G.isNaN(t.getZ()))}},{key:"equals",value:function(e){return e instanceof t&&this.equals2D(e)}},{key:"equalInZ",value:function(t,e){return D.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return B.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+i*i)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var e=17;return e=37*(e=37*e+t.hashCode(this.x))+t.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[O,P,S]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)t.constructor_.call(this,0,0);else if(1===arguments.length){var e=arguments[0];t.constructor_.call(this,e.x,e.y,e.getZ())}else if(2===arguments.length)t.constructor_.call(this,arguments[0],arguments[1],t.NULL_ORDINATE);else if(3===arguments.length){var n=arguments[1],i=arguments[2];this.x=arguments[0],this.y=n,this.z=i}}},{key:"hashCode",value:function(t){return q[0]=t,Y[0]^Y[1]}}]),t}(),W=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"compare",value:function(e,n){var i=t.compare(e.x,n.x);if(0!==i)return i;var r=t.compare(e.y,n.y);return 0!==r?r:this._dimensionsToTest<=2?0:t.compare(e.getZ(),n.getZ())}},{key:"interfaces_",get:function(){return[j]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,0===arguments.length)t.constructor_.call(this,2);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:G.isNaN(t)?G.isNaN(e)?0:-1:G.isNaN(e)?1:0}}]),t}();X.DimensionalComparator=W,X.NULL_ORDINATE=G.NaN,X.X=0,X.Y=1,X.Z=2,X.M=3;var H=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()}},{key:"intersection",value:function(e){return this.isNull()||e.isNull()||!this.intersects(e)?new t:new t(this._minx>e._minx?this._minx:e._minx,this._maxx<e._maxx?this._maxx:e._maxx,this._miny>e._miny?this._miny:e._miny,this._maxy<e._maxy?this._maxy:e._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(1===arguments.length){if(arguments[0]instanceof X){var e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof t){var n=arguments[0];return!this.isNull()&&!n.isNull()&&n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return!this.isNull()&&i>=this._minx&&i<=this._maxx&&r>=this._miny&&r<=this._maxy}}},{key:"intersects",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof X){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(2===arguments.length){if(arguments[0]instanceof X&&arguments[1]instanceof X){var i=arguments[0],r=arguments[1];return!(this.isNull()||(i.x<r.x?i.x:r.x)>this._maxx||(i.x>r.x?i.x:r.x)<this._minx||(i.y<r.y?i.y:r.y)>this._maxy||(i.y>r.y?i.y:r.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return!this.isNull()&&!(o>this._maxx||o<this._minx||s>this._maxy||s<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(1===arguments.length){if(arguments[0]instanceof X){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=r,this._maxy=r):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1===arguments.length){if(arguments[0]instanceof t)return this.covers(arguments[0]);if(arguments[0]instanceof X)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])}},{key:"centre",value:function(){return this.isNull()?null:new X((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof X){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];o<s?(this._minx=o,this._maxx=s):(this._minx=s,this._maxx=o),a<u?(this._miny=a,this._maxy=u):(this._miny=u,this._maxy=a)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+X.hashCode(this._minx))+X.hashCode(this._maxx))+X.hashCode(this._miny))+X.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[O,S]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof X){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else arguments[0]instanceof t&&this.init(arguments[0]);else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])}},{key:"intersects",value:function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(i.y,r.y),c=Math.max(i.y,r.y),l>u||c<a))}}}]),t}(),Z=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(t.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(1===arguments.length){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,i)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(e){if(e.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new H(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===t.TYPECODE_MULTIPOINT||this.getTypeCode()===t.TYPECODE_MULTILINESTRING||this.getTypeCode()===t.TYPECODE_MULTIPOLYGON}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[P,O,S]}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}]),t}();Z.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},Z.TYPECODE_POINT=0,Z.TYPECODE_MULTIPOINT=1,Z.TYPECODE_LINESTRING=2,Z.TYPECODE_LINEARRING=3,Z.TYPECODE_MULTILINESTRING=4,Z.TYPECODE_POLYGON=5,Z.TYPECODE_MULTIPOLYGON=6,Z.TYPECODE_GEOMETRYCOLLECTION=7,Z.TYPENAME_POINT="Point",Z.TYPENAME_MULTIPOINT="MultiPoint",Z.TYPENAME_LINESTRING="LineString",Z.TYPENAME_LINEARRING="LinearRing",Z.TYPENAME_MULTILINESTRING="MultiLineString",Z.TYPENAME_POLYGON="Polygon",Z.TYPENAME_MULTIPOLYGON="MultiPolygon",Z.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Z.geometryChangedFilter={get interfaces_(){return[C]},filter:function(t){t.geometryChangedAction()}};var K=function(){function t(){g(this,t)}return _(t,[{key:"filter",value:function(t){}}]),t}(),J=function(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1},Q=function t(){g(this,t)},$=function(){function t(){g(this,t)}return _(t,[{key:"getM",value:function(t){if(this.hasM()){var e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return G.NaN}},{key:"setOrdinate",value:function(t,e,n){}},{key:"getZ",value:function(t){return this.hasZ()?this.getOrdinate(t,2):G.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(t,e){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(t){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(t){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(t){}},{key:"copy",value:function(){}},{key:"getY",value:function(t){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[P]}}]),t}();$.X=0,$.Y=1,$.Z=2,$.M=3;var tt=function(){function t(){g(this,t)}return _(t,null,[{key:"copyCoord",value:function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))}},{key:"isRing",value:function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,$.X)===t.getOrdinate(e-1,$.X)&&t.getOrdinate(0,$.Y)===t.getOrdinate(e-1,$.Y)}},{key:"scroll",value:function(){if(2===arguments.length){if(J(arguments[0],$)&&Number.isInteger(arguments[1])){var e=arguments[0];t.scroll(e,arguments[1],t.isRing(e))}else if(J(arguments[0],$)&&arguments[1]instanceof X){var n=arguments[0],i=t.indexOf(arguments[1],n);if(i<=0)return null;t.scroll(n,i)}}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];if(o<=0)return null;for(var a=r.copy(),u=s?r.size()-1:r.size(),l=0;l<u;l++)for(var c=0;c<r.getDimension();c++)r.setOrdinate(l,c,a.getOrdinate((o+l)%u,c));if(s)for(var h=0;h<r.getDimension();h++)r.setOrdinate(u,h,r.getOrdinate(0,h))}}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||G.isNaN(s)&&G.isNaN(a)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(1===arguments.length){var e=arguments[0];return t.minCoordinateIndex(e,0,e.size()-1)}if(3===arguments.length){for(var n=arguments[0],i=arguments[2],r=-1,o=null,s=arguments[1];s<=i;s++){var a=n.getCoordinate(s);(null===o||o.compareTo(a)>0)&&(o=a,r=s)}return r}}},{key:"extend",value:function(e,n,i){var r=e.create(i,n.getDimension()),o=n.size();if(t.copy(n,0,r,0,o),o>0)for(var s=o;s<i;s++)t.copy(n,o-1,r,s,1);return r}},{key:"reverse",value:function(e){for(var n=e.size()-1,i=Math.trunc(n/2),r=0;r<=i;r++)t.swap(e,r,n-r)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}}},{key:"copy",value:function(e,n,i,r,o){for(var s=0;s<o;s++)t.copyCoord(e,n+s,i,r+s)}},{key:"ensureValidRing",value:function(e,n){var i=n.size();return 0===i?n:i<=3?t.createClosedRing(e,n,4):n.getOrdinate(0,$.X)===n.getOrdinate(i-1,$.X)&&n.getOrdinate(0,$.Y)===n.getOrdinate(i-1,$.Y)?n:t.createClosedRing(e,n,i+1)}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,$.X)&&t.y===e.getOrdinate(n,$.Y))return n;return-1}},{key:"createClosedRing",value:function(e,n,i){var r=e.create(i,n.getDimension()),o=n.size();t.copy(n,0,r,0,o);for(var s=o;s<i;s++)t.copy(n,0,r,s,1);return r}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.size();n++){var i=t.getCoordinate(n);(null===e||e.compareTo(i)>0)&&(e=i)}return e}}]),t}(),et=function(){function t(){g(this,t)}return _(t,null,[{key:"isWhitespace",value:function(t){return t<=32&&t>=0||127===t}},{key:"toUpperCase",value:function(t){return t.toUpperCase()}}]),t}(),nt=function(){function t(){g(this,t)}return _(t,null,[{key:"toDimensionSymbol",value:function(e){switch(e){case t.FALSE:return t.SYM_FALSE;case t.TRUE:return t.SYM_TRUE;case t.DONTCARE:return t.SYM_DONTCARE;case t.P:return t.SYM_P;case t.L:return t.SYM_L;case t.A:return t.SYM_A}throw new v("Unknown dimension value: "+e)}},{key:"toDimensionValue",value:function(e){switch(et.toUpperCase(e)){case t.SYM_FALSE:return t.FALSE;case t.SYM_TRUE:return t.TRUE;case t.SYM_DONTCARE:return t.DONTCARE;case t.SYM_P:return t.P;case t.SYM_L:return t.L;case t.SYM_A:return t.A}throw new v("Unknown dimension symbol: "+e)}}]),t}();nt.P=0,nt.L=1,nt.A=2,nt.FALSE=-1,nt.TRUE=-2,nt.DONTCARE=-3,nt.SYM_FALSE="F",nt.SYM_TRUE="T",nt.SYM_DONTCARE="*",nt.SYM_P="0",nt.SYM_L="1",nt.SYM_A="2";var it=function(){function t(){g(this,t)}return _(t,[{key:"filter",value:function(t){}}]),t}(),rt=function(){function t(){g(this,t)}return _(t,[{key:"filter",value:function(t,e){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),t}(),ot=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new H:this._points.expandEnvelope(new H)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new s(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return e(c(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var n=this._points.copy();tt.reverse(n),this._points=n}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?nt.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var t=this._points.copy();return tt.reverse(t),this.getFactory().createLineString(t)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return Z.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return function(){function t(){g(this,t)}return _(t,null,[{key:"ofLine",value:function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new X;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,u=i.y,l=a-r,c=u-o;n+=Math.sqrt(l*l+c*c),r=a,o=u}return n}}]),t}().ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)}},{key:"apply",value:function(){if(J(arguments[0],K))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(J(arguments[0],rt)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(J(arguments[0],it)||J(arguments[0],C))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new E}},{key:"isEquivalentClass",value:function(t){return t instanceof s}},{key:"getCoordinateN",value:function(t){return this._points.getCoordinate(t)}},{key:"getGeometryType",value:function(){return Z.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return 0===this._points.size()}},{key:"init",value:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}},{key:"isCoordinate",value:function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}},{key:"interfaces_",get:function(){return[Q]}}],[{key:"constructor_",value:function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0];Z.constructor_.call(this,arguments[1]),this.init(t)}}}]),s}(Z),st=function(){function t(){g(this,t)}return _(t,[{key:"create",value:function(){if(1===arguments.length)arguments[0]instanceof Array||J(arguments[0],$);else if(2===arguments.length);else if(3===arguments.length)return this.create(arguments[0],arguments[1])}}]),t}(),at=function t(){g(this,t)},ut=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new H;var t=new H;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new s(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),n))}return e(c(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return nt.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return Z.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)}},{key:"apply",value:function(){if(J(arguments[0],K)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(J(arguments[0],rt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(J(arguments[0],it)||J(arguments[0],C))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Z.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this._coordinates.size()}},{key:"init",value:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),B.isTrue(t.size()<=1),this._coordinates=t}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[at]}}],[{key:"constructor_",value:function(){this._coordinates=null;var t=arguments[0];Z.constructor_.call(this,arguments[1]),this.init(t)}}]),s}(Z),lt=function(){function t(){g(this,t)}return _(t,null,[{key:"ofRing",value:function(){return arguments[0]instanceof Array||J(arguments[0],$)?Math.abs(t.ofRingSigned(arguments[0])):void 0}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++)e+=(t[i].x-n)*(t[i-1].y-t[i+1].y);return e/2}if(J(arguments[0],$)){var r=arguments[0],o=r.size();if(o<3)return 0;var s=new X,a=new X,u=new X;r.getCoordinate(0,a),r.getCoordinate(1,u);var l=a.x;u.x-=l;for(var c=0,h=1;h<o-1;h++)s.y=a.y,a.x=u.x,a.y=u.y,r.getCoordinate(h+1,u),u.x-=l,c+=a.x*(s.y-u.y);return c/2}}}]),t}(),ct=function(t){n(r,t);var e=i(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).name=Object.keys({IndexOutOfBoundsException:r})[0],n}return r}(y),ht=function(t){n(r,t);var e=i(r);function r(){return g(this,r),e.apply(this,arguments)}return _(r,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}]),r}(b),ft=function(t){n(r,t);var e=i(r);function r(t){var n;return g(this,r),(n=e.call(this)).array=[],t instanceof b&&n.addAll(t),n}return _(r,[{key:"ensureCapacity",value:function(){}},{key:"add",value:function(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(t){var e,n=h(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.array.push(i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"set",value:function(t,e){var n=this.array[t];return this.array[t]=e,n}},{key:"iterator",value:function(){return new pt(this)}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new ct;return this.array[t]}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"sort",value:function(t){t?this.array.sort((function(e,n){return t.compare(e,n)})):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(t){for(var e=0,n=this.array.length;e<n;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}},{key:"interfaces_",get:function(){return[ht,b]}}]),r}(ht),pt=function(){function t(e){g(this,t),this.arrayList=e,this.position=0}return _(t,[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new x;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(t){return this.arrayList.set(this.position-1,t)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),t}(),dt=function(){function t(){g(this,t)}return _(t,null,[{key:"sort",value:function(){var t=arguments,e=arguments[0];if(1===arguments.length)e.sort((function(t,e){return t.compareTo(e)}));else if(2===arguments.length)e.sort((function(e,n){return t[1].compare(e,n)}));else if(3===arguments.length){var n=e.slice(arguments[1],arguments[2]);n.sort();var i=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));e.splice(0,e.length);var r,o=h(i);try{for(o.s();!(r=o.n()).done;){var s=r.value;e.push(s)}}catch(p){o.e(p)}finally{o.f()}}else if(4===arguments.length){var a=e.slice(arguments[1],arguments[2]);a.sort((function(e,n){return t[3].compare(e,n)}));var u=e.slice(0,arguments[1]).concat(a,e.slice(arguments[2],e.length));e.splice(0,e.length);var l,c=h(u);try{for(c.s();!(l=c.n()).done;){var f=l.value;e.push(f)}}catch(p){c.e(p)}finally{c.f()}}}},{key:"asList",value:function(t){var e,n=new ft,i=h(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n.add(r)}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"copyOf",value:function(t,e){return t.slice(0,e)}}]),t}(),gt=function(){function t(e){g(this,t),this.str=e}return _(t,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),t}(),yt=function(){function t(e){g(this,t),this.value=e}return _(t,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(e){return new t(e)}}]),t}(),_t=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(e,n){var i=this.abs(),r=t.magnitude(i._hi),o=t.TEN.pow(r);(i=i.divide(o)).gt(t.TEN)?(i=i.divide(t.TEN),r+=1):i.lt(t.ONE)&&(i=i.multiply(t.TEN),r-=1);for(var s=r+1,a=new gt,u=t.MAX_PRINT_DIGITS-1,l=0;l<=u;l++){e&&l===s&&a.append(".");var c=Math.trunc(i._hi);if(c<0)break;var h=!1,f=0;c>9?(h=!0,f="9"):f="0"+c,a.append(f),i=i.subtract(t.valueOf(c)).multiply(t.TEN),h&&i.selfAdd(t.TEN);var p=!0,d=t.magnitude(i._hi);if(d<0&&Math.abs(d)>=u-l&&(p=!1),!p)break}return n[0]=r,a.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){return arguments[0]instanceof t?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0}},{key:"equals",value:function(){if(1===arguments.length&&arguments[0]instanceof t){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}}},{key:"isZero",value:function(){return 0===this._hi&&0===this._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof t){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var n=arguments[0],i=null,r=null,o=null,s=null,a=null,u=null,l=null,c=null;return a=this._hi/n,c=(i=(u=t.SPLIT*a)-(i=u-a))*(o=(c=t.SPLIT*n)-(o=c-n))-(l=a*n)+i*(s=n-o)+(r=a-i)*o+r*s,c=a+(u=(this._hi-l-c+this._lo-a*arguments[1])/n),this._hi=c,this._lo=a-c+u,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof t){var e=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null,u=null,l=null;return i=(s=this._hi/e._hi)-(n=(a=t.SPLIT*s)-(n=a-s)),l=n*(r=(l=t.SPLIT*e._hi)-(r=l-e._hi))-(u=s*e._hi)+n*(o=e._hi-r)+i*r+i*o,new t(l=s+(a=(this._hi-u-l+this._lo-s*e._lo)/e._hi),s-l+a)}if("number"==typeof arguments[0]){var c=arguments[0];return G.isNaN(c)?t.createNaN():t.copy(this).selfDivide(c,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(e){if(0===e)return t.valueOf(1);var n=new t(this),i=t.valueOf(1),r=Math.abs(e);if(r>1)for(;r>0;)r%2==1&&i.selfMultiply(n),(r/=2)>0&&(n=n.sqr());else i=n;return e<0?i.reciprocal():i}},{key:"ceil",value:function(){if(this.isNaN())return t.NaN;var e=Math.ceil(this._hi),n=0;return e===this._hi&&(n=Math.ceil(this._lo)),new t(e,n)}},{key:"compareTo",value:function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){return arguments[0]instanceof t||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return t.valueOf(0);if(this.isNegative())return t.NaN;var e=1/Math.sqrt(this._hi),n=t.valueOf(this._hi*e),i=this.subtract(n.sqr());return n.add(i._hi*(.5*e))}},{key:"selfAdd",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}if("number"==typeof arguments[0]){var n=arguments[0],i=null,r=null,o=null,s=null,a=null,u=null;return s=(o=this._hi+n)-(a=o-this._hi),r=(u=(s=n-a+(this._hi-s))+this._lo)+(o-(i=o+u)),this._hi=i+r,this._lo=r+(i-this._hi),this}}else if(2===arguments.length){var l=arguments[0],c=arguments[1],h=null,f=null,p=null,d=null,g=null,y=null,_=null;d=this._hi+l,f=this._lo+c,g=d-(y=d-this._hi),p=f-(_=f-this._lo);var v=(h=d+(y=(g=l-y+(this._hi-g))+f))+(y=(p=c-_+(this._lo-p))+(y+(d-h))),m=y+(h-v);return this._hi=v,this._lo=m,this}}},{key:"selfMultiply",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var n=arguments[0],i=null,r=null,o=null,s=null,a=null,u=null;i=(a=t.SPLIT*this._hi)-this._hi,u=t.SPLIT*n,i=a-i,r=this._hi-i,o=u-n;var l=(a=this._hi*n)+(u=i*(o=u-o)-a+i*(s=n-o)+r*o+r*s+(this._hi*arguments[1]+this._lo*n)),c=u+(i=a-l);return this._hi=l,this._lo=c,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return t.NaN;var e=Math.floor(this._hi),n=0;return e===this._hi&&(n=Math.floor(this._lo)),new t(e,n)}},{key:"negate",value:function(){return this.isNaN()?this:new t(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof t){var e=arguments[0];return e.isNaN()?t.createNaN():t.copy(this).selfMultiply(e)}if("number"==typeof arguments[0]){var n=arguments[0];return G.isNaN(n)?t.createNaN():t.copy(this).selfMultiply(n,0)}}},{key:"isNaN",value:function(){return G.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var e=t.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var e=this.getSpecialNumberString();if(null!==e)return e;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!0,n),r=n[0]+1,o=i;return"."===i.charAt(0)?o="0"+i:r<0?o="0."+t.stringOfChar("0",-r)+i:-1===i.indexOf(".")&&(o=i+t.stringOfChar("0",r-i.length)+".0"),this.isNegative()?"-"+o:o}},{key:"reciprocal",value:function(){var e,n,i,r,o=null,s=null,a=null,u=null;e=(i=1/this._hi)-(o=(a=t.SPLIT*i)-(o=a-i)),s=(u=t.SPLIT*this._hi)-this._hi;var l=i+(a=(1-(r=i*this._hi)-(u=o*(s=u-s)-r+o*(n=this._hi-s)+e*s+e*n)-i*this._lo)/this._hi);return new t(l,i-l+a)}},{key:"toSciNotation",value:function(){if(this.isZero())return t.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(null!==e)return e;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!1,n),r=t.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===i.charAt(0))throw new IllegalStateException("Found leading zero: "+i);var o="";i.length>1&&(o=i.substring(1));var s=i.charAt(0)+"."+o;return this.isNegative()?"-"+s+r:s+r}},{key:"abs",value:function(){return this.isNaN()?t.NaN:this.isNegative()?this.negate():new t(this)}},{key:"isPositive",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof t){var e=arguments[0];return t.copy(this).selfAdd(e)}if("number"==typeof arguments[0]){var n=arguments[0];return t.copy(this).selfAdd(n)}}},{key:"init",value:function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof t){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[1];this._hi=arguments[0],this._lo=n}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?t.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[S,O,P]}}],[{key:"constructor_",value:function(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof t?this.init(arguments[0]):"string"==typeof arguments[0]&&t.constructor_.call(this,t.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])}},{key:"determinant",value:function(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],i=arguments[3];return t.determinant(t.valueOf(arguments[0]),t.valueOf(e),t.valueOf(n),t.valueOf(i))}if(arguments[3]instanceof t&&arguments[2]instanceof t&&arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[1],o=arguments[2];return arguments[0].multiply(arguments[3]).selfSubtract(r.multiply(o))}}},{key:"sqr",value:function(e){return t.valueOf(e).selfMultiply(e)}},{key:"valueOf",value:function(){return"string"==typeof arguments[0]?t.parse(arguments[0]):"number"==typeof arguments[0]?new t(arguments[0]):void 0}},{key:"sqrt",value:function(e){return t.valueOf(e).sqrt()}},{key:"parse",value:function(e){for(var n=0,i=e.length;et.isWhitespace(e.charAt(n));)n++;var r=!1;if(n<i){var o=e.charAt(n);"-"!==o&&"+"!==o||(n++,"-"===o&&(r=!0))}for(var s=new t,a=0,u=0,l=0,c=!1;!(n>=i);){var h=e.charAt(n);if(n++,et.isDigit(h)){var f=h-"0";s.selfMultiply(t.TEN),s.selfAdd(f),a++}else{if("."!==h){if("e"===h||"E"===h){var p=e.substring(n);try{l=yt.parseInt(p)}catch(v){throw v instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+p+" in string "+e):v}break}throw new NumberFormatException("Unexpected character '"+h+"' at position "+n+" in string "+e)}u=a,c=!0}}var d=s;c||(u=a);var g=a-u-l;if(0===g)d=s;else if(g>0){var y=t.TEN.pow(g);d=s.divide(y)}else if(g<0){var _=t.TEN.pow(-g);d=s.multiply(_)}return r?d.negate():d}},{key:"createNaN",value:function(){return new t(G.NaN,G.NaN)}},{key:"copy",value:function(e){return new t(e)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i}},{key:"stringOfChar",value:function(t,e){for(var n=new gt,i=0;i<e;i++)n.append(t);return n.toString()}}]),t}();_t.PI=new _t(3.141592653589793,12246467991473532e-32),_t.TWO_PI=new _t(6.283185307179586,24492935982947064e-32),_t.PI_2=new _t(1.5707963267948966,6123233995736766e-32),_t.E=new _t(2.718281828459045,14456468917292502e-32),_t.NaN=new _t(G.NaN,G.NaN),_t.EPS=123259516440783e-46,_t.SPLIT=134217729,_t.MAX_PRINT_DIGITS=32,_t.TEN=_t.valueOf(10),_t.ONE=_t.valueOf(1),_t.SCI_NOT_EXPONENT_CHAR="E",_t.SCI_NOT_ZERO="0.0E0";var vt=function(){function t(){g(this,t)}return _(t,null,[{key:"orientationIndex",value:function(e,n,i){var r=t.orientationIndexFilter(e,n,i);if(r<=1)return r;var o=_t.valueOf(n.x).selfAdd(-e.x),s=_t.valueOf(n.y).selfAdd(-e.y),a=_t.valueOf(i.x).selfAdd(-n.x),u=_t.valueOf(i.y).selfAdd(-n.y);return o.selfMultiply(u).selfSubtract(s.selfMultiply(a)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof _t&&arguments[2]instanceof _t&&arguments[0]instanceof _t&&arguments[1]instanceof _t){var t=arguments[1],e=arguments[2];return arguments[0].multiply(arguments[3]).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[1],i=arguments[2],r=arguments[3],o=_t.valueOf(arguments[0]),s=_t.valueOf(n),a=_t.valueOf(i),u=_t.valueOf(r);return o.multiply(u).selfSubtract(s.multiply(a)).signum()}}},{key:"intersection",value:function(t,e,n,i){var r=new _t(t.y).selfSubtract(e.y),o=new _t(e.x).selfSubtract(t.x),s=new _t(t.x).selfMultiply(e.y).selfSubtract(new _t(e.x).selfMultiply(t.y)),a=new _t(n.y).selfSubtract(i.y),u=new _t(i.x).selfSubtract(n.x),l=new _t(n.x).selfMultiply(i.y).selfSubtract(new _t(i.x).selfMultiply(n.y)),c=o.multiply(l).selfSubtract(u.multiply(s)),h=a.multiply(s).selfSubtract(r.multiply(l)),f=r.multiply(u).selfSubtract(a.multiply(o)),p=c.selfDivide(f).doubleValue(),d=h.selfDivide(f).doubleValue();return G.isNaN(p)||G.isInfinite(p)||G.isNaN(d)||G.isInfinite(d)?null:new X(p,d)}},{key:"orientationIndexFilter",value:function(e,n,i){var r=null,o=(e.x-i.x)*(n.y-i.y),s=(e.y-i.y)*(n.x-i.x),a=o-s;if(o>0){if(s<=0)return t.signum(a);r=o+s}else{if(!(o<0))return t.signum(a);if(s>=0)return t.signum(a);r=-o-s}var u=t.DP_SAFE_EPSILON*r;return a>=u||-a>=u?t.signum(a):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}]),t}();vt.DP_SAFE_EPSILON=1e-15;var mt=function(){function t(){g(this,t)}return _(t,null,[{key:"index",value:function(t,e,n){return vt.orientationIndex(t,e,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var e=arguments[0],n=e.length-1;if(n<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=e[0],r=0,o=1;o<=n;o++){var s=e[o];s.y>i.y&&(i=s,r=o)}var a=r;do{(a-=1)<0&&(a=n)}while(e[a].equals2D(i)&&a!==r);var u=r;do{u=(u+1)%n}while(e[u].equals2D(i)&&u!==r);var l=e[a],c=e[u];if(l.equals2D(i)||c.equals2D(i)||l.equals2D(c))return!1;var h=t.index(l,i,c),f=null;return f=0===h?l.x>c.x:h>0,f}if(J(arguments[0],$)){var p=arguments[0],d=p.size()-1;if(d<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var g=p.getCoordinate(0),y=0,_=1;_<=d;_++){var m=p.getCoordinate(_);m.y>g.y&&(g=m,y=_)}var b=null,x=y;do{(x-=1)<0&&(x=d),b=p.getCoordinate(x)}while(b.equals2D(g)&&x!==y);var E=null,I=y;do{I=(I+1)%d,E=p.getCoordinate(I)}while(E.equals2D(g)&&I!==y);if(b.equals2D(g)||E.equals2D(g)||b.equals2D(E))return!1;var w=t.index(b,g,E);return 0===w?b.x>E.x:w>0}}}]),t}();mt.CLOCKWISE=-1,mt.RIGHT=mt.CLOCKWISE,mt.COUNTERCLOCKWISE=1,mt.LEFT=mt.COUNTERCLOCKWISE,mt.COLLINEAR=0,mt.STRAIGHT=mt.COLLINEAR;var bt=function t(){g(this,t)},xt=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t}},{key:"getArea",value:function(){var t=0;t+=lt.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=lt.ofRing(this._holes[e].getCoordinateSequence());return t}},{key:"copyInternal",value:function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)e[n]=this._holes[n].copy();return new s(t,e,this._factory)}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(!this._shell.equalsExact(i._shell,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var r=0;r<this._holes.length;r++)if(!this._holes[r].equalsExact(i._holes[r],n))return!1;return!0}return e(c(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(var t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);dt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=e.getCoordinateSequence(),r=tt.minCoordinateIndex(i,0,i.size()-2);tt.scroll(i,r,!0),mt.isCCW(i)===n&&tt.reverse(i)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null),n=0;n<e.length;n++)e[n]=this.getInteriorRingN(n).reverse();return this.getFactory().createPolygon(t,e)}},{key:"getTypeCode",value:function(){return Z.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(t,e){var n=t.copy();return this.normalize(n,e),n}},{key:"compareToSameClass",value:function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var t=arguments[1],e=arguments[0],n=this._shell.compareToSameClass(e._shell,t);if(0!==n)return n;for(var i=this.getNumInteriorRing(),r=e.getNumInteriorRing(),o=0;o<i&&o<r;){var s=this.getInteriorRingN(o),a=e.getInteriorRingN(o),u=s.compareToSameClass(a,t);if(0!==u)return u;o++}return o<i?1:o<r?-1:0}}},{key:"apply",value:function(){if(J(arguments[0],K)){var t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(J(arguments[0],rt)){var n=arguments[0];if(this._shell.apply(n),!n.isDone())for(var i=0;i<this._holes.length&&(this._holes[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(J(arguments[0],it))arguments[0].filter(this);else if(J(arguments[0],C)){var r=arguments[0];r.filter(this),this._shell.apply(r);for(var o=0;o<this._holes.length;o++)this._holes[o].apply(r)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}},{key:"getGeometryType",value:function(){return Z.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(t){return this._holes[t]}},{key:"interfaces_",get:function(){return[bt]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var t=arguments[0],e=arguments[1];if(Z.constructor_.call(this,arguments[2]),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),Z.hasNullElements(e))throw new v("holes must not contain null elements");if(t.isEmpty()&&Z.hasNonEmptyElements(e))throw new v("shell is empty but holes are not");this._shell=t,this._holes=e}}]),s}(Z),Et=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"computeEnvelopeInternal",value:function(){for(var t=new H,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}},{key:"getGeometryN",value:function(t){return this._geometries[t]}},{key:"getCoordinates",value:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t}},{key:"getArea",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}},{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return e(c(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();dt.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var t=nt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}},{key:"reverseInternal",value:function(){for(var t=this._geometries.length,e=new ft(t),n=0;n<t;n++)e.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(e)}},{key:"getTypeCode",value:function(){return Z.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var t=nt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}},{key:"getLength",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0],e=new w(dt.asList(this._geometries)),n=new w(dt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[1],r=arguments[0],o=this.getNumGeometries(),s=r.getNumGeometries(),a=0;a<o&&a<s;){var u=this.getGeometryN(a),l=r.getGeometryN(a),c=u.compareToSameClass(l,i);if(0!==c)return c;a++}return a<o?1:a<s?-1:0}}},{key:"apply",value:function(){if(J(arguments[0],K))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(J(arguments[0],rt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(J(arguments[0],it)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(J(arguments[0],C)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}}},{key:"getBoundary",value:function(){return Z.checkNotGeometryCollection(this),B.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return Z.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0];if(Z.constructor_.call(this,arguments[1]),null===t&&(t=[]),Z.hasNullElements(t))throw new v("geometries must not contain null elements");this._geometries=t}}}]),s}(Z),It=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&e(c(s.prototype),"equalsExact",this).call(this,t,n)}return e(c(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getCoordinate",value:function(){return 1===arguments.length&&Number.isInteger(arguments[0])?this._geometries[arguments[0]].getCoordinate():e(c(s.prototype),"getCoordinate",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return nt.FALSE}},{key:"getTypeCode",value:function(){return Z.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Z.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[at]}}],[{key:"constructor_",value:function(){Et.constructor_.call(this,arguments[0],arguments[1])}}]),s}(Et),wt=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"copyInternal",value:function(){return new s(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return nt.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||e(c(s.prototype),"isClosed",this).call(this)}},{key:"reverseInternal",value:function(){var t=this._points.copy();return tt.reverse(t),this.getFactory().createLinearRing(t)}},{key:"getTypeCode",value:function(){return Z.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!e(c(s.prototype),"isClosed",this).call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<s.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return Z.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){ot.constructor_.call(this,arguments[0],arguments[1]),this.validateConstruction()}}]),s}(ot);wt.MINIMUM_VALID_SIZE=4;var Nt=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),t=e.call(this),r.constructor_.apply(o(t),arguments),t}return _(r,[{key:"setOrdinate",value:function(t,e){switch(t){case r.X:this.x=e;break;case r.Y:this.y=e;break;default:throw new v("Invalid ordinate index: "+t)}}},{key:"getZ",value:function(){return X.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case r.X:return this.x;case r.Y:return this.y}throw new v("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new v("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}],[{key:"constructor_",value:function(){if(0===arguments.length)X.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof r){var t=arguments[0];X.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];X.constructor_.call(this,e.x,e.y)}}else 2===arguments.length&&X.constructor_.call(this,arguments[0],arguments[1],X.NULL_ORDINATE)}}]),r}(X);Nt.X=0,Nt.Y=1,Nt.Z=-1,Nt.M=-1;var Ct=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),t=e.call(this),r.constructor_.apply(o(t),arguments),t}return _(r,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case r.X:this.x=e;break;case r.Y:this.y=e;break;case r.M:this._m=e;break;default:throw new v("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getZ",value:function(){return X.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case r.X:return this.x;case r.Y:return this.y;case r.M:return this._m}throw new v("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new v("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)X.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof r){var t=arguments[0];X.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof X){var e=arguments[0];X.constructor_.call(this,e.x,e.y),this._m=this.getM()}}else if(3===arguments.length){var n=arguments[2];X.constructor_.call(this,arguments[0],arguments[1],X.NULL_ORDINATE),this._m=n}}}]),r}(X);Ct.X=0,Ct.Y=1,Ct.Z=-1,Ct.M=2;var Ot=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),t=e.call(this),r.constructor_.apply(o(t),arguments),t}return _(r,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case X.X:this.x=e;break;case X.Y:this.y=e;break;case X.Z:this.z=e;break;case X.M:this._m=e;break;default:throw new v("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getOrdinate",value:function(t){switch(t){case X.X:return this.x;case X.Y:return this.y;case X.Z:return this.getZ();case X.M:return this.getM()}throw new v("Invalid ordinate index: "+t)}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)X.constructor_.call(this),this._m=0;else if(1===arguments.length)if(arguments[0]instanceof r){var t=arguments[0];X.constructor_.call(this,t),this._m=t._m}else arguments[0]instanceof X&&(X.constructor_.call(this,arguments[0]),this._m=this.getM());else if(4===arguments.length){var e=arguments[3];X.constructor_.call(this,arguments[0],arguments[1],arguments[2]),this._m=e}}}]),r}(X),Pt=function(){function t(){g(this,t)}return _(t,null,[{key:"measures",value:function(t){return t instanceof Nt?0:t instanceof Ct||t instanceof Ot?1:0}},{key:"dimension",value:function(t){return t instanceof Nt?2:t instanceof Ct?3:t instanceof Ot?4:3}},{key:"create",value:function(){if(1===arguments.length)return t.create(arguments[0],0);if(2===arguments.length){var e=arguments[0],n=arguments[1];return 2===e?new Nt:3===e&&0===n?new X:3===e&&1===n?new Ct:4===e&&1===n?new Ot:new X}}}]),t}(),St=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"getCoordinate",value:function(t){return this.get(t)}},{key:"addAll",value:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&J(arguments[0],b)){for(var t=arguments[1],n=!1,i=arguments[0].iterator();i.hasNext();)this.add(i.next(),t),n=!0;return n}return e(c(s.prototype),"addAll",this).apply(this,arguments)}},{key:"clone",value:function(){for(var t=e(c(s.prototype),"clone",this).call(this),n=0;n<this.size();n++)t.add(n,this.get(n).clone());return t}},{key:"toCoordinateArray",value:function(){if(0===arguments.length)return this.toArray(s.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(s.coordArrayType);for(var t=this.size(),e=new Array(t).fill(null),n=0;n<t;n++)e[n]=this.get(t-n-1);return e}}},{key:"add",value:function(){if(1===arguments.length)return e(c(s.prototype),"add",this).call(this,arguments[0]);if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof X&&"boolean"==typeof arguments[1]){var t=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(t))return null;e(c(s.prototype),"add",this).call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];if(arguments[2])for(var r=0;r<n.length;r++)this.add(n[r],i);else for(var o=n.length-1;o>=0;o--)this.add(n[o],i);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof X){var a=arguments[0],u=arguments[1];if(!arguments[2]){var l=this.size();if(l>0){if(a>0&&this.get(a-1).equals2D(u))return null;if(a<l&&this.get(a).equals2D(u))return null}}e(c(s.prototype),"add",this).call(this,a,u)}}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=1;p>d&&(g=-1);for(var y=p;y!==d;y+=g)this.add(h[y],f);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var t=this.get(0).copy();this.add(t,!1)}}}],[{key:"constructor_",value:function(){if(0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}]),s}(ft);St.coordArrayType=new Array(0).fill(null);var kt=function(){function t(){g(this,t)}return _(t,null,[{key:"log10",value:function(e){var n=Math.log(e);return G.isInfinite(n)||G.isNaN(n)?n:n/t.LOG_10}},{key:"min",value:function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var i=arguments[1],r=arguments[2],o=arguments[3],s=arguments[0];return i>s&&(s=i),r>s&&(s=r),o>s&&(s=o),s}}},{key:"average",value:function(t,e){return(t+e)/2}}]),t}();kt.LOG_10=Math.log(10);var Tt=function(){function t(){g(this,t)}return _(t,null,[{key:"arraycopy",value:function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++}},{key:"getProperty",value:function(t){return{"line.separator":"\n"}[t]}}]),t}(),Lt=function(){function t(){g(this,t)}return _(t,null,[{key:"isRing",value:function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}},{key:"ptNotInList",value:function(e,n){for(var i=0;i<e.length;i++){var r=e[i];if(t.indexOf(r,n)<0)return r}return null}},{key:"scroll",value:function(e,n){var i=t.indexOf(n,e);if(i<0)return null;var r=new Array(e.length).fill(null);Tt.arraycopy(e,i,r,0,e.length-i),Tt.arraycopy(e,0,r,e.length-i,i),Tt.arraycopy(r,0,e,0,e.length)}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new St,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()}},{key:"measures",value:function(t){if(null===t||0===t.length)return 0;var e,n=0,i=h(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n=Math.max(n,Pt.measures(r))}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(e){return t.hasRepeatedPoints(e)?new St(e,!1).toCoordinateArray():e}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i}},{key:"copyDeep",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=i[r+u].copy()}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0}},{key:"envelope",value:function(t){for(var e=new H,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(e){return e.toArray(t.coordArrayType)}},{key:"dimension",value:function(t){if(null===t||0===t.length)return 3;var e,n=0,i=h(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n=Math.max(n,Pt.dimension(r))}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t[e].compareTo(t[t.length-1-e]);if(0!==n)return n}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=kt.clamp(e,0,t.length);var i=(n=kt.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r}}]),t}();Lt.ForwardComparator=function(){function t(){g(this,t)}return _(t,[{key:"compare",value:function(t,e){return Lt.compare(t,e)}},{key:"interfaces_",get:function(){return[j]}}]),t}(),Lt.BidirectionalComparator=function(){function t(){g(this,t)}return _(t,[{key:"compare",value:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Lt.compare(n,i);return Lt.isEqualReversed(n,i)?0:r}},{key:"OLDcompare",value:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Lt.increasingDirection(n),o=Lt.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(i[a]);if(0!==l)return l;s+=r,a+=o}return 0}},{key:"interfaces_",get:function(){return[j]}}]),t}(),Lt.coordArrayType=new Array(0).fill(null);var Mt=function(){function t(e){g(this,t),this.str=e}return _(t,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),t}(),Rt=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():G.NaN}},{key:"setOrdinate",value:function(t,e,n){switch(e){case $.X:this._coordinates[t].x=n;break;case $.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():G.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case $.X:return this._coordinates[t].x;case $.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(1===arguments.length)return this._coordinates[arguments[0]];2===arguments.length&&arguments[1].setCoordinate(this._coordinates[arguments[0]])}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return Pt.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var e=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++){var i=this.createCoordinate();i.setCoordinate(this._coordinates[n]),e[n]=i}return new t(e,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new Mt(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[$,S]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];t.constructor_.call(this,e,Lt.dimension(e),Lt.measures(e))}else if(Number.isInteger(arguments[0])){var n=arguments[0];this._coordinates=new Array(n).fill(null);for(var i=0;i<n;i++)this._coordinates[i]=new X}else if(J(arguments[0],$)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._measures=r.getMeasures(),this._coordinates=new Array(r.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)this._coordinates[o]=r.getCoordinateCopy(o)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0];t.constructor_.call(this,s,arguments[1],Lt.measures(s))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)this._coordinates[l]=Pt.create(u)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var c=arguments[0],h=arguments[2];this._dimension=arguments[1],this._measures=h,this._coordinates=null===c?new Array(0).fill(null):c}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var f=arguments[0],p=arguments[1],d=arguments[2];this._coordinates=new Array(f).fill(null),this._dimension=p,this._measures=d;for(var g=0;g<f;g++)this._coordinates[g]=this.createCoordinate()}}}]),t}(),At=function(){function t(){g(this,t)}return _(t,[{key:"readResolve",value:function(){return t.instance()}},{key:"create",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Rt(arguments[0]);if(J(arguments[0],$))return new Rt(arguments[0])}else{if(2===arguments.length){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new Rt(arguments[0],t)}if(3===arguments.length){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new Rt(arguments[0],n+e,e)}}}},{key:"interfaces_",get:function(){return[st,S]}}],[{key:"instance",value:function(){return t.instanceObject}}]),t}();At.instanceObject=new At;var Dt=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&e(c(s.prototype),"equalsExact",this).call(this,t,n)}return e(c(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return Z.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new ft,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))}},{key:"getGeometryType",value:function(){return Z.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[bt]}}],[{key:"constructor_",value:function(){Et.constructor_.call(this,arguments[0],arguments[1])}}]),s}(Et),Ft=function(){function t(){g(this,t)}return _(t,[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),t}(),Gt=function(t){n(r,t);var e=i(r);function r(t){var n;return g(this,r),(n=e.call(this)).map=new Map,t instanceof b&&n.addAll(t),n}return _(r,[{key:"contains",value:function(t){var e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}},{key:"add",value:function(t){var e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}},{key:"addAll",value:function(t){var e,n=h(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(r){n.e(r)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new E}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return 0===this.map.size}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new jt(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}]),r}(I),jt=function(){function t(e){g(this,t),this.iterator=e.values();var n=this.iterator.next(),i=n.done,r=n.value;this.done=i,this.value=r}return _(t,[{key:"next",value:function(){if(this.done)throw new x;var t=this.value,e=this.iterator.next(),n=e.done,i=e.value;return this.done=n,this.value=i,t}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new E}}]),t}(),Ut=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),(t=e.call(this)).map=new Map,t}return _(r,[{key:"get",value:function(t){return this.map.get(t)||null}},{key:"put",value:function(t,e){return this.map.set(t,e),e}},{key:"values",value:function(){for(var t=new ft,e=this.map.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t}},{key:"entrySet",value:function(){var t=new Gt;return this.map.entries().forEach((function(e){return t.add(e)})),t}},{key:"size",value:function(){return this.map.size()}}]),r}(Ft),Vt=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"equals",value:function(e){return e instanceof t&&this._modelType===e._modelType&&this._scale===e._scale}},{key:"compareTo",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return yt.compare(n,i)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===t.FLOATING||this._modelType===t.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var e="UNKNOWN";return this._modelType===t.FLOATING?e="Floating":this._modelType===t.FLOATING_SINGLE?e="Floating-Single":this._modelType===t.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var e=arguments[0];return G.isNaN(e)||this._modelType===t.FLOATING_SINGLE?e:this._modelType===t.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof X){var n=arguments[0];if(this._modelType===t.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}}},{key:"getMaximumSignificantDigits",value:function(){var e=16;return this._modelType===t.FLOATING?e=16:this._modelType===t.FLOATING_SINGLE?e=6:this._modelType===t.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[S,O]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Bt){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}]),t}(),Bt=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"readResolve",value:function(){return t.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[S]}}],[{key:"constructor_",value:function(){this._name=null;var e=arguments[0];this._name=e,t.nameToTypeMap.put(e,this)}}]),t}();Bt.nameToTypeMap=new Ut,Vt.Type=Bt,Vt.FIXED=new Bt("FIXED"),Vt.FLOATING=new Bt("FLOATING"),Vt.FLOATING_SINGLE=new Bt("FLOATING SINGLE"),Vt.maximumPreciseValue=9007199254740992;var zt=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&e(c(s.prototype),"equalsExact",this).call(this,t,n)}return e(c(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?nt.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return Z.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new E}},{key:"getGeometryType",value:function(){return Z.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[Q]}}],[{key:"constructor_",value:function(){Et.constructor_.call(this,arguments[0],arguments[1])}}]),s}(Et),qt=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new v("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new X(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new X(t.getMinX(),t.getMinY()),new X(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new X(t.getMinX(),t.getMinY()),new X(t.getMinX(),t.getMaxY()),new X(t.getMaxX(),t.getMaxY()),new X(t.getMaxX(),t.getMinY()),new X(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(J(arguments[0],$))return new ot(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return 0===arguments.length?new zt(null,this):1===arguments.length?new zt(arguments[0],this):void 0}},{key:"buildGeometry",value:function(e){for(var n=null,i=!1,r=!1,o=e.iterator();o.hasNext();){var s=o.next(),a=s.getTypeCode();null===n&&(n=a),a!==n&&(i=!0),s instanceof Et&&(r=!0)}if(null===n)return this.createGeometryCollection();if(i||r)return this.createGeometryCollection(t.toGeometryArray(e));var u=e.iterator().next();if(e.size()>1){if(u instanceof xt)return this.createMultiPolygon(t.toPolygonArray(e));if(u instanceof ot)return this.createMultiLineString(t.toLineStringArray(e));if(u instanceof ut)return this.createMultiPoint(t.toPointArray(e));B.shouldNeverReachHere("Unhandled geometry type: "+u.getGeometryType())}return u}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(J(arguments[0],$))return new ut(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(J(arguments[0],$))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof wt)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new xt(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return 0===arguments.length?new Et(null,this):1===arguments.length?new Et(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(J(arguments[0],$))return new wt(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return 0===arguments.length?new Dt(null,this):1===arguments.length?new Dt(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(0===arguments.length)return new It(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new It(arguments[0],this);if(J(arguments[0],$)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());tt.copy(t,n,i,0,1),e[n]=this.createPoint(i)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[S]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)t.constructor_.call(this,new Vt,0);else if(1===arguments.length)if(J(arguments[0],st)){var e=arguments[0];t.constructor_.call(this,new Vt,0,e)}else arguments[0]instanceof Vt&&t.constructor_.call(this,arguments[0],0,t.getDefaultCoordinateSequenceFactory());else if(2===arguments.length)t.constructor_.call(this,arguments[0],arguments[1],t.getDefaultCoordinateSequenceFactory());else if(3===arguments.length){var n=arguments[1],i=arguments[2];this._precisionModel=arguments[0],this._coordinateSequenceFactory=i,this._SRID=n}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return At.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}]),t}(),Yt=function(){function t(){g(this,t)}return _(t,null,[{key:"opposite",value:function(e){return e===t.LEFT?t.RIGHT:e===t.RIGHT?t.LEFT:e}}]),t}();Yt.ON=0,Yt.LEFT=1,Yt.RIGHT=2;var Xt=function(){function t(){g(this,t)}return _(t,null,[{key:"intersection",value:function(t,e,n,i){var r=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,a=t.y>e.y?t.y:e.y,u=n.x<i.x?n.x:i.x,l=n.y<i.y?n.y:i.y,c=n.x>i.x?n.x:i.x,h=n.y>i.y?n.y:i.y,f=((r>u?r:u)+(s<c?s:c))/2,p=((o>l?o:l)+(a<h?a:h))/2,d=t.x-f,g=t.y-p,y=e.x-f,_=e.y-p,v=n.x-f,m=n.y-p,b=i.x-f,x=i.y-p,E=g-_,I=y-d,w=d*_-y*g,N=m-x,C=b-v,O=v*x-b*m,P=E*C-N*I,S=(I*O-C*w)/P,k=(N*w-E*O)/P;return G.isNaN(S)||G.isInfinite(S)||G.isNaN(k)||G.isInfinite(k)?null:new X(S+f,k+p)}}]),t}(),Wt=function(){function t(){g(this,t)}return _(t,null,[{key:"segmentToSegment",value:function(e,n,i,r){if(e.equals(n))return t.pointToSegment(e,i,r);if(i.equals(r))return t.pointToSegment(r,e,n);var o=!1;if(H.intersects(e,n,i,r)){var s=(n.x-e.x)*(r.y-i.y)-(n.y-e.y)*(r.x-i.x);if(0===s)o=!0;else{var a=((e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y))/s,u=((e.y-i.y)*(r.x-i.x)-(e.x-i.x)*(r.y-i.y))/s;(u<0||u>1||a<0||a>1)&&(o=!0)}}else o=!0;return o?kt.min(t.pointToSegment(e,i,r),t.pointToSegment(n,i,r),t.pointToSegment(i,e,n),t.pointToSegment(r,e,n)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return r<=0?t.distance(e):r>=1?t.distance(n):Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)}},{key:"pointToSegmentString",value:function(e,n){if(0===n.length)throw new v("Line array must contain at least one vertex");for(var i=e.distance(n[0]),r=0;r<n.length-1;r++){var o=t.pointToSegment(e,n[r],n[r+1]);o<i&&(i=o)}return i}}]),t}(),Ht={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Zt={};for(var Kt in Ht)Zt[Kt]=Ht[Kt].toUpperCase();var Jt=function(){function t(e){g(this,t),this.wkt=e,this.index_=-1}return _(t,[{key:"isAlpha_",value:function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}},{key:"isNumeric_",value:function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}},{key:"isWhiteSpace_",value:function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var t,e=this.nextChar_(),n=this.index_,i=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.isNumeric_(e)||"-"==e)t=4,i=this.readNumber_();else if(this.isAlpha_(e))t=1,i=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=6}return{position:n,value:i,type:t}}},{key:"readNumber_",value:function(){var t,e=this.index_,n=!1,i=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}},{key:"readText_",value:function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}]),t}(),Qt=function(){function e(t,n){g(this,e),this.lexer_=t,this.layout_="XY",this.factory=n}return _(e,[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(t){return this.token_.type==t}},{key:"match",value:function(t){var e=this.isTokenType(t);return e&&this.consume_(),e}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var t="XY",e=this.token_;if(this.isTokenType(1)){var n=e.value;"Z"===n?t="XYZ":"M"===n?t="XYM":"ZM"===n&&(t="XYZM"),"XY"!==t&&this.consume_()}return t}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(2)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var t;if(this.match(2)){if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var t=[],e=this.layout_.length,n=0;n<e;++n){var i=this.token_;if(!this.match(4))break;t.push(i.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t}},{key:"parsePointTextList_",value:function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t}},{key:"parseLineStringTextList_",value:function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t}},{key:"parsePolygonTextList_",value:function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t}},{key:"isEmptyGeometry_",value:function(){var t=this.isTokenType(1)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var e=this.factory,n=function(e){return a(X,t(e))},i=function(t){var i=t.map((function(t){return e.createLinearRing(t.map(n))}));return i.length>1?e.createPolygon(i[0],i.slice(1)):e.createPolygon(i[0])},r=this.token_;if(this.match(1)){var o=r.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==o){var s=this.parseGeometryCollectionText_();return e.createGeometryCollection(s)}switch(o){case"POINT":var u=this.parsePointText_();return u?e.createPoint(a(X,t(u))):e.createPoint();case"LINESTRING":var l=this.parseLineStringText_().map(n);return e.createLineString(l);case"LINEARRING":var c=this.parseLineStringText_().map(n);return e.createLinearRing(c);case"POLYGON":var h=this.parsePolygonText_();return h&&0!==h.length?i(h):e.createPolygon();case"MULTIPOINT":var f=this.parseMultiPointText_();if(!f||0===f.length)return e.createMultiPoint();var p=f.map(n).map((function(t){return e.createPoint(t)}));return e.createMultiPoint(p);case"MULTILINESTRING":var d=this.parseMultiLineStringText_().map((function(t){return e.createLineString(t.map(n))}));return e.createMultiLineString(d);case"MULTIPOLYGON":var g=this.parseMultiPolygonText_();if(!g||0===g.length)return e.createMultiPolygon();var y=g.map(i);return e.createMultiPolygon(y);default:throw new Error("Invalid geometry type: "+o)}}throw new Error(this.formatErrorMessage_())}}]),e}();function $t(t){if(t.isEmpty())return"";var e=t.getCoordinate(),n=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||n.push(e.z),void 0===e.m||Number.isNaN(e.m)||n.push(e.m),n.join(" ")}function te(t){for(var e=t.getCoordinates().map((function(t){var e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e})),n=[],i=0,r=e.length;i<r;++i)n.push(e[i].join(" "));return n.join(", ")}function ee(t){var e=[];e.push("("+te(t.getExteriorRing())+")");for(var n=0,i=t.getNumInteriorRing();n<i;++n)e.push("("+te(t.getInteriorRingN(n))+")");return e.join(", ")}var ne={Point:$t,LineString:te,LinearRing:te,Polygon:ee,MultiPoint:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push("("+$t(t.getGeometryN(n))+")");return e.join(", ")},MultiLineString:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push("("+te(t.getGeometryN(n))+")");return e.join(", ")},MultiPolygon:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push("("+ee(t.getGeometryN(n))+")");return e.join(", ")},GeometryCollection:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push(ie(t.getGeometryN(n)));return e.join(", ")}};function ie(t){var e=t.getGeometryType(),n=ne[e];e=e.toUpperCase();var i=function(t){var e="";if(t.isEmpty())return e;var n=t.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(e+="Z"),void 0===n.m||Number.isNaN(n.m)||(e+="M"),e}(t);return i.length>0&&(e+=" "+i),t.isEmpty()?e+" EMPTY":e+" ("+n(t)+")"}var re=function(){function t(e){g(this,t),this.geometryFactory=e||new qt,this.precisionModel=this.geometryFactory.getPrecisionModel()}return _(t,[{key:"read",value:function(t){var e=new Jt(t);return new Qt(e,this.geometryFactory).parse()}},{key:"write",value:function(t){return ie(t)}}]),t}(),oe=function(){function t(e){g(this,t),this.parser=new re(e)}return _(t,[{key:"write",value:function(t){return this.parser.write(t)}}],[{key:"toLineString",value:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}]),t}(),se=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new Mt;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==t.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(e,n){return t.computeEdgeDistance(this._intPt[n],this._inputLines[e][0],this._inputLines[e][1])}},{key:"isCollinear",value:function(){return this._result===t.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return oe.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+oe.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new X,this._intPt[1]=new X,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return B.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return B.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}}]),t}();se.DONT_INTERSECT=0,se.DO_INTERSECT=1,se.COLLINEAR=2,se.NO_INTERSECTION=0,se.POINT_INTERSECTION=1,se.COLLINEAR_INTERSECTION=2;var ae=function(t){n(o,t);var r=i(o);function o(){return g(this,o),r.call(this)}return _(o,[{key:"isInSegmentEnvelopes",value:function(t){var e=new H(this._inputLines[0][0],this._inputLines[0][1]),n=new H(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)}},{key:"computeIntersection",value:function(){if(3!==arguments.length)return e(c(o.prototype),"computeIntersection",this).apply(this,arguments);var t=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,H.intersects(n,i,t)&&0===mt.index(n,i,t)&&0===mt.index(i,n,t))return this._isProper=!0,(t.equals(n)||t.equals(i))&&(this._isProper=!1),this._result=se.POINT_INTERSECTION,null;this._result=se.NO_INTERSECTION}},{key:"intersection",value:function(t,e,n,i){var r=this.intersectionSafe(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new X(o.nearestEndpoint(t,e,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(r),r}},{key:"checkDD",value:function(t,e,n,i,r){var o=vt.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);Tt.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&Tt.out.println("Distance = "+r.distance(o))}},{key:"intersectionSafe",value:function(t,e,n,i){var r=Xt.intersection(t,e,n,i);return null===r&&(r=o.nearestEndpoint(t,e,n,i)),r}},{key:"computeCollinearIntersection",value:function(t,e,n,i){var r=H.intersects(t,e,n),o=H.intersects(t,e,i),s=H.intersects(n,i,t),a=H.intersects(n,i,e);return r&&o?(this._intPt[0]=n,this._intPt[1]=i,se.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=t,this._intPt[1]=e,se.COLLINEAR_INTERSECTION):r&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?se.COLLINEAR_INTERSECTION:se.POINT_INTERSECTION):r&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?se.COLLINEAR_INTERSECTION:se.POINT_INTERSECTION):o&&s?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||r||a?se.COLLINEAR_INTERSECTION:se.POINT_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||r||s?se.COLLINEAR_INTERSECTION:se.POINT_INTERSECTION):se.NO_INTERSECTION}},{key:"computeIntersect",value:function(t,e,n,i){if(this._isProper=!1,!H.intersects(t,e,n,i))return se.NO_INTERSECTION;var r=mt.index(t,e,n),o=mt.index(t,e,i);if(r>0&&o>0||r<0&&o<0)return se.NO_INTERSECTION;var s=mt.index(n,i,t),a=mt.index(n,i,e);return s>0&&a>0||s<0&&a<0?se.NO_INTERSECTION:0===r&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,n,i):(0===r||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:0===r?this._intPt[0]=new X(n):0===o?this._intPt[0]=new X(i):0===s?this._intPt[0]=new X(t):0===a&&(this._intPt[0]=new X(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,i)),se.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(t,e,n,i){var r=t,o=Wt.pointToSegment(t,n,i),s=Wt.pointToSegment(e,n,i);return s<o&&(o=s,r=e),(s=Wt.pointToSegment(n,t,e))<o&&(o=s,r=n),(s=Wt.pointToSegment(i,t,e))<o&&(o=s,r=i),r}}]),o}(se),ue=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=mt.index(t,e,this._p);if(r===mt.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(r=-r),r===mt.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==m.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?m.BOUNDARY:this._crossingCount%2==1?m.INTERIOR:m.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof X&&J(arguments[1],$)){for(var e=arguments[1],n=new t(arguments[0]),i=new X,r=new X,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof X&&arguments[1]instanceof Array){for(var s=arguments[1],a=new t(arguments[0]),u=1;u<s.length;u++)if(a.countSegment(s[u],s[u-1]),a.isOnSegment())return a.getLocation();return a.getLocation()}}}]),t}(),le=function(){function t(){g(this,t)}return _(t,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof X&&J(arguments[1],$)){for(var t=arguments[0],e=arguments[1],n=new ae,i=new X,r=new X,o=e.size(),s=1;s<o;s++)if(e.getCoordinate(s-1,i),e.getCoordinate(s,r),n.computeIntersection(t,i,r),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof X&&arguments[1]instanceof Array){for(var a=arguments[0],u=arguments[1],l=new ae,c=1;c<u.length;c++)if(l.computeIntersection(a,u[c-1],u[c]),l.hasIntersection())return!0;return!1}}},{key:"locateInRing",value:function(t,e){return ue.locatePointInRing(t,e)}},{key:"isInRing",value:function(e,n){return t.locateInRing(e,n)!==m.EXTERIOR}}]),t}(),ce=function(t){n(r,t);var e=i(r);function r(t,n){var i;return g(this,r),(i=e.call(this,n?t+" [ "+n+" ]":t)).pt=n?new X(n):void 0,i.name=Object.keys({TopologyException:r})[0],i}return _(r,[{key:"getCoordinate",value:function(){return this.pt}}]),r}(U),he=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==m.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===m.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Yt.ON]=this.location[Yt.ON],e[Yt.LEFT]=m.NONE,e[Yt.RIGHT]=m.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===m.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[Yt.LEFT];this.location[Yt.LEFT]=this.location[Yt.RIGHT],this.location[Yt.RIGHT]=t}},{key:"toString",value:function(){var t=new gt;return this.location.length>1&&t.append(m.toLocationSymbol(this.location[Yt.LEFT])),t.append(m.toLocationSymbol(this.location[Yt.ON])),this.location.length>1&&t.append(m.toLocationSymbol(this.location[Yt.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[Yt.ON]=t,this.location[Yt.LEFT]=e,this.location[Yt.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:m.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===m.NONE)return!0;return!1}},{key:"setLocation",value:function(){1===arguments.length?this.setLocation(Yt.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(m.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[Yt.ON]=e}else if(arguments[0]instanceof t){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.init(3),this.location[Yt.ON]=r,this.location[Yt.LEFT]=o,this.location[Yt.RIGHT]=s}}}]),t}(),fe=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new he(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){return 1===arguments.length?this.elt[arguments[0]].get(Yt.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0}},{key:"toString",value:function(){var t=new gt;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){2===arguments.length?this.elt[arguments[0]].setLocation(Yt.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new he(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new he(e),this.elt[1]=new he(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new he(n.elt[0]),this.elt[1]=new he(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new he(m.NONE),this.elt[1]=new he(m.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new he(o,s,a),this.elt[1]=new he(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new he(m.NONE,m.NONE,m.NONE),this.elt[1]=new he(m.NONE,m.NONE,m.NONE),this.elt[u].setLocations(l,c,h)}}},{key:"toLineLabel",value:function(e){for(var n=new t(m.NONE),i=0;i<2;i++)n.setLocation(i,e.getLocation(i));return n}}]),t}(),pe=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"computeRing",value:function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=mt.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"computePoints",value:function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new ce("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new ce("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();B.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(t){return this._pts.get(t)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;n&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}},{key:"containsPoint",value:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!le.isInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0}},{key:"addHole",value:function(t){this._holes.add(t)}},{key:"isShell",value:function(){return null===this._shell}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Yt.RIGHT);if(n===m.NONE)return null;if(this._label.getLocation(e)===m.NONE)return this._label.setLocation(e,n),null}}},{key:"setShell",value:function(t){this._shell=t,null!==t&&t.addHole(this)}},{key:"toPolygon",value:function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new ft,this._pts=new ft,this._label=new fe(m.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ft,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0];this._geometryFactory=arguments[1],this.computePoints(t),this.computeRing()}}}]),t}(),de=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),t=e.call(this),r.constructor_.apply(o(t),arguments),t}return _(r,[{key:"setEdgeRing",value:function(t,e){t.setMinEdgeRing(e)}},{key:"getNext",value:function(t){return t.getNextMin()}}],[{key:"constructor_",value:function(){pe.constructor_.call(this,arguments[0],arguments[1])}}]),r}(pe),ge=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),t=e.call(this),r.constructor_.apply(o(t),arguments),t}return _(r,[{key:"buildMinimalRings",value:function(){var t=new ft,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new de(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t}},{key:"setEdgeRing",value:function(t,e){t.setEdgeRing(e)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}},{key:"getNext",value:function(t){return t.getNext()}}],[{key:"constructor_",value:function(){pe.constructor_.call(this,arguments[0],arguments[1])}}]),r}(pe),ye=function(){function t(){g(this,t)}return _(t,[{key:"locate",value:function(t){}}]),t}(),_e=function(){function t(){g(this,t)}return _(t,[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),t}(),ve=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,t.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new x;var e=this._parent.getGeometryN(this._index++);return e instanceof Et?(this._subcollectionIterator=new t(e),this._subcollectionIterator.next()):e}},{key:"remove",value:function(){throw new E(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[_e]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof Et)}}]),t}(),me=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"locate",value:function(e){return t.locate(e,this._geom)}},{key:"interfaces_",get:function(){return[ye]}}],[{key:"constructor_",value:function(){this._geom=null,this._geom=arguments[0]}},{key:"locatePointInPolygon",value:function(e,n){if(n.isEmpty())return m.EXTERIOR;var i=n.getExteriorRing(),r=t.locatePointInRing(e,i);if(r!==m.INTERIOR)return r;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=t.locatePointInRing(e,s);if(a===m.BOUNDARY)return m.BOUNDARY;if(a===m.INTERIOR)return m.EXTERIOR}return m.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?le.locateInRing(t,e.getCoordinates()):m.EXTERIOR}},{key:"containsPointInPolygon",value:function(e,n){return m.EXTERIOR!==t.locatePointInPolygon(e,n)}},{key:"locateInGeometry",value:function(e,n){if(n instanceof xt)return t.locatePointInPolygon(e,n);if(n instanceof Et)for(var i=new ve(n);i.hasNext();){var r=i.next();if(r!==n){var o=t.locateInGeometry(e,r);if(o!==m.EXTERIOR)return o}}return m.EXTERIOR}},{key:"isContained",value:function(e,n){return m.EXTERIOR!==t.locate(e,n)}},{key:"locate",value:function(e,n){return n.isEmpty()?m.EXTERIOR:n.getEnvelopeInternal().intersects(e)?t.locateInGeometry(e,n):m.EXTERIOR}}]),t}();function be(t){return null==t?0:t.color}function xe(t){return null==t?null:t.parent}function Ee(t,e){null!==t&&(t.color=e)}function Ie(t){return null==t?null:t.left}function we(t){return null==t?null:t.right}var Ne=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),(t=e.call(this)).root_=null,t.size_=0,t}return _(r,[{key:"get",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null}},{key:"put",value:function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null}},{key:"fixAfterInsertion",value:function(t){var e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)xe(t)===Ie(xe(xe(t)))?1===be(e=we(xe(xe(t))))?(Ee(xe(t),0),Ee(e,0),Ee(xe(xe(t)),1),t=xe(xe(t))):(t===we(xe(t))&&(t=xe(t),this.rotateLeft(t)),Ee(xe(t),0),Ee(xe(xe(t)),1),this.rotateRight(xe(xe(t)))):1===be(e=Ie(xe(xe(t))))?(Ee(xe(t),0),Ee(e,0),Ee(xe(xe(t)),1),t=xe(xe(t))):(t===Ie(xe(t))&&(t=xe(t),this.rotateRight(t)),Ee(xe(t),0),Ee(xe(xe(t)),1),this.rotateLeft(xe(xe(t))));this.root_.color=0}},{key:"values",value:function(){var t=new ft,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=r.successor(e));)t.add(e.value);return t}},{key:"entrySet",value:function(){var t=new Gt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=r.successor(e));)t.add(e);return t}},{key:"rotateLeft",value:function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}},{key:"rotateRight",value:function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}},{key:"getFirstEntry",value:function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return!0;e=e.right}}return!1}}],[{key:"successor",value:function(t){var e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e}}]),r}(function(t){n(r,t);var e=i(r);function r(){return g(this,r),e.apply(this,arguments)}return r}(Ft)),Ce=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getNextCW",value:function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)}},{key:"propagateSideLabels",value:function(t){for(var e=m.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Yt.LEFT)!==m.NONE&&(e=i.getLocation(t,Yt.LEFT))}if(e===m.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Yt.ON)===m.NONE&&a.setLocation(t,Yt.ON,r),a.isArea(t)){var u=a.getLocation(t,Yt.LEFT),l=a.getLocation(t,Yt.RIGHT);if(l!==m.NONE){if(l!==r)throw new ce("side location conflict",s.getCoordinate());u===m.NONE&&B.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=u}else B.isTrue(a.getLocation(t,Yt.LEFT)===m.NONE,"found single null side"),a.setLocation(t,Yt.RIGHT,r),a.setLocation(t,Yt.LEFT,r)}}}},{key:"getCoordinate",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:"print",value:function(t){Tt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"isAreaLabelsConsistent",value:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Yt.LEFT);B.isTrue(i!==m.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();B.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Yt.LEFT),u=s.getLocation(t,Yt.RIGHT);if(a===u)return!1;if(u!==r)return!1;r=a}return!0}},{key:"findIndex",value:function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this._edgeList&&(this._edgeList=new ft(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(t,e,n){return this._ptInAreaLocation[t]===m.NONE&&(this._ptInAreaLocation[t]=me.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]}},{key:"toString",value:function(){var t=new gt;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()}},{key:"computeEdgeEndLabels",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)}},{key:"computeLabelling",value:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===m.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=m.NONE;if(e[u])l=m.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(t,e){this._edgeMap.put(t,e),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Ne,this._edgeList=null,this._ptInAreaLocation=[m.NONE,m.NONE]}}]),t}(),Oe=function(){function t(){g(this,t)}return _(t,null,[{key:"isNorthern",value:function(e){return e===t.NE||e===t.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&2==(t-e+4)%4}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}},{key:"isInHalfPlane",value:function(e,n){return n===t.SE?e===t.SE||e===t.SW:e===n||e===n+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];if(0===e&&0===n)throw new v("Cannot compute the quadrant for point ( "+e+", "+n+" )");return e>=0?n>=0?t.NE:t.SE:n>=0?t.NW:t.SW}if(arguments[0]instanceof X&&arguments[1]instanceof X){var i=arguments[0],r=arguments[1];if(r.x===i.x&&r.y===i.y)throw new v("Cannot compute the quadrant for two identical points "+i);return r.x>=i.x?r.y>=i.y?t.NE:t.SE:r.y>=i.y?t.NW:t.SW}}}]),t}();Oe.NE=0,Oe.NW=1,Oe.SW=2,Oe.SE=3;var Pe=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new ce("no outgoing dirEdge found",this.getCoordinate());B.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}},{key:"insert",value:function(t){this.insertEdgeEnd(t,t)}},{key:"getRightmostEdge",value:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Oe.isNorthern(r)&&Oe.isNorthern(o)?n:Oe.isNorthern(r)||Oe.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(B.shouldNeverReachHere("found two horizontal edges incident on node"),null):i}},{key:"print",value:function(t){Tt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ft;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)}},{key:"computeDepths",value:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Yt.LEFT),i=t.getDepth(Yt.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new ce("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var u=this._edgeList.get(a);u.setEdgeDepths(Yt.RIGHT,s),s=u.getDepth(Yt.LEFT)}return s}}},{key:"mergeSymLabels",value:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(B.isTrue(null!==e,"found null for first outgoing dirEdge"),B.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))}},{key:"getOutgoingDegree",value:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var t=m.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=m.INTERIOR;break}if(i.isInResult()){t=m.EXTERIOR;break}}}if(t===m.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===m.INTERIOR):(s.isInResult()&&(r=m.EXTERIOR),a.isInResult()&&(r=m.INTERIOR))}}},{key:"computeLabelling",value:function(t){e(c(s.prototype),"computeLabelling",this).call(this,t),this._label=new fe(m.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==m.INTERIOR&&o!==m.BOUNDARY||this._label.setLocation(r,m.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}]),s}(Ce),Se=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"setVisited",value:function(t){this._isVisited=t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(t){this._label=t}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(t){this._isCovered=t,this._isCoveredSet=!0}},{key:"updateIM",value:function(t){B.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length||1===arguments.length&&(this._label=arguments[0])}}]),t}(),ke=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"isIncidentEdgeInResult",value:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(t){t.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(t){}},{key:"computeMergedLocation",value:function(t,e){var n=m.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==m.BOUNDARY&&(n=i)}return n}},{key:"setLabel",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return e(c(s.prototype),"setLabel",this).apply(this,arguments);var t=arguments[0],n=arguments[1];null===this._label?this._label=new fe(t,n):this._label.setLocation(t,n)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof s)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof fe)for(var t=arguments[0],e=0;e<2;e++){var n=this.computeMergedLocation(t,e);this._label.getLocation(e)===m.NONE&&this._label.setLocation(e,n)}}},{key:"add",value:function(t){this._edges.insert(t),t.setNode(this)}},{key:"setLabelBoundary",value:function(t){if(null===this._label)return null;var e=m.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case m.BOUNDARY:n=m.INTERIOR;break;case m.INTERIOR:default:n=m.BOUNDARY}this._label.setLocation(t,n)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var t=arguments[1];this._coord=arguments[0],this._edges=t,this._label=new fe(0,m.NONE)}}]),s}(Se),Te=function(){function t(){g(this,t)}return _(t,[{key:"createNode",value:function(t){return new ke(t,null)}}]),t}(),Le=function(t){n(r,t);var e=i(r);function r(){return g(this,r),e.call(this)}return _(r,[{key:"createNode",value:function(t){return new ke(t,new Pe)}}]),r}(Te),Me=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"find",value:function(t){return this.nodeMap.get(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof X){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ke){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}}},{key:"print",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(t){for(var e=new ft,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===m.BOUNDARY&&e.add(i)}return e}},{key:"add",value:function(t){var e=t.getCoordinate();this.addNode(e).add(t)}}],[{key:"constructor_",value:function(){this.nodeMap=new Ne,this.nodeFact=null,this.nodeFact=arguments[0]}}]),t}(),Re=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:mt.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Oe.quadrant(this._dx,this._dy),B.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[O]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length)t.constructor_.call(this,arguments[0],arguments[1],arguments[2],null);else if(4===arguments.length){var e=arguments[1],n=arguments[2],i=arguments[3];t.constructor_.call(this,arguments[0]),this.init(e,n),this._label=i}}}]),t}(),Ae=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(t){return this._depth[t]}},{key:"setVisited",value:function(t){this._isVisited=t}},{key:"computeDirectedLabel",value:function(){this._label=new fe(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new ce("assigned depths do not match",this.getCoordinate());this._depth[t]=e}},{key:"isInteriorAreaEdge",value:function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Yt.LEFT)===m.INTERIOR&&this._label.getLocation(e,Yt.RIGHT)===m.INTERIOR||(t=!1);return t}},{key:"setNextMin",value:function(t){this._nextMin=t}},{key:"print",value:function(t){e(c(s.prototype),"print",this).call(this,t),t.print(" "+this._depth[Yt.LEFT]+"/"+this._depth[Yt.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}},{key:"setMinEdgeRing",value:function(t){this._minEdgeRing=t}},{key:"isLineEdge",value:function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,m.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,m.EXTERIOR);return t&&e&&n}},{key:"setEdgeRing",value:function(t){this._edgeRing=t}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}},{key:"setSym",value:function(t){this._sym=t}},{key:"setVisitedEdge",value:function(t){this.setVisited(t),this._sym.setVisited(t)}},{key:"setEdgeDepths",value:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Yt.LEFT&&(i=-1);var r=Yt.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(t){this._next=t}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(Re.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(t,e){return t===m.EXTERIOR&&e===m.INTERIOR?1:t===m.INTERIOR&&e===m.EXTERIOR?-1:0}}]),s}(Re),De=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"printEdges",value:function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}}},{key:"find",value:function(t){return this._nodes.find(t)}},{key:"addNode",value:function(){return arguments[0]instanceof ke||arguments[0]instanceof X?this._nodes.addNode(arguments[0]):void 0}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(t){Tt.out.println(t)}},{key:"isBoundaryNode",value:function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===m.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(t,e,n,i){return!!t.equals(n)&&mt.index(t,e,i)===mt.COLLINEAR&&Oe.quadrant(t,e)===Oe.quadrant(n,i)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(t){Tt.out.print(t)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null}},{key:"insertEdge",value:function(t){this._edges.add(t)}},{key:"findEdgeEnd",value:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null}},{key:"addEdges",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new Ae(n,!0),r=new Ae(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}}},{key:"add",value:function(t){this._nodes.add(t),this._edgeEndList.add(t)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null}}],[{key:"constructor_",value:function(){this._edges=new ft,this._nodes=null,this._edgeEndList=new ft,0===arguments.length?this._nodes=new Me(new Te):1===arguments.length&&(this._nodes=new Me(arguments[0]))}},{key:"linkResultDirectedEdges",value:function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}}]),t}(),Fe=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"visitInteriorRing",value:function(e,n){if(e.isEmpty())return null;var i=e.getCoordinates(),r=i[0],o=t.findDifferentPoint(i,r),s=n.findEdgeInSameDirection(r,o),a=n.findEdgeEnd(s),u=null;a.getLabel().getLocation(0,Yt.RIGHT)===m.INTERIOR?u=a:a.getSym().getLabel().getLocation(0,Yt.RIGHT)===m.INTERIOR&&(u=a.getSym()),B.isTrue(null!==u,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(u)}},{key:"visitShellInteriors",value:function(t,e){if(t instanceof xt&&this.visitInteriorRing(t.getExteriorRing(),e),t instanceof Dt)for(var n=t,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.visitInteriorRing(r.getExteriorRing(),e)}}},{key:"getCoordinate",value:function(){return this._disconnectedRingcoord}},{key:"setInteriorEdgesInResult",value:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,Yt.RIGHT)===m.INTERIOR&&n.setInResult(!0)}}},{key:"visitLinkedDirectedEdges",value:function(t){var e=t,n=t;do{B.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext()}while(n!==e)}},{key:"buildEdgeRings",value:function(t){for(var e=new ft,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&null===i.getEdgeRing()){var r=new ge(i,this._geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var o=r.buildMinimalRings();e.addAll(o)}}return e}},{key:"hasUnvisitedShellEdge",value:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var i=n.getEdges(),r=i.get(0);if(r.getLabel().getLocation(0,Yt.RIGHT)===m.INTERIOR)for(var o=0;o<i.size();o++)if(!(r=i.get(o)).isVisited())return this._disconnectedRingcoord=r.getCoordinate(),!0}}return!1}},{key:"isInteriorsConnected",value:function(){var t=new ft;this._geomGraph.computeSplitEdges(t);var e=new De(new Le);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this._geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)}}],[{key:"constructor_",value:function(){this._geometryFactory=new qt,this._geomGraph=null,this._disconnectedRingcoord=null,this._geomGraph=arguments[0]}},{key:"findDifferentPoint",value:function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null}}]),t}(),Ge=function(){function t(){g(this,t)}return _(t,[{key:"isInBoundary",value:function(t){}}]),t}(),je=function(){function t(){g(this,t)}return _(t,[{key:"isInBoundary",value:function(t){return t%2==1}},{key:"interfaces_",get:function(){return[Ge]}}]),t}(),Ue=function(){function t(){g(this,t)}return _(t,[{key:"isInBoundary",value:function(t){return t>0}},{key:"interfaces_",get:function(){return[Ge]}}]),t}(),Ve=function(){function t(){g(this,t)}return _(t,[{key:"isInBoundary",value:function(t){return t>1}},{key:"interfaces_",get:function(){return[Ge]}}]),t}(),Be=function(){function t(){g(this,t)}return _(t,[{key:"isInBoundary",value:function(t){return 1===t}},{key:"interfaces_",get:function(){return[Ge]}}]),t}();Ge.Mod2BoundaryNodeRule=je,Ge.EndPointBoundaryNodeRule=Ue,Ge.MultiValentEndPointBoundaryNodeRule=Ve,Ge.MonoValentEndPointBoundaryNodeRule=Be,Ge.MOD2_BOUNDARY_RULE=new je,Ge.ENDPOINT_BOUNDARY_RULE=new Ue,Ge.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new Ve,Ge.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new Be,Ge.OGC_SFS_BOUNDARY_RULE=Ge.MOD2_BOUNDARY_RULE;var ze=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"locateInPolygonRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?le.locateInRing(t,e.getCoordinates()):m.EXTERIOR}},{key:"intersects",value:function(t,e){return this.locate(t,e)!==m.EXTERIOR}},{key:"updateLocationInfo",value:function(t){t===m.INTERIOR&&(this._isIn=!0),t===m.BOUNDARY&&this._numBoundaries++}},{key:"computeLocation",value:function(t,e){if(e instanceof ut&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof ot)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof xt)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof zt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateOnLineString(t,r))}else if(e instanceof Dt)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInPolygon(t,a))}else if(e instanceof Et)for(var u=new ve(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}}},{key:"locateOnPoint",value:function(t,e){return e.getCoordinate().equals2D(t)?m.INTERIOR:m.EXTERIOR}},{key:"locateOnLineString",value:function(t,e){if(!e.getEnvelopeInternal().intersects(t))return m.EXTERIOR;var n=e.getCoordinateSequence();return e.isClosed()||!t.equals(n.getCoordinate(0))&&!t.equals(n.getCoordinate(n.size()-1))?le.isOnLine(t,n)?m.INTERIOR:m.EXTERIOR:m.BOUNDARY}},{key:"locateInPolygon",value:function(t,e){if(e.isEmpty())return m.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===m.EXTERIOR)return m.EXTERIOR;if(i===m.BOUNDARY)return m.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===m.INTERIOR)return m.EXTERIOR;if(s===m.BOUNDARY)return m.BOUNDARY}return m.INTERIOR}},{key:"locate",value:function(t,e){return e.isEmpty()?m.EXTERIOR:e instanceof ot?this.locateOnLineString(t,e):e instanceof xt?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?m.BOUNDARY:this._numBoundaries>0||this._isIn?m.INTERIOR:m.EXTERIOR)}}],[{key:"constructor_",value:function(){if(this._boundaryRule=Ge.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new v("Rule must be non-null");this._boundaryRule=t}}}]),t}(),qe=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"computeIntersections",value:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)}}],[{key:"constructor_",value:function(){this.mce=null,this.chainIndex=null;var t=arguments[1];this.mce=arguments[0],this.chainIndex=t}}]),t}(),Ye=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"isDelete",value:function(){return this._eventType===t.DELETE}},{key:"setDeleteEventIndex",value:function(t){this._deleteEventIndex=t}},{key:"getObject",value:function(){return this._obj}},{key:"compareTo",value:function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0}},{key:"getInsertEvent",value:function(){return this._insertEvent}},{key:"isInsert",value:function(){return this._eventType===t.INSERT}},{key:"isSameLabel",value:function(t){return null!==this._label&&this._label===t._label}},{key:"getDeleteEventIndex",value:function(){return this._deleteEventIndex}},{key:"interfaces_",get:function(){return[O]}}],[{key:"constructor_",value:function(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}}}]),t}();Ye.INSERT=1,Ye.DELETE=2;var Xe={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return Xe.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?dt.sort(n,e):dt.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new ft;return e.add(t),e}},We=Xe,He=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"isTrivialIntersection",value:function(e,n,i,r){if(e===i&&1===this._li.getIntersectionNum()){if(t.isAdjacentSegments(n,r))return!0;if(e.isClosed()){var o=e.getNumPoints()-1;if(0===n&&r===o||0===r&&n===o)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"setIsDoneIfProperInt",value:function(t){this._isDoneWhenProperInt=t}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"isBoundaryPointInternal",value:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return this._isDone}},{key:"isBoundaryPoint",value:function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))}},{key:"setBoundaryNodes",value:function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e}},{key:"addIntersections",value:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[1],e=arguments[2];this._li=arguments[0],this._includeProper=t,this._recordIsolated=e}},{key:"isAdjacentSegments",value:function(t,e){return 1===Math.abs(t-e)}}]),t}(),Ze=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),t=e.call(this),r.constructor_.apply(o(t),arguments),t}return _(r,[{key:"prepareEvents",value:function(){We.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}}},{key:"computeIntersections",value:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof He&&J(arguments[0],ht)&&J(arguments[1],ht)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&J(arguments[0],ht)&&arguments[1]instanceof He){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}}},{key:"addEdge",value:function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new qe(n,r),s=new Ye(e,n.getMinX(r),o);this.events.add(s),this.events.add(new Ye(n.getMaxX(r),s))}}},{key:"processOverlaps",value:function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}}},{key:"addEdges",value:function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();){var r=i.next();this.addEdge(r,n)}}}],[{key:"constructor_",value:function(){this.events=new ft,this.nOverlaps=null}}]),r}(function(){return function t(){g(this,t)}}()),Ke=function(){function t(){g(this,t)}return _(t,[{key:"visitItem",value:function(t){}}]),t}(),Je=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getMin",value:function(){return this._min}},{key:"intersects",value:function(t,e){return!(this._min>e||this._max<t)}},{key:"getMax",value:function(){return this._max}},{key:"toString",value:function(){return oe.toLineString(new X(this._min,0),new X(this._max,0))}}],[{key:"constructor_",value:function(){this._min=G.POSITIVE_INFINITY,this._max=G.NEGATIVE_INFINITY}}]),t}();Je.NodeComparator=function(){function t(){g(this,t)}return _(t,[{key:"compare",value:function(t,e){var n=(t._min+t._max)/2,i=(e._min+e._max)/2;return n<i?-1:n>i?1:0}},{key:"interfaces_",get:function(){return[j]}}]),t}();var Qe=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),t=e.call(this),r.constructor_.apply(o(t),arguments),t}return _(r,[{key:"query",value:function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)}}],[{key:"constructor_",value:function(){this._item=null;var t=arguments[1],e=arguments[2];this._min=arguments[0],this._max=t,this._item=e}}]),r}(Je),$e=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),t=e.call(this),r.constructor_.apply(o(t),arguments),t}return _(r,[{key:"buildExtent",value:function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}},{key:"query",value:function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)}}],[{key:"constructor_",value:function(){this._node1=null,this._node2=null;var t=arguments[1];this._node1=arguments[0],this._node2=t,this.buildExtent(this._node1,this._node2)}}]),r}(Je),tn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"buildTree",value:function(){We.sort(this._leaves,new Je.NodeComparator);for(var t=this._leaves,e=null,n=new ft;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}}},{key:"insert",value:function(t,e,n){if(null!==this._root)throw new IllegalStateException("Index cannot be added to once it has been queried");this._leaves.add(new Qe(t,e,n))}},{key:"query",value:function(t,e,n){if(this.init(),null===this._root)return null;this._root.query(t,e,n)}},{key:"buildRoot",value:function(){if(null!==this._root)return null;this._root=this.buildTree()}},{key:"printNode",value:function(t){Tt.out.println(oe.toLineString(new X(t._min,this._level),new X(t._max,this._level)))}},{key:"init",value:function(){return null!==this._root||0===this._leaves.size()?null:void this.buildRoot()}},{key:"buildLevel",value:function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new $e(t.get(n),t.get(n+1));e.add(r)}}}}],[{key:"constructor_",value:function(){this._leaves=new ft,this._root=null,this._level=0}}]),t}(),en=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof t){var e=arguments[0],n=mt.index(this.p0,this.p1,e.p0),i=mt.index(this.p0,this.p1,e.p1);return n>=0&&i>=0||n<=0&&i<=0?Math.max(n,i):0}if(arguments[0]instanceof X)return mt.index(this.p0,this.p1,arguments[0])}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)}},{key:"intersection",value:function(t){var e=new ae;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof X){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new X(e);var n=this.projectionFactor(e),i=new X;return i.x=this.p0.x+n*(this.p1.x-this.p0.x),i.y=this.p0.y+n*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof t){var r=arguments[0],o=this.projectionFactor(r.p0),s=this.projectionFactor(r.p1);if(o>=1&&s>=1)return null;if(o<=0&&s<=0)return null;var a=this.project(r.p0);o<0&&(a=this.p0),o>1&&(a=this.p1);var u=this.project(r.p1);return s<0&&(u=this.p0),s>1&&(u=this.p1),new t(a,u)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return 0===t?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return Wt.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return t.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?G.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=G.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(r=u.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=u),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return Xt.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/s,u=e*o/s}return new X(n-u,i+a)}},{key:"setCoordinates",value:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||G.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),i=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),r=e*e+n*n,o=e*e-n*n,s=t.getX(),a=t.getY();return new X((-o*s-2*e*n*a-2*e*i)/r,(o*a-2*e*n*s-2*n*i)/r)}},{key:"distance",value:function(){if(arguments[0]instanceof t){var e=arguments[0];return Wt.segmentToSegment(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof X)return Wt.pointToSegment(arguments[0],this.p0,this.p1)}},{key:"pointAlong",value:function(t){var e=new X;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=G.doubleToLongBits(this.p0.x);t^=31*G.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=G.doubleToLongBits(this.p1.x);return n^=31*G.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)}},{key:"interfaces_",get:function(){return[O,S]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,0===arguments.length)t.constructor_.call(this,new X,new X);else if(1===arguments.length){var e=arguments[0];t.constructor_.call(this,e.p0,e.p1)}else if(2===arguments.length){var n=arguments[1];this.p0=arguments[0],this.p1=n}else if(4===arguments.length){var i=arguments[2],r=arguments[3];t.constructor_.call(this,new X(arguments[0],arguments[1]),new X(i,r))}}},{key:"midPoint",value:function(t,e){return new X((t.x+e.x)/2,(t.y+e.y)/2)}}]),t}(),nn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"filter",value:function(t){if(this._isForcedToLineString&&t instanceof wt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof ot&&this._lines.add(t)}},{key:"setForceToLineString",value:function(t){this._isForcedToLineString=t}},{key:"interfaces_",get:function(){return[C]}}],[{key:"constructor_",value:function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var t=arguments[1];this._lines=arguments[0],this._isForcedToLineString=t}}},{key:"getGeometry",value:function(){if(1===arguments.length){var e=arguments[0];return e.getFactory().buildGeometry(t.getLines(e))}if(2===arguments.length){var n=arguments[0],i=arguments[1];return n.getFactory().buildGeometry(t.getLines(n,i))}}},{key:"getLines",value:function(){if(1===arguments.length)return t.getLines(arguments[0],!1);if(2===arguments.length){if(J(arguments[0],b)&&J(arguments[1],b)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var i=n.next();t.getLines(i,e)}return e}if(arguments[0]instanceof Z&&"boolean"==typeof arguments[1]){var r=arguments[0],o=arguments[1],s=new ft;return r.apply(new t(s,o)),s}if(arguments[0]instanceof Z&&J(arguments[1],b)){var a=arguments[0],u=arguments[1];return a instanceof ot?u.add(a):a.apply(new t(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&J(arguments[0],b)&&J(arguments[1],b)){for(var l=arguments[1],c=arguments[2],h=arguments[0].iterator();h.hasNext();){var f=h.next();t.getLines(f,l,c)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Z&&J(arguments[1],b)){var p=arguments[1];return arguments[0].apply(new t(p,arguments[2])),p}}}}]),t}(),rn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"visitItem",value:function(t){this._items.add(t)}},{key:"getItems",value:function(){return this._items}},{key:"interfaces_",get:function(){return[Ke]}}],[{key:"constructor_",value:function(){this._items=new ft}}]),t}(),on=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"locate",value:function(t){null===this._index&&(this._index=new an(this._geom),this._geom=null);var e=new ue(t),n=new sn(e);return this._index.query(t.y,t.y,n),e.getLocation()}},{key:"interfaces_",get:function(){return[ye]}}],[{key:"constructor_",value:function(){this._geom=null,this._index=null;var t=arguments[0];if(!(J(t,bt)||t instanceof wt))throw new v("Argument must be Polygonal or LinearRing");this._geom=t}}]),t}(),sn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"visitItem",value:function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))}},{key:"interfaces_",get:function(){return[Ke]}}],[{key:"constructor_",value:function(){this._counter=null,this._counter=arguments[0]}}]),t}(),an=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"init",value:function(t){for(var e=nn.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}}},{key:"addLine",value:function(t){for(var e=1;e<t.length;e++){var n=new en(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}}},{key:"query",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(this._isEmpty)return new ft;var n=new rn;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){if(this._isEmpty)return null;this._index.query(arguments[0],arguments[1],arguments[2])}}}],[{key:"constructor_",value:function(){this._isEmpty=!1,this._index=new tn;var t=arguments[0];t.isEmpty()?this._isEmpty=!0:this.init(t)}}]),t}();on.SegmentVisitor=sn,on.IntervalIndexedGeometry=an;var un=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}},{key:"compareTo",value:function(t){return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}},{key:"interfaces_",get:function(){return[O]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[1],e=arguments[2];this.coord=new X(arguments[0]),this.segmentIndex=t,this.dist=e}}]),t}(),ln=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}},{key:"addEndpoints",value:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}},{key:"createSplitEdge",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);i||n--;var r=new Array(n).fill(null),o=0;r[o++]=new X(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)r[o++]=this.edge.pts[s];return i&&(r[o]=e.coord),new gn(r,new fe(this.edge._label))}},{key:"add",value:function(t,e,n){var i=new un(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)}},{key:"isIntersection",value:function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Ne,this.edge=null,this.edge=arguments[0]}}]),t}(),cn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(t.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])||t.isTrue(this._matrix[m.INTERIOR][m.BOUNDARY])||t.isTrue(this._matrix[m.BOUNDARY][m.INTERIOR])||t.isTrue(this._matrix[m.BOUNDARY][m.BOUNDARY]))&&this._matrix[m.EXTERIOR][m.INTERIOR]===nt.FALSE&&this._matrix[m.EXTERIOR][m.BOUNDARY]===nt.FALSE}},{key:"isCoveredBy",value:function(){return(t.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])||t.isTrue(this._matrix[m.INTERIOR][m.BOUNDARY])||t.isTrue(this._matrix[m.BOUNDARY][m.INTERIOR])||t.isTrue(this._matrix[m.BOUNDARY][m.BOUNDARY]))&&this._matrix[m.INTERIOR][m.EXTERIOR]===nt.FALSE&&this._matrix[m.BOUNDARY][m.EXTERIOR]===nt.FALSE}},{key:"set",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3);this._matrix[n][e%3]=nt.toDimensionValue(t.charAt(e))}else 3===arguments.length&&(this._matrix[arguments[0]][arguments[1]]=arguments[2])}},{key:"isContains",value:function(){return t.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])&&this._matrix[m.EXTERIOR][m.INTERIOR]===nt.FALSE&&this._matrix[m.EXTERIOR][m.BOUNDARY]===nt.FALSE}},{key:"setAtLeast",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3);this.setAtLeast(n,e%3,nt.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._matrix[i][r]<o&&(this._matrix[i][r]=o)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return t.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])&&this._matrix[m.INTERIOR][m.EXTERIOR]===nt.FALSE&&this._matrix[m.BOUNDARY][m.EXTERIOR]===nt.FALSE}},{key:"isTouches",value:function(e,n){return e>n?this.isTouches(n,e):(e===nt.A&&n===nt.A||e===nt.L&&n===nt.L||e===nt.L&&n===nt.A||e===nt.P&&n===nt.A||e===nt.P&&n===nt.L)&&this._matrix[m.INTERIOR][m.INTERIOR]===nt.FALSE&&(t.isTrue(this._matrix[m.INTERIOR][m.BOUNDARY])||t.isTrue(this._matrix[m.BOUNDARY][m.INTERIOR])||t.isTrue(this._matrix[m.BOUNDARY][m.BOUNDARY]))}},{key:"isOverlaps",value:function(e,n){return e===nt.P&&n===nt.P||e===nt.A&&n===nt.A?t.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])&&t.isTrue(this._matrix[m.INTERIOR][m.EXTERIOR])&&t.isTrue(this._matrix[m.EXTERIOR][m.INTERIOR]):e===nt.L&&n===nt.L&&1===this._matrix[m.INTERIOR][m.INTERIOR]&&t.isTrue(this._matrix[m.INTERIOR][m.EXTERIOR])&&t.isTrue(this._matrix[m.EXTERIOR][m.INTERIOR])}},{key:"isEquals",value:function(e,n){return e===n&&t.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])&&this._matrix[m.INTERIOR][m.EXTERIOR]===nt.FALSE&&this._matrix[m.BOUNDARY][m.EXTERIOR]===nt.FALSE&&this._matrix[m.EXTERIOR][m.INTERIOR]===nt.FALSE&&this._matrix[m.EXTERIOR][m.BOUNDARY]===nt.FALSE}},{key:"toString",value:function(){for(var t=new Mt("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,nt.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(e){if(9!==e.length)throw new v("Should be length 9: "+e);for(var n=0;n<3;n++)for(var i=0;i<3;i++)if(!t.matches(this._matrix[n][i],e.charAt(3*n+i)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[m.INTERIOR][m.INTERIOR]===nt.FALSE&&this._matrix[m.INTERIOR][m.BOUNDARY]===nt.FALSE&&this._matrix[m.BOUNDARY][m.INTERIOR]===nt.FALSE&&this._matrix[m.BOUNDARY][m.BOUNDARY]===nt.FALSE}},{key:"isCrosses",value:function(e,n){return e===nt.P&&n===nt.L||e===nt.P&&n===nt.A||e===nt.L&&n===nt.A?t.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])&&t.isTrue(this._matrix[m.INTERIOR][m.EXTERIOR]):e===nt.L&&n===nt.P||e===nt.A&&n===nt.P||e===nt.A&&n===nt.L?t.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])&&t.isTrue(this._matrix[m.EXTERIOR][m.INTERIOR]):e===nt.L&&n===nt.L&&0===this._matrix[m.INTERIOR][m.INTERIOR]}},{key:"interfaces_",get:function(){return[P]}}],[{key:"constructor_",value:function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map((function(){return Array(3)})),this.setAll(nt.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var e=arguments[0];t.constructor_.call(this),this.set(e)}else if(arguments[0]instanceof t){var n=arguments[0];t.constructor_.call(this),this._matrix[m.INTERIOR][m.INTERIOR]=n._matrix[m.INTERIOR][m.INTERIOR],this._matrix[m.INTERIOR][m.BOUNDARY]=n._matrix[m.INTERIOR][m.BOUNDARY],this._matrix[m.INTERIOR][m.EXTERIOR]=n._matrix[m.INTERIOR][m.EXTERIOR],this._matrix[m.BOUNDARY][m.INTERIOR]=n._matrix[m.BOUNDARY][m.INTERIOR],this._matrix[m.BOUNDARY][m.BOUNDARY]=n._matrix[m.BOUNDARY][m.BOUNDARY],this._matrix[m.BOUNDARY][m.EXTERIOR]=n._matrix[m.BOUNDARY][m.EXTERIOR],this._matrix[m.EXTERIOR][m.INTERIOR]=n._matrix[m.EXTERIOR][m.INTERIOR],this._matrix[m.EXTERIOR][m.BOUNDARY]=n._matrix[m.EXTERIOR][m.BOUNDARY],this._matrix[m.EXTERIOR][m.EXTERIOR]=n._matrix[m.EXTERIOR][m.EXTERIOR]}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return n===nt.SYM_DONTCARE||n===nt.SYM_TRUE&&(e>=0||e===nt.TRUE)||n===nt.SYM_FALSE&&e===nt.FALSE||n===nt.SYM_P&&e===nt.P||n===nt.SYM_L&&e===nt.L||n===nt.SYM_A&&e===nt.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var i=arguments[1];return new t(arguments[0]).matches(i)}}},{key:"isTrue",value:function(t){return t>=0||t===nt.TRUE}}]),t}(),hn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),Tt.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=dt.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return Tt.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){this._data=null,this._size=0,0===arguments.length?t.constructor_.call(this,10):1===arguments.length&&(this._data=new Array(arguments[0]).fill(null))}}]),t}(),fn=function(){function t(){g(this,t)}return _(t,[{key:"getChainStartIndices",value:function(t){var e=0,n=new hn(Math.trunc(t.length/2));n.add(e);do{var i=this.findChainEnd(t,e);n.add(i),e=i}while(e<t.length-1);return n.toArray()}},{key:"findChainEnd",value:function(t,e){for(var n=Oe.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&Oe.quadrant(t[i-1],t[i])===n;)i++;return i-1}},{key:"OLDgetChainStartIndices",value:function(e){var n=0,i=new ft;i.add(n);do{var r=this.findChainEnd(e,n);i.add(r),n=r}while(n<e.length-1);return t.toIntArray(i)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}]),t}(),pn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n}},{key:"getMinX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n}},{key:"computeIntersectsForChain",value:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],arguments[3])}else if(6===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=arguments[5];if(r-i==1&&a-s==1)return u.addIntersections(this.e,i,o.e,s),null;if(!this.overlaps(i,r,o,s,a))return null;var l=Math.trunc((i+r)/2),c=Math.trunc((s+a)/2);i<l&&(s<c&&this.computeIntersectsForChain(i,l,o,s,c,u),c<a&&this.computeIntersectsForChain(i,l,o,c,a,u)),l<r&&(s<c&&this.computeIntersectsForChain(l,r,o,s,c,u),c<a&&this.computeIntersectsForChain(l,r,o,c,a,u))}}},{key:"overlaps",value:function(t,e,n,i,r){return H.intersects(this.pts[t],this.pts[e],n.pts[i],n.pts[r])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new fn;this.startIndex=e.getChainStartIndices(this.pts)}}]),t}(),dn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(this._depth[e][n]!==t.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===t.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===t.NULL_VALUE:void 0}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}}},{key:"getDelta",value:function(t){return this._depth[t][Yt.RIGHT]-this._depth[t][Yt.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?m.EXTERIOR:m.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var r=e.getLocation(n,i);r!==m.EXTERIOR&&r!==m.INTERIOR||(this.isNull(n,i)?this._depth[n][i]=t.depthAtLocation(r):this._depth[n][i]+=t.depthAtLocation(r))}else if(3===arguments.length){var o=arguments[0],s=arguments[1];arguments[2]===m.INTERIOR&&this._depth[o][s]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE}},{key:"depthAtLocation",value:function(e){return e===m.EXTERIOR?0:e===m.INTERIOR?1:t.NULL_VALUE}}]),t}();dn.NULL_VALUE=-1;var gn=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new s(t,fe.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(t){this._isIsolated=t}},{key:"setName",value:function(t){this._name=t}},{key:"equals",value:function(t){if(!(t instanceof s))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0}},{key:"getCoordinate",value:function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0}},{key:"print",value:function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(t){s.updateIM(this._label,t)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this._mce&&(this._mce=new pn(this)),this._mce}},{key:"getEnvelope",value:function(){if(null===this._env){this._env=new H;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}},{key:"addIntersection",value:function(t,e,n,i){var r=new X(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;a<this.pts.length&&r.equals2D(this.pts[a])&&(o=a,s=0),this.eiList.add(r,o,s)}},{key:"toString",value:function(){var t=new Mt;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}},{key:"isPointwiseEqual",value:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}},{key:"setDepthDelta",value:function(t){this._depthDelta=t}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new ln(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new dn,this._depthDelta=0,1===arguments.length)s.constructor_.call(this,arguments[0],null);else if(2===arguments.length){var t=arguments[1];this.pts=arguments[0],this._label=t}}},{key:"updateIM",value:function(){if(!(2===arguments.length&&arguments[1]instanceof cn&&arguments[0]instanceof fe))return e(c(s),"updateIM",this).apply(this,arguments);var t=arguments[0],n=arguments[1];n.setAtLeastIfValid(t.getLocation(0,Yt.ON),t.getLocation(1,Yt.ON),1),t.isArea()&&(n.setAtLeastIfValid(t.getLocation(0,Yt.LEFT),t.getLocation(1,Yt.LEFT),2),n.setAtLeastIfValid(t.getLocation(0,Yt.RIGHT),t.getLocation(1,Yt.RIGHT),2))}}]),s}(Se),yn=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"insertBoundaryPoint",value:function(t,e){var n=this._nodes.addNode(e).getLabel(),i=1;m.NONE;n.getLocation(t,Yt.ON)===m.BOUNDARY&&i++;var r=s.determineBoundary(this._boundaryNodeRule,i);n.setLocation(t,r)}},{key:"computeSelfNodes",value:function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var t=arguments[1],e=arguments[2],n=new He(arguments[0],!0,!1);n.setIsDoneIfProperInt(e);var i=this.createEdgeSetIntersector(),r=this._parentGeom instanceof wt||this._parentGeom instanceof xt||this._parentGeom instanceof Dt;return i.computeIntersections(this._edges,n,t||!r),this.addSelfIntersectionNodes(this._argIndex),n}}},{key:"computeSplitEdges",value:function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)}},{key:"computeEdgeIntersections",value:function(t,e,n){var i=new He(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i}},{key:"getGeometry",value:function(){return this._parentGeom}},{key:"getBoundaryNodeRule",value:function(){return this._boundaryNodeRule}},{key:"hasTooFewPoints",value:function(){return this._hasTooFewPoints}},{key:"addPoint",value:function(){if(arguments[0]instanceof ut){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,m.INTERIOR)}else arguments[0]instanceof X&&this.insertPoint(this._argIndex,arguments[0],m.INTERIOR)}},{key:"addPolygon",value:function(t){this.addPolygonRing(t.getExteriorRing(),m.EXTERIOR,m.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,m.INTERIOR,m.EXTERIOR)}}},{key:"addEdge",value:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],m.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],m.BOUNDARY)}},{key:"addLineString",value:function(t){var e=Lt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new gn(e,new fe(this._argIndex,m.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),B.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])}},{key:"getInvalidPoint",value:function(){return this._invalidPoint}},{key:"getBoundaryPoints",value:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e}},{key:"getBoundaryNodes",value:function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}},{key:"addSelfIntersectionNode",value:function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===m.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)}},{key:"addPolygonRing",value:function(t,e,n){if(t.isEmpty())return null;var i=Lt.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;mt.isCCW(i)&&(r=n,o=e);var s=new gn(i,new fe(this._argIndex,m.BOUNDARY,r,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],m.BOUNDARY)}},{key:"insertPoint",value:function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new fe(t,n):r.setLocation(t,n)}},{key:"createEdgeSetIntersector",value:function(){return new Ze}},{key:"addSelfIntersectionNodes",value:function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}}},{key:"add",value:function(){if(!(1===arguments.length&&arguments[0]instanceof Z))return e(c(s.prototype),"add",this).apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Dt&&(this._useBoundaryDeterminationRule=!1),t instanceof xt)this.addPolygon(t);else if(t instanceof ot)this.addLineString(t);else if(t instanceof ut)this.addPoint(t);else if(t instanceof It)this.addCollection(t);else if(t instanceof zt)this.addCollection(t);else if(t instanceof Dt)this.addCollection(t);else{if(!(t instanceof Et))throw new E(t.getGeometryType());this.addCollection(t)}}},{key:"addCollection",value:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}}},{key:"locate",value:function(t){return J(this._parentGeom,bt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new on(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}},{key:"findEdge",value:function(){return 1===arguments.length&&arguments[0]instanceof ot?this._lineEdgeMap.get(arguments[0]):e(c(s.prototype),"findEdge",this).apply(this,arguments)}}],[{key:"constructor_",value:function(){if(this._parentGeom=null,this._lineEdgeMap=new Ut,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new ze,2===arguments.length)s.constructor_.call(this,arguments[0],arguments[1],Ge.OGC_SFS_BOUNDARY_RULE);else if(3===arguments.length){var t=arguments[1],e=arguments[2];this._argIndex=arguments[0],this._parentGeom=t,this._boundaryNodeRule=e,null!==t&&this.add(t)}}},{key:"determineBoundary",value:function(t,e){return t.isInBoundary(e)?m.BOUNDARY:m.INTERIOR}}]),s}(De),_n=function(){function t(){g(this,t)}return _(t,[{key:"createEdgeEndForNext",value:function(t,e,n,i){var r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;var o=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(o=i.coord);var s=new Re(t,n.coord,o,new fe(t.getLabel()));e.add(s)}},{key:"createEdgeEndForPrev",value:function(t,e,n,i){var r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}var o=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(o=i.coord);var s=new fe(t.getLabel());s.flip();var a=new Re(t,n.coord,o,s);e.add(a)}},{key:"computeEdgeEnds",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new ft,n=t;n.hasNext();){var i=n.next();this.computeEdgeEnds(i,e)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1],s=r.getEdgeIntersectionList();s.addEndpoints();var a=s.iterator(),u=null,l=null;if(!a.hasNext())return null;var c=a.next();do{u=l,l=c,c=null,a.hasNext()&&(c=a.next()),null!==l&&(this.createEdgeEndForPrev(r,o,l,u),this.createEdgeEndForNext(r,o,l,c))}while(null!==l)}}}]),t}(),vn=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),t=e.call(this),r.constructor_.apply(o(t),arguments),t}return _(r,[{key:"insert",value:function(t){this._edgeEnds.add(t)}},{key:"print",value:function(t){t.println("EdgeEndBundle--\x3e Label: "+this._label);for(var e=this.iterator();e.hasNext();)e.next().print(t),t.println()}},{key:"iterator",value:function(){return this._edgeEnds.iterator()}},{key:"getEdgeEnds",value:function(){return this._edgeEnds}},{key:"computeLabelOn",value:function(t,e){for(var n=0,i=!1,r=this.iterator();r.hasNext();){var o=r.next().getLabel().getLocation(t);o===m.BOUNDARY&&n++,o===m.INTERIOR&&(i=!0)}var s=m.NONE;i&&(s=m.INTERIOR),n>0&&(s=yn.determineBoundary(e,n)),this._label.setLocation(t,s)}},{key:"computeLabelSide",value:function(t,e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getLabel().isArea()){var r=i.getLabel().getLocation(t,e);if(r===m.INTERIOR)return this._label.setLocation(t,e,m.INTERIOR),null;r===m.EXTERIOR&&this._label.setLocation(t,e,m.EXTERIOR)}}}},{key:"getLabel",value:function(){return this._label}},{key:"computeLabelSides",value:function(t){this.computeLabelSide(t,Yt.LEFT),this.computeLabelSide(t,Yt.RIGHT)}},{key:"updateIM",value:function(t){gn.updateIM(this._label,t)}},{key:"computeLabel",value:function(t){for(var e=!1,n=this.iterator();n.hasNext();)n.next().getLabel().isArea()&&(e=!0);this._label=e?new fe(m.NONE,m.NONE,m.NONE):new fe(m.NONE);for(var i=0;i<2;i++)this.computeLabelOn(i,t),e&&this.computeLabelSides(i)}}],[{key:"constructor_",value:function(){if(this._edgeEnds=new ft,1===arguments.length)r.constructor_.call(this,null,arguments[0]);else if(2===arguments.length){var t=arguments[1];Re.constructor_.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new fe(t.getLabel())),this.insert(t)}}}]),r}(Re),mn=function(t){n(r,t);var e=i(r);function r(){return g(this,r),e.call(this)}return _(r,[{key:"updateIM",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().updateIM(t)}},{key:"insert",value:function(t){var e=this._edgeMap.get(t);null===e?(e=new vn(t),this.insertEdgeEnd(t,e)):e.insert(t)}}]),r}(Ce),bn=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),t=e.call(this),r.constructor_.apply(o(t),arguments),t}return _(r,[{key:"updateIMFromEdges",value:function(t){this._edges.updateIM(t)}},{key:"computeIM",value:function(t){t.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}}],[{key:"constructor_",value:function(){ke.constructor_.call(this,arguments[0],arguments[1])}}]),r}(ke),xn=function(t){n(r,t);var e=i(r);function r(){return g(this,r),e.call(this)}return _(r,[{key:"createNode",value:function(t){return new bn(t,new mn)}}]),r}(Te),En=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"insertEdgeEnds",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._nodes.add(n)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"copyNodesAndLabels",value:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var i=n.next();this._nodes.addNode(i.getCoordinate()).setLabel(e,i.getLabel().getLocation(e))}}},{key:"build",value:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=(new _n).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(e)}},{key:"computeIntersectionNodes",value:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),r=i.getLabel().getLocation(e),o=i.getEdgeIntersectionList().iterator();o.hasNext();){var s=o.next(),a=this._nodes.addNode(s.coord);r===m.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,m.INTERIOR)}}}],[{key:"constructor_",value:function(){this._nodes=new Me(new xn)}}]),t}(),In=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"isNodeEdgeAreaLabelsConsistent",value:function(){for(var t=this._nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this._geomGraph))return this._invalidPoint=e.getCoordinate().copy(),!1}return!0}},{key:"getInvalidPoint",value:function(){return this._invalidPoint}},{key:"hasDuplicateRings",value:function(){for(var t=this._nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next().getEdges().iterator();e.hasNext();){var n=e.next();if(n.getEdgeEnds().size()>1)return this._invalidPoint=n.getEdge().getCoordinate(0),!0}return!1}},{key:"isNodeConsistentArea",value:function(){var t=this._geomGraph.computeSelfNodes(this._li,!0,!0);return t.hasProperIntersection()?(this._invalidPoint=t.getProperIntersectionPoint(),!1):(this._nodeGraph.build(this._geomGraph),this.isNodeEdgeAreaLabelsConsistent())}}],[{key:"constructor_",value:function(){this._li=new ae,this._geomGraph=null,this._nodeGraph=new En,this._invalidPoint=null,this._geomGraph=arguments[0]}}]),t}(),wn=function(){function t(){g(this,t)}return _(t,[{key:"getBounds",value:function(){}}]),t}(),Nn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[wn,S]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var t=arguments[1];this._bounds=arguments[0],this._item=t}}]),t}(),Cn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"poll",value:function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new ft,this._items.add(null)}}]),t}(),On=function(){function t(){g(this,t)}return _(t,[{key:"insert",value:function(t,e){}},{key:"remove",value:function(t,e){}},{key:"query",value:function(){}}]),t}(),Pn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(t){B.isTrue(null===this._bounds),this._childBoundables.add(t)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[wn,S]}}],[{key:"constructor_",value:function(){this._childBoundables=new ft,this._bounds=null,this._level=null,0===arguments.length||1===arguments.length&&(this._level=arguments[0])}}]),t}(),Sn=function(){function t(){g(this,t)}return _(t,null,[{key:"maxDistance",value:function(e,n,i,r,o,s,a,u){var l=t.distance(e,n,o,s);return l=Math.max(l,t.distance(e,n,a,u)),l=Math.max(l,t.distance(i,r,o,s)),l=Math.max(l,t.distance(i,r,a,u))}},{key:"distance",value:function(t,e,n,i){var r=n-t,o=i-e;return Math.sqrt(r*r+o*o)}},{key:"maximumDistance",value:function(e,n){var i=Math.min(e.getMinX(),n.getMinX()),r=Math.min(e.getMinY(),n.getMinY()),o=Math.max(e.getMaxX(),n.getMaxX()),s=Math.max(e.getMaxY(),n.getMaxY());return t.distance(i,r,o,s)}},{key:"minMaxDistance",value:function(e,n){var i=e.getMinX(),r=e.getMinY(),o=e.getMaxX(),s=e.getMaxY(),a=n.getMinX(),u=n.getMinY(),l=n.getMaxX(),c=n.getMaxY(),h=t.maxDistance(i,r,i,s,a,u,a,c);return h=Math.min(h,t.maxDistance(i,r,i,s,a,u,l,u)),h=Math.min(h,t.maxDistance(i,r,i,s,l,c,a,c)),h=Math.min(h,t.maxDistance(i,r,i,s,l,c,l,u)),h=Math.min(h,t.maxDistance(i,r,o,r,a,u,a,c)),h=Math.min(h,t.maxDistance(i,r,o,r,a,u,l,u)),h=Math.min(h,t.maxDistance(i,r,o,r,l,c,a,c)),h=Math.min(h,t.maxDistance(i,r,o,r,l,c,l,u)),h=Math.min(h,t.maxDistance(o,s,i,s,a,u,a,c)),h=Math.min(h,t.maxDistance(o,s,i,s,a,u,l,u)),h=Math.min(h,t.maxDistance(o,s,i,s,l,c,a,c)),h=Math.min(h,t.maxDistance(o,s,i,s,l,c,l,u)),h=Math.min(h,t.maxDistance(o,s,o,r,a,u,a,c)),h=Math.min(h,t.maxDistance(o,s,o,r,a,u,l,u)),h=Math.min(h,t.maxDistance(o,s,o,r,l,c,a,c)),h=Math.min(h,t.maxDistance(o,s,o,r,l,c,l,u))}}]),t}(),kn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"maximumDistance",value:function(){return Sn.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(e,n){var i=t.isComposite(this._boundable1),r=t.isComposite(this._boundable2);if(i&&r)return t.area(this._boundable1)>t.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,e,n),null):(this.expand(this._boundable2,this._boundable1,!0,e,n),null);if(i)return this.expand(this._boundable1,this._boundable2,!1,e,n),null;if(r)return this.expand(this._boundable2,this._boundable1,!0,e,n),null;throw new v("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(t.isComposite(this._boundable1)||t.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0}},{key:"expand",value:function(e,n,i,r,o){for(var s=e.getChildBoundables().iterator();s.hasNext();){var a=s.next(),u=null;(u=i?new t(n,a,this._itemDistance):new t(a,n,this._itemDistance)).getDistance()<o&&r.add(u)}}},{key:"getBoundable",value:function(t){return 0===t?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[O]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[1],e=arguments[2];this._boundable1=arguments[0],this._boundable2=t,this._itemDistance=e,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof Pn}}]),t}(),Tn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"queryInternal",value:function(){if(J(arguments[2],Ke)&&arguments[0]instanceof Object&&arguments[1]instanceof Pn)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),i=0;i<n.size();i++){var r=n.get(i);this.getIntersectsOp().intersects(r.getBounds(),t)&&(r instanceof Pn?this.queryInternal(t,r,e):r instanceof Nn?e.visitItem(r.getItem()):B.shouldNeverReachHere())}else if(J(arguments[2],ht)&&arguments[0]instanceof Object&&arguments[1]instanceof Pn)for(var o=arguments[0],s=arguments[2],a=arguments[1].getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),o)&&(l instanceof Pn?this.queryInternal(o,l,s):l instanceof Nn?s.add(l.getItem()):B.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Pn?t+=this.size(n):n instanceof Nn&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Nn&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new ft:t}if(1===arguments.length){for(var e=arguments[0],n=new ft,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Pn){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof Nn?n.add(r.getItem()):B.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,e){B.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Nn(t,e))}},{key:"boundablesAtLevel",value:function(){if(1===arguments.length){var t=arguments[0],e=new ft;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(B.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Pn?this.boundablesAtLevel(n,s,r):(B.isTrue(s instanceof Nn),-1===n&&r.add(s))}return null}}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new ft;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,i)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Pn&&(o=this.remove(n,u,r))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}}},{key:"createHigherLevels",value:function(t,e){B.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Pn){var i=this.depth(n);i>t&&(t=i)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){B.isTrue(!t.isEmpty());var n=new ft;n.add(this.createNode(e));var i=new ft(t);We.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[S]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new ft,this._nodeCapacity=null,0===arguments.length)t.constructor_.call(this,t.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var e=arguments[0];B.isTrue(e>1,"Node capacity must be greater than 1"),this._nodeCapacity=e}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}]),t}();Tn.IntersectsOp=function(){},Tn.DEFAULT_NODE_CAPACITY=10;var Ln=function(){function t(){g(this,t)}return _(t,[{key:"distance",value:function(t,e){}}]),t}(),Mn=function(t){n(s,t);var r=i(s);function s(){var t;return g(this,s),t=r.call(this),s.constructor_.apply(o(t),arguments),t}return _(s,[{key:"createParentBoundablesFromVerticalSlices",value:function(t,e){B.isTrue(t.length>0);for(var n=new ft,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n}},{key:"nearestNeighbourK",value:function(){if(2===arguments.length)return this.nearestNeighbourK(arguments[0],G.POSITIVE_INFINITY,arguments[1]);if(3===arguments.length){var t=arguments[0],e=arguments[2],n=arguments[1],i=new Cn;i.add(t);for(var r=new Cn;!i.isEmpty()&&n>=0;){var o=i.poll(),a=o.getDistance();if(a>=n)break;o.isLeaves()?r.size()<e?r.add(o):(r.peek().getDistance()>a&&(r.poll(),r.add(o)),n=r.peek().getDistance()):o.expandToQueue(i,n)}return s.getItems(r)}}},{key:"createNode",value:function(t){return new Rn(t)}},{key:"size",value:function(){return 0===arguments.length?e(c(s.prototype),"size",this).call(this):e(c(s.prototype),"size",this).apply(this,arguments)}},{key:"insert",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof H))return e(c(s.prototype),"insert",this).apply(this,arguments);var t=arguments[0],n=arguments[1];if(t.isNull())return null;e(c(s.prototype),"insert",this).call(this,t,n)}},{key:"getIntersectsOp",value:function(){return s.intersectsOp}},{key:"verticalSlices",value:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new ft;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i}},{key:"query",value:function(){if(1===arguments.length)return e(c(s.prototype),"query",this).call(this,arguments[0]);2===arguments.length&&e(c(s.prototype),"query",this).call(this,arguments[0],arguments[1])}},{key:"getComparator",value:function(){return s.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(t,n){return e(c(s.prototype),"createParentBoundables",this).call(this,t,n)}},{key:"remove",value:function(){return 2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof H?e(c(s.prototype),"remove",this).call(this,arguments[0],arguments[1]):e(c(s.prototype),"remove",this).apply(this,arguments)}},{key:"depth",value:function(){return 0===arguments.length?e(c(s.prototype),"depth",this).call(this):e(c(s.prototype),"depth",this).apply(this,arguments)}},{key:"createParentBoundables",value:function(t,e){B.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new ft(t);We.sort(i,s.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)}},{key:"nearestNeighbour",value:function(){if(1===arguments.length){if(J(arguments[0],Ln)){var t=arguments[0];if(this.isEmpty())return null;var e=new kn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof kn){var n=arguments[0],i=G.POSITIVE_INFINITY,r=null,o=new Cn;for(o.add(n);!o.isEmpty()&&i>0;){var s=o.poll(),a=s.getDistance();if(a>=i)break;s.isLeaves()?(i=a,r=s):s.expandToQueue(o,i)}return null===r?null:[r.getBoundable(0).getItem(),r.getBoundable(1).getItem()]}}else{if(2===arguments.length){var u=arguments[0],l=arguments[1];if(this.isEmpty()||u.isEmpty())return null;var c=new kn(this.getRoot(),u.getRoot(),l);return this.nearestNeighbour(c)}if(3===arguments.length){var h=arguments[2],f=new Nn(arguments[0],arguments[1]),p=new kn(this.getRoot(),f,h);return this.nearestNeighbour(p)[0]}if(4===arguments.length){var d=arguments[2],g=arguments[3],y=new Nn(arguments[0],arguments[1]),_=new kn(this.getRoot(),y,d);return this.nearestNeighbourK(_,g)}}}},{key:"isWithinDistance",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=G.POSITIVE_INFINITY,i=new Cn;for(i.add(t);!i.isEmpty();){var r=i.poll(),o=r.getDistance();if(o>e)return!1;if(r.maximumDistance()<=e)return!0;if(r.isLeaves()){if((n=o)<=e)return!0}else r.expandToQueue(i,n)}return!1}if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2],l=new kn(this.getRoot(),s.getRoot(),a);return this.isWithinDistance(l,u)}}},{key:"interfaces_",get:function(){return[On,S]}}],[{key:"constructor_",value:function(){0===arguments.length?s.constructor_.call(this,s.DEFAULT_NODE_CAPACITY):1===arguments.length&&Tn.constructor_.call(this,arguments[0])}},{key:"centreX",value:function(t){return s.avg(t.getMinX(),t.getMaxX())}},{key:"avg",value:function(t,e){return(t+e)/2}},{key:"getItems",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;!t.isEmpty();){var i=t.poll();e[n]=i.getBoundable(0).getItem(),n++}return e}},{key:"centreY",value:function(t){return s.avg(t.getMinY(),t.getMaxY())}}]),s}(Tn),Rn=function(t){n(r,t);var e=i(r);function r(){var t;return g(this,r),t=e.call(this),r.constructor_.apply(o(t),arguments),t}return _(r,[{key:"computeBounds",value:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new H(n.getBounds()):t.expandToInclude(n.getBounds())}return t}}],[{key:"constructor_",value:function(){Pn.constructor_.call(this,arguments[0])}}]),r}(Pn);Mn.STRtreeNode=Rn,Mn.xComparator=new(function(){function t(){g(this,t)}return _(t,[{key:"compare",value:function(t,e){return Tn.compareDoubles(Mn.centreX(t.getBounds()),Mn.centreX(e.getBounds()))}},{key:"interfaces_",get:function(){return[j]}}]),t}()),Mn.yComparator=new(function(){function t(){g(this,t)}return _(t,[{key:"compare",value:function(t,e){return Tn.compareDoubles(Mn.centreY(t.getBounds()),Mn.centreY(e.getBounds()))}},{key:"interfaces_",get:function(){return[j]}}]),t}()),Mn.intersectsOp=new(function(){function t(){g(this,t)}return _(t,[{key:"intersects",value:function(t,e){return t.intersects(e)}},{key:"interfaces_",get:function(){return[IntersectsOp]}}]),t}()),Mn.DEFAULT_NODE_CAPACITY=10;var An=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"buildIndex",value:function(){this._index=new Mn;for(var t=0;t<this._rings.size();t++){var e=this._rings.get(t),n=e.getEnvelopeInternal();this._index.insert(n,e)}}},{key:"getNestedPoint",value:function(){return this._nestedPt}},{key:"isNonNested",value:function(){this.buildIndex();for(var t=0;t<this._rings.size();t++)for(var e=this._rings.get(t),n=e.getCoordinates(),i=this._index.query(e.getEnvelopeInternal()),r=0;r<i.size();r++){var o=i.get(r),s=o.getCoordinates();if(e!==o&&e.getEnvelopeInternal().intersects(o.getEnvelopeInternal())){var a=Fn.findPtNotNode(n,o,this._graph);if(null!==a&&le.isInRing(a,s))return this._nestedPt=a,!1}}return!0}},{key:"add",value:function(t){this._rings.add(t),this._totalEnv.expandToInclude(t.getEnvelopeInternal())}}],[{key:"constructor_",value:function(){this._graph=null,this._rings=new ft,this._totalEnv=new H,this._index=null,this._nestedPt=null,this._graph=arguments[0]}}]),t}(),Dn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"getErrorType",value:function(){return this._errorType}},{key:"getMessage",value:function(){return t.errMsg[this._errorType]}},{key:"getCoordinate",value:function(){return this._pt}},{key:"toString",value:function(){var t="";return null!==this._pt&&(t=" at or near point "+this._pt),this.getMessage()+t}}],[{key:"constructor_",value:function(){if(this._errorType=null,this._pt=null,1===arguments.length)t.constructor_.call(this,arguments[0],null);else if(2===arguments.length){var e=arguments[1];this._errorType=arguments[0],null!==e&&(this._pt=e.copy())}}}]),t}();Dn.ERROR=0,Dn.REPEATED_POINT=1,Dn.HOLE_OUTSIDE_SHELL=2,Dn.NESTED_HOLES=3,Dn.DISCONNECTED_INTERIOR=4,Dn.SELF_INTERSECTION=5,Dn.RING_SELF_INTERSECTION=6,Dn.NESTED_SHELLS=7,Dn.DUPLICATE_RINGS=8,Dn.TOO_FEW_POINTS=9,Dn.INVALID_COORDINATE=10,Dn.RING_NOT_CLOSED=11,Dn.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];var Fn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return _(t,[{key:"checkInvalidCoordinates",value:function(){if(arguments[0]instanceof Array){for(var e=arguments[0],n=0;n<e.length;n++)if(!t.isValid(e[n]))return this._validErr=new Dn(Dn.INVALID_COORDINATE,e[n]),null}else if(arguments[0]instanceof xt){var i=arguments[0];if(this.checkInvalidCoordinates(i.getExteriorRing().getCoordinates()),null!==this._validErr)return null;for(var r=0;r<i.getNumInteriorRing();r++)if(this.checkInvalidCoordinates(i.getInteriorRingN(r).getCoordinates()),null!==this._validErr)return null}}},{key:"checkHolesNotNested",value:function(t,e){if(t.getNumInteriorRing()<=0)return null;for(var n=new An(e),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);r.isEmpty()||n.add(r)}n.isNonNested()||(this._validErr=new Dn(Dn.NESTED_HOLES,n.getNestedPoint()))}},{key:"checkConsistentArea",value:function(t){var e=new In(t);if(!e.isNodeConsistentArea())return this._validErr=new Dn(Dn.SELF_INTERSECTION,e.getInvalidPoint()),null;e.hasDuplicateRings()&&(this._validErr=new Dn(Dn.DUPLICATE_RINGS,e.getInvalidPoint()))}},{key:"isValid",value:function(){return this.checkValid(this._parentGeometry),null===this._validErr}},{key:"checkShellInsideHole",value:function(e,n,i){var r=e.getCoordinates(),o=n.getCoordinates(),s=t.findPtNotNode(r,n,i);if(null!==s&&!le.isInRing(s,o))return s;var a=t.findPtNotNode(o,e,i);return null!==a?le.isInRing(a,r)?a:null:(B.shouldNeverReachHere("points in shell and hole appear to be equal"),null)}},{key:"checkNoSelfIntersectingRings",value:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this._validErr)return null}}},{key:"checkConnectedInteriors",value:function(t){var e=new Fe(t);e.isInteriorsConnected()||(this._validErr=new Dn(Dn.DISCONNECTED_INTERIOR,e.getCoordinate()))}},{key:"checkNoSelfIntersectingRing",value:function(t){for(var e=new w,n=!0,i=t.iterator();i.hasNext();){var r=i.next();if(n)n=!1;else{if(e.contains(r.coord))return this._validErr=new Dn(Dn.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord)}}}},{key:"checkHolesInShell",value:function(e,n){if(e.getNumInteriorRing()<=0)return null;for(var i=e.getExteriorRing(),r=i.isEmpty(),o=new on(i),s=0;s<e.getNumInteriorRing();s++){var a=e.getInteriorRingN(s),u=null;if(!a.isEmpty()){if(null===(u=t.findPtNotNode(a.getCoordinates(),i,n)))return null;if(r||m.EXTERIOR===o.locate(u))return this._validErr=new Dn(Dn.HOLE_OUTSIDE_SHELL,u),null}}}},{key:"checkTooFewPoints",value:function(t){if(t.hasTooFewPoints())return this._validErr=new Dn(Dn.TOO_FEW_POINTS,t.getInvalidPoint()),null}},{key:"getValidationError",value:function(){return this.checkValid(this._parentGeometry),this._validErr}},{key:"checkValid",value:function(){if(arguments[0]instanceof ut)this.checkInvalidCoordinates(arguments[0].getCoordinates());else if(arguments[0]instanceof It)this.checkInvalidCoordinates(arguments[0].getCoordinates());else if(arguments[0]instanceof wt){var t=arguments[0];if(this.checkInvalidCoordinates(t.getCoordinates()),null!==this._validErr)return null;if(this.checkClosedRing(t),null!==this._validErr)return null;var e=new yn(0,t);if(this.checkTooFewPoints(e),null!==this._validErr)return null;var n=new ae;e.computeSelfNodes(n,!0,!0),this.checkNoSelfIntersectingRings(e)}else if(arguments[0]instanceof ot){var i=arguments[0];if(this.checkInvalidCoordinates(i.getCoordinates()),null!==this._validErr)return null;var r=new yn(0,i);this.checkTooFewPoints(r)}else if(arguments[0]instanceof xt){var o=arguments[0];if(this.checkInvalidCoordinates(o),null!==this._validErr)return null;if(this.checkClosedRings(o),null!==this._validErr)return null;var s=new yn(0,o);if(this.checkTooFewPoints(s),null!==this._validErr)return null;if(this.checkConsistentArea(s),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(s),null!==this._validErr))return null;if(this.checkHolesInShell(o,s),null!==this._validErr)return null;if(this.checkHolesNotNested(o,s),null!==this._validErr)return null;this.checkConnectedInteriors(s)}else if(arguments[0]instanceof Dt){for(var a=arguments[0],u=0;u<a.getNumGeometries();u++){var l=a.getGeometryN(u);if(this.checkInvalidCoordinates(l),null!==this._validErr)return null;if(this.checkClosedRings(l),null!==this._validErr)return null}var c=new yn(0,a);if(this.checkTooFewPoints(c),null!==this._validErr)return null;if(this.checkConsistentArea(c),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(c),null!==this._validErr))return null;for(var h=0;h<a.getNumGeometries();h++){var f=a.getGeometryN(h);if(this.checkHolesInShell(f,c),null!==this._validErr)return null}for(var p=0;p<a.getNumGeometries();p++){var d=a.getGeometryN(p);if(this.checkHolesNotNested(d,c),null!==this._validErr)return null}if(this.checkShellsNotNested(a,c),null!==this._validErr)return null;this.checkConnectedInteriors(c)}else if(arguments[0]instanceof Et)for(var g=arguments[0],y=0;y<g.getNumGeometries();y++){var _=g.getGeometryN(y);if(this.checkValid(_),null!==this._validErr)return null}else if(arguments[0]instanceof Z){var v=arguments[0];if(this._validErr=null,v.isEmpty())return null;if(v instanceof ut)this.checkValid(v);else if(v instanceof It)this.checkValid(v);else if(v instanceof wt)this.checkValid(v);else if(v instanceof ot)this.checkValid(v);else if(v instanceof xt)this.checkValid(v);else if(v instanceof Dt)this.checkValid(v);else{if(!(v instanceof Et))throw new E(v.getGeometryType());this.checkValid(v)}}}},{key:"setSelfTouchingRingFormingHoleValid",value:function(t){this._isSelfTouchingRingFormingHoleValid=t}},{key:"checkShellNotNested",value:function(e,n,i){var r=e.getCoordinates(),o=n.getExteriorRing();if(o.isEmpty())return null;var s=o.getCoordinates(),a=t.findPtNotNode(r,o,i);if(null===a)return null;if(!le.isInRing(a,s))return null;if(n.getNumInteriorRing()<=0)return this._validErr=new Dn(Dn.NESTED_SHELLS,a),null;for(var u=null,l=0;l<n.getNumInteriorRing();l++){var c=n.getInteriorRingN(l);if(null===(u=this.checkShellInsideHole(e,c,i)))return null}this._validErr=new Dn(Dn.NESTED_SHELLS,u)}},{key:"checkClosedRings",value:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this._validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this._validErr)return null}},{key:"checkClosedRing",value:function(t){if(t.isEmpty())return null;if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this._validErr=new Dn(Dn.RING_NOT_CLOSED,e)}}},{key:"checkShellsNotNested",value:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var i=t.getGeometryN(n).getExteriorRing(),r=0;r<t.getNumGeometries();r++)if(n!==r){var o=t.getGeometryN(r);if(this.checkShellNotNested(i,o,e),null!==this._validErr)return null}}}],[{key:"constructor_",value:function(){this._parentGeometry=null,this._isSelfTouchingRingFormingHoleValid=!1,this._validErr=null,this._parentGeometry=arguments[0]}},{key:"findPtNotNode",value:function(t,e,n){for(var i=n.findEdge(e).getEdgeIntersectionList(),r=0;r<t.length;r++){var o=t[r];if(!i.isIntersection(o))return o}return null}},{key:"isValid",value:function(){if(arguments[0]instanceof Z)return new t(arguments[0]).isValid();if(arguments[0]instanceof X){var e=arguments[0];return!(G.isNaN(e.x)||G.isInfinite(e.x)||G.isNaN(e.y)||G.isInfinite(e.y))}}}]),t}();function Gn(t){return[t.x,t.y]}var jn,Un=function(){function t(e,n){g(this,t),this.geometryFactory=e||new qt,this.ol=n||"undefined"!=typeof ol&&ol}return _(t,[{key:"inject",value:function(t,e,n,i,r,o,s,a){this.ol={geom:{Point:t,LineString:e,LinearRing:n,Polygon:i,MultiPoint:r,MultiLineString:o,MultiPolygon:s,GeometryCollection:a}}}},{key:"read",value:function(t){var e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0}},{key:"convertFromPoint",value:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new X(e[0],e[1]))}},{key:"convertFromLineString",value:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map((function(t){return new X(t[0],t[1])})))}},{key:"convertFromLinearRing",value:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map((function(t){return new X(t[0],t[1])})))}},{key:"convertFromPolygon",value:function(t){for(var e=t.getLinearRings(),n=null,i=[],r=0;r<e.length;r++){var o=this.convertFromLinearRing(e[r]);0===r?n=o:i.push(o)}return this.geometryFactory.createPolygon(n,i)}},{key:"convertFromMultiPoint",value:function(t){var e=t.getPoints().map((function(t){return this.convertFromPoint(t)}),this);return this.geometryFactory.createMultiPoint(e)}},{key:"convertFromMultiLineString",value:function(t){var e=t.getLineStrings().map((function(t){return this.convertFromLineString(t)}),this);return this.geometryFactory.createMultiLineString(e)}},{key:"convertFromMultiPolygon",value:function(t){var e=t.getPolygons().map((function(t){return this.convertFromPolygon(t)}),this);return this.geometryFactory.createMultiPolygon(e)}},{key:"convertFromCollection",value:function(t){var e=t.getGeometries().map((function(t){return this.read(t)}),this);return this.geometryFactory.createGeometryCollection(e)}},{key:"write",value:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0}},{key:"convertToPoint",value:function(t){return new this.ol.geom.Point([t.x,t.y])}},{key:"convertToLineString",value:function(t){var e=t._points._coordinates.map(Gn);return new this.ol.geom.LineString(e)}},{key:"convertToLinearRing",value:function(t){var e=t._points._coordinates.map(Gn);return new this.ol.geom.LinearRing(e)}},{key:"convertToPolygon",value:function(t){for(var e=[t._shell._points._coordinates.map(Gn)],n=0;n<t._holes.length;n++)e.push(t._holes[n]._points._coordinates.map(Gn));return new this.ol.geom.Polygon(e)}},{key:"convertToMultiPoint",value:function(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(Gn))}},{key:"convertToMultiLineString",value:function(t){for(var e=[],n=0;n<t._geometries.length;n++)e.push(this.convertToLineString(t._geometries[n]).getCoordinates());return new this.ol.geom.MultiLineString(e)}},{key:"convertToMultiPolygon",value:function(t){for(var e=[],n=0;n<t._geometries.length;n++)e.push(this.convertToPolygon(t._geometries[n]).getCoordinates());return new this.ol.geom.MultiPolygon(e)}},{key:"convertToCollection",value:function(t){for(var e=[],n=0;n<t._geometries.length;n++)e.push(this.write(t._geometries[n]));return new this.ol.geom.GeometryCollection(e)}}]),t}(),Vn=l("fdeV"),Bn=l("hatQ"),zn=l("TOut"),qn=l("FlXx"),Yn=l("vog+"),Xn=l("HK6I"),Wn=l("jekj"),Hn=(jn=function(t,e){return(jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}jn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Zn=function(t){function e(e){var n=t.call(this)||this;n.options=e,n.id=e.id,n.insertFirst=void 0===e.insertFirst||e.insertFirst,n.stopEvent=void 0===e.stopEvent||e.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==e.className?e.className:"ol-overlay-container "+qn.d,n.element.style.position="absolute",n.element.style.pointerEvents="auto";var i=e.autoPan;return i&&"object"!=typeof i&&(i={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=i||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addEventListener(Object(Bn.b)("element"),n.handleElementChanged),n.addEventListener(Object(Bn.b)("map"),n.handleMapChanged),n.addEventListener(Object(Bn.b)("offset"),n.handleOffsetChanged),n.addEventListener(Object(Bn.b)("position"),n.handlePositionChanged),n.addEventListener(Object(Bn.b)("positioning"),n.handlePositioningChanged),void 0!==e.element&&n.setElement(e.element),n.setOffset(void 0!==e.offset?e.offset:[0,0]),n.setPositioning(void 0!==e.positioning?e.positioning:"top-left"),void 0!==e.position&&n.setPosition(e.position),n}return Hn(e,t),e.prototype.getElement=function(){return this.get("element")},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get("map")},e.prototype.getOffset=function(){return this.get("offset")},e.prototype.getPosition=function(){return this.get("position")},e.prototype.getPositioning=function(){return this.get("positioning")},e.prototype.handleElementChanged=function(){Object(Wn.d)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(Wn.e)(this.element),Object(Xn.c)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(Xn.a)(t,zn.a.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set("element",t)},e.prototype.setMap=function(t){this.set("map",t)},e.prototype.setOffset=function(t){this.set("offset",t)},e.prototype.setPosition=function(t){this.set("position",t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get("position")){var n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),r=this.getRect(i,[Object(Wn.c)(i),Object(Wn.b)(i)]),o=t||{},s=void 0===o.margin?20:o.margin;if(!Object(Yn.g)(n,r)){var a=r[0]-n[0],u=n[2]-r[2],l=r[1]-n[1],c=n[3]-r[3],h=[0,0];if(a<0?h[0]=a-s:u<0&&(h[0]=Math.abs(u)+s),l<0?h[1]=l-s:c<0&&(h[1]=Math.abs(c)+s),0!==h[0]||0!==h[1]){var f=e.getView().getCenterInternal(),p=e.getPixelFromCoordinateInternal(f);if(!p)return;var d=[p[0]+h[0],p[1]+h[1]],g=o.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(d),duration:g.duration,easing:g.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top+window.pageYOffset;return[i,r,i+e[0],r+e[1]]},e.prototype.setPositioning=function(t){this.set("positioning",t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,i=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var o="0%",s="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?o="-100%":"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(o="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?s="-100%":"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(s="-50%");var a="translate("+o+", "+s+") translate("+Math.round(t[0]+i[0])+"px, "+Math.round(t[1]+i[1])+"px)";this.rendered.transform_!=a&&(this.rendered.transform_=a,n.transform=a,n.msTransform=a)},e.prototype.getOptions=function(){return this.options},e}(Bn.a),Kn=l("+cQG"),Jn=l("4KU7"),Qn=l("Qs0z"),$n=l("oVSo"),ti=l("5urs"),ei=l("hZ4F"),ni=l("hWN6"),ii=l("vxo4"),ri=l("m+aV"),oi=l("5Oj5"),si=l("heo9"),ai=l("PooM"),ui=l("ZdQP"),li=l("y1k7"),ci=l("mTvk"),hi=l("C05f"),fi=l("KTx3"),pi=l("XZLj"),di=l("DiD3"),gi=l("7Gkf"),yi=l("rKV5"),_i=l("fJCm"),vi=l("4oW2"),mi=l("Zhvk"),bi=l.n(mi);function xi(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Ei(t,e){return t<e?-1:t>e?1:0}var Ii=function(t,e,n,i,r){!function t(e,n,i,r,o){for(;r>i;){if(r-i>600){var s=r-i+1,a=n-i+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-a*l/s+c)),Math.min(r,Math.floor(n+(s-a)*l/s+c)),o)}var h=e[n],f=i,p=r;for(xi(e,i,n),o(e[r],h)>0&&xi(e,i,r);f<p;){for(xi(e,f,p),f++,p--;o(e[f],h)<0;)f++;for(;o(e[p],h)>0;)p--}0===o(e[i],h)?xi(e,i,p):xi(e,++p,r),p<=n&&(i=p+1),n<=p&&(r=p-1)}}(t,e,n||0,i||t.length-1,r||Ei)};function wi(t,e){if(!(this instanceof wi))return new wi(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ni(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function Ci(t,e){Oi(t,0,t.children.length,e,t)}function Oi(t,e,n,i,r){r||(r=Ai(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Pi(r,t.leaf?i(o):o);return r}function Pi(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Si(t,e){return t.minX-e.minX}function ki(t,e){return t.minY-e.minY}function Ti(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Li(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Mi(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ri(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ai(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Di(t,e,n,i,r){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(o=e+Math.ceil((n-e)/i/2)*i,Ii(t,o,e,n,r),s.push(e,o,o,n))}wi.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!Ri(t,e))return n;for(var r,o,s,a,u=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],Ri(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):Mi(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Ri(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],Ri(t,s=e.leaf?n(o):o)){if(e.leaf||Mi(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ai([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),i=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(r=Ni(t,s.children,e)))return s.children.splice(r,1),u.push(s),this._condense(u),this;o||s.leaf||!Mi(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(u.push(s),l.push(n),n=0,i=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Si,compareMinY:ki,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,s=this._maxEntries;if(o<=s)return Ci(r=Ai(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=Ai([])).leaf=!1,r.height=i;var a,u,l,c,h=Math.ceil(o/s),f=h*Math.ceil(Math.sqrt(s));for(Di(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(Di(t,a,l=Math.min(a+f-1,n),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),r.children.push(this._build(t,u,c,i-1));return Ci(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,u,l,c,h,f,p;i.push(e),!e.leaf&&i.length-1!==n;){for(c=h=1/0,r=0,o=e.children.length;r<o;r++)u=Ti(s=e.children[r]),f=t,p=s,(l=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=n?t:(0,this.toBBox)(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),Pi(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=Ai(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Ci(n,this.toBBox),Ci(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Ai([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ci(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,a,u,l,c,h,f,p,d,g,y;for(u=l=1/0,i=e;i<=n-e;i++)h=r=Oi(t,0,i,this.toBBox),f=o=Oi(t,i,n,this.toBBox),p=Math.max(h.minX,f.minX),d=Math.max(h.minY,f.minY),g=Math.min(h.maxX,f.maxX),y=Math.min(h.maxY,f.maxY),s=Math.max(0,g-p)*Math.max(0,y-d),a=Ti(r)+Ti(o),s<u?(u=s,c=i,l=a<l?a:l):s===u&&a<l&&(l=a,c=i);return c},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:Si,r=t.leaf?this.compareMinY:ki;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,s=this.toBBox,a=Oi(t,0,e,s),u=Oi(t,n-e,n,s),l=Li(a)+Li(u);for(r=e;r<n-e;r++)o=t.children[r],Pi(a,t.leaf?s(o):o),l+=Li(a);for(r=n-e-1;r>=e;r--)o=t.children[r],Pi(u,t.leaf?s(o):o),l+=Li(u);return l},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)Pi(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Ci(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Fi=wi;function Gi(t){var e=[t[0],t[1]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],[t[2],t[3]],[t[0],t[3]],e]]}}}function ji(t){var e=[1/0,1/0,-1/0,-1/0];return Object(vi.coordEach)(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}var Ui=function(t){var e=Fi(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=Gi(e)).bbox=e}else t.bbox=t.bbox?t.bbox:ji(t);return Fi.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var n=Gi(t);n.bbox=t,e.push(n)})):Object(vi.featureEach)(t,(function(t){t.bbox=t.bbox?t.bbox:ji(t),e.push(t)})),Fi.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=Gi(e)).bbox=e}return Fi.prototype.remove.call(this,t)},e.clear=function(){return Fi.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Fi.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Fi.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Fi.prototype.all.call(this)}},e.toJSON=function(){return Fi.prototype.toJSON.call(this)},e.fromJSON=function(t){return Fi.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:ji(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e};function Vi(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=function t(e){var n={};return e?(Object.keys(e).forEach((function(i){var r=e[i];n[i]="object"==typeof r?null===r?null:r.length?r.map((function(t){return t})):t(r):r})),n):n}(t.properties),e.geometry=Bi(t.geometry),e}function Bi(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Bi(t)})),e):(e.coordinates=function t(e){return"object"!=typeof e[0]?e.slice():e.map((function(e){return t(e)}))}(t.coordinates),e)}var zi={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function qi(t,e,n){if(!Ji(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&Qi(i),r&&$i(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function Yi(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ki(t[0])||!Ki(t[1]))throw new Error("coordinates must contain numbers");return qi({type:"Point",coordinates:t},e,n)}function Xi(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!Ki(t[0][1])||!Ki(t[0][1]))throw new Error("coordinates must contain numbers");return qi({type:"LineString",coordinates:t},e,n)}function Wi(t,e){if(!Ji(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&Qi(n),i&&$i(i);var r={type:"FeatureCollection"};return i&&(r.id=i),n&&(r.bbox=n),r.features=t,r}function Hi(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function Zi(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function Ki(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Ji(t){return!!t&&t.constructor===Object}function Qi(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!Ki(t))throw new Error("bbox must only contain numbers")}))}function $i(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function tr(t,e,n){if(null!==t)for(var i,r,o,s,a,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,_=0;_<y;_++){a=(c=!!(l=d?t.features[_].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<a;v++){var m=0,b=0;if(null!==(s=c?l.geometries[v]:l)){u=s.coordinates;var x=s.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,f,_,m,b))return!1;f++,m++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],f,_,m,b))return!1;f++,"MultiPoint"===x&&m++}"LineString"===x&&m++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(r=0;r<u[i].length-h;r++){if(!1===e(u[i][r],f,_,m,b))return!1;f++}"MultiLineString"===x&&m++,"Polygon"===x&&b++}"Polygon"===x&&m++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for("MultiPolygon"===x&&(b=0),r=0;r<u[i].length;r++){for(o=0;o<u[i][r].length-h;o++){if(!1===e(u[i][r][o],f,_,m,b))return!1;f++}b++}m++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===tr(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function er(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function nr(t){var e=[];return tr(t,(function(t){e.push(t)})),e}function ir(t,e){!function(t,e){var n,i,r,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,s=(u=!!(a=p?t.features[n].geometry:d?t.geometry:t)&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=u?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}(t,(function(t,n,i,r,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(qi(t,i,{bbox:r,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++)if(!1===e(qi({type:s,coordinates:t.coordinates[u]},i),n,u))return!1}))}function rr(t,e){ir(t,(function(t,n,i){var r=0;if(t.geometry){var o,s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s)return!1!==tr(t,(function(s,a,u,l,c){if(void 0!==o){var h=Xi([o,s],t.properties);if(!1===e(h,n,i,c,r))return!1;r++,o=s}else o=s}))&&void 0}}))}function or(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function sr(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ar(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}var ur=function(t){if(!t)throw new Error("geojson is required");var e=[];return ir(t,(function(t){!function(t,e){var n=[],i=t.geometry;switch(i.type){case"Polygon":n=sr(i);break;case"LineString":n=[sr(i)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,i){var r,o,s,a,u,l,c=Xi([t,i],e);return c.bbox=[(s=(r=t)[0])<(u=(o=i)[0])?s:u,(a=r[1])<(l=o[1])?a:l,s>u?s:u,a>l?a:l],n.push(c),i})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),Wi(e)},lr=function t(e,n,i){if(!Ji(i=i||{}))throw new Error("options is invalid");if(!0===i.final)return function(e,n){return(t(n,e)+180)%360}(e,n);var r=or(e),o=or(n),s=Zi(r[0]),a=Zi(o[0]),u=Zi(r[1]),l=Zi(o[1]),c=Math.sin(a-s)*Math.cos(l),h=Math.cos(u)*Math.sin(l)-Math.sin(u)*Math.cos(l)*Math.cos(a-s);return Hi(Math.atan2(c,h))},cr=function(t,e,n){if(!Ji(n=n||{}))throw new Error("options is invalid");var i=n.units,r=or(t),o=or(e),s=Zi(o[1]-r[1]),a=Zi(o[0]-r[0]),u=Zi(r[1]),l=Zi(o[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(l);return function(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=zi[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),i)},hr=function(t,e,n,i){if(!Ji(i=i||{}))throw new Error("options is invalid");var r=i.units,o=i.properties,s=or(t),a=Zi(s[0]),u=Zi(s[1]),l=Zi(n),c=function(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=zi[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}(e,r),h=Math.asin(Math.sin(u)*Math.cos(c)+Math.cos(u)*Math.sin(c)*Math.cos(l));return Yi([Hi(a+Math.atan2(Math.sin(l)*Math.sin(c)*Math.cos(u),Math.cos(c)-Math.sin(u)*Math.sin(h))),Hi(h)],o)};function fr(t,e){var n=sr(t),i=sr(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],u=i[0][0],l=i[0][1],c=i[1][0],h=i[1][1],f=(h-l)*(s-r)-(c-u)*(a-o);if(0===f)return null;var p=((c-u)*(o-l)-(h-l)*(r-u))/f,d=((s-r)*(o-l)-(a-o)*(r-u))/f;return p>=0&&p<=1&&d>=0&&d<=1?Yi([r+p*(s-r),o+p*(a-o)]):null}var pr=function(t,e){var n={},i=[];if("LineString"===t.type&&(t=qi(t)),"LineString"===e.type&&(e=qi(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var r=fr(t,e);return r&&i.push(r),Wi(i)}var o=Ui();return o.load(ur(e)),er(ur(t),(function(t){er(o.search(t),(function(e){var r=fr(t,e);if(r){var o=sr(r).join(",");n[o]||(n[o]=!0,i.push(r))}}))})),Wi(i)},dr=function(t,e,n){if(!Ji(n=n||{}))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var r=Yi([1/0,1/0],{dist:1/0}),o=0;return ir(t,(function(t){for(var i=sr(t),s=0;s<i.length-1;s++){var a=Yi(i[s]);a.properties.dist=cr(e,a,n);var u=Yi(i[s+1]);u.properties.dist=cr(e,u,n);var l=cr(a,u,n),c=Math.max(a.properties.dist,u.properties.dist),h=lr(a,u),f=hr(e,c,h+90,n),p=hr(e,c,h-90,n),d=pr(Xi([f.geometry.coordinates,p.geometry.coordinates]),Xi([a.geometry.coordinates,u.geometry.coordinates])),g=null;d.features.length>0&&((g=d.features[0]).properties.dist=cr(e,g,n),g.properties.location=o+cr(a,g,n)),a.properties.dist<r.properties.dist&&((r=a).properties.index=s,r.properties.location=o),u.properties.dist<r.properties.dist&&((r=u).properties.index=s+1,r.properties.location=o+l),g&&g.properties.dist<r.properties.dist&&((r=g).properties.index=s),o+=l}})),r};function gr(t,e,n,i){var r=n[0],o=n[1],s=t[0],a=t[1],u=e[0],l=e[1],c=u-s,h=l-a;return 0==(n[0]-s)*h-(n[1]-a)*c&&(i?"start"===i?Math.abs(c)>=Math.abs(h)?c>0?s<r&&r<=u:u<=r&&r<s:h>0?a<o&&o<=l:l<=o&&o<a:"end"===i?Math.abs(c)>=Math.abs(h)?c>0?s<=r&&r<u:u<r&&r<=s:h>0?a<=o&&o<l:l<o&&o<=a:"both"===i?Math.abs(c)>=Math.abs(h)?c>0?s<r&&r<u:u<r&&r<s:h>0?a<o&&o<l:l<o&&o<a:void 0:Math.abs(c)>=Math.abs(h)?c>0?s<=r&&r<=u:u<=r&&r<=s:h>0?a<=o&&o<=l:l<=o&&o<=a)}var yr=function(t,e,n){var i=(n=n||{}).ignoreEndVertices;if(!Ji(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var r=or(t),o=sr(e),s=0;s<o.length-1;s++){var a=!1;if(i&&(0===s&&(a="start"),s===o.length-2&&(a="end"),0===s&&s+1===o.length-1&&(a="both")),gr(o[s],o[s+1],r,a))return!0}return!1},_r=Array.prototype.slice;function vr(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function mr(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?t===e:function(t,e,n){var i,r;if(br(t)||br(e))return!1;if(t.prototype!==e.prototype)return!1;if(vr(t))return!!vr(e)&&mr(t=_r.call(t),e=_r.call(e),n);if(xr(t)){if(!xr(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var o=Object.keys(t),s=Object.keys(e)}catch(a){return!1}if(o.length!==s.length)return!1;for(o.sort(),s.sort(),i=o.length-1;i>=0;i--)if(o[i]!==s[i])return!1;for(i=o.length-1;i>=0;i--)if(!mr(t[r=o[i]],e[r],n))return!1;return typeof t==typeof e}(t,e,n))}function br(t){return null==t}function xr(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function Er(t,e){var n=sr(e),i=sr(t),r=i[0],o=i[i.length-1],s=t.geometry.coordinates;return mr(n[0],r)?s.unshift(n[1]):mr(n[0],o)?s.push(n[1]):mr(n[1],r)?s.unshift(n[0]):mr(n[1],o)&&s.push(n[0]),t}var Ir=l("WRQj"),wr=l.n(Ir),Nr=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=ar(t);if(n!==ar(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new wr.a({precision:6}).compare(t,e))return!1;var i=0;switch(n){case"MultiPoint":var r=nr(t),o=nr(e);r.forEach((function(t){o.forEach((function(e){t[0]===e[0]&&t[1]===e[1]&&i++}))}));break;case"LineString":case"MultiLineString":rr(t,(function(t){rr(e,(function(e){(function(t,e,n){if(!Ji(n=n||{}))throw new Error("options is invalid");var i,r=n.tolerance||0,o=[],s=Ui();return s.load(ur(t)),rr(e,(function(t){var e=!1;er(s.search(t),(function(n){if(!1===e){var o=sr(t).sort(),s=sr(n).sort();mr(o,s)||(0===r?yr(o[0],n)&&yr(o[1],n):dr(n,o[0]).properties.dist<=r&&dr(n,o[1]).properties.dist<=r)?(e=!0,i=i?Er(i,t):t):(0===r?yr(s[0],t)&&yr(s[1],t):dr(t,s[0]).properties.dist<=r&&dr(t,s[1]).properties.dist<=r)&&(i=i?Er(i,n):n)}})),!1===e&&i&&(o.push(i),i=void 0)})),i&&o.push(i),Wi(o)})(t,e).features.length&&i++}))}));break;case"Polygon":case"MultiPolygon":rr(t,(function(t){rr(e,(function(e){pr(t,e).features.length&&i++}))}))}return i>0},Cr=l("+4jp"),Or=function(){for(var t=new Cr.GeoJSONReader,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Cr.UnionOp.union(e,t.read(JSON.stringify(arguments[n].geometry)));var i=new Cr.GeoJSONWriter;return{type:"Feature",geometry:e=i.write(e),properties:arguments[0].properties}},Pr=l("sOKj"),Sr=l("q/Q7"),kr=l.n(Sr),Tr=l("mWib"),Lr=l("OZ4H"),Mr=l("W1gw"),Rr=l("2kYt"),Ar=["mapPopup"],Dr=["initDrawTooltip"],Fr=["drawTooltip"],Gr=["modifyTooltip"],jr=["copyTooltip"],Ur=["copyIntersectingTooltip"];function Vr(t,e){if(1&t){var n=f.Wb();f.Vb(0,"div",8),f.dc("click",(function(){return f.yc(n),f.hc().clipPolygons()})),f.Ic(1," Clip selected shapes "),f.Ub()}}function Br(t,e){1&t&&(f.Vb(0,"div",12),f.Ic(1," Press ESC to remove vertex or press Backspace to start over "),f.Ub())}function zr(t,e){1&t&&(f.Vb(0,"div",12),f.Ic(1," Close shape to edit attributes "),f.Ub())}var qr,Yr=function(){return{moveFullScreen:!0}},Xr=((qr=function(t){n(o,t);var r=i(o);function o(t,e,n,i,s){var a;return g(this,o),(a=r.call(this,t,e,i))._dialog=t,a.mapService=e,a.snackBar=n,a.spinner=i,a.usersDatasetService=s,a.mode="erm",a.styleParameters={},a.readOnly=!1,a.drawingLayer=new hi.a(null),a.isDrawingMode=new hi.a(!1),a.createMinimumConvexPolygonEvent=new hi.a(null),a.detailedDatasetIds=new hi.a([]),a.occurrenceDatasetIds=new hi.a([]),a.zoomToDatasetExtent=new hi.a(null),a.deleteLayer=new hi.a(null),a.speciesModelMap=new hi.a({}),a.disableSpeciesModel=new hi.a(void 0),a.unselectSelectedPolygons=new f.o,a.presentActiveLayer=new f.o,a.deletePolygon=new f.o(null),a.createPolygon=new f.o(null),a.createdPolygon=new f.o,a.updatedPolygons=new f.o,a.deletedPolygon=new f.o,a.activeLayerId=null,a.activeLayer=null,a.layerDatasetId="",a.layerMolidId="",a.vectorLayers={},a.draws={},a.selectedFeatures=[],a.currentDraw=null,a.currentModify=null,a.interactionStyle=new ri.c({fill:new oi.a({color:"rgba(255,108,47,0.4)"}),stroke:new si.a({color:"#333333",width:2}),image:new ai.a({radius:3,stroke:new si.a({width:.2,color:"#333333"})})}),a.polygonNumberStyle=function(t){return new ri.c({text:new ui.a({text:t,fill:new oi.a({color:"rgba(0,0,0,1)"}),scale:2})})},a.pointCount=0,a.selectedStyle=new ri.c({image:new ai.a({radius:4,fill:new oi.a({color:"#ffffff"}),stroke:new si.a({color:"#000000",width:2})}),geometry:function(t){var e=t.getGeometry();if(e instanceof Jn.a){var n=[];return e.getCoordinates().map((function(t){return t.map((function(t){return t.map((function(t){return n.push(t)}))}))})),new Qn.a(n)}}}),a.parser=new Un,a.parser.inject($n.a,ti.a,ei.a,ni.a,Qn.a,ii.a,Jn.a),a}return _(o,[{key:"ngOnInit",value:function(){var t=this;e(c(o.prototype),"ngOnInit",this).call(this),this.drawingLayer.subscribe((function(e){e&&(t.toggleCurrentModifyLayers(!1),e&&t.activeLayerId!==e&&(t.activeLayer&&t.activeLayer.setVisible(!1),Object.keys(t.vectorLayers).includes(e)?(t.activeLayer=t.vectorLayers[e],t.activeLayerId=e,t.currentDraw=t.draws[e],t.vectorLayers[e].setVisible(!0)):(t.activeLayerId=e,t.addInteraction(e))))})),this.isDrawingMode.subscribe((function(e){t.toggleCurrentModifyLayers(!!e)})),this.createMinimumConvexPolygonEvent.subscribe((function(e){if(e){var n=t.map.getOccurenceVisibleFeatures();if(0!==n.length){var i=n.map((function(t){var e=t.getGeometry();return e instanceof Jn.a?Object(_i.multiPolygon)(e.getCoordinates()):e instanceof ni.a?Object(_i.multiPolygon)(new Jn.a([e]).getCoordinates()):void 0})).filter((function(t){return!!t})),r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.concavity=e.concavity||1/0;var n=[];if(Object(vi.coordEach)(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var i=bi()(n,e.concavity);return i.length>3?Object(_i.polygon)([i]):null}(Object(_i.featureCollection)(i)),o=(new yi.a).readFeature(r.geometry),s=new Jn.a([]),a=o.getGeometry();a instanceof ni.a&&(s.appendPolygon(a),o.setGeometry(s)),o.setStyle([t.interactionStyle,t.polygonNumberStyle(t.getCurrentPolygonNumber())]),t.activeLayer.getSource().addFeature(o),t.createdPolygon.emit({key:t.activeLayerId,value:o})}}})),this.presentActiveLayer.subscribe((function(e){t.selectedFeatures.map((function(e){return e.setStyle([t.interactionStyle,t.polygonNumberStyle(t.getPolygonIndexInLayer(e.ol_uid))])})),t.selectedFeatures=[],t.modifyTooltipOverlay.setPosition(void 0),t.activeLayer.setVisible(e)})),this.deleteLayer.subscribe((function(e){e&&t.removeLayer(e)})),this.speciesModelMap.pipe(Object(Tr.a)(500)).subscribe((function(e){var n=e.molid,i=e.threshold_raw,r=e.as_binary;n&&i&&t.mapService.updateSpeciesModelMap(n,i,void 0,r)})),this.disableSpeciesModel.subscribe((function(){return t.mapService.updateModelTileUrl("OFF")})),this.unselectSelectedPolygons.subscribe((function(){t.selectedFeatures.map((function(e){return e.setStyle([t.interactionStyle,t.polygonNumberStyle(t.getPolygonIndexInLayer(e.ol_uid))])})),t.selectedFeatures=[]})),this.deletePolygon.subscribe((function(e){if(e){var n=t.activeLayer.getSource().getFeatures().find((function(t){return t.ol_uid===e}));n&&(t.activeLayer.getSource().removeFeature(n),t.renameAllFeaturesFromActiveLayer())}})),this.createPolygon.subscribe((function(e){if(e){Object.keys(t.vectorLayers).includes(e.key)||t.addInteraction(e.key,!0);var n=e.value;n.setStyle([t.interactionStyle,t.polygonNumberStyle(t.getPolygonNumber(e.key))]),t.vectorLayers[e.key].getSource().addFeature(n),t.renameAllFeaturesFromActiveLayer()}})),this.detailedDatasetIds.subscribe((function(e){e&&t.activeLayerId&&(t.mapService.updateSelectedLayers(e),t.mapService.updateDetailedMap(t.activeLayerId,e,t.occurrenceDatasetIds.getValue()))})),this.zoomToDatasetExtent.subscribe((function(e){e&&t.mapService.zoomToDatasetExtent(e)}))}},{key:"clipPolygons",value:function(){var t=this;if(2===this.selectedFeatures.length){var e=this.selectedFeatures.map((function(t){var e=t.getGeometry();if(e instanceof Jn.a)return Object(_i.multiPolygon)(e.getCoordinates())})),n=kr()(e[0],e[1]);if(n.geometry.coordinates.length>0&&"Polygon"===n.geometry.type){var i=new Jn.a([new ni.a(n.geometry.coordinates)]),r=new Vn.a(i);r.setId(n.id),r.setStyle([this.polygonNumberStyle(this.getCurrentPolygonNumber()),this.interactionStyle]),this.activeLayer.getSource().addFeature(r),this.createdPolygon.emit({key:this.activeLayerId,value:r}),this.selectedFeatures.forEach((function(e){t.activeLayer.getSource().removeFeature(e),t.renameAllFeaturesFromActiveLayer(),t.deletedPolygon.emit({key:t.activeLayerId,value:e})}))}this.selectedFeatures.forEach((function(e){e.setStyle([t.interactionStyle])})),this.selectedFeatures=[],this.overlay.setPosition(void 0)}}},{key:"dissolvePolygons",value:function(){var t=this;if(this.selectedFeatures.length>1){var e=[];this.selectedFeatures.map((function(t){var n=t.getGeometry();n instanceof Jn.a&&n.getPolygons().map((function(t){t instanceof ni.a&&e.push(Object(_i.polygon)(t.getCoordinates()))}))}));var n=function(t,e){if(!Ji(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;!function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0;i<t.features.length;i++){var r=t.features[i];if(!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||"Polygon"!==r.geometry.type)throw new Error("Invalid input to "+n+": must be a Polygon, given "+r.geometry.type)}}(t,0,"dissolve");var i=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Vi(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Vi(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Bi(t);default:throw new Error("unknown GeoJSON type")}}(t),r=i.features,o=[];r.forEach((function(t,e){t.properties.origIndexPosition=e}));var s=Ui();for(var a in s.load(i),r){var u=r[a],l=!1;if(s.search(u).features.forEach((function(t){u=r[a];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var i=function(t,e,n){var i,r;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach((function(e,n){var o=function(t,e){return t-e}(e,t);o>=0&&(void 0===r||o<r)&&(r=o,i=n)})),i}(e,o);0!==i&&(e-=i)}if(e!==+a){var c,h,f,p=r[e];p&&u&&(void 0!==n&&p.properties[n]!==u.properties[n]||Nr(u,p)&&(c=p,h=Xi(nr(u)),f=Xi(nr(c)),pr(h,f).features.length>0)&&(r[a]=Or(u,p),o.push(t.properties.origIndexPosition),o.sort((function(t,e){return t-e})),s.remove(t),r.splice(e,1),u.properties.origIndexPosition=a,s.remove(u,(function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition})),l=!0))}})),l){if(!u)continue;u.properties.origIndexPosition=a,s.insert(u),a--}}return r.forEach((function(t){delete t.properties.origIndexPosition,delete t.bbox})),i}(Object(_i.featureCollection)(e)),i=new Jn.a([]);n.features.map((function(t){i.appendPolygon(new ni.a(t.geometry.coordinates))}));var r=new Vn.a(i);this.activeLayer.getSource().addFeature(r),this.createdPolygon.emit({key:this.activeLayerId,value:r}),this.selectedFeatures.forEach((function(e){t.activeLayer.getSource().removeFeature(e),t.selectedFeatures=[],t.deletedPolygon.emit({key:t.activeLayerId,value:e})})),this.renameAllFeaturesFromActiveLayer(),this.overlay.setPosition(void 0)}}},{key:"ngAfterViewInit",value:function(){this.overlay=new Zn({element:this.popupElement.nativeElement,autoPan:!0,autoPanAnimation:{duration:250}}),this.map.map.addOverlay(this.overlay),this.drawTooltipOverlay=new Zn({element:this.drawTooltipElement.nativeElement,autoPan:!0,autoPanAnimation:{duration:250}}),this.map.map.addOverlay(this.drawTooltipOverlay),this.modifyTooltipOverlay=new Zn({element:this.modifyTooltipElement.nativeElement,autoPan:!0,autoPanAnimation:{duration:250}}),this.map.map.addOverlay(this.modifyTooltipOverlay),this.copyTooltipOverlay=new Zn({element:this.copyTooltipElement.nativeElement,autoPan:!0,autoPanAnimation:{duration:250}}),this.map.map.addOverlay(this.copyTooltipOverlay),this.copyIntersectingTooltipOverlay=new Zn({element:this.copyIntersectingTooltipElement.nativeElement,autoPan:!0,autoPanAnimation:{duration:250}}),this.map.map.addOverlay(this.copyIntersectingTooltipOverlay)}},{key:"toggleCurrentModifyLayers",value:function(t){this.currentDraw&&this.currentDraw.setActive(t),this.currentModify&&this.currentModify.setActive(t)}},{key:"getPolygonIndexInLayer",value:function(t){return(this.activeLayer.getSource().getFeatures().findIndex((function(e){return e.ol_uid===t}))+1).toString()}},{key:"renameAllFeaturesFromActiveLayer",value:function(){var t=this;this.activeLayer.getSource().getFeatures().map((function(e,n){e.setStyle([t.polygonNumberStyle((n+1).toString()),t.interactionStyle])}))}},{key:"getCurrentPolygonNumber",value:function(){return(this.activeLayer.getSource().getFeatures().length+1).toString()}},{key:"getPolygonNumber",value:function(t){return(this.vectorLayers[t].getSource().getFeatures().length+1).toString()}},{key:"addInteraction",value:function(t,e){var n=this,i=new ci.a({source:new li.a({wrapX:!1}),style:[this.interactionStyle]});this.vectorLayers[t]=i,e?this.vectorLayers[t].setVisible(!1):this.activeLayer=i,this.map.addLayer(i);var r=new p.a({source:this.vectorLayers[t].getSource(),type:di.a.MULTI_POLYGON,geometryFunction:function(t,e){if(e)if(t[0][0].length){e.setCoordinates([t[0].concat([t[0][0]])]);var i=t[0].length-1;i!==n.pointCount&&(n.drawTooltipOverlay.setPosition(t[0][t[0].length-2]),n.pointCount=i)}else e.setCoordinates([]);else e=new ni.a(t);return e}});r.on("drawstart",(function(){n.hideMouseTooltip()})),r.on("drawend",(function(t){n.pointCount=0;var e=n.parser.read(t.feature.getGeometry()),i=new Fn(e);i.isValid()?(t.feature.setStyle([n.interactionStyle,n.polygonNumberStyle(n.getCurrentPolygonNumber())]),n.createdPolygon.emit({key:n.activeLayerId,value:t.feature}),n.drawTooltipOverlay.setPosition(void 0)):(n.snackBar.open(i.getValidationError(e),"Dismiss"),n.drawTooltipOverlay.setPosition(void 0),n.activeLayer.getSource().once("addfeature",(function(t){n.activeLayer.getSource().removeFeature(t.feature)})))})),this.currentDraw=r,this.draws[t]=r,this.map.addInteraction(r),this.isDrawingMode.getValue()||this.currentDraw.setActive(!1)}},{key:"ngOnDestroy",value:function(){this.mapService.updateDetailedMap(this.activeLayerId,[],[]),e(c(o.prototype),"ngOnDestroy",this).call(this)}},{key:"ngOnChanges",value:function(t){e(c(o.prototype),"ngOnChanges",this).call(this,t)}},{key:"mouseOver",value:function(){var t=this;!this.tooltipSubscription&&this.isDrawingMode.getValue()&&0===this.pointCount&&(this.tooltipSubscription=Object(fi.a)(document,"mousemove").subscribe((function(e){t.showMouseTooltip(e.clientX,e.clientY)})))}},{key:"mouseOut",value:function(){this.tooltipSubscription&&this.hideMouseTooltip()}},{key:"showMouseTooltip",value:function(t,e){this.initDrawTooltipElement.nativeElement.style.display="block",this.initDrawTooltipElement.nativeElement.style.bottom="calc(100% - ".concat(e-55,"px)"),this.initDrawTooltipElement.nativeElement.style.right="calc(100vw - ".concat(t,"px - 230px)")}},{key:"hideMouseTooltip",value:function(){this.tooltipSubscription&&this.tooltipSubscription.unsubscribe(),this.tooltipSubscription=null,this.initDrawTooltipElement.nativeElement.style.display="none"}},{key:"addFeatureFromExistingDataset",value:function(){var t=this;this.copyTooltipOverlay.setPosition(void 0),this.usersDatasetService.featureGeometry(this.layerDatasetId,this.layerMolidId).toPromise().then((function(e){var n=new Jn.a(e.records[0].geom.coordinates);n.transform("EPSG:4326","EPSG:3857");var i=new Vn.a(n);i.setStyle([t.interactionStyle,t.polygonNumberStyle(t.getPolygonNumber(t.activeLayerId))]),t.activeLayer.getSource().addFeature(i),t.createdPolygon.emit({key:t.activeLayerId,value:i})}),(function(){return t.snackBar.open("API Error: Error on fetching feature geometry","Dismiss")}))}},{key:"emptyClickHandler",value:function(t){this.copyTooltipOverlay.setPosition(void 0)}},{key:"speciesClickHandler",value:function(t,e){var n=this;if(!this.readOnly&&(this.copyTooltipOverlay.setPosition(void 0),this.copyIntersectingTooltipOverlay.setPosition(void 0),this.currentModify&&this.map.map.removeInteraction(this.currentModify),!this.isDrawingMode.getValue())){var i=t.filter((function(t){return void 0===t.get("layer")})).filter((function(t){return!(t.getGeometry()instanceof $n.a)})),r=t.filter((function(t){return void 0!==t.get("layer")&&"occurrence"!==t.get("layer")}));i.length>=1?(this.overlay.setPosition(void 0),i.forEach((function(t){n.selectedFeatures.includes(t)?(t.setStyle([n.interactionStyle,n.polygonNumberStyle(n.getPolygonIndexInLayer(t.ol_uid))]),n.selectedFeatures.splice(n.selectedFeatures.indexOf(t),1),i.length<2&&n.overlay.setPosition(void 0),n.modifyTooltipOverlay.setPosition(void 0)):(t.setStyle([n.interactionStyle,n.selectedStyle,n.polygonNumberStyle(n.getPolygonIndexInLayer(t.ol_uid))]),n.selectedFeatures.push(t),n.modifyTooltipOverlay.setPosition(e.coordinate),n.selectedFeatures.length>1&&n.overlay.setPosition(e.coordinate));var r=new d.a({features:new Kn.a(n.selectedFeatures),deleteCondition:function(t){return Object(gi.j)(t)&&Object(gi.k)(t)}});n.map.addInteraction(r),r.on("modifystart",(function(t){n.modifyTooltipOverlay.setPosition(t.mapBrowserEvent.coordinate)})),r.on("modifyend",(function(t){var e=t.features.getArray().filter((function(t,e,n){return n.indexOf(t)===e}));n.updatedPolygons.emit({key:n.activeLayerId,value:new Kn.a(e)})})),n.currentModify=r}))):r.length>0&&(r.length>1?this.copyIntersectingTooltipOverlay.setPosition(void 0):(this.copyTooltipOverlay.setPosition(e.coordinate),this.layerDatasetId=r[0].getProperties().dataset_id,this.layerMolidId=r[0].getProperties().molid))}}},{key:"deleteFeatures",value:function(t){var e=this;"Delete"!==t.key&&"Backspace"!==t.key||this.isDrawingMode.getValue()||this.selectedFeatures.forEach((function(t){e.activeLayer.getSource().removeFeature(t),e.renameAllFeaturesFromActiveLayer(),e.pointCount=0,e.selectedFeatures=[],e.deletedPolygon.emit({key:e.activeLayerId,value:t})})),"Escape"===t.key&&this.isDrawingMode.getValue()&&this.currentDraw.removeLastPoint(),"Backspace"===t.key&&this.isDrawingMode.getValue()&&(this.currentDraw.abortDrawing(),setTimeout((function(){return e.drawTooltipOverlay.setPosition(void 0)}),2e3))}},{key:"removeLayer",value:function(t){return this.map.removeLayer(this.vectorLayers[t])}},{key:"isEditPointCount",get:function(){return this.pointCount<3}}]),o}(Pr.a)).\u0275fac=function(t){return new(t||qr)(f.Pb(Lr.b),f.Pb(pi.d),f.Pb(Mr.a),f.Pb(pi.h),f.Pb(pi.k))},qr.\u0275cmp=f.Jb({type:qr,selectors:[["mol-erm-map"]],viewQuery:function(t,e){var n;1&t&&(f.Nc(Ar,!0),f.Nc(Dr,!0),f.Nc(Fr,!0),f.Nc(Gr,!0),f.Nc(jr,!0),f.Nc(Ur,!0)),2&t&&(f.tc(n=f.ec())&&(e.popupElement=n.first),f.tc(n=f.ec())&&(e.initDrawTooltipElement=n.first),f.tc(n=f.ec())&&(e.drawTooltipElement=n.first),f.tc(n=f.ec())&&(e.modifyTooltipElement=n.first),f.tc(n=f.ec())&&(e.copyTooltipElement=n.first),f.tc(n=f.ec())&&(e.copyIntersectingTooltipElement=n.first))},hostBindings:function(t,e){1&t&&f.dc("mouseover",(function(){return e.mouseOver()}))("mouseout",(function(){return e.mouseOut()}))("keydown",(function(t){return e.deleteFeatures(t)}),!1,f.wc)},inputs:{styleParameters:"styleParameters",readOnly:"readOnly",drawingLayer:"drawingLayer",isDrawingMode:"isDrawingMode",createMinimumConvexPolygonEvent:"createMinimumConvexPolygonEvent",detailedDatasetIds:"detailedDatasetIds",occurrenceDatasetIds:"occurrenceDatasetIds",zoomToDatasetExtent:"zoomToDatasetExtent",deleteLayer:"deleteLayer",speciesModelMap:"speciesModelMap",disableSpeciesModel:"disableSpeciesModel",unselectSelectedPolygons:"unselectSelectedPolygons",presentActiveLayer:"presentActiveLayer",deletePolygon:"deletePolygon",createPolygon:"createPolygon"},outputs:{createdPolygon:"createdPolygon",updatedPolygons:"updatedPolygons",deletedPolygon:"deletedPolygon"},features:[f.zb,f.Ab],decls:34,vars:10,consts:[["id","map"],[1,"map-logos"],["href","https://google.com/","target","_blank","title","Google"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARAAAABcCAYAAACm5+q2AAAXGElEQVR4Ae1dC5QcVZm+OtOBwC6CwiqCCBIQkAWSqpqEkNhdt3uyQeJBgSi4uwoIihtchJgF5TGarpoJicACCkFANuGBBhcQH5DMJAH0CCjIQ1hYfBAeZPoRkklVdR6ZZHrvt+a4pLdn5r/Vdbuqh/udc0/nMdPTZ+rWV//9/+//fhYHZnat2yvtVEzueqdx159ju8Fltus73PF7xN/ni79fIta52e5gVtr1j053VXdnGhoa70ykezYfzJ3KedwN7rJd/8/itSqzMnlvu3h9Xnzvzdz1/ynd5e3LNDQ0xi7SCyoHcjf4ZiYfPAsSiHTlvSHxvqtsJzi7c9HQnkxDQ2NsgLvedNvx78u43g7c7KqXIJIB7voLpzvB/ixh0NAwf3hqdbTFGNOw8xun8nzwsCqiIEQlm2zXX4D8CtPQ0ATSGshdWfmgII4f4SZOxHK8fiRnmYaGJpAEo1p9F3eCM3GEwI2btAVSS3dt2JtpaGgCSRZwTOBusAw3aqJX3n8l2xNMZBoamkCSgdz8jYdxN3gpCQRBz414pzANDU0giUiUrldxk2fcoGi73muZfFDI5L0tUZd9oUNhGhqaQOJBxvWzGderRJCb+L14vZa7/ul2T3DsrK7qHvXyK9N6BvbhTqUDilTb9W8TP/uNsD8TJWUI0JiGhiaQ5iOb9zOIEsLewFCf2k5wORSpjSRt005liiCyGzN5P9DkoaEJpAXAXf+YjBtsDCnyesHO+2eIXpZ2FiEQndiu/y3uBr4mDw1NIAlFZ5f/d8hLhCAPnzv+10AccWlQNHloaAKJEbOXVdtsN1gtH3X4v84t2HRQk49YnxVE4mny0NAEkhBwJ7hUPlkZXG/cVE2xGJDt3nh4Jh/8tyYPDU0gCch78Ly3TSpR6gTfQKKTxQi0+cNDhGloaAKJB11d1Xdz139MkjzmMQ0NDU0gggw+L3lsuYYeeWhojFloApl57dBu3PXWSJRpVyHZyjQ0NDSBcCc4R4I81qGMyjQ0NDSBIPch0yQnkpVfYICGhoYmEPS6yGg9QDgM0NDQ0ATC88GdVAJBbwwDNDQ0NIGgI5baaZtx/Sd01aV1oKEJpNrF3o3FVAHiK2r0QVN5alTT6fZ13OgoZs15xax1d4Ebvy1ljULJtiqFrDWEV/wd/y7+/66ibX69nDUtfF8iPv9q1r6tr71jW2/7vG0r2u8e7Ev9duuKVGFrX6oi/lwVfx4UqzzY2/aM+LofiXWx+Nrj8X0sAcAwMu4EJ8Jo23aDXrjToaP8r3OG8kEJD0N0d4uv+czUK8t/2+oE0t95zJ6lrDVLrEUlbvSJ1zVij20Wr9W/LGOT2Hd/KtnGg0Vu5stZIxPJfoMEndgaX0l3Ff+GDQuNUtacKC7Wd0vcKuGiSS/bLIrX64ud1nEsBmxdnjpusDd1vSCKIohCdonvWze4IrVYvE5iMQAWltz1b0VDZwhX/5vT3QMTavqscpTvj4tAqoy9q9hpnCAI4U4QRLj9Zl65jk85oIHyrfcM1aiYadRF0TanCnbvxUWJcK0o5DqmsCYA0YOIKFbQyYJEJqu3LW8/gTUB9nz/Y9zxft64g503iDlDU64aGp90AunPTJpcyBqPRLLXbGuLIJIFiGLC5D920CTrlS8xjV3wZtrYV1yA23ERFK6lb2St9yk6quwryGMpbnhVS7z/XUO/YPupEz/63TiWRDwe5Bl0lSeRQN6cZeyBKFfJXrONP0s9tLLdFYv6S0273hFM468o2x28wK21+MWrXuJJ80YpZ6ZZhBD5i4zIXbyJm1z1Qv5ksK/NZhECNzh3vCdVGXLDCweWmkkikGJ64gRxVHle7V6zthW5dSajwHb9zxFDu83/p/3QKHHrnIJtbMcvvFkLP69om2dFkuvoTZ0tjhjbcXM3a+HnCcL6clS5Dhhwx+P2r4BA6Pm1cvP2nHEhgUCCS2hsHDzHNABW5tZc/IJjW9z8WoP5jgtxQ8e1BInMbbDlYhJ3gw3Yl+8UAunvNI8uZM31Td9rOevc0QjkKlr+w/8pU4y4N8E019tv9Mij44v4xca9ilkrVCvB1pWps3ATx70QAYUbLTJwKHeDMq7XO4VAimnrA+II+3oc+wxRb5l32CO07/u3ECOQO8Y6gWS7Nx3PRgCSS+JCDjYQEhbEjf9E0bZW4xUltEbOqdCNSEUeq9oni1zEtgaOIGvF62Pi5l+JV/Fe/Q3kRLZtW9k+lUmgc9HQntwNng97fdEACu2H+PNKeN5gjnLSCQQCsGLWXBlyv20qcOth8f03F7h5rdhv/1Hi5mPYO7L7du3M4/YbroS7lCggu2msE8hIQ7nXzezYq2hbr8ofN4ynxQX8l/U5o65P7Fp74oeL3JwjzrfPhtggr5SnTiUJoEQVZC8hCFsjfbP3pp5E3mKob/wBdd939fgDxft+RSRIn5Z9b3wefC66V42/WJ40vFdxTIflZT0FNUaNcNefi9EjSSQQ7I0Q5PG42E+ffW3KlPHD7WUcTSAqo7+nuWyYm9ZbQpztcvPYJ5DKsAk+MLhc6Ge9VuAdn4LQhywIypqnotoidZSxzatoFZfUNZJ5ilcH+8Z9slqlfX58nfj6TwtSeF2SSK6jiR29tOQwsQomA1A9evF1IBJMRUwKgUAiULCNjfS9YLxVso0zqHvulXR6d5lycNHumFEnAvG/TyKQfHD3mD/C5P2L6jJ2bvKRghB2SNTSHxyYNm0fFgLQe0CQJnVGtc2PshGwZcW4I8XxY4fEUeVn1V72HhYCQw+x94ojznKZysyWh8YdMarVxE6xI3H9EZKDsAlaVHeSQCCQpEtEo88jyg1ZUVxIjEKexZGqNiy8kpZE9R4c8xGIE1w8zIVcKnEh760aRoo1gOrso8YVs9ZPJH7mbWwEiGhiicSx4p5G+1mqT7KUeJ/7JKKdEfNrGcc7VYY8pjvB/qwBgHwybvBW0wmk9piRtXxiFPpfiFYa6dvCUZvysxBV1zqwzyUmUV8e6wRidwdfZzUo5yZ+kKr3KGTNJxEWMgJoakPjGaLIbBCZ+roRwYNsf7LeY0XqCZGT2I1FgKFfs/EiL/I7ahQytGL8sO528J8htlp4yHWwCCD2wow4CaTMjS8THyA+xGXhH1az29CAV7Ct39HIylodkt29QZwTx3YOxJ/DaoAuWeIvdqt4PZxFiH7b+hjIoRFtCDQXxJt4izjqHMYixJa+cUdRqz7o+q0fDfhH05WjwbksQqApLy4CKWTNR4nX/QIWAqiqFLl1MRLxsklaHJnDXaCeisEUAv0MKhZ6fcJaFQhi+A1Nl2F+hykAOnOJG+kxVgeIKohHiYVMAZAkpUY/9XMSfp5Yon02aqU0dyoHiL2ztdkEgvwZJeeGhDuOuzKdu5AioHcLD7zR3p+UuEdUQc88+3NZ6wEb4dPEI8wuWeYN6WP3Jl7IQRx1mAKgzEv6DEim1pR0kQilJE/h7YGjDlOAau/uBxE/w1D1l2yfOtWXp4gJ8H9kCmDng9ubTSBlbn6S+NDoovqEoPWCekwhPCxX1doZ/orYobi89cd00psFxQU6kVp1YQqBC0a6sDnrH3Z9+redSK26MIUQ799L05y0zWRvA7xniNGjj/Z7Fj2QC/lEswmkmLW+TUtoTj5mlOj1cPFe1wjiGGiUNBCxFG3jDthWIJKprcS4RFHOdkzsb0HD6HsJuoEdcLEK0/MiLtJXFRPIvBB5EPS8XESsgsxhCoE8DPFz/NuuT/+NU4mR8f0q7T4x5rWJBIIb/x5K8hQl1XoVFVRK4CUTkZx9jXgwXdLfefzw9z13vekSicYLWAsB6kNKXR+Dues8CRZTfsmqTX9KtvVxIoHcUJP/WEy8cTsUE8h0Yh5kccgpid9kCgENSjMJBDaXhNL9M7t+z+T3l7h1KQSMEbTzD4n1C1RnUKWh+Ee2Z9ygSBzp8Cd8PWsR2D3BscRNeFcdgc2PKb9wWg0+PGA3R7z499TcuD+m3LgQfzGFQH6FqEG5r+boeTHtaO3PVnwE/s/mRiDGK5Q8BI4SJd4xHZ67hP4WkpIVorKiPenQML+k68jVmLx/RuvM+vW/TdyE5/9/AjEfovziCSzdENDTECIXg9zDQ5QbV6VjN1BdxsYRczG9NV41DjEqtplCoI2jmQRC8dP930jDtp6L6JjyeDHb8XnsM+VPaiw0HiFf0CLT9v5I1LkcxWoAZ2sSgSi+AaFsJTbu9dUQSB+l+sEAtQTSRuzQXVVTwu2hPdC8jyvOod3YTAJpjmmQsbnArVvL9mQjQh1G8KiE8OoKlnBQM+iw/EeupM6T4H6SsAblU4VAfwyxV+G+miPM/aQjzHK2J1MIlGeJHiE/r4mKu4jl908whUApt5kEotD7A+X+l+E0Bq1JrPNhILCBrVyik6fwfqCFwAvrNxmZSygXBYpRtfaJkybRe2Lke2DQbKd8VAQtmbukRgk6p9Eu6ogerKuaSSDUvhTqgo4ID5cCNzrVRsu46RzvNxLS4ZcJA3liAVSl5C7c+f7fD0MgV9Dq8aaaYVvyLmiX1RDIFZQbd/vK1BmKdSBnEtWw80M+0L6n8p7AEKpmEgihkZJuYMXN/FszzA+xZgFzbyVNeB4i9Mg0FekFlQOp3ZQQ0Q1/45qnEy/WD5hCYGgQ0b/yM+xt2N6XOp1WPm27RXEZ9w7K58Dn3cWBLL/5EOI+fIkpQm6+d2SThWTYdz0NOvg/AkMhmsxdATBASnKGxtLZy6ptLAGAelGQ2m/JRzGncvKwEuD05IOJXbjrw3ThUmXI1Lbu2ifN5tW7HUysfrwlWviVfH7kV0Ry1KN8js3Ldzuk9ulPlRegCMAUABqTpitRc+YpIYjDL3HrezBfjv8mXBh8QJDIeslu1mUY8sNixMyudXtxN3hEInp6erQGLGq3YjlrfklRM92/EjfQH+o7sLe9QiSRcxRNvPsq5efjc9ZzP+P54E5iHutWBfN121FxbDaBIGkOMRdR9PVSMWt9hZDIby4wcFi6HT4fPAzyYTFgRn7Th0AIkg5kOTYK0EtATFS9WUwfFencYOEw9R6JGbuLGrEyhBWhiEIi/fxo5sNAKaL36jXDqKRPo7ZZoBQfcRXvrJja+aE+/iXlukPsyCRBc4G3jo8iEXlTiJGA/bgxm1yunUFJdNEtGuUrIFhFbkVqPI0qkIRf5bHDJDAnSfiT3hDx5LvbJKwNJw03ZZ+cz3L8x6PKx2HEB/ZUCxgKQUAYWRkbvTRwgd/ZAb6oIXEZjiRkN6g6YyBURyPCfep9oUjO9damu7x9qR4K8NogJ7C4dV5E5HEB3fnd+tXIZsepxyTGLZwb9dGFsOp6mdAFZTXTA6DpkUeNxUWwIk5HMhxJqIbKiFIJfqg0Y29ufL/2iIRer0aZ+A9hSATO2BhcBY/KaM+mG/a2neAbtXkaaqiLSpNkHmKWTCMSunNxMcJeRPE+F0kOmZo5SiQwS4JAhjCmgYUECEt68t3KthGfoOgAx14iP7yc4LtI6ocf1h0sS4CpMo7PrsSD68VGPGmgdhaRxy3D6UjQIyNZKKgppzne6w3MWxlEyzXsE1ElYSEwu6s6DkcV7vg/qN1MUsupnBeKmQmeHDXrdiTDpG3mbOuHctPUrd7RyAo3NWTikmMdlkBBGmLS/12SE+pWUkZHCFK4XPJar7Tzmz4sN29380foEbd6AoGhVck21kmUb19Hcx2TBJrnEMVSSCp0NJLuHpjAXW9NBMObBqG9gPrTdoKzc3lvGox8YB+HIwmiFXv+xo/CYgDt3AhfbTfopZAG4Vh1GQuJ8gzjCFkbuJ2zTC8f7cmAblu4S4noZYMkeWyh+rBidILIM2yVnET3liCSSwUxjHgUhSEyRGuCpDZIvv9WfC5GAHIhPB+8KJfU9zZxx1uEB+BoCXhMJ8DXJ2+wlHWmbEkXuiHk7vBgGW1Pi313ncy+RjQiiOrk0AItDNlO0kzSZvbuFLlxflh/hZ3eqtfDpAh5ErxiqA+8H2pKduSFRJukoOv8kCMtd4gqyePwN4VJESbV4VX82/XwMsWxJ8z7Ik/CJABP3lqPUpmSPXeCG+C8D+m77foXcje4Fu0OgjiGkjraEiRQ05NFXjsnzy2FQhmlXuw7mAPhqFLMGi+EfM/nMDGAhQWk69zxf9IqxIHNYbs+baMSjjKwdUvCcG3MOcXnkc1PkFSh6hfIYyk+Twhh1xdxXd9Jw7XR+IYmuLj3HJK1/Z0dh0TSJm87wTyC1VusK+MGGzNOcBKLEJAHE3xClK4CN3+GpFdYbw74hMQ8mX855s8o8HhpYQIh5CmyRn9cew4VoXLOMqN2appEsHuLZaEp0M4PHMoUACEcIaxUtIx7G6nNA9UH2B5o9Y8p8ngAQ6cabnBz/fnvJAIBMI8FidI4Ig+6b0iImjlmymbywUBCjiybYIWn2nYRLmRFbl3d5Au5ED83QpOfq5tKIL2p7xDGZpKBQVIqo2DkW1ASjp1AahLuyKc1cc/9vpA1P8JUA8IsVFZwA8dzXIH9v7cEGXXWRJSyHScpDi1RPluLERNMAUQn7kkiCdqvkjjw/pj0r0ZMWLFgK6FgP1VgVARVdZIIBHh55oTd8DBBRUQteZg3EBKm0RMJyqW2673WrIgD6kOUflmTUTMIeRHKqlHbzpWy5pWqG6VEPmIvER0swnjLSIkD74eoA5P+FQIzYWzX/1ZUD6+/VBr9Y5gAhUCQqFdCIIQ2iwK3Ho6aOBDhFHPGNBYnoASE8Mt2/Fu4G5QjJo1t8CHhTnBObsF6hZtTvgmpxK1uRCSNRhzFrOnUzOJQDug9xI3f3WhEsrOBrgf6kGZ3kUPPUdM7Q14Y/4GxJRAtvq0frJNy1FFGIITKYDlrZJCTG2UIPMlTF6prvGfizI0RaiJXYjvBPTCAgaRcooa/xna8BzkSZ05wIkHNGiuQpxDnxhxyJIWs9dRoA7Lx/5jsj5mjhZyVVe3yTsqP9LblkCMRR5ynMPpytOn6Ygre0yLa+Hfx2ll9kqWYIpBFZ27lU1Atw+92FNJYB/8bjIYAcYSx+cR7sAQADxyMsBRR6zJisrWMih4GktF7aRICJF+hEEw7lSk4a9qudwosBDDHVly0mZnuymRIi2PwGFHiql5MT5xQtjs4VHwl2zgDr/g7/h0dkCzBACEIc6IJomeFD/aOO3n7itTntq8cNxskAyUpSsMswZjWM7APHmAgA+wx7LWM66VzCzYdNErjHQjkC/ShZMkCpPCCTCaiV6rIjdPgWIcIoz8zaTKiZcWRhoaGBhTMBAJZxWqhoaGhgSP3aASCPB9rPWhoaCC/BkGjqveGJ+sYmxetoaExo2vgvdz152LyIMqoKsr46AgnakZOYBoaGskHOnI5qiuut3nXm9h/AAnRZk8ngPYkwYl+DQ0NlGXhDTPapEF8TWQ/06mYiGwI+Y+fMg0NjeQCvh1EvdBmyAJYg4BlRSYfvECcy/vPTENDI7nIzd94GFV4iKbORqb1Q6QIBzyiyHHDrK7qHkxDQyPZyLj+jVKtDiE6sjHdTsZxz3Z8l7UGNDR01QUlVclBZy9iOBSiipF6tuDLizEk6OiW6JsZwGdirQENDQ1I0cP6eogb/lHb8Rfbru8gckBEwx1vebjGOyx/DmstaGhogADiNq1CjgQiM9aK0NDQylNvaVzkge5eDLpiGhoaSQVhan4+uL3p5IG5z90bD2etDw0NHYkgl9FEAnmJYNLdStDQ0MDYDjiJqT22BHcqc77T0NCI3zCIO8F1UTu0Q40Ksys29qGhoQGHMe4EV6M028gkQ54P+uBaRpjwP9agoaEBb1PYYgoiuYY7/uMjDWbP5L0tUJ/arn8bRGcwZmYaGhoab59kh9Jr2vWP5k6lA/6o3PWO4q7/fq3naDVoaGhoaGhoaPwP1Ihp8Bm98aYAAAAASUVORK5CYII=",1,"google-logo"],["href","https://mol.org/","target","_self","rel","home","title","Home",1,"mol-logo"],["alt","Map of Life","src","https://mol.org/static/img/logo.png"],[1,"advanced-buttons-wrapper","noselect"],["mapPopup",""],[1,"advanced-button",3,"click"],["class","advanced-button",3,"click",4,"ngIf"],[1,"tooltip","init-draw-tooltip","noselect"],["initDrawTooltip",""],[1,"tooltip-content"],[1,"tooltip","edit-tooltip","noselect"],["drawTooltip",""],["class","tooltip-content",4,"ngIf"],[1,"tooltip","draw-tooltip","noselect"],["modifyTooltip",""],["copyTooltip",""],[1,"tooltip","copy-tooltip","noselect"],["copyIntersectingTooltip",""]],template:function(t,e){1&t&&(f.Vb(0,"div",0),f.ic(1,"async"),f.Ub(),f.Vb(2,"div",1),f.Vb(3,"a",2),f.Qb(4,"img",3),f.Ub(),f.Vb(5,"a",4),f.Qb(6,"img",5),f.Ub(),f.Ub(),f.Vb(7,"div",6,7),f.Vb(9,"div",8),f.dc("click",(function(){return e.dissolvePolygons()})),f.Ic(10," Dissolve selected shapes "),f.Ub(),f.Gc(11,Vr,2,0,"div",9),f.Ub(),f.Vb(12,"div",10,11),f.Vb(14,"div",12),f.Ic(15," Click an origin point to start drawing. "),f.Qb(16,"br"),f.Ic(17,"Use `Shift` key to use freehand "),f.Ub(),f.Ub(),f.Vb(18,"div",13,14),f.Gc(20,Br,2,0,"div",15),f.Gc(21,zr,2,0,"div",15),f.Ub(),f.Vb(22,"div",16,17),f.Vb(24,"div",12),f.Ic(25," To modify shape click on a vertex, to de-select click on the shape again "),f.Ub(),f.Ub(),f.Vb(26,"div",6,18),f.Vb(28,"div",8),f.dc("click",(function(){return e.addFeatureFromExistingDataset()})),f.Ic(29," Copy "),f.Ub(),f.Ub(),f.Vb(30,"div",19,20),f.Vb(32,"div",12),f.Ic(33,"Too many intersecting features"),f.Ub(),f.Ub()),2&t&&(f.Eb(f.pc(9,Yr)),f.Gb("drawing",f.jc(1,7,e.isDrawingMode)),f.Cb(11),f.nc("ngIf",2===e.selectedFeatures.length),f.Cb(9),f.nc("ngIf",e.isEditPointCount),f.Cb(1),f.nc("ngIf",!e.isEditPointCount))},directives:[Rr.t],pipes:[Rr.b],styles:['.ol-box{box-sizing:border-box;border-radius:2px;border:2px solid #00f}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:rgba(0,60,136,.3);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid #eee;color:#eee;font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-step-marker{width:1px;height:15px;background-color:#000;float:right;z-Index:10}.ol-scale-step-text{bottom:-5px;font-size:12px;z-Index:11}.ol-scale-step-text,.ol-scale-text{position:absolute;color:#000;text-shadow:-2px 0 #fff,0 2px #fff,2px 0 #fff,0 -2px #fff}.ol-scale-text{font-size:14px;text-align:center;bottom:25px}.ol-scale-singlebar{position:relative;height:10px;z-Index:9;box-sizing:border-box;border:1px solid #000}.ol-unsupported{display:none}.ol-unselectable,.ol-viewport{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:grab}.ol-control{position:absolute;background-color:hsla(0,0%,100%,.4);border-radius:4px;padding:2px}.ol-control:hover{background-color:hsla(0,0%,100%,.6)}.ol-zoom{top:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:#fff;font-size:1.14em;font-weight:700;text-decoration:none;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:rgba(0,60,136,.5);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;font-size:1.2em;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:focus,.ol-control button:hover{text-decoration:none;background-color:rgba(0,60,136,.7)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em)}.ol-attribution ul{margin:0;padding:0 .5em;color:#000;text-shadow:0 0 2px #fff}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button,.ol-attribution ul{display:inline-block}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:hsla(0,0%,100%,.8)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:inline-block}.ol-overviewmap .ol-overviewmap-map{border:1px solid #7b98bc;height:150px;margin:2px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:1px;left:2px;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:hsla(0,0%,100%,.8)}.ol-overviewmap-box{border:2px dotted rgba(0,60,136,.7)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.layer-switcher{top:3.5em;right:.5em;text-align:left}.layer-switcher .panel{margin:0;border:4px solid #eee;border-radius:4px;background-color:#fff;display:none;max-height:inherit;height:100%;box-sizing:border-box;overflow-y:auto}.layer-switcher button{float:right;z-index:1;width:38px;height:38px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAACE1BMVEX///8A//8AgICA//8AVVVAQID///8rVVVJtttgv98nTmJ2xNgkW1ttyNsmWWZmzNZYxM4gWGgeU2JmzNNr0N1Rwc0eU2VXxdEhV2JqytQeVmMhVmNoydUfVGUgVGQfVGQfVmVqy9hqy9dWw9AfVWRpydVry9YhVmMgVGNUw9BrytchVWRexdGw294gVWQgVmUhVWPd4N6HoaZsy9cfVmQgVGRrytZsy9cgVWQgVWMgVWRsy9YfVWNsy9YgVWVty9YgVWVry9UgVWRsy9Zsy9UfVWRsy9YgVWVty9YgVWRty9Vsy9aM09sgVWRTws/AzM0gVWRtzNYgVWRuy9Zsy9cgVWRGcHxty9bb5ORbxdEgVWRty9bn6OZTws9mydRfxtLX3Nva5eRix9NFcXxOd4JPeINQeIMiVmVUws9Vws9Vw9BXw9BYxNBaxNBbxNBcxdJexdElWWgmWmhjyNRlx9IqXGtoipNpytVqytVryNNrytZsjZUuX210k5t1y9R2zNR3y9V4lp57zth9zdaAnKOGoaeK0NiNpquV09mesrag1tuitbmj1tuj19uktrqr2d2svcCu2d2xwMO63N+7x8nA3uDC3uDFz9DK4eHL4eLN4eIyYnDX5OM5Z3Tb397e4uDf4uHf5uXi5ePi5+Xj5+Xk5+Xm5+Xm6OY6aHXQ19fT4+NfhI1Ww89gx9Nhx9Nsy9ZWw9Dpj2abAAAAWnRSTlMAAQICAwQEBgcIDQ0ODhQZGiAiIyYpKywvNTs+QklPUlNUWWJjaGt0dnd+hIWFh4mNjZCSm6CpsbW2t7nDzNDT1dje5efr7PHy9PT29/j4+Pn5+vr8/f39/f6DPtKwAAABTklEQVR4Xr3QVWPbMBSAUTVFZmZmhhSXMjNvkhwqMzMzMzPDeD+xASvObKePPa+ffHVl8PlsnE0+qPpBuQjVJjno6pZpSKXYl7/bZyFaQxhf98hHDKEppwdWIW1frFnrxSOWHFfWesSEWC6R/P4zOFrix3TzDFLlXRTR8c0fEEJ1/itpo7SVO9Jdr1DVxZ0USyjZsEY5vZfiiAC0UoTGOrm9PZLuRl8X+Dq1HQtoFbJZbv61i+Poblh/97TC7n0neCcK0ETNUrz1/xPHf+DNAW9Ac6t8O8WH3Vp98f5lCaYKAOFZMLyHL4Y0fe319idMNgMMp+zWVSybUed/+/h7I4wRAG1W6XDy4XmjR9HnzvDRZXUAYDFOhC1S/Hh+fIXxen+eO+AKqbs+wAo30zDTDvDxKoJN88sjUzDFAvBzEUGFsnADoIvAJzoh2BZ8sner+Ke/vwECuQAAAABJRU5ErkJggg==");background-repeat:no-repeat;background-position:2px;background-color:#fff;color:#000;border:none}.layer-switcher button:focus,.layer-switcher button:hover{background-color:#fff}.layer-switcher.shown{overflow-y:hidden}.layer-switcher.shown.ol-control{background-color:transparent}.layer-switcher.shown.ol-control:hover{background-color:transparent}.layer-switcher.shown .panel{display:block}.layer-switcher.shown button{display:none}.layer-switcher.shown.layer-switcher-activation-mode-click>button{display:block;background-image:unset;right:2px;position:absolute;background-color:#eee;margin:0 1px}.layer-switcher.shown button:focus,.layer-switcher.shown button:hover{background-color:#fafafa}.layer-switcher ul{list-style:none;margin:1.6em .4em;padding-left:0}.layer-switcher ul ul{padding-left:1.2em;margin:.1em 0 0}.layer-switcher li.group+li.group{margin-top:.4em}.layer-switcher li.group>label{font-weight:700}.layer-switcher.layer-switcher-group-select-style-none li.group>label{padding-left:1.2em}.layer-switcher li{position:relative;margin-top:.3em}.layer-switcher li input{position:absolute;left:1.2em;height:1em;width:1em;font-size:1em}.layer-switcher li label{padding-left:2.7em;padding-right:1.2em;display:inline-block;margin-top:1px}.layer-switcher label.disabled{opacity:.4}.layer-switcher input{margin:0}.layer-switcher.touch ::-webkit-scrollbar{width:4px}.layer-switcher.touch ::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:10px}.layer-switcher.touch ::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.5)}li.layer-switcher-base-group>label{padding-left:1.2em}.layer-switcher .group button{position:absolute;left:0;display:inline-block;vertical-align:top;float:none;font-size:1em;width:1em;height:1em;margin:0;background-position:center 2px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAW0lEQVR4nGNgGAWMyBwXFxcGBgaGeii3EU0tXHzPnj1wQRYsihqQ+I0ExDEMQAYNONgoAN0AmMkNaDSyQSheY8JiaCMOGzE04zIAmyFYNTMw4A+DRhzsUUBtAADw4BCeIZkGdwAAAABJRU5ErkJggg==");transition:transform .2s ease-in-out}.layer-switcher .group.layer-switcher-close button{transform:rotate(-90deg);-webkit-transform:rotate(-90deg)}.layer-switcher .group.layer-switcher-fold.layer-switcher-close>ul{overflow:hidden;height:0}.layer-switcher.shown.layer-switcher-activation-mode-click{padding-left:34px}.layer-switcher.shown.layer-switcher-activation-mode-click>button{left:0;border-right:0}:root{--topLine:3em}@media screen and (max-device-width:480px){:root{--topLine:0.1em}.layer-switcher>button{font-size:15px!important}}.layer-switcher{position:absolute;left:.5em;top:calc(var(--topLine) + 7em);border-radius:3px;background-color:transparent;width:60px}.layer-switcher.shown{width:unset}.layer-switcher button{width:60px;padding:2px;border-radius:3px;border:1px solid #000;line-height:25px;background-image:unset;font-weight:unset}.layer-switcher .panel{max-width:250px}.ol-scale-line{background-color:#fff;left:.9em}.ol-scale-line-inner{border:1px solid #000;border-top:none;background-color:#fff;color:#000}.ol-control button{border:1px solid #bbb;background-color:#fff;color:#000}.ol-control button:focus,.ol-control button:hover{background-color:#eee;color:#000}.ol-zoom{z-index:1000;top:calc(var(--topLine) + 0px);bottom:unset;left:.5em}.map-parent{position:relative}.ol-full-screen{left:.5em;top:calc(var(--topLine) + 4.5em);max-width:1.7em}#map{width:100%;height:100%;transition:0;position:relative}.drawing{cursor:url(https://mapoflife.github.io/experts-next/feather.f9ad4b07dac825fef883.svg) 2 20,auto}.ol-attribution{bottom:35px}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.google-logo{max-height:25px;z-index:10000}:host{position:relative}.map-logos{position:absolute;display:inline;bottom:5px;margin:0 auto;left:calc(50% - 50px);z-index:1}.map-logos a::-moz-selection{background-color:transparent}.map-logos a::selection,.map-logos a:active,.map-logos a:hover,.map-logos a:visited{background-color:transparent}.map-logos img{height:40px}.map-logos .mol-logo{padding-left:20px}.map-logos .mol-logo img{height:28px}#hatch{background-image:url(/libs/ui/src/assets/bw20.png)}.advanced-buttons-wrapper{margin-top:30px}.advanced-buttons-wrapper .advanced-button{width:195px;height:40px;background-color:#fff;box-shadow:0 2px 4px 0 #ddd;color:#000;text-align:center;line-height:40px;margin-bottom:6px;cursor:pointer}.tooltip{background-color:#000}.tooltip.init-draw-tooltip{display:none;position:absolute}.tooltip .tooltip-content{margin-left:8px;margin-right:8px;font-size:12px;color:#fff}'],encapsulation:2}),qr)},UV1p:function(t,e,n){"use strict";var i,r,o,s,a=n("V+Bs")()&&"symbol"==typeof Symbol.toStringTag;if(a){i=Function.call.bind(Object.prototype.hasOwnProperty),r=Function.call.bind(RegExp.prototype.exec),o={};var u=function(){throw o};s={toString:u,valueOf:u},"symbol"==typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=u)}var l=Object.prototype.toString,c=Object.getOwnPropertyDescriptor;t.exports=a?function(t){if(!t||"object"!=typeof t)return!1;var e=c(t,"lastIndex");if(!e||!i(e,"value"))return!1;try{r(t,s)}catch(n){return n===o}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===l.call(t)}},"V+Bs":function(t,e,n){"use strict";var i=global.Symbol,r=n("48gJ");t.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&r()}},WRQj:function(t,e,n){var i=n("06eB"),r=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:a};function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function s(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function a(t,e){return i(t,e,{strict:!0})}r.prototype.compare=function(t,e){if(t.type!==e.type||!s(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=o(t),r=o(e);return i.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),r)}}return!1},r.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},r.prototype.compareLine=function(t,e,n,i){if(!s(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var a=this.compareCoord(r[n],o[n]);return this.direction||a?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},r.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},r.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},r.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every((function(t){return this.some((function(e){return r.compareLine(t,e,1,!0)}))}),i)}return!1},r.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},r.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},r.prototype.removePseudo=function(t){return t},t.exports=r},WocS:function(t,e){t.exports=function(t,e){for(var n=t[0],i=t[1],r=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],l=e[s][1];u>i!=l>i&&n<(e[s][0]-a)*(i-u)/(l-u)+a&&(r=!r)}return r}},"YZE+":function(t,e,n){"use strict";var i=Object,r=TypeError;t.exports=function(){if(null!=this&&this!==i(this))throw new r("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t}},Z4rD:function(t,e,n){"use strict";var i=n("ARQ1");t.exports=function(){return"function"==typeof Object.is?Object.is:i}},ZdQP:function(t,e,n){"use strict";var i=n("5Oj5"),r=n("ujgL"),o=n("yAfB"),s=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Object(o.d)(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new i.a({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:r.a.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Object(o.d)(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();e.a=s},Zhvk:function(t,e,n){"use strict";var i=n("MicU"),r=n("GM35"),o=n("WocS"),s=n("QrlV").orient2d;function a(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>i[0]&&(i=a),a[1]<n[1]&&(n=a),a[1]>r[1]&&(r=a)}var u=[e,n,i,r],l=u.slice();for(s=0;s<t.length;s++)o(t[s],u)||l.push(t[s]);return function(t){t.sort(m);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&p(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var i=[],r=t.length-1;r>=0;r--){for(;i.length>=2&&p(i[i.length-2],i[i.length-1],t[r])<=0;)i.pop();i.push(t[r])}return i.pop(),e.pop(),e.concat(i)}(l)}(t),s=new i(16);s.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},s.compareMinX=function(t,e){return t[0]-e[0]},s.compareMinY=function(t,e){return t[1]-e[1]},s.load(t);for(var a,l=[],c=0;c<r.length;c++){var h=r[c];s.remove(h),a=g(h,a),l.push(a)}var f=new i(16);for(c=0;c<l.length;c++)f.insert(d(l[c]));for(var _=e*e,v=n*n;l.length;){var b=l.shift(),x=b.p,E=b.next.p,I=y(x,E);if(!(I<v)){var w=I/_;(h=u(s,b.prev.p,x,E,b.next.next.p,w,f))&&Math.min(y(h,x),y(h,E))<=w&&(l.push(b),l.push(g(h,b)),s.remove(h),f.remove(b),f.insert(d(b)),f.insert(d(b.next)))}}b=a;var N=[];do{N.push(b.p),b=b.next}while(b!==a);return N.push(b.p),N}function u(t,e,n,i,o,s,a){for(var u=new r([],l),h=t.data;h;){for(var p=0;p<h.children.length;p++){var d=h.children[p],g=h.leaf?_(d,n,i):c(n,i,d);g>s||u.push({node:d,dist:g})}for(;u.length&&!u.peek().node.children;){var y=u.pop(),v=y.node,m=_(v,e,n),b=_(v,i,o);if(y.dist<m&&y.dist<b&&f(n,v,a)&&f(i,v,a))return v}(h=u.pop())&&(h=h.node)}return null}function l(t,e){return t.dist-e.dist}function c(t,e,n){if(h(t,n)||h(e,n))return 0;var i=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=v(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=v(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(i,r,o,s)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function f(t,e,n){for(var i,r,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:a,minY:u,maxX:l,maxY:c}),f=0;f<h.length;f++)if(r=h[f].next.p,o=t,(i=h[f].p)!==(s=e)&&r!==o&&p(i,r,o)>0!=p(i,r,s)>0&&p(o,s,i)>0!=p(o,s,r)>0)return!1;return!0}function p(t,e,n){return s(t[0],t[1],e[0],e[1],n[0],n[1])}function d(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function g(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function y(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function _(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return(o=t[0]-i)*o+(s=t[1]-r)*s}function v(t,e,n,i,r,o,s,a){var u,l,c,h,f=n-t,p=i-e,d=s-r,g=a-o,y=t-r,_=e-o,v=f*f+p*p,m=f*d+p*g,b=d*d+g*g,x=f*y+p*_,E=d*y+g*_,I=v*b-m*m,w=I,N=I;0===I?(l=0,w=1,h=E,N=b):(h=v*E-m*x,(l=m*E-b*x)<0?(l=0,h=E,N=b):l>w&&(l=w,h=E+m,N=b)),h<0?(h=0,-x<0?l=0:-x>v?l=w:(l=-x,w=v)):h>N&&(h=N,-x+m<0?l=0:-x+m>v?l=w:(l=-x+m,w=v));var C=(1-(c=0===h?0:h/N))*r+c*s-((1-(u=0===l?0:l/w))*t+u*n),O=(1-c)*o+c*a-((1-u)*e+u*i);return C*C+O*O}function m(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}r.default&&(r=r.default),t.exports=a,t.exports.default=a},aYSr:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},aiQ1:function(t,e,n){var i=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}})),u=r[n];n<o;u=r[++n])d(u)||!m(u)?a+=" "+u:a+=" "+s(u);return a},e.deprecate=function(t,n){if(_(global.process))return function(){return e.deprecate(t,n).apply(this,arguments)};if(!0===process.noDeprecation)return t;var i=!1;return function(){if(!i){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),i=!0}return t.apply(this,arguments)}};var r,o={};function s(t,n){var i={seen:[],stylize:u};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),p(n)?i.showHidden=n:n&&e._extend(i,n),_(i.showHidden)&&(i.showHidden=!1),_(i.depth)&&(i.depth=2),_(i.colors)&&(i.colors=!1),_(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=a),l(i,t,i.depth)}function a(t,e){var n=s.styles[e];return n?"\x1b["+s.colors[n][0]+"m"+t+"\x1b["+s.colors[n][1]+"m":t}function u(t,e){return t}function l(t,n,i){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return y(r)||(r=l(t,r,i)),r}var o=function(t,e){if(_(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):p(e)?t.stylize(""+e,"boolean"):d(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),x(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(n);if(0===s.length){if(E(n))return t.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(v(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return t.stylize(Date.prototype.toString.call(n),"date");if(x(n))return c(n)}var u,m="",I=!1,w=["{","}"];return f(n)&&(I=!0,w=["[","]"]),E(n)&&(m=" [Function"+(n.name?": "+n.name:"")+"]"),v(n)&&(m=" "+RegExp.prototype.toString.call(n)),b(n)&&(m=" "+Date.prototype.toUTCString.call(n)),x(n)&&(m=" "+c(n)),0!==s.length||I&&0!=n.length?i<0?v(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=I?function(t,e,n,i,r){for(var o=[],s=0,a=e.length;s<a;++s)O(e,String(s))?o.push(h(t,e,n,i,String(s),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(h(t,e,n,i,r,!0))})),o}(t,n,i,a,s):s.map((function(e){return h(t,n,i,a,e,I)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(u,m,w)):w[0]+m+w[1]}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,i,r,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?a=t.stylize(u.set?"[Getter/Setter]":"[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),O(i,r)||(s="["+r+"]"),a||(t.seen.indexOf(u.value)<0?(a=d(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),_(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function f(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function d(t){return null===t}function g(t){return"number"==typeof t}function y(t){return"string"==typeof t}function _(t){return void 0===t}function v(t){return m(t)&&"[object RegExp]"===I(t)}function m(t){return"object"==typeof t&&null!==t}function b(t){return m(t)&&"[object Date]"===I(t)}function x(t){return m(t)&&("[object Error]"===I(t)||t instanceof Error)}function E(t){return"function"==typeof t}function I(t){return Object.prototype.toString.call(t)}function w(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(_(r)&&(r=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(r)){var n=process.pid;o[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else o[t]=function(){};return o[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=p,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=_,e.isRegExp=v,e.isObject=m,e.isDate=b,e.isError=x,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n("FGo3");var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var t=new Date,e=[w(t.getHours()),w(t.getMinutes()),w(t.getSeconds())].join(":");return[t.getDate(),N[t.getMonth()],e].join(" ")}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",C(),e.format.apply(e,arguments))},e.inherits=n("5EX2"),e._extend=function(t,e){if(!e||!m(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}},auRg:function(t,e,n){"use strict";var i,r,o=n("DiD3"),s=n("BatM"),a=n("vog+"),u=n("jL0/"),l=n("Trb+"),c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(e,n,i){var r=t.call(this)||this;return void 0!==i&&void 0===n?r.setFlatCoordinates(i,e):r.setCenterAndRadius(e,n||0,i),r}return c(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){var r=this.flatCoordinates,o=t-r[0],s=e-r[1],a=o*o+s*s;if(a<i){if(0===a)for(var u=0;u<this.stride;++u)n[u]=r[u];else{var l=this.getRadius()/Math.sqrt(a);for(n[0]=r[0]+l*o,n[1]=r[1]+l*s,u=2;u<this.stride;++u)n[u]=r[u]}return n.length=this.stride,a}return i},e.prototype.containsXY=function(t,e){var n=this.flatCoordinates,i=t-n[0],r=e-n[1];return i*i+r*r<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,n=e[this.stride]-e[0];return Object(a.k)(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return o.a.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(a.F)(t,e)){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||t[1]<=n[1]&&t[3]>=n[1]||Object(a.t)(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+n;for(var r=1;r<e;++r)i[e+r]=t[r];this.setFlatCoordinates(this.layout,i),this.changed()},e.prototype.setCenterAndRadius=function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var i=this.flatCoordinates,r=Object(u.a)(i,0,t,this.stride);i[r++]=i[0]+e;for(var o=1,s=this.stride;o<s;++o)i[r++]=i[o];i.length=r,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var n=this.getCenter(),i=this.getStride();this.setCenter(Object(l.a)(n,0,n.length,i,t,e,n)),this.changed()},e.prototype.translate=function(t,e){var n=this.getCenter(),i=this.getStride();this.setCenter(Object(l.d)(n,0,n.length,i,t,e,n)),this.changed()},e}(s.a),f=n("70ZC"),p=n("j/Z9"),d=n("fdeV"),g=n("qBMe"),y=n("5urs"),_=n("skP8"),v=n("mm/l"),m=n("vxo4"),b=n("Qs0z"),x=n("4KU7"),E=n("oVSo"),I=n("H40N"),w=n("hWN6"),N=n("mTvk"),C=n("y1k7"),O=n("h7by"),P=n("7Gkf"),S=n("m+aV"),k=n("A5l+"),T=n("hatQ"),L=n("61KW"),M=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),R=function(t){function e(e,n){var i=t.call(this,e)||this;return i.feature=n,i}return M(e,t),e}(f.a),A=function(t){function e(e){var n,i,r=this,s=e;s.stopDown||(s.stopDown=O.a),(r=t.call(this,s)||this).shouldHandle_=!1,r.downPx_=null,r.freehand_=!1,r.source_=e.source?e.source:null,r.features_=e.features?e.features:null,r.snapTolerance_=e.snapTolerance?e.snapTolerance:12,r.type_=e.type,r.mode_=((n=r.type_)===o.a.POINT||n===o.a.MULTI_POINT?i="Point":n===o.a.LINE_STRING||n===o.a.MULTI_LINE_STRING?i="LineString":n===o.a.POLYGON||n===o.a.MULTI_POLYGON?i="Polygon":n===o.a.CIRCLE&&(i="Circle"),i),r.stopClick_=!!e.stopClick,r.minPoints_=e.minPoints?e.minPoints:"Polygon"===r.mode_?3:2,r.maxPoints_="Circle"===r.mode_?2:e.maxPoints?e.maxPoints:1/0,r.finishCondition_=e.finishCondition?e.finishCondition:O.b;var a,u=e.geometryFunction;if(!u){var l,c=r.mode_;"Circle"===c?u=function(t,e,n){var i=e||new h([NaN,NaN]),r=Object(k.e)(t[0],n),o=Object(L.h)(r,Object(k.e)(t[t.length-1],n));i.setCenterAndRadius(r,Math.sqrt(o));var s=Object(k.k)();return s&&i.transform(n,s),i}:("Point"===c?l=E.a:"LineString"===c?l=y.a:"Polygon"===c&&(l=w.a),u=function(t,e,n){return e?e.setCoordinates("Polygon"===c?t[0].length?[t[0].concat([t[0][0]])]:[]:t):e=new l(t),e})}return r.geometryFunction_=u,r.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,r.finishCoordinate_=null,r.sketchFeature_=null,r.sketchPoint_=null,r.sketchCoords_=null,r.sketchLine_=null,r.sketchLineCoords_=null,r.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,r.overlay_=new N.a({source:new C.a({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(a=Object(S.b)(),function(t,e){return a[t.getGeometry().getType()]}),updateWhileInteracting:!0}),r.geometryName_=e.geometryName,r.condition_=e.condition?e.condition:P.h,r.freehandCondition_=e.freehand?P.d:e.freehandCondition?e.freehandCondition:P.j,r.addEventListener(Object(T.b)(g.a.ACTIVE),r.updateState_),r}return M(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===p.a.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(e);var n=e.type===v.a.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===v.a.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===v.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===v.a.POINTERDOWN?i=!1:n&&this.getPointerCount()<2?(i=e.type===v.a.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===v.a.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===v.a.DBLCLICK&&(i=!1),t.prototype.handleEvent.call(this,e)&&i},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((function(){this.handlePointerMove_(new _.a(v.a.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}).bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;if(0===this.getPointerCount())if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){switch(!0){case!this.finishCoordinate_:if(this.startDrawing_(t.coordinate),"Point"!==this.mode_)break;case this.freehand_||this.atFinish_(t.pixel)&&this.finishCondition_(t):this.finishDrawing();break;case!this.freehand_:this.addToDrawing_(t.coordinate)}e=!1}else this.freehand_&&this.abortDrawing();return!e&&this.stopClick_&&t.originalEvent.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,n=t.pixel,i=e[0]-n[0],r=e[1]-n[1],o=i*i+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t)},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var n=!1,i=[this.finishCoordinate_],r=this.mode_;if("Point"===r)e=!0;else if("Circle"===r)e=2===this.sketchCoords_.length;else if("LineString"===r)n=this.sketchCoords_.length>this.minPoints_;else if("Polygon"===r){var o=this.sketchCoords_;n=o[0].length>this.minPoints_,i=[o[0][0],o[0][o[0].length-2]]}if(n)for(var s=this.getMap(),a=0,u=i.length;a<u;a++){var l=i[a],c=s.getPixelFromCoordinate(l),h=t[0]-c[0],f=t[1]-c[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+f*f)<=p){this.finishCoordinate_=l;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new d.a(new E.a(e)),this.updateSketchFeatures_())},e.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new d.a);var e=t.getLinearRing(0),n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),n.changed()):(n=new y.a(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(n))},e.prototype.startDrawing_=function(t){var e=this.getMap().getView().getProjection();this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new d.a(new y.a(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new d.a,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new R("drawstart",this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,n,i=this.getMap(),r=this.sketchFeature_.getGeometry(),s=i.getView().getProjection();"Point"===this.mode_?n=this.sketchCoords_:"Polygon"===this.mode_?(n=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(i.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):n=(e=this.sketchCoords_)[e.length-1],n[0]=t[0],n[1]=t[1],this.geometryFunction_(this.sketchCoords_,r,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),r.getType()===o.a.POLYGON&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,n,i=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),o=this.mode_;"LineString"===o||"Circle"===o?(this.finishCoordinate_=t.slice(),(n=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(t.slice()),this.geometryFunction_(n,i,r)):"Polygon"===o&&((n=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(t.slice()),e&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,i,r)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i=this.mode_;if("LineString"===i||"Circle"===i){if((t=this.sketchCoords_).splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();var r=this.finishCoordinate_.slice();t[t.length-1]=r,this.sketchPoint_.setGeometry(new E.a(r))}this.geometryFunction_(t,e,n),e.getType()===o.a.POLYGON&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if("Polygon"===i){(t=this.sketchCoords_[0]).splice(-2,1);var s=this.sketchLine_.getGeometry();t.length>=2&&(r=t[t.length-2].slice(),t[t.length-1]=r,this.sketchPoint_.setGeometry(new E.a(r))),s.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,n)}1===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,n=t.getGeometry(),i=this.getMap().getView().getProjection();"LineString"===this.mode_?(e.pop(),this.geometryFunction_(e,n,i)):"Polygon"===this.mode_&&(e[0].pop(),this.geometryFunction_(e,n,i),e=n.getCoordinates()),this.type_===o.a.MULTI_POINT?t.setGeometry(new b.a([e])):this.type_===o.a.MULTI_LINE_STRING?t.setGeometry(new m.a([e])):this.type_===o.a.MULTI_POLYGON&&t.setGeometry(new x.a([e])),this.dispatchEvent(new R("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new R("drawabort",t))},e.prototype.appendCoordinates=function(t){var e,n=this.mode_,i=!this.sketchFeature_;if(i&&this.startDrawing_(t[0]),"LineString"===n||"Circle"===n)e=this.sketchCoords_;else{if("Polygon"!==n)return;e=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&e.shift(),e.pop();for(var r=0;r<t.length;r++)this.addToDrawing_(t[r]);var o=t[t.length-1];this.addToDrawing_(o),this.modifyDrawing_(o)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new d.a(new E.a(n)),this.updateSketchFeatures_(),this.dispatchEvent(new R("drawstart",this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(I.b);e.a=A},cTt9:function(t,e,n){"use strict";var i=Object.prototype.toString;t.exports=function(t){var e=i.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===i.call(t.callee)),n}},eYkv:function(t,e,n){"use strict";var i=n("zT+L"),r=n("vY6e"),o=n("ARQ1"),s=n("Z4rD"),a=n("Mi3R"),u=r(s(),Object);i(u,{getPolyfill:s,implementation:o,shim:a}),t.exports=u},ey2t:function(t,e,n){"use strict";var i=Array.prototype.slice,r=n("cTt9"),o=Object.keys,s=o?function(t){return o(t)}:n("F3Ih"),a=Object.keys;s.shim=function(){return Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return r(t)?a(i.call(t)):a(t)}):Object.keys=s,Object.keys||s},t.exports=s},fJCm:function(t,e,n){"use strict";function i(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function r(t,e,n){return void 0===n&&(n={}),i({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var r=0,o=t;r<o.length;r++){var s=o[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:t},e,n)}function s(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:t},e,n)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,n){return void 0===n&&(n={}),i({type:"MultiLineString",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),i({type:"MultiPoint",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),i({type:"MultiPolygon",coordinates:t},e,n)}function h(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t*i}function f(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t/i}function p(t){return t%(2*Math.PI)*180/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=i,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return s(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return r(t,e)})),n)},e.polygon=o,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return o(t,e)})),n)},e.lineString=s,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return s(t,e)})),n)},e.featureCollection=a,e.multiLineString=u,e.multiPoint=l,e.multiPolygon=c,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),i({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=h,e.lengthToRadians=f,e.lengthToDegrees=function(t,e){return p(f(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return h(f(t,e),n)},e.convertArea=function(t,n,i){if(void 0===n&&(n="meters"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=e.areaFactors[n];if(!r)throw new Error("invalid original units");var o=e.areaFactors[i];if(!o)throw new Error("invalid final units");return t/r*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},hoKw:function(t,e,n){"use strict";var i=Date.prototype.getDay,r=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return i.call(t),!0}catch(e){return!1}}(t):"[object Date]"===r.call(t))}},i2fC:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("fJCm");e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&i.isNumber(e[0])&&i.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0,r=t.features;i<r.length;i++){var o=r[i];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},mTvk:function(t,e,n){"use strict";var i,r,o=n("KLY9"),s=n("JtbZ"),a=n("sDFk"),u=n("QZ7v"),l=n("vY6g"),c=n("zqV8"),h=n("vog+"),f=n("SbUa"),p=n("waAw"),d=n("A5l+"),g=n("lRKV"),y=n("61KW"),_=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v=function(t){function e(e){var n=t.call(this,e)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.dirty_=!1,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=Object(h.j)(),n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n}return _(e,t),e.prototype.useContainer=function(e,n,i){i<1&&(e=null),t.prototype.useContainer.call(this,e,n,i)},e.prototype.renderWorlds=function(t,e,n){var i=e.extent,r=e.viewState,o=r.center,s=r.resolution,a=r.projection,u=r.rotation,c=a.getExtent(),f=this.getLayer().getSource(),p=e.pixelRatio,d=e.viewHints,g=!(d[l.a.ANIMATING]||d[l.a.INTERACTING]),y=this.context,_=Math.round(e.size[0]*p),v=Math.round(e.size[1]*p),m=f.getWrapX()&&a.canWrapX(),b=m?Object(h.E)(c):null,x=m?Math.ceil((i[2]-c[2])/b)+1:1,E=m?Math.floor((i[0]-c[0])/b):0;do{var I=this.getRenderTransform(o,s,u,p,_,v,E*b);t.execute(y,1,I,u,g,void 0,n)}while(++E<x)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,e){var n=t.pixelRatio,i=t.layerStatesArray[t.layerIndex];Object(c.e)(this.pixelTransform,1/n,1/n),Object(c.d)(this.inversePixelTransform,this.pixelTransform);var r=Object(c.j)(this.pixelTransform);this.useContainer(e,r,i.opacity);var o=this.context,s=o.canvas,a=this.replayGroup_,u=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!u||u.isEmpty()))return!this.containerReused&&s.width>0&&(s.width=0),this.container;var l=Math.round(t.size[0]*n),f=Math.round(t.size[1]*n);s.width!=l||s.height!=f?(s.width=l,s.height=f,s.style.transform!==r&&(s.style.transform=r)):this.containerReused||o.clearRect(0,0,l,f),this.preRender(o,t);var p=t.viewState,g=p.projection,y=!1;if(i.extent&&this.clipping){var _=Object(d.f)(i.extent,g);(y=!Object(h.g)(_,t.extent)&&Object(h.F)(_,t.extent))&&this.clipUnrotated(o,t,_)}this.renderWorlds(a,t),y&&o.restore(),this.postRender(o,t);var v=i.opacity,m=this.container;return v!==parseFloat(m.style.opacity)&&(m.style.opacity=1===v?"":String(v)),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise((function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];Object(c.a)(this.pixelTransform,n);var i=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,s=this.renderedProjection_,a=this.renderedExtent_,u=this.getLayer(),l=[],p=n[0]/2,d=n[1]/2;l.push(this.getRenderTransform(i,r,o,.5,p,d,0).slice());var g=u.getSource(),y=s.getExtent();if(g.getWrapX()&&s.canWrapX()&&!Object(h.g)(y,a)){for(var _=a[0],v=Object(h.E)(y),m=0;_<y[0];)--m,l.push(this.getRenderTransform(i,r,o,.5,p,d,v*m).slice()),_+=v;for(m=0,_=a[2];_>y[2];)++m,l.push(this.getRenderTransform(i,r,o,.5,p,d,v*m).slice()),_-=v}this.hitDetectionImageData_=Object(f.a)(n,l,this.renderedFeatures_,u.getStyleFunction(),a,r,o)}e(Object(f.b)(t,this.renderedFeatures_,this.hitDetectionImageData_))}).bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){var o=this;if(this.replayGroup_){var s,a=e.viewState.resolution,u=e.viewState.rotation,l=this.getLayer(),c={},h=function(t,e,n){var o=Object(g.c)(t),s=c[o];if(s){if(!0!==s&&n<s.distanceSq){if(0===n)return c[o]=!0,r.splice(r.lastIndexOf(s),1),i(t,l,e);s.geometry=e,s.distanceSq=n}}else{if(0===n)return c[o]=!0,i(t,l,e);r.push(c[o]={feature:t,layer:l,geometry:e,distanceSq:n,callback:i})}},f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some((function(i){return s=i.forEachFeatureAtCoordinate(t,a,u,n,h,i===o.declutterExecutorGroup?e.declutterTree.all().map((function(t){return t.value})):null)})),s}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),n=e.getSource();if(!n)return!1;var i=t.viewHints[l.a.ANIMATING],r=t.viewHints[l.a.INTERACTING],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&i||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var c=t.extent,f=t.viewState,g=f.projection,_=f.resolution,v=t.pixelRatio,m=e.getRevision(),b=e.getRenderBuffer(),x=e.getRenderOrder();void 0===x&&(x=p.a);var E=f.center.slice(),I=Object(h.c)(c,b*_),w=[I.slice()],N=g.getExtent();if(n.getWrapX()&&g.canWrapX()&&!Object(h.g)(N,t.extent)){var C=Object(h.E)(N),O=Math.max(Object(h.E)(I)/2,C);I[0]=N[0]-O,I[2]=N[2]+O,Object(y.j)(E,g);var P=Object(h.K)(w[0],g);P[0]<N[0]&&P[2]<N[2]?w.push([P[0]+C,P[1],P[2]+C,P[3]]):P[0]>N[0]&&P[2]>N[2]&&w.push([P[0]-C,P[1],P[2]-C,P[3]])}if(!this.dirty_&&this.renderedResolution_==_&&this.renderedRevision_==m&&this.renderedRenderOrder_==x&&Object(h.g)(this.renderedExtent_,I))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var S,k=new s.a(Object(p.c)(_,v),I,_,v);this.getLayer().getDeclutter()&&(S=new s.a(Object(p.c)(_,v),I,_,v));var T,L=Object(d.k)();if(L){for(var M=0,R=w.length;M<R;++M)n.loadFeatures(Object(d.n)(w[M],g),_,L);T=Object(d.j)(L,g)}else for(M=0,R=w.length;M<R;++M)n.loadFeatures(w[M],_,g);var A=Object(p.b)(_,v),D=(function(t){var n,i=t.getStyleFunction()||e.getStyleFunction();if(i&&(n=i(t,_)),n){var r=this.renderFeature(t,A,n,k,T,S);this.dirty_=this.dirty_||r}}).bind(this),F=Object(d.n)(I,g),G=n.getFeaturesInExtent(F);for(x&&G.sort(x),M=0,R=G.length;M<R;++M)D(G[M]);this.renderedFeatures_=G;var j=k.finish(),U=new u.a(I,_,v,n.getOverlaps(),j,e.getRenderBuffer());return S&&(this.declutterExecutorGroup=new u.a(I,_,v,n.getOverlaps(),S.finish(),e.getRenderBuffer())),this.renderedResolution_=_,this.renderedRevision_=m,this.renderedRenderOrder_=x,this.renderedExtent_=I,this.renderedCenter_=E,this.renderedProjection_=g,this.replayGroup_=U,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,n,i,r,o){if(!n)return!1;var s=!1;if(Array.isArray(n))for(var a=0,u=n.length;a<u;++a)s=Object(p.d)(i,t,n[a],e,this.boundHandleStyleImageChange_,r,o)||s;else s=Object(p.d)(i,t,n,e,this.boundHandleStyleImageChange_,r,o);return s},e}(a.a),m=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=function(t){function e(e){return t.call(this,e)||this}return m(e,t),e.prototype.createRenderer=function(){return new v(this)},e}(o.a);e.a=b},nkxq:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));var i=function(t){var e=new Date(t),n=60*e.getTimezoneOffset()*1e3;return parseInt(new Date(e.getTime()+n).getFullYear().toString(),10)},r=function(t){return new Date(Date.UTC(t,0,1)).toISOString().slice(0,10)}},nsO7:function(t,e,n){(function(t){var i;(function(){var r="Expected a function",o="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],a="[object Arguments]",u="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Error]",f="[object Function]",p="[object GeneratorFunction]",d="[object Map]",g="[object Number]",y="[object Object]",_="[object RegExp]",v="[object Set]",m="[object String]",b="[object Symbol]",x="[object WeakMap]",E="[object ArrayBuffer]",I="[object DataView]",w="[object Float32Array]",N="[object Float64Array]",C="[object Int8Array]",O="[object Int16Array]",P="[object Int32Array]",S="[object Uint8Array]",k="[object Uint16Array]",T="[object Uint32Array]",L=/\b__p \+= '';/g,M=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,A=/&(?:amp|lt|gt|quot|#39);/g,D=/[&<>"']/g,F=RegExp(A.source),G=RegExp(D.source),j=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,V=/<%=([\s\S]+?)%>/g,B=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,z=/^\w*$/,q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,X=RegExp(Y.source),W=/^\s+/,H=/\s/,Z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,K=/\{\n\/\* \[wrapped with (.+)\] \*/,J=/,? & /,Q=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$=/[()=,{}\[\]\/\s]/,tt=/\\(\\)?/g,et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nt=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,rt=/^0b[01]+$/i,ot=/^\[object .+?Constructor\]$/,st=/^0o[0-7]+$/i,at=/^(?:0|[1-9]\d*)$/,ut=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lt=/($^)/,ct=/['\n\r\u2028\u2029\\]/g,ht="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ft="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pt="["+ft+"]",dt="["+ht+"]",gt="\\d+",yt="[a-z\\xdf-\\xf6\\xf8-\\xff]",_t="[^\\ud800-\\udfff"+ft+gt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",vt="\\ud83c[\\udffb-\\udfff]",mt="[^\\ud800-\\udfff]",bt="(?:\\ud83c[\\udde6-\\uddff]){2}",xt="[\\ud800-\\udbff][\\udc00-\\udfff]",Et="[A-Z\\xc0-\\xd6\\xd8-\\xde]",It="(?:"+yt+"|"+_t+")",wt="(?:"+Et+"|"+_t+")",Nt="(?:"+dt+"|"+vt+")?",Ct="[\\ufe0e\\ufe0f]?"+Nt+"(?:\\u200d(?:"+[mt,bt,xt].join("|")+")[\\ufe0e\\ufe0f]?"+Nt+")*",Ot="(?:"+["[\\u2700-\\u27bf]",bt,xt].join("|")+")"+Ct,Pt="(?:"+[mt+dt+"?",dt,bt,xt,"[\\ud800-\\udfff]"].join("|")+")",St=RegExp("['\u2019]","g"),kt=RegExp(dt,"g"),Tt=RegExp(vt+"(?="+vt+")|"+Pt+Ct,"g"),Lt=RegExp([Et+"?"+yt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[pt,Et,"$"].join("|")+")",wt+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[pt,Et+It,"$"].join("|")+")",Et+"?"+It+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Et+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gt,Ot].join("|"),"g"),Mt=RegExp("[\\u200d\\ud800-\\udfff"+ht+"\\ufe0e\\ufe0f]"),Rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,At=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Dt=-1,Ft={};Ft[w]=Ft[N]=Ft[C]=Ft[O]=Ft[P]=Ft[S]=Ft["[object Uint8ClampedArray]"]=Ft[k]=Ft[T]=!0,Ft[a]=Ft[u]=Ft[E]=Ft[l]=Ft[I]=Ft[c]=Ft[h]=Ft[f]=Ft[d]=Ft[g]=Ft[y]=Ft[_]=Ft[v]=Ft[m]=Ft[x]=!1;var Gt={};Gt[a]=Gt[u]=Gt[E]=Gt[I]=Gt[l]=Gt[c]=Gt[w]=Gt[N]=Gt[C]=Gt[O]=Gt[P]=Gt[d]=Gt[g]=Gt[y]=Gt[_]=Gt[v]=Gt[m]=Gt[b]=Gt[S]=Gt["[object Uint8ClampedArray]"]=Gt[k]=Gt[T]=!0,Gt[h]=Gt[f]=Gt[x]=!1;var jt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ut=parseFloat,Vt=parseInt,Bt="object"==typeof global&&global&&global.Object===Object&&global,zt="object"==typeof self&&self&&self.Object===Object&&self,qt=Bt||zt||Function("return this")(),Yt=e&&!e.nodeType&&e,Xt=Yt&&"object"==typeof t&&t&&!t.nodeType&&t,Wt=Xt&&Xt.exports===Yt,Ht=Wt&&Bt.process,Zt=function(){try{return Xt&&Xt.require&&Xt.require("util").types||Ht&&Ht.binding&&Ht.binding("util")}catch(t){}}(),Kt=Zt&&Zt.isArrayBuffer,Jt=Zt&&Zt.isDate,Qt=Zt&&Zt.isMap,$t=Zt&&Zt.isRegExp,te=Zt&&Zt.isSet,ee=Zt&&Zt.isTypedArray;function ne(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ie(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(i,s,n(s),t)}return i}function re(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function oe(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function se(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function ae(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}function ue(t,e){return!(null==t||!t.length)&&ve(t,e,0)>-1}function le(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function ce(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function he(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function fe(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function pe(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function de(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var ge=Ee("length");function ye(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function _e(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function ve(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):_e(t,be,n)}function me(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function be(t){return t!=t}function xe(t,e){var n=null==t?0:t.length;return n?Ne(t,e)/n:NaN}function Ee(t){return function(e){return null==e?void 0:e[t]}}function Ie(t){return function(e){return null==t?void 0:t[e]}}function we(t,e,n,i,r){return r(t,(function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)})),n}function Ne(t,e){for(var n,i=-1,r=t.length;++i<r;){var o=e(t[i]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Ce(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Oe(t){return t?t.slice(0,Ye(t)+1).replace(W,""):t}function Pe(t){return function(e){return t(e)}}function Se(t,e){return ce(e,(function(e){return t[e]}))}function ke(t,e){return t.has(e)}function Te(t,e){for(var n=-1,i=t.length;++n<i&&ve(e,t[n],0)>-1;);return n}function Le(t,e){for(var n=t.length;n--&&ve(e,t[n],0)>-1;);return n}function Me(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var Re=Ie({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Ae=Ie({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function De(t){return"\\"+jt[t]}function Fe(t){return Mt.test(t)}function Ge(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function je(t,e){return function(n){return t(e(n))}}function Ue(t,e){for(var n=-1,i=t.length,r=0,s=[];++n<i;){var a=t[n];a!==e&&a!==o||(t[n]=o,s[r++]=n)}return s}function Ve(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function Be(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function ze(t){return Fe(t)?function(t){for(var e=Tt.lastIndex=0;Tt.test(t);)++e;return e}(t):ge(t)}function qe(t){return Fe(t)?function(t){return t.match(Tt)||[]}(t):function(t){return t.split("")}(t)}function Ye(t){for(var e=t.length;e--&&H.test(t.charAt(e)););return e}var Xe=Ie({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),We=function t(e){var n,i=(e=null==e?qt:We.defaults(qt.Object(),e,We.pick(qt,At))).Array,H=e.Date,ht=e.Error,ft=e.Function,pt=e.Math,dt=e.Object,gt=e.RegExp,yt=e.String,_t=e.TypeError,vt=i.prototype,mt=dt.prototype,bt=e["__core-js_shared__"],xt=ft.prototype.toString,Et=mt.hasOwnProperty,It=0,wt=(n=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Nt=mt.toString,Ct=xt.call(dt),Ot=qt._,Pt=gt("^"+xt.call(Et).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tt=Wt?e.Buffer:void 0,Mt=e.Symbol,jt=e.Uint8Array,Bt=Tt?Tt.allocUnsafe:void 0,zt=je(dt.getPrototypeOf,dt),Yt=dt.create,Xt=mt.propertyIsEnumerable,Ht=vt.splice,Zt=Mt?Mt.isConcatSpreadable:void 0,ge=Mt?Mt.iterator:void 0,Ie=Mt?Mt.toStringTag:void 0,He=function(){try{var t=Qr(dt,"defineProperty");return t({},"",{}),t}catch(e){}}(),Ze=e.clearTimeout!==qt.clearTimeout&&e.clearTimeout,Ke=H&&H.now!==qt.Date.now&&H.now,Je=e.setTimeout!==qt.setTimeout&&e.setTimeout,Qe=pt.ceil,$e=pt.floor,tn=dt.getOwnPropertySymbols,en=Tt?Tt.isBuffer:void 0,nn=e.isFinite,rn=vt.join,on=je(dt.keys,dt),sn=pt.max,an=pt.min,un=H.now,ln=e.parseInt,cn=pt.random,hn=vt.reverse,fn=Qr(e,"DataView"),pn=Qr(e,"Map"),dn=Qr(e,"Promise"),gn=Qr(e,"Set"),yn=Qr(e,"WeakMap"),_n=Qr(dt,"create"),vn=yn&&new yn,mn={},bn=Po(fn),xn=Po(pn),En=Po(dn),In=Po(gn),wn=Po(yn),Nn=Mt?Mt.prototype:void 0,Cn=Nn?Nn.valueOf:void 0,On=Nn?Nn.toString:void 0;function Pn(t){if(Ys(t)&&!Rs(t)&&!(t instanceof Ln)){if(t instanceof Tn)return t;if(Et.call(t,"__wrapped__"))return So(t)}return new Tn(t)}var Sn=function(){function t(){}return function(e){if(!qs(e))return{};if(Yt)return Yt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function kn(){}function Tn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Ln(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Mn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Rn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function An(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Dn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new An;++e<n;)this.add(t[e])}function Fn(t){var e=this.__data__=new Rn(t);this.size=e.size}function Gn(t,e){var n=Rs(t),i=!n&&Ms(t),r=!n&&!i&&Gs(t),o=!n&&!i&&!r&&$s(t),s=n||i||r||o,a=s?Ce(t.length,yt):[],u=a.length;for(var l in t)!e&&!Et.call(t,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||oo(l,u))||a.push(l);return a}function jn(t){var e=t.length;return e?t[Ai(0,e-1)]:void 0}function Un(t,e){return Io(yr(t),Zn(e,0,t.length))}function Vn(t){return Io(yr(t))}function Bn(t,e,n){(void 0!==n&&!ks(t[e],n)||void 0===n&&!(e in t))&&Wn(t,e,n)}function zn(t,e,n){var i=t[e];Et.call(t,e)&&ks(i,n)&&(void 0!==n||e in t)||Wn(t,e,n)}function qn(t,e){for(var n=t.length;n--;)if(ks(t[n][0],e))return n;return-1}function Yn(t,e,n,i){return ti(t,(function(t,r,o){e(i,t,n(t),o)})),i}function Xn(t,e){return t&&_r(e,xa(e),t)}function Wn(t,e,n){"__proto__"==e&&He?He(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Hn(t,e){for(var n=-1,r=e.length,o=i(r),s=null==t;++n<r;)o[n]=s?void 0:ya(t,e[n]);return o}function Zn(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Kn(t,e,n,i,r,o){var s,u=1&e,h=2&e,x=4&e;if(n&&(s=r?n(t,i,r,o):n(t)),void 0!==s)return s;if(!qs(t))return t;var L=Rs(t);if(L){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Et.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return yr(t,s)}else{var M=eo(t),R=M==f||M==p;if(Gs(t))return cr(t,u);if(M==y||M==a||R&&!r){if(s=h||R?{}:io(t),!u)return h?function(t,e){return _r(t,to(t),e)}(t,function(t,e){return t&&_r(e,Ea(e),t)}(s,t)):function(t,e){return _r(t,$r(t),e)}(t,Xn(s,t))}else{if(!Gt[M])return r?t:{};s=function(t,e,n){var i=t.constructor;switch(e){case E:return hr(t);case l:case c:return new i(+t);case I:return function(t,e){var n=e?hr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case w:case N:case C:case O:case P:case S:case"[object Uint8ClampedArray]":case k:case T:return fr(t,n);case d:return new i;case g:case m:return new i(t);case _:return function(t){var e=new t.constructor(t.source,nt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case v:return new i;case b:return Cn?dt(Cn.call(t)):{}}}(t,M,u)}}o||(o=new Fn);var A=o.get(t);if(A)return A;o.set(t,s),Ks(t)?t.forEach((function(i){s.add(Kn(i,e,n,i,t,o))})):Xs(t)&&t.forEach((function(i,r){s.set(r,Kn(i,e,n,r,t,o))}));var D=L?void 0:(x?h?Yr:qr:h?Ea:xa)(t);return re(D||t,(function(i,r){D&&(i=t[r=i]),zn(s,r,Kn(i,e,n,r,t,o))})),s}function Jn(t,e,n){var i=n.length;if(null==t)return!i;for(t=dt(t);i--;){var r=n[i],o=t[r];if(void 0===o&&!(r in t)||!(0,e[r])(o))return!1}return!0}function Qn(t,e,n){if("function"!=typeof t)throw new _t(r);return mo((function(){t.apply(void 0,n)}),e)}function $n(t,e,n,i){var r=-1,o=ue,s=!0,a=t.length,u=[],l=e.length;if(!a)return u;n&&(e=ce(e,Pe(n))),i?(o=le,s=!1):e.length>=200&&(o=ke,s=!1,e=new Dn(e));t:for(;++r<a;){var c=t[r],h=null==n?c:n(c);if(c=i||0!==c?c:0,s&&h==h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else o(e,h,i)||u.push(c)}return u}Pn.templateSettings={escape:j,evaluate:U,interpolate:V,variable:"",imports:{_:Pn}},(Pn.prototype=kn.prototype).constructor=Pn,(Tn.prototype=Sn(kn.prototype)).constructor=Tn,(Ln.prototype=Sn(kn.prototype)).constructor=Ln,Mn.prototype.clear=function(){this.__data__=_n?_n(null):{},this.size=0},Mn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Mn.prototype.get=function(t){var e=this.__data__;if(_n){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Et.call(e,t)?e[t]:void 0},Mn.prototype.has=function(t){var e=this.__data__;return _n?void 0!==e[t]:Et.call(e,t)},Mn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=_n&&void 0===e?"__lodash_hash_undefined__":e,this},Rn.prototype.clear=function(){this.__data__=[],this.size=0},Rn.prototype.delete=function(t){var e=this.__data__,n=qn(e,t);return!(n<0||(n==e.length-1?e.pop():Ht.call(e,n,1),--this.size,0))},Rn.prototype.get=function(t){var e=this.__data__,n=qn(e,t);return n<0?void 0:e[n][1]},Rn.prototype.has=function(t){return qn(this.__data__,t)>-1},Rn.prototype.set=function(t,e){var n=this.__data__,i=qn(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},An.prototype.clear=function(){this.size=0,this.__data__={hash:new Mn,map:new(pn||Rn),string:new Mn}},An.prototype.delete=function(t){var e=Kr(this,t).delete(t);return this.size-=e?1:0,e},An.prototype.get=function(t){return Kr(this,t).get(t)},An.prototype.has=function(t){return Kr(this,t).has(t)},An.prototype.set=function(t,e){var n=Kr(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Dn.prototype.add=Dn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Dn.prototype.has=function(t){return this.__data__.has(t)},Fn.prototype.clear=function(){this.__data__=new Rn,this.size=0},Fn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Fn.prototype.get=function(t){return this.__data__.get(t)},Fn.prototype.has=function(t){return this.__data__.has(t)},Fn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Rn){var i=n.__data__;if(!pn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new An(i)}return n.set(t,e),this.size=n.size,this};var ti=br(ui),ei=br(li,!0);function ni(t,e){var n=!0;return ti(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function ii(t,e,n){for(var i=-1,r=t.length;++i<r;){var o=t[i],s=e(o);if(null!=s&&(void 0===a?s==s&&!Qs(s):n(s,a)))var a=s,u=o}return u}function ri(t,e){var n=[];return ti(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function oi(t,e,n,i,r){var o=-1,s=t.length;for(n||(n=ro),r||(r=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?oi(a,e-1,n,i,r):he(r,a):i||(r[r.length]=a)}return r}var si=xr(),ai=xr(!0);function ui(t,e){return t&&si(t,e,xa)}function li(t,e){return t&&ai(t,e,xa)}function ci(t,e){return ae(e,(function(e){return Vs(t[e])}))}function hi(t,e){for(var n=0,i=(e=sr(e,t)).length;null!=t&&n<i;)t=t[Oo(e[n++])];return n&&n==i?t:void 0}function fi(t,e,n){var i=e(t);return Rs(t)?i:he(i,n(t))}function pi(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ie&&Ie in dt(t)?function(t){var e=Et.call(t,Ie),n=t[Ie];try{t[Ie]=void 0;var i=!0}catch(o){}var r=Nt.call(t);return i&&(e?t[Ie]=n:delete t[Ie]),r}(t):function(t){return Nt.call(t)}(t)}function di(t,e){return t>e}function gi(t,e){return null!=t&&Et.call(t,e)}function yi(t,e){return null!=t&&e in dt(t)}function _i(t,e,n){for(var r=n?le:ue,o=t[0].length,s=t.length,a=s,u=i(s),l=1/0,c=[];a--;){var h=t[a];a&&e&&(h=ce(h,Pe(e))),l=an(h.length,l),u[a]=!n&&(e||o>=120&&h.length>=120)?new Dn(a&&h):void 0}h=t[0];var f=-1,p=u[0];t:for(;++f<o&&c.length<l;){var d=h[f],g=e?e(d):d;if(d=n||0!==d?d:0,!(p?ke(p,g):r(c,g,n))){for(a=s;--a;){var y=u[a];if(!(y?ke(y,g):r(t[a],g,n)))continue t}p&&p.push(g),c.push(d)}}return c}function vi(t,e,n){var i=null==(t=go(t,e=sr(e,t)))?t:t[Oo(Uo(e))];return null==i?void 0:ne(i,t,n)}function mi(t){return Ys(t)&&pi(t)==a}function bi(t,e,n,i,r){return t===e||(null==t||null==e||!Ys(t)&&!Ys(e)?t!=t&&e!=e:function(t,e,n,i,r,o){var s=Rs(t),f=Rs(e),p=s?u:eo(t),x=f?u:eo(e),w=(p=p==a?y:p)==y,N=(x=x==a?y:x)==y,C=p==x;if(C&&Gs(t)){if(!Gs(e))return!1;s=!0,w=!1}if(C&&!w)return o||(o=new Fn),s||$s(t)?Br(t,e,n,i,r,o):function(t,e,n,i,r,o,s){switch(n){case I:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case E:return!(t.byteLength!=e.byteLength||!o(new jt(t),new jt(e)));case l:case c:case g:return ks(+t,+e);case h:return t.name==e.name&&t.message==e.message;case _:case m:return t==e+"";case d:var a=Ge;case v:if(a||(a=Ve),t.size!=e.size&&!(1&i))return!1;var u=s.get(t);if(u)return u==e;i|=2,s.set(t,e);var f=Br(a(t),a(e),i,r,o,s);return s.delete(t),f;case b:if(Cn)return Cn.call(t)==Cn.call(e)}return!1}(t,e,p,n,i,r,o);if(!(1&n)){var O=w&&Et.call(t,"__wrapped__"),P=N&&Et.call(e,"__wrapped__");if(O||P){var S=O?t.value():t,k=P?e.value():e;return o||(o=new Fn),r(S,k,n,i,o)}}return!!C&&(o||(o=new Fn),function(t,e,n,i,r,o){var s=1&n,a=qr(t),u=a.length;if(u!=qr(e).length&&!s)return!1;for(var l=u;l--;){var c=a[l];if(!(s?c in e:Et.call(e,c)))return!1}var h=o.get(t),f=o.get(e);if(h&&f)return h==e&&f==t;var p=!0;o.set(t,e),o.set(e,t);for(var d=s;++l<u;){var g=t[c=a[l]],y=e[c];if(i)var _=s?i(y,g,c,e,t,o):i(g,y,c,t,e,o);if(!(void 0===_?g===y||r(g,y,n,i,o):_)){p=!1;break}d||(d="constructor"==c)}if(p&&!d){var v=t.constructor,m=e.constructor;v==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof m&&m instanceof m||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,i,r,o))}(t,e,n,i,bi,r))}function xi(t,e,n,i){var r=n.length,o=r,s=!i;if(null==t)return!o;for(t=dt(t);r--;){var a=n[r];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<o;){var u=(a=n[r])[0],l=t[u],c=a[1];if(s&&a[2]){if(void 0===l&&!(u in t))return!1}else{var h=new Fn;if(i)var f=i(l,c,u,t,e,h);if(!(void 0===f?bi(c,l,3,i,h):f))return!1}}return!0}function Ei(t){return!(!qs(t)||(e=t,wt&&wt in e))&&(Vs(t)?Pt:ot).test(Po(t));var e}function Ii(t){return"function"==typeof t?t:null==t?Wa:"object"==typeof t?Rs(t)?Pi(t[0],t[1]):Oi(t):nu(t)}function wi(t){if(!co(t))return on(t);var e=[];for(var n in dt(t))Et.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ni(t,e){return t<e}function Ci(t,e){var n=-1,r=Ds(t)?i(t.length):[];return ti(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Oi(t){var e=Jr(t);return 1==e.length&&e[0][2]?fo(e[0][0],e[0][1]):function(n){return n===t||xi(n,t,e)}}function Pi(t,e){return ao(t)&&ho(e)?fo(Oo(t),e):function(n){var i=ya(n,t);return void 0===i&&i===e?_a(n,t):bi(e,i,3)}}function Si(t,e,n,i,r){t!==e&&si(e,(function(o,s){if(r||(r=new Fn),qs(o))!function(t,e,n,i,r,o,s){var a=_o(t,n),u=_o(e,n),l=s.get(u);if(l)Bn(t,n,l);else{var c=o?o(a,u,n+"",t,e,s):void 0,h=void 0===c;if(h){var f=Rs(u),p=!f&&Gs(u),d=!f&&!p&&$s(u);c=u,f||p||d?Rs(a)?c=a:Fs(a)?c=yr(a):p?(h=!1,c=cr(u,!0)):d?(h=!1,c=fr(u,!0)):c=[]:Hs(u)||Ms(u)?(c=a,Ms(a)?c=aa(a):qs(a)&&!Vs(a)||(c=io(u))):h=!1}h&&(s.set(u,c),r(c,u,i,o,s),s.delete(u)),Bn(t,n,c)}}(t,e,s,n,Si,i,r);else{var a=i?i(_o(t,s),o,s+"",t,e,r):void 0;void 0===a&&(a=o),Bn(t,s,a)}}),Ea)}function ki(t,e){var n=t.length;if(n)return oo(e+=e<0?n:0,n)?t[e]:void 0}function Ti(t,e,n){e=e.length?ce(e,(function(t){return Rs(t)?function(e){return hi(e,1===t.length?t[0]:t)}:t})):[Wa];var i=-1;return e=ce(e,Pe(Zr())),function(t,e){var i=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,s=r.length,a=n.length;++i<s;){var u=pr(r[i],o[i]);if(u)return i>=a?u:u*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}));i--;)t[i]=t[i].value;return t}(Ci(t,(function(t,n,r){return{criteria:ce(e,(function(e){return e(t)})),index:++i,value:t}})))}function Li(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var s=e[i],a=hi(t,s);n(a,s)&&Ui(o,sr(s,t),a)}return o}function Mi(t,e,n,i){var r=i?me:ve,o=-1,s=e.length,a=t;for(t===e&&(e=yr(e)),n&&(a=ce(t,Pe(n)));++o<s;)for(var u=0,l=e[o],c=n?n(l):l;(u=r(a,c,u,i))>-1;)a!==t&&Ht.call(a,u,1),Ht.call(t,u,1);return t}function Ri(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;oo(r)?Ht.call(t,r,1):Qi(t,r)}}return t}function Ai(t,e){return t+$e(cn()*(e-t+1))}function Di(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=$e(e/2))&&(t+=t)}while(e);return n}function Fi(t,e){return bo(po(t,e,Wa),t+"")}function Gi(t){return jn(ka(t))}function ji(t,e){var n=ka(t);return Io(n,Zn(e,0,n.length))}function Ui(t,e,n,i){if(!qs(t))return t;for(var r=-1,o=(e=sr(e,t)).length,s=o-1,a=t;null!=a&&++r<o;){var u=Oo(e[r]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(r!=s){var c=a[u];void 0===(l=i?i(c,u,a):void 0)&&(l=qs(c)?c:oo(e[r+1])?[]:{})}zn(a,u,l),a=a[u]}return t}var Vi=vn?function(t,e){return vn.set(t,e),t}:Wa,Bi=He?function(t,e){return He(t,"toString",{configurable:!0,enumerable:!1,value:qa(e),writable:!0})}:Wa;function zi(t){return Io(ka(t))}function qi(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=i(o);++r<o;)s[r]=t[r+e];return s}function Yi(t,e){var n;return ti(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function Xi(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,s=t[o];null!==s&&!Qs(s)&&(n?s<=e:s<e)?i=o+1:r=o}return r}return Wi(t,e,Wa,n)}function Wi(t,e,n,i){var r=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!=e,a=null===e,u=Qs(e),l=void 0===e;r<o;){var c=$e((r+o)/2),h=n(t[c]),f=void 0!==h,p=null===h,d=h==h,g=Qs(h);if(s)var y=i||d;else y=l?d&&(i||f):a?d&&f&&(i||!p):u?d&&f&&!p&&(i||!g):!p&&!g&&(i?h<=e:h<e);y?r=c+1:o=c}return an(o,4294967294)}function Hi(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n],a=e?e(s):s;if(!n||!ks(a,u)){var u=a;o[r++]=0===s?0:s}}return o}function Zi(t){return"number"==typeof t?t:Qs(t)?NaN:+t}function Ki(t){if("string"==typeof t)return t;if(Rs(t))return ce(t,Ki)+"";if(Qs(t))return On?On.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ji(t,e,n){var i=-1,r=ue,o=t.length,s=!0,a=[],u=a;if(n)s=!1,r=le;else if(o>=200){var l=e?null:Dr(t);if(l)return Ve(l);s=!1,r=ke,u=new Dn}else u=e?[]:a;t:for(;++i<o;){var c=t[i],h=e?e(c):c;if(c=n||0!==c?c:0,s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(c)}else r(u,h,n)||(u!==a&&u.push(h),a.push(c))}return a}function Qi(t,e){return null==(t=go(t,e=sr(e,t)))||delete t[Oo(Uo(e))]}function $i(t,e,n,i){return Ui(t,e,n(hi(t,e)),i)}function tr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?qi(t,i?0:o,i?o+1:r):qi(t,i?o+1:0,i?r:o)}function er(t,e){var n=t;return n instanceof Ln&&(n=n.value()),fe(e,(function(t,e){return e.func.apply(e.thisArg,he([t],e.args))}),n)}function nr(t,e,n){var r=t.length;if(r<2)return r?Ji(t[0]):[];for(var o=-1,s=i(r);++o<r;)for(var a=t[o],u=-1;++u<r;)u!=o&&(s[o]=$n(s[o]||a,t[u],e,n));return Ji(oi(s,1),e,n)}function ir(t,e,n){for(var i=-1,r=t.length,o=e.length,s={};++i<r;)n(s,t[i],i<o?e[i]:void 0);return s}function rr(t){return Fs(t)?t:[]}function or(t){return"function"==typeof t?t:Wa}function sr(t,e){return Rs(t)?t:ao(t,e)?[t]:Co(ua(t))}var ar=Fi;function ur(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:qi(t,e,n)}var lr=Ze||function(t){return qt.clearTimeout(t)};function cr(t,e){if(e)return t.slice();var n=t.length,i=Bt?Bt(n):new t.constructor(n);return t.copy(i),i}function hr(t){var e=new t.constructor(t.byteLength);return new jt(e).set(new jt(t)),e}function fr(t,e){var n=e?hr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function pr(t,e){if(t!==e){var n=void 0!==t,i=null===t,r=t==t,o=Qs(t),s=void 0!==e,a=null===e,u=e==e,l=Qs(e);if(!a&&!l&&!o&&t>e||o&&s&&u&&!a&&!l||i&&s&&u||!n&&u||!r)return 1;if(!i&&!o&&!l&&t<e||l&&n&&r&&!i&&!o||a&&n&&r||!s&&r||!u)return-1}return 0}function dr(t,e,n,r){for(var o=-1,s=t.length,a=n.length,u=-1,l=e.length,c=sn(s-a,0),h=i(l+c),f=!r;++u<l;)h[u]=e[u];for(;++o<a;)(f||o<s)&&(h[n[o]]=t[o]);for(;c--;)h[u++]=t[o++];return h}function gr(t,e,n,r){for(var o=-1,s=t.length,a=-1,u=n.length,l=-1,c=e.length,h=sn(s-u,0),f=i(h+c),p=!r;++o<h;)f[o]=t[o];for(var d=o;++l<c;)f[d+l]=e[l];for(;++a<u;)(p||o<s)&&(f[d+n[a]]=t[o++]);return f}function yr(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function _r(t,e,n,i){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=i?i(n[a],t[a],a,n,t):void 0;void 0===u&&(u=t[a]),r?Wn(n,a,u):zn(n,a,u)}return n}function vr(t,e){return function(n,i){var r=Rs(n)?ie:Yn,o=e?e():{};return r(n,t,Zr(i,2),o)}}function mr(t){return Fi((function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,s&&so(n[0],n[1],s)&&(o=r<3?void 0:o,r=1),e=dt(e);++i<r;){var a=n[i];a&&t(e,a,i,o)}return e}))}function br(t,e){return function(n,i){if(null==n)return n;if(!Ds(n))return t(n,i);for(var r=n.length,o=e?r:-1,s=dt(n);(e?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function xr(t){return function(e,n,i){for(var r=-1,o=dt(e),s=i(e),a=s.length;a--;){var u=s[t?a:++r];if(!1===n(o[u],u,o))break}return e}}function Er(t){return function(e){var n=Fe(e=ua(e))?qe(e):void 0,i=n?n[0]:e.charAt(0),r=n?ur(n,1).join(""):e.slice(1);return i[t]()+r}}function Ir(t){return function(e){return fe(Va(Ma(e).replace(St,"")),t,"")}}function wr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Sn(t.prototype),i=t.apply(n,e);return qs(i)?i:n}}function Nr(t){return function(e,n,i){var r=dt(e);if(!Ds(e)){var o=Zr(n,3);e=xa(e),n=function(t){return o(r[t],t,r)}}var s=t(e,n,i);return s>-1?r[o?e[s]:s]:void 0}}function Cr(t){return zr((function(e){var n=e.length,i=n,o=Tn.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new _t(r);if(o&&!a&&"wrapper"==Wr(s))var a=new Tn([],!0)}for(i=a?i:n;++i<n;){var u=Wr(s=e[i]),l="wrapper"==u?Xr(s):void 0;a=l&&uo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[Wr(l[0])].apply(a,l[3]):1==s.length&&uo(s)?a[u]():a.thru(s)}return function(){var t=arguments,i=t[0];if(a&&1==t.length&&Rs(i))return a.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}}))}function Or(t,e,n,r,o,s,a,u,l,c){var h=128&e,f=1&e,p=2&e,d=24&e,g=512&e,y=p?void 0:wr(t);return function _(){for(var v=arguments.length,m=i(v),b=v;b--;)m[b]=arguments[b];if(d)var x=Hr(_),E=Me(m,x);if(r&&(m=dr(m,r,o,d)),s&&(m=gr(m,s,a,d)),v-=E,d&&v<c){var I=Ue(m,x);return Rr(t,e,Or,_.placeholder,n,m,I,u,l,c-v)}var w=f?n:this,N=p?w[t]:t;return v=m.length,u?m=yo(m,u):g&&v>1&&m.reverse(),h&&l<v&&(m.length=l),this&&this!==qt&&this instanceof _&&(N=y||wr(N)),N.apply(w,m)}}function Pr(t,e){return function(n,i){return function(t,e,n,i){return ui(t,(function(t,r,o){e(i,n(t),r,o)})),i}(n,t,e(i),{})}}function Sr(t,e){return function(n,i){var r;if(void 0===n&&void 0===i)return e;if(void 0!==n&&(r=n),void 0!==i){if(void 0===r)return i;"string"==typeof n||"string"==typeof i?(n=Ki(n),i=Ki(i)):(n=Zi(n),i=Zi(i)),r=t(n,i)}return r}}function kr(t){return zr((function(e){return e=ce(e,Pe(Zr())),Fi((function(n){var i=this;return t(e,(function(t){return ne(t,i,n)}))}))}))}function Tr(t,e){var n=(e=void 0===e?" ":Ki(e)).length;if(n<2)return n?Di(e,t):e;var i=Di(e,Qe(t/ze(e)));return Fe(e)?ur(qe(i),0,t).join(""):i.slice(0,t)}function Lr(t){return function(e,n,r){return r&&"number"!=typeof r&&so(e,n,r)&&(n=r=void 0),e=ia(e),void 0===n?(n=e,e=0):n=ia(n),function(t,e,n,r){for(var o=-1,s=sn(Qe((e-t)/(n||1)),0),a=i(s);s--;)a[r?s:++o]=t,t+=n;return a}(e,n,r=void 0===r?e<n?1:-1:ia(r),t)}}function Mr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=sa(e),n=sa(n)),t(e,n)}}function Rr(t,e,n,i,r,o,s,a,u,l){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var h=[t,e,r,c?o:void 0,c?s:void 0,c?void 0:o,c?void 0:s,a,u,l],f=n.apply(void 0,h);return uo(t)&&vo(f,h),f.placeholder=i,xo(f,t,e)}function Ar(t){var e=pt[t];return function(t,n){if(t=sa(t),(n=null==n?0:an(ra(n),292))&&nn(t)){var i=(ua(t)+"e").split("e");return+((i=(ua(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Dr=gn&&1/Ve(new gn([,-0]))[1]==1/0?function(t){return new gn(t)}:Qa;function Fr(t){return function(e){var n=eo(e);return n==d?Ge(e):n==v?Be(e):function(t,e){return ce(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Gr(t,e,n,s,a,u,l,c){var h=2&e;if(!h&&"function"!=typeof t)throw new _t(r);var f=s?s.length:0;if(f||(e&=-97,s=a=void 0),l=void 0===l?l:sn(ra(l),0),c=void 0===c?c:ra(c),f-=a?a.length:0,64&e){var p=s,d=a;s=a=void 0}var g=h?void 0:Xr(t),y=[t,e,n,s,a,p,d,u,l,c];if(g&&function(t,e){var n=t[1],i=e[1],r=n|i;if(!(r<131||128==i&&8==n||128==i&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n))return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var s=e[3];if(s){var a=t[3];t[3]=a?dr(a,s,e[4]):s,t[4]=a?Ue(t[3],o):e[4]}(s=e[5])&&(t[5]=(a=t[5])?gr(a,s,e[6]):s,t[6]=a?Ue(t[5],o):e[6]),(s=e[7])&&(t[7]=s),128&i&&(t[8]=null==t[8]?e[8]:an(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(y,g),t=y[0],e=y[1],n=y[2],s=y[3],a=y[4],!(c=y[9]=void 0===y[9]?h?0:t.length:sn(y[9]-f,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||16==e?function(t,e,n){var r=wr(t);return function o(){for(var s=arguments.length,a=i(s),u=s,l=Hr(o);u--;)a[u]=arguments[u];var c=s<3&&a[0]!==l&&a[s-1]!==l?[]:Ue(a,l);if((s-=c.length)<n)return Rr(t,e,Or,o.placeholder,void 0,a,c,void 0,void 0,n-s);var h=this&&this!==qt&&this instanceof o?r:t;return ne(h,this,a)}}(t,e,c):32!=e&&33!=e||a.length?Or.apply(void 0,y):function(t,e,n,r){var o=1&e,s=wr(t);return function e(){for(var a=-1,u=arguments.length,l=-1,c=r.length,h=i(c+u),f=this&&this!==qt&&this instanceof e?s:t;++l<c;)h[l]=r[l];for(;u--;)h[l++]=arguments[++a];return ne(f,o?n:this,h)}}(t,e,n,s);else var _=function(t,e,n){var i=1&e,r=wr(t);return function e(){var o=this&&this!==qt&&this instanceof e?r:t;return o.apply(i?n:this,arguments)}}(t,e,n);return xo((g?Vi:vo)(_,y),t,e)}function jr(t,e,n,i){return void 0===t||ks(t,mt[n])&&!Et.call(i,n)?e:t}function Ur(t,e,n,i,r,o){return qs(t)&&qs(e)&&(o.set(e,t),Si(t,e,void 0,Ur,o),o.delete(e)),t}function Vr(t){return Hs(t)?void 0:t}function Br(t,e,n,i,r,o){var s=1&n,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var l=o.get(t),c=o.get(e);if(l&&c)return l==e&&c==t;var h=-1,f=!0,p=2&n?new Dn:void 0;for(o.set(t,e),o.set(e,t);++h<a;){var d=t[h],g=e[h];if(i)var y=s?i(g,d,h,e,t,o):i(d,g,h,t,e,o);if(void 0!==y){if(y)continue;f=!1;break}if(p){if(!de(e,(function(t,e){if(!ke(p,e)&&(d===t||r(d,t,n,i,o)))return p.push(e)}))){f=!1;break}}else if(d!==g&&!r(d,g,n,i,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function zr(t){return bo(po(t,void 0,Ao),t+"")}function qr(t){return fi(t,xa,$r)}function Yr(t){return fi(t,Ea,to)}var Xr=vn?function(t){return vn.get(t)}:Qa;function Wr(t){for(var e=t.name+"",n=mn[e],i=Et.call(mn,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function Hr(t){return(Et.call(Pn,"placeholder")?Pn:t).placeholder}function Zr(){var t=Pn.iteratee||Ha;return t=t===Ha?Ii:t,arguments.length?t(arguments[0],arguments[1]):t}function Kr(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Jr(t){for(var e=xa(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,ho(r)]}return e}function Qr(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Ei(n)?n:void 0}var $r=tn?function(t){return null==t?[]:(t=dt(t),ae(tn(t),(function(e){return Xt.call(t,e)})))}:ou,to=tn?function(t){for(var e=[];t;)he(e,$r(t)),t=zt(t);return e}:ou,eo=pi;function no(t,e,n){for(var i=-1,r=(e=sr(e,t)).length,o=!1;++i<r;){var s=Oo(e[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&zs(r)&&oo(s,r)&&(Rs(t)||Ms(t))}function io(t){return"function"!=typeof t.constructor||co(t)?{}:Sn(zt(t))}function ro(t){return Rs(t)||Ms(t)||!!(Zt&&t&&t[Zt])}function oo(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&at.test(t))&&t>-1&&t%1==0&&t<e}function so(t,e,n){if(!qs(n))return!1;var i=typeof e;return!!("number"==i?Ds(n)&&oo(e,n.length):"string"==i&&e in n)&&ks(n[e],t)}function ao(t,e){if(Rs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Qs(t))||z.test(t)||!B.test(t)||null!=e&&t in dt(e)}function uo(t){var e=Wr(t),n=Pn[e];if("function"!=typeof n||!(e in Ln.prototype))return!1;if(t===n)return!0;var i=Xr(n);return!!i&&t===i[0]}(fn&&eo(new fn(new ArrayBuffer(1)))!=I||pn&&eo(new pn)!=d||dn&&"[object Promise]"!=eo(dn.resolve())||gn&&eo(new gn)!=v||yn&&eo(new yn)!=x)&&(eo=function(t){var e=pi(t),n=e==y?t.constructor:void 0,i=n?Po(n):"";if(i)switch(i){case bn:return I;case xn:return d;case En:return"[object Promise]";case In:return v;case wn:return x}return e});var lo=bt?Vs:su;function co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||mt)}function ho(t){return t==t&&!qs(t)}function fo(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in dt(n))}}function po(t,e,n){return e=sn(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,s=sn(r.length-e,0),a=i(s);++o<s;)a[o]=r[e+o];o=-1;for(var u=i(e+1);++o<e;)u[o]=r[o];return u[e]=n(a),ne(t,this,u)}}function go(t,e){return e.length<2?t:hi(t,qi(e,0,-1))}function yo(t,e){for(var n=t.length,i=an(e.length,n),r=yr(t);i--;){var o=e[i];t[i]=oo(o,n)?r[o]:void 0}return t}function _o(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var vo=Eo(Vi),mo=Je||function(t,e){return qt.setTimeout(t,e)},bo=Eo(Bi);function xo(t,e,n){var i=e+"";return bo(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Z,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return re(s,(function(n){var i="_."+n[0];e&n[1]&&!ue(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(K);return e?e[1].split(J):[]}(i),n)))}function Eo(t){var e=0,n=0;return function(){var i=un(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Io(t,e){var n=-1,i=t.length,r=i-1;for(e=void 0===e?i:e;++n<e;){var o=Ai(n,r),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var wo,No,Co=(wo=ws((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(q,(function(t,n,i,r){e.push(i?r.replace(tt,"$1"):n||t)})),e}),(function(t){return 500===No.size&&No.clear(),t})),No=wo.cache,wo);function Oo(t){if("string"==typeof t||Qs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Po(t){if(null!=t){try{return xt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function So(t){if(t instanceof Ln)return t.clone();var e=new Tn(t.__wrapped__,t.__chain__);return e.__actions__=yr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var ko=Fi((function(t,e){return Fs(t)?$n(t,oi(e,1,Fs,!0)):[]})),To=Fi((function(t,e){var n=Uo(e);return Fs(n)&&(n=void 0),Fs(t)?$n(t,oi(e,1,Fs,!0),Zr(n,2)):[]})),Lo=Fi((function(t,e){var n=Uo(e);return Fs(n)&&(n=void 0),Fs(t)?$n(t,oi(e,1,Fs,!0),void 0,n):[]}));function Mo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ra(n);return r<0&&(r=sn(i+r,0)),_e(t,Zr(e,3),r)}function Ro(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return void 0!==n&&(r=ra(n),r=n<0?sn(i+r,0):an(r,i-1)),_e(t,Zr(e,3),r,!0)}function Ao(t){return null!=t&&t.length?oi(t,1):[]}function Do(t){return t&&t.length?t[0]:void 0}var Fo=Fi((function(t){var e=ce(t,rr);return e.length&&e[0]===t[0]?_i(e):[]})),Go=Fi((function(t){var e=Uo(t),n=ce(t,rr);return e===Uo(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?_i(n,Zr(e,2)):[]})),jo=Fi((function(t){var e=Uo(t),n=ce(t,rr);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?_i(n,void 0,e):[]}));function Uo(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Vo=Fi(Bo);function Bo(t,e){return t&&t.length&&e&&e.length?Mi(t,e):t}var zo=zr((function(t,e){var n=null==t?0:t.length,i=Hn(t,e);return Ri(t,ce(e,(function(t){return oo(t,n)?+t:t})).sort(pr)),i}));function qo(t){return null==t?t:hn.call(t)}var Yo=Fi((function(t){return Ji(oi(t,1,Fs,!0))})),Xo=Fi((function(t){var e=Uo(t);return Fs(e)&&(e=void 0),Ji(oi(t,1,Fs,!0),Zr(e,2))})),Wo=Fi((function(t){var e=Uo(t);return e="function"==typeof e?e:void 0,Ji(oi(t,1,Fs,!0),void 0,e)}));function Ho(t){if(!t||!t.length)return[];var e=0;return t=ae(t,(function(t){if(Fs(t))return e=sn(t.length,e),!0})),Ce(e,(function(e){return ce(t,Ee(e))}))}function Zo(t,e){if(!t||!t.length)return[];var n=Ho(t);return null==e?n:ce(n,(function(t){return ne(e,void 0,t)}))}var Ko=Fi((function(t,e){return Fs(t)?$n(t,e):[]})),Jo=Fi((function(t){return nr(ae(t,Fs))})),Qo=Fi((function(t){var e=Uo(t);return Fs(e)&&(e=void 0),nr(ae(t,Fs),Zr(e,2))})),$o=Fi((function(t){var e=Uo(t);return e="function"==typeof e?e:void 0,nr(ae(t,Fs),void 0,e)})),ts=Fi(Ho),es=Fi((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Zo(t,n)}));function ns(t){var e=Pn(t);return e.__chain__=!0,e}function is(t,e){return e(t)}var rs=zr((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Hn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Ln&&oo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:is,args:[r],thisArg:void 0}),new Tn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(r)})),os=vr((function(t,e,n){Et.call(t,n)?++t[n]:Wn(t,n,1)})),ss=Nr(Mo),as=Nr(Ro);function us(t,e){return(Rs(t)?re:ti)(t,Zr(e,3))}function ls(t,e){return(Rs(t)?oe:ei)(t,Zr(e,3))}var cs=vr((function(t,e,n){Et.call(t,n)?t[n].push(e):Wn(t,n,[e])})),hs=Fi((function(t,e,n){var r=-1,o="function"==typeof e,s=Ds(t)?i(t.length):[];return ti(t,(function(t){s[++r]=o?ne(e,t,n):vi(t,e,n)})),s})),fs=vr((function(t,e,n){Wn(t,n,e)}));function ps(t,e){return(Rs(t)?ce:Ci)(t,Zr(e,3))}var ds=vr((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),gs=Fi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&so(t,e[0],e[1])?e=[]:n>2&&so(e[0],e[1],e[2])&&(e=[e[0]]),Ti(t,oi(e,1),[])})),ys=Ke||function(){return qt.Date.now()};function _s(t,e,n){return e=n?void 0:e,Gr(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function vs(t,e){var n;if("function"!=typeof e)throw new _t(r);return t=ra(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var ms=Fi((function(t,e,n){var i=1;if(n.length){var r=Ue(n,Hr(ms));i|=32}return Gr(t,i,e,n,r)})),bs=Fi((function(t,e,n){var i=3;if(n.length){var r=Ue(n,Hr(bs));i|=32}return Gr(e,i,t,n,r)}));function xs(t,e,n){var i,o,s,a,u,l,c=0,h=!1,f=!1,p=!0;if("function"!=typeof t)throw new _t(r);function d(e){var n=i,r=o;return i=o=void 0,c=e,a=t.apply(r,n)}function g(t){return c=t,u=mo(_,e),h?d(t):a}function y(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-c>=s}function _(){var t=ys();if(y(t))return v(t);u=mo(_,function(t){var n=e-(t-l);return f?an(n,s-(t-c)):n}(t))}function v(t){return u=void 0,p&&i?d(t):(i=o=void 0,a)}function m(){var t=ys(),n=y(t);if(i=arguments,o=this,l=t,n){if(void 0===u)return g(l);if(f)return lr(u),u=mo(_,e),d(l)}return void 0===u&&(u=mo(_,e)),a}return e=sa(e)||0,qs(n)&&(h=!!n.leading,s=(f="maxWait"in n)?sn(sa(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),m.cancel=function(){void 0!==u&&lr(u),c=0,i=l=o=u=void 0},m.flush=function(){return void 0===u?a:v(ys())},m}var Es=Fi((function(t,e){return Qn(t,1,e)})),Is=Fi((function(t,e,n){return Qn(t,sa(e)||0,n)}));function ws(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new _t(r);var n=function n(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(ws.Cache||An),n}function Ns(t){if("function"!=typeof t)throw new _t(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ws.Cache=An;var Cs=ar((function(t,e){var n=(e=1==e.length&&Rs(e[0])?ce(e[0],Pe(Zr())):ce(oi(e,1),Pe(Zr()))).length;return Fi((function(i){for(var r=-1,o=an(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return ne(t,this,i)}))})),Os=Fi((function(t,e){return Gr(t,32,void 0,e,Ue(e,Hr(Os)))})),Ps=Fi((function(t,e){return Gr(t,64,void 0,e,Ue(e,Hr(Ps)))})),Ss=zr((function(t,e){return Gr(t,256,void 0,void 0,void 0,e)}));function ks(t,e){return t===e||t!=t&&e!=e}var Ts=Mr(di),Ls=Mr((function(t,e){return t>=e})),Ms=mi(function(){return arguments}())?mi:function(t){return Ys(t)&&Et.call(t,"callee")&&!Xt.call(t,"callee")},Rs=i.isArray,As=Kt?Pe(Kt):function(t){return Ys(t)&&pi(t)==E};function Ds(t){return null!=t&&zs(t.length)&&!Vs(t)}function Fs(t){return Ys(t)&&Ds(t)}var Gs=en||su,js=Jt?Pe(Jt):function(t){return Ys(t)&&pi(t)==c};function Us(t){if(!Ys(t))return!1;var e=pi(t);return e==h||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Hs(t)}function Vs(t){if(!qs(t))return!1;var e=pi(t);return e==f||e==p||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Bs(t){return"number"==typeof t&&t==ra(t)}function zs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function qs(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ys(t){return null!=t&&"object"==typeof t}var Xs=Qt?Pe(Qt):function(t){return Ys(t)&&eo(t)==d};function Ws(t){return"number"==typeof t||Ys(t)&&pi(t)==g}function Hs(t){if(!Ys(t)||pi(t)!=y)return!1;var e=zt(t);if(null===e)return!0;var n=Et.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&xt.call(n)==Ct}var Zs=$t?Pe($t):function(t){return Ys(t)&&pi(t)==_},Ks=te?Pe(te):function(t){return Ys(t)&&eo(t)==v};function Js(t){return"string"==typeof t||!Rs(t)&&Ys(t)&&pi(t)==m}function Qs(t){return"symbol"==typeof t||Ys(t)&&pi(t)==b}var $s=ee?Pe(ee):function(t){return Ys(t)&&zs(t.length)&&!!Ft[pi(t)]},ta=Mr(Ni),ea=Mr((function(t,e){return t<=e}));function na(t){if(!t)return[];if(Ds(t))return Js(t)?qe(t):yr(t);if(ge&&t[ge])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ge]());var e=eo(t);return(e==d?Ge:e==v?Ve:ka)(t)}function ia(t){return t?(t=sa(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ra(t){var e=ia(t),n=e%1;return e==e?n?e-n:e:0}function oa(t){return t?Zn(ra(t),0,4294967295):0}function sa(t){if("number"==typeof t)return t;if(Qs(t))return NaN;if(qs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=qs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Oe(t);var n=rt.test(t);return n||st.test(t)?Vt(t.slice(2),n?2:8):it.test(t)?NaN:+t}function aa(t){return _r(t,Ea(t))}function ua(t){return null==t?"":Ki(t)}var la=mr((function(t,e){if(co(e)||Ds(e))_r(e,xa(e),t);else for(var n in e)Et.call(e,n)&&zn(t,n,e[n])})),ca=mr((function(t,e){_r(e,Ea(e),t)})),ha=mr((function(t,e,n,i){_r(e,Ea(e),t,i)})),fa=mr((function(t,e,n,i){_r(e,xa(e),t,i)})),pa=zr(Hn),da=Fi((function(t,e){t=dt(t);var n=-1,i=e.length,r=i>2?e[2]:void 0;for(r&&so(e[0],e[1],r)&&(i=1);++n<i;)for(var o=e[n],s=Ea(o),a=-1,u=s.length;++a<u;){var l=s[a],c=t[l];(void 0===c||ks(c,mt[l])&&!Et.call(t,l))&&(t[l]=o[l])}return t})),ga=Fi((function(t){return t.push(void 0,Ur),ne(wa,void 0,t)}));function ya(t,e,n){var i=null==t?void 0:hi(t,e);return void 0===i?n:i}function _a(t,e){return null!=t&&no(t,e,yi)}var va=Pr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Nt.call(e)),t[e]=n}),qa(Wa)),ma=Pr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Nt.call(e)),Et.call(t,e)?t[e].push(n):t[e]=[n]}),Zr),ba=Fi(vi);function xa(t){return Ds(t)?Gn(t):wi(t)}function Ea(t){return Ds(t)?Gn(t,!0):function(t){if(!qs(t))return function(t){var e=[];if(null!=t)for(var n in dt(t))e.push(n);return e}(t);var e=co(t),n=[];for(var i in t)("constructor"!=i||!e&&Et.call(t,i))&&n.push(i);return n}(t)}var Ia=mr((function(t,e,n){Si(t,e,n)})),wa=mr((function(t,e,n,i){Si(t,e,n,i)})),Na=zr((function(t,e){var n={};if(null==t)return n;var i=!1;e=ce(e,(function(e){return e=sr(e,t),i||(i=e.length>1),e})),_r(t,Yr(t),n),i&&(n=Kn(n,7,Vr));for(var r=e.length;r--;)Qi(n,e[r]);return n})),Ca=zr((function(t,e){return null==t?{}:function(t,e){return Li(t,e,(function(e,n){return _a(t,n)}))}(t,e)}));function Oa(t,e){if(null==t)return{};var n=ce(Yr(t),(function(t){return[t]}));return e=Zr(e),Li(t,n,(function(t,n){return e(t,n[0])}))}var Pa=Fr(xa),Sa=Fr(Ea);function ka(t){return null==t?[]:Se(t,xa(t))}var Ta=Ir((function(t,e,n){return e=e.toLowerCase(),t+(n?La(e):e)}));function La(t){return Ua(ua(t).toLowerCase())}function Ma(t){return(t=ua(t))&&t.replace(ut,Re).replace(kt,"")}var Ra=Ir((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Aa=Ir((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Da=Er("toLowerCase"),Fa=Ir((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ga=Ir((function(t,e,n){return t+(n?" ":"")+Ua(e)})),ja=Ir((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ua=Er("toUpperCase");function Va(t,e,n){return t=ua(t),void 0===(e=n?void 0:e)?function(t){return Rt.test(t)}(t)?function(t){return t.match(Lt)||[]}(t):function(t){return t.match(Q)||[]}(t):t.match(e)||[]}var Ba=Fi((function(t,e){try{return ne(t,void 0,e)}catch(n){return Us(n)?n:new ht(n)}})),za=zr((function(t,e){return re(e,(function(e){e=Oo(e),Wn(t,e,ms(t[e],t))})),t}));function qa(t){return function(){return t}}var Ya=Cr(),Xa=Cr(!0);function Wa(t){return t}function Ha(t){return Ii("function"==typeof t?t:Kn(t,1))}var Za=Fi((function(t,e){return function(n){return vi(n,t,e)}})),Ka=Fi((function(t,e){return function(n){return vi(t,n,e)}}));function Ja(t,e,n){var i=xa(e),r=ci(e,i);null!=n||qs(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=ci(e,xa(e)));var o=!(qs(n)&&"chain"in n&&!n.chain),s=Vs(t);return re(r,(function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=yr(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,he([this.value()],arguments))})})),t}function Qa(){}var $a=kr(ce),tu=kr(se),eu=kr(de);function nu(t){return ao(t)?Ee(Oo(t)):function(t){return function(e){return hi(e,t)}}(t)}var iu=Lr(),ru=Lr(!0);function ou(){return[]}function su(){return!1}var au,uu=Sr((function(t,e){return t+e}),0),lu=Ar("ceil"),cu=Sr((function(t,e){return t/e}),1),hu=Ar("floor"),fu=Sr((function(t,e){return t*e}),1),pu=Ar("round"),du=Sr((function(t,e){return t-e}),0);return Pn.after=function(t,e){if("function"!=typeof e)throw new _t(r);return t=ra(t),function(){if(--t<1)return e.apply(this,arguments)}},Pn.ary=_s,Pn.assign=la,Pn.assignIn=ca,Pn.assignInWith=ha,Pn.assignWith=fa,Pn.at=pa,Pn.before=vs,Pn.bind=ms,Pn.bindAll=za,Pn.bindKey=bs,Pn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Rs(t)?t:[t]},Pn.chain=ns,Pn.chunk=function(t,e,n){e=(n?so(t,e,n):void 0===e)?1:sn(ra(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var o=0,s=0,a=i(Qe(r/e));o<r;)a[s++]=qi(t,o,o+=e);return a},Pn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},Pn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return he(Rs(n)?yr(n):[n],oi(e,1))},Pn.cond=function(t){var e=null==t?0:t.length,n=Zr();return t=e?ce(t,(function(t){if("function"!=typeof t[1])throw new _t(r);return[n(t[0]),t[1]]})):[],Fi((function(n){for(var i=-1;++i<e;){var r=t[i];if(ne(r[0],this,n))return ne(r[1],this,n)}}))},Pn.conforms=function(t){return function(t){var e=xa(t);return function(n){return Jn(n,t,e)}}(Kn(t,1))},Pn.constant=qa,Pn.countBy=os,Pn.create=function(t,e){var n=Sn(t);return null==e?n:Xn(n,e)},Pn.curry=function t(e,n,i){var r=Gr(e,8,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=t.placeholder,r},Pn.curryRight=function t(e,n,i){var r=Gr(e,16,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=t.placeholder,r},Pn.debounce=xs,Pn.defaults=da,Pn.defaultsDeep=ga,Pn.defer=Es,Pn.delay=Is,Pn.difference=ko,Pn.differenceBy=To,Pn.differenceWith=Lo,Pn.drop=function(t,e,n){var i=null==t?0:t.length;return i?qi(t,(e=n||void 0===e?1:ra(e))<0?0:e,i):[]},Pn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?qi(t,0,(e=i-(e=n||void 0===e?1:ra(e)))<0?0:e):[]},Pn.dropRightWhile=function(t,e){return t&&t.length?tr(t,Zr(e,3),!0,!0):[]},Pn.dropWhile=function(t,e){return t&&t.length?tr(t,Zr(e,3),!0):[]},Pn.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&so(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=ra(n))<0&&(n=-n>r?0:r+n),(i=void 0===i||i>r?r:ra(i))<0&&(i+=r),i=n>i?0:oa(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Pn.filter=function(t,e){return(Rs(t)?ae:ri)(t,Zr(e,3))},Pn.flatMap=function(t,e){return oi(ps(t,e),1)},Pn.flatMapDeep=function(t,e){return oi(ps(t,e),1/0)},Pn.flatMapDepth=function(t,e,n){return n=void 0===n?1:ra(n),oi(ps(t,e),n)},Pn.flatten=Ao,Pn.flattenDeep=function(t){return null!=t&&t.length?oi(t,1/0):[]},Pn.flattenDepth=function(t,e){return null!=t&&t.length?oi(t,e=void 0===e?1:ra(e)):[]},Pn.flip=function(t){return Gr(t,512)},Pn.flow=Ya,Pn.flowRight=Xa,Pn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Pn.functions=function(t){return null==t?[]:ci(t,xa(t))},Pn.functionsIn=function(t){return null==t?[]:ci(t,Ea(t))},Pn.groupBy=cs,Pn.initial=function(t){return null!=t&&t.length?qi(t,0,-1):[]},Pn.intersection=Fo,Pn.intersectionBy=Go,Pn.intersectionWith=jo,Pn.invert=va,Pn.invertBy=ma,Pn.invokeMap=hs,Pn.iteratee=Ha,Pn.keyBy=fs,Pn.keys=xa,Pn.keysIn=Ea,Pn.map=ps,Pn.mapKeys=function(t,e){var n={};return e=Zr(e,3),ui(t,(function(t,i,r){Wn(n,e(t,i,r),t)})),n},Pn.mapValues=function(t,e){var n={};return e=Zr(e,3),ui(t,(function(t,i,r){Wn(n,i,e(t,i,r))})),n},Pn.matches=function(t){return Oi(Kn(t,1))},Pn.matchesProperty=function(t,e){return Pi(t,Kn(e,1))},Pn.memoize=ws,Pn.merge=Ia,Pn.mergeWith=wa,Pn.method=Za,Pn.methodOf=Ka,Pn.mixin=Ja,Pn.negate=Ns,Pn.nthArg=function(t){return t=ra(t),Fi((function(e){return ki(e,t)}))},Pn.omit=Na,Pn.omitBy=function(t,e){return Oa(t,Ns(Zr(e)))},Pn.once=function(t){return vs(2,t)},Pn.orderBy=function(t,e,n,i){return null==t?[]:(Rs(e)||(e=null==e?[]:[e]),Rs(n=i?void 0:n)||(n=null==n?[]:[n]),Ti(t,e,n))},Pn.over=$a,Pn.overArgs=Cs,Pn.overEvery=tu,Pn.overSome=eu,Pn.partial=Os,Pn.partialRight=Ps,Pn.partition=ds,Pn.pick=Ca,Pn.pickBy=Oa,Pn.property=nu,Pn.propertyOf=function(t){return function(e){return null==t?void 0:hi(t,e)}},Pn.pull=Vo,Pn.pullAll=Bo,Pn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Mi(t,e,Zr(n,2)):t},Pn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Mi(t,e,void 0,n):t},Pn.pullAt=zo,Pn.range=iu,Pn.rangeRight=ru,Pn.rearg=Ss,Pn.reject=function(t,e){return(Rs(t)?ae:ri)(t,Ns(Zr(e,3)))},Pn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Zr(e,3);++i<o;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return Ri(t,r),n},Pn.rest=function(t,e){if("function"!=typeof t)throw new _t(r);return Fi(t,e=void 0===e?e:ra(e))},Pn.reverse=qo,Pn.sampleSize=function(t,e,n){return e=(n?so(t,e,n):void 0===e)?1:ra(e),(Rs(t)?Un:ji)(t,e)},Pn.set=function(t,e,n){return null==t?t:Ui(t,e,n)},Pn.setWith=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:Ui(t,e,n,i)},Pn.shuffle=function(t){return(Rs(t)?Vn:zi)(t)},Pn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&so(t,e,n)?(e=0,n=i):(e=null==e?0:ra(e),n=void 0===n?i:ra(n)),qi(t,e,n)):[]},Pn.sortBy=gs,Pn.sortedUniq=function(t){return t&&t.length?Hi(t):[]},Pn.sortedUniqBy=function(t,e){return t&&t.length?Hi(t,Zr(e,2)):[]},Pn.split=function(t,e,n){return n&&"number"!=typeof n&&so(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=ua(t))&&("string"==typeof e||null!=e&&!Zs(e))&&!(e=Ki(e))&&Fe(t)?ur(qe(t),0,n):t.split(e,n):[]},Pn.spread=function(t,e){if("function"!=typeof t)throw new _t(r);return e=null==e?0:sn(ra(e),0),Fi((function(n){var i=n[e],r=ur(n,0,e);return i&&he(r,i),ne(t,this,r)}))},Pn.tail=function(t){var e=null==t?0:t.length;return e?qi(t,1,e):[]},Pn.take=function(t,e,n){return t&&t.length?qi(t,0,(e=n||void 0===e?1:ra(e))<0?0:e):[]},Pn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?qi(t,(e=i-(e=n||void 0===e?1:ra(e)))<0?0:e,i):[]},Pn.takeRightWhile=function(t,e){return t&&t.length?tr(t,Zr(e,3),!1,!0):[]},Pn.takeWhile=function(t,e){return t&&t.length?tr(t,Zr(e,3)):[]},Pn.tap=function(t,e){return e(t),t},Pn.throttle=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new _t(r);return qs(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),xs(t,e,{leading:i,maxWait:e,trailing:o})},Pn.thru=is,Pn.toArray=na,Pn.toPairs=Pa,Pn.toPairsIn=Sa,Pn.toPath=function(t){return Rs(t)?ce(t,Oo):Qs(t)?[t]:yr(Co(ua(t)))},Pn.toPlainObject=aa,Pn.transform=function(t,e,n){var i=Rs(t),r=i||Gs(t)||$s(t);if(e=Zr(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:qs(t)&&Vs(o)?Sn(zt(t)):{}}return(r?re:ui)(t,(function(t,i,r){return e(n,t,i,r)})),n},Pn.unary=function(t){return _s(t,1)},Pn.union=Yo,Pn.unionBy=Xo,Pn.unionWith=Wo,Pn.uniq=function(t){return t&&t.length?Ji(t):[]},Pn.uniqBy=function(t,e){return t&&t.length?Ji(t,Zr(e,2)):[]},Pn.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Ji(t,void 0,e):[]},Pn.unset=function(t,e){return null==t||Qi(t,e)},Pn.unzip=Ho,Pn.unzipWith=Zo,Pn.update=function(t,e,n){return null==t?t:$i(t,e,or(n))},Pn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:$i(t,e,or(n),i)},Pn.values=ka,Pn.valuesIn=function(t){return null==t?[]:Se(t,Ea(t))},Pn.without=Ko,Pn.words=Va,Pn.wrap=function(t,e){return Os(or(e),t)},Pn.xor=Jo,Pn.xorBy=Qo,Pn.xorWith=$o,Pn.zip=ts,Pn.zipObject=function(t,e){return ir(t||[],e||[],zn)},Pn.zipObjectDeep=function(t,e){return ir(t||[],e||[],Ui)},Pn.zipWith=es,Pn.entries=Pa,Pn.entriesIn=Sa,Pn.extend=ca,Pn.extendWith=ha,Ja(Pn,Pn),Pn.add=uu,Pn.attempt=Ba,Pn.camelCase=Ta,Pn.capitalize=La,Pn.ceil=lu,Pn.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=sa(n))==n?n:0),void 0!==e&&(e=(e=sa(e))==e?e:0),Zn(sa(t),e,n)},Pn.clone=function(t){return Kn(t,4)},Pn.cloneDeep=function(t){return Kn(t,5)},Pn.cloneDeepWith=function(t,e){return Kn(t,5,e="function"==typeof e?e:void 0)},Pn.cloneWith=function(t,e){return Kn(t,4,e="function"==typeof e?e:void 0)},Pn.conformsTo=function(t,e){return null==e||Jn(t,e,xa(e))},Pn.deburr=Ma,Pn.defaultTo=function(t,e){return null==t||t!=t?e:t},Pn.divide=cu,Pn.endsWith=function(t,e,n){t=ua(t),e=Ki(e);var i=t.length,r=n=void 0===n?i:Zn(ra(n),0,i);return(n-=e.length)>=0&&t.slice(n,r)==e},Pn.eq=ks,Pn.escape=function(t){return(t=ua(t))&&G.test(t)?t.replace(D,Ae):t},Pn.escapeRegExp=function(t){return(t=ua(t))&&X.test(t)?t.replace(Y,"\\$&"):t},Pn.every=function(t,e,n){var i=Rs(t)?se:ni;return n&&so(t,e,n)&&(e=void 0),i(t,Zr(e,3))},Pn.find=ss,Pn.findIndex=Mo,Pn.findKey=function(t,e){return ye(t,Zr(e,3),ui)},Pn.findLast=as,Pn.findLastIndex=Ro,Pn.findLastKey=function(t,e){return ye(t,Zr(e,3),li)},Pn.floor=hu,Pn.forEach=us,Pn.forEachRight=ls,Pn.forIn=function(t,e){return null==t?t:si(t,Zr(e,3),Ea)},Pn.forInRight=function(t,e){return null==t?t:ai(t,Zr(e,3),Ea)},Pn.forOwn=function(t,e){return t&&ui(t,Zr(e,3))},Pn.forOwnRight=function(t,e){return t&&li(t,Zr(e,3))},Pn.get=ya,Pn.gt=Ts,Pn.gte=Ls,Pn.has=function(t,e){return null!=t&&no(t,e,gi)},Pn.hasIn=_a,Pn.head=Do,Pn.identity=Wa,Pn.includes=function(t,e,n,i){t=Ds(t)?t:ka(t),n=n&&!i?ra(n):0;var r=t.length;return n<0&&(n=sn(r+n,0)),Js(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&ve(t,e,n)>-1},Pn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ra(n);return r<0&&(r=sn(i+r,0)),ve(t,e,r)},Pn.inRange=function(t,e,n){return e=ia(e),void 0===n?(n=e,e=0):n=ia(n),function(t,e,n){return t>=an(e,n)&&t<sn(e,n)}(t=sa(t),e,n)},Pn.invoke=ba,Pn.isArguments=Ms,Pn.isArray=Rs,Pn.isArrayBuffer=As,Pn.isArrayLike=Ds,Pn.isArrayLikeObject=Fs,Pn.isBoolean=function(t){return!0===t||!1===t||Ys(t)&&pi(t)==l},Pn.isBuffer=Gs,Pn.isDate=js,Pn.isElement=function(t){return Ys(t)&&1===t.nodeType&&!Hs(t)},Pn.isEmpty=function(t){if(null==t)return!0;if(Ds(t)&&(Rs(t)||"string"==typeof t||"function"==typeof t.splice||Gs(t)||$s(t)||Ms(t)))return!t.length;var e=eo(t);if(e==d||e==v)return!t.size;if(co(t))return!wi(t).length;for(var n in t)if(Et.call(t,n))return!1;return!0},Pn.isEqual=function(t,e){return bi(t,e)},Pn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===i?bi(t,e,void 0,n):!!i},Pn.isError=Us,Pn.isFinite=function(t){return"number"==typeof t&&nn(t)},Pn.isFunction=Vs,Pn.isInteger=Bs,Pn.isLength=zs,Pn.isMap=Xs,Pn.isMatch=function(t,e){return t===e||xi(t,e,Jr(e))},Pn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,xi(t,e,Jr(e),n)},Pn.isNaN=function(t){return Ws(t)&&t!=+t},Pn.isNative=function(t){if(lo(t))throw new ht("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ei(t)},Pn.isNil=function(t){return null==t},Pn.isNull=function(t){return null===t},Pn.isNumber=Ws,Pn.isObject=qs,Pn.isObjectLike=Ys,Pn.isPlainObject=Hs,Pn.isRegExp=Zs,Pn.isSafeInteger=function(t){return Bs(t)&&t>=-9007199254740991&&t<=9007199254740991},Pn.isSet=Ks,Pn.isString=Js,Pn.isSymbol=Qs,Pn.isTypedArray=$s,Pn.isUndefined=function(t){return void 0===t},Pn.isWeakMap=function(t){return Ys(t)&&eo(t)==x},Pn.isWeakSet=function(t){return Ys(t)&&"[object WeakSet]"==pi(t)},Pn.join=function(t,e){return null==t?"":rn.call(t,e)},Pn.kebabCase=Ra,Pn.last=Uo,Pn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return void 0!==n&&(r=(r=ra(n))<0?sn(i+r,0):an(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):_e(t,be,r,!0)},Pn.lowerCase=Aa,Pn.lowerFirst=Da,Pn.lt=ta,Pn.lte=ea,Pn.max=function(t){return t&&t.length?ii(t,Wa,di):void 0},Pn.maxBy=function(t,e){return t&&t.length?ii(t,Zr(e,2),di):void 0},Pn.mean=function(t){return xe(t,Wa)},Pn.meanBy=function(t,e){return xe(t,Zr(e,2))},Pn.min=function(t){return t&&t.length?ii(t,Wa,Ni):void 0},Pn.minBy=function(t,e){return t&&t.length?ii(t,Zr(e,2),Ni):void 0},Pn.stubArray=ou,Pn.stubFalse=su,Pn.stubObject=function(){return{}},Pn.stubString=function(){return""},Pn.stubTrue=function(){return!0},Pn.multiply=fu,Pn.nth=function(t,e){return t&&t.length?ki(t,ra(e)):void 0},Pn.noConflict=function(){return qt._===this&&(qt._=Ot),this},Pn.noop=Qa,Pn.now=ys,Pn.pad=function(t,e,n){t=ua(t);var i=(e=ra(e))?ze(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Tr($e(r),n)+t+Tr(Qe(r),n)},Pn.padEnd=function(t,e,n){t=ua(t);var i=(e=ra(e))?ze(t):0;return e&&i<e?t+Tr(e-i,n):t},Pn.padStart=function(t,e,n){t=ua(t);var i=(e=ra(e))?ze(t):0;return e&&i<e?Tr(e-i,n)+t:t},Pn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),ln(ua(t).replace(W,""),e||0)},Pn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&so(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=ia(t),void 0===e?(e=t,t=0):e=ia(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=cn();return an(t+r*(e-t+Ut("1e-"+((r+"").length-1))),e)}return Ai(t,e)},Pn.reduce=function(t,e,n){var i=Rs(t)?fe:we,r=arguments.length<3;return i(t,Zr(e,4),n,r,ti)},Pn.reduceRight=function(t,e,n){var i=Rs(t)?pe:we,r=arguments.length<3;return i(t,Zr(e,4),n,r,ei)},Pn.repeat=function(t,e,n){return e=(n?so(t,e,n):void 0===e)?1:ra(e),Di(ua(t),e)},Pn.replace=function(){var t=arguments,e=ua(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Pn.result=function(t,e,n){var i=-1,r=(e=sr(e,t)).length;for(r||(r=1,t=void 0);++i<r;){var o=null==t?void 0:t[Oo(e[i])];void 0===o&&(i=r,o=n),t=Vs(o)?o.call(t):o}return t},Pn.round=pu,Pn.runInContext=t,Pn.sample=function(t){return(Rs(t)?jn:Gi)(t)},Pn.size=function(t){if(null==t)return 0;if(Ds(t))return Js(t)?ze(t):t.length;var e=eo(t);return e==d||e==v?t.size:wi(t).length},Pn.snakeCase=Fa,Pn.some=function(t,e,n){var i=Rs(t)?de:Yi;return n&&so(t,e,n)&&(e=void 0),i(t,Zr(e,3))},Pn.sortedIndex=function(t,e){return Xi(t,e)},Pn.sortedIndexBy=function(t,e,n){return Wi(t,e,Zr(n,2))},Pn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=Xi(t,e);if(i<n&&ks(t[i],e))return i}return-1},Pn.sortedLastIndex=function(t,e){return Xi(t,e,!0)},Pn.sortedLastIndexBy=function(t,e,n){return Wi(t,e,Zr(n,2),!0)},Pn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Xi(t,e,!0)-1;if(ks(t[n],e))return n}return-1},Pn.startCase=Ga,Pn.startsWith=function(t,e,n){return t=ua(t),n=null==n?0:Zn(ra(n),0,t.length),e=Ki(e),t.slice(n,n+e.length)==e},Pn.subtract=du,Pn.sum=function(t){return t&&t.length?Ne(t,Wa):0},Pn.sumBy=function(t,e){return t&&t.length?Ne(t,Zr(e,2)):0},Pn.template=function(t,e,n){var i=Pn.templateSettings;n&&so(t,e,n)&&(e=void 0),t=ua(t),e=ha({},e,i,jr);var r,o,s=ha({},e.imports,i.imports,jr),a=xa(s),u=Se(s,a),l=0,c=e.interpolate||lt,h="__p += '",f=gt((e.escape||lt).source+"|"+c.source+"|"+(c===V?et:lt).source+"|"+(e.evaluate||lt).source+"|$","g"),p="//# sourceURL="+(Et.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Dt+"]")+"\n";t.replace(f,(function(e,n,i,s,a,u){return i||(i=s),h+=t.slice(l,u).replace(ct,De),n&&(r=!0,h+="' +\n__e("+n+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),h+="';\n";var d=Et.call(e,"variable")&&e.variable;if(d){if($.test(d))throw new ht("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(L,""):h).replace(M,"$1").replace(R,"$1;"),h="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Ba((function(){return ft(a,p+"return "+h).apply(void 0,u)}));if(g.source=h,Us(g))throw g;return g},Pn.times=function(t,e){if((t=ra(t))<1||t>9007199254740991)return[];var n=4294967295,i=an(t,4294967295);t-=4294967295;for(var r=Ce(i,e=Zr(e));++n<t;)e(n);return r},Pn.toFinite=ia,Pn.toInteger=ra,Pn.toLength=oa,Pn.toLower=function(t){return ua(t).toLowerCase()},Pn.toNumber=sa,Pn.toSafeInteger=function(t){return t?Zn(ra(t),-9007199254740991,9007199254740991):0===t?t:0},Pn.toString=ua,Pn.toUpper=function(t){return ua(t).toUpperCase()},Pn.trim=function(t,e,n){if((t=ua(t))&&(n||void 0===e))return Oe(t);if(!t||!(e=Ki(e)))return t;var i=qe(t),r=qe(e);return ur(i,Te(i,r),Le(i,r)+1).join("")},Pn.trimEnd=function(t,e,n){if((t=ua(t))&&(n||void 0===e))return t.slice(0,Ye(t)+1);if(!t||!(e=Ki(e)))return t;var i=qe(t);return ur(i,0,Le(i,qe(e))+1).join("")},Pn.trimStart=function(t,e,n){if((t=ua(t))&&(n||void 0===e))return t.replace(W,"");if(!t||!(e=Ki(e)))return t;var i=qe(t);return ur(i,Te(i,qe(e))).join("")},Pn.truncate=function(t,e){var n=30,i="...";if(qs(e)){var r="separator"in e?e.separator:r;n="length"in e?ra(e.length):n,i="omission"in e?Ki(e.omission):i}var o=(t=ua(t)).length;if(Fe(t)){var s=qe(t);o=s.length}if(n>=o)return t;var a=n-ze(i);if(a<1)return i;var u=s?ur(s,0,a).join(""):t.slice(0,a);if(void 0===r)return u+i;if(s&&(a+=u.length-a),Zs(r)){if(t.slice(a).search(r)){var l,c=u;for(r.global||(r=gt(r.source,ua(nt.exec(r))+"g")),r.lastIndex=0;l=r.exec(c);)var h=l.index;u=u.slice(0,void 0===h?a:h)}}else if(t.indexOf(Ki(r),a)!=a){var f=u.lastIndexOf(r);f>-1&&(u=u.slice(0,f))}return u+i},Pn.unescape=function(t){return(t=ua(t))&&F.test(t)?t.replace(A,Xe):t},Pn.uniqueId=function(t){var e=++It;return ua(t)+e},Pn.upperCase=ja,Pn.upperFirst=Ua,Pn.each=us,Pn.eachRight=ls,Pn.first=Do,Ja(Pn,(au={},ui(Pn,(function(t,e){Et.call(Pn.prototype,e)||(au[e]=t)})),au),{chain:!1}),Pn.VERSION="4.17.21",re(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Pn[t].placeholder=Pn})),re(["drop","take"],(function(t,e){Ln.prototype[t]=function(n){n=void 0===n?1:sn(ra(n),0);var i=this.__filtered__&&!e?new Ln(this):this.clone();return i.__filtered__?i.__takeCount__=an(n,i.__takeCount__):i.__views__.push({size:an(n,4294967295),type:t+(i.__dir__<0?"Right":"")}),i},Ln.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),re(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Ln.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Zr(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),re(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Ln.prototype[t]=function(){return this[n](1).value()[0]}})),re(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Ln.prototype[t]=function(){return this.__filtered__?new Ln(this):this[n](1)}})),Ln.prototype.compact=function(){return this.filter(Wa)},Ln.prototype.find=function(t){return this.filter(t).head()},Ln.prototype.findLast=function(t){return this.reverse().find(t)},Ln.prototype.invokeMap=Fi((function(t,e){return"function"==typeof t?new Ln(this):this.map((function(n){return vi(n,t,e)}))})),Ln.prototype.reject=function(t){return this.filter(Ns(Zr(t)))},Ln.prototype.slice=function(t,e){t=ra(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Ln(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=ra(e))<0?n.dropRight(-e):n.take(e-t)),n)},Ln.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ln.prototype.toArray=function(){return this.take(4294967295)},ui(Ln.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=Pn[i?"take"+("last"==e?"Right":""):e],o=i||/^find/.test(e);r&&(Pn.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,a=e instanceof Ln,u=s[0],l=a||Rs(e),c=function(t){var e=r.apply(Pn,he([t],s));return i&&h?e[0]:e};l&&n&&"function"==typeof u&&1!=u.length&&(a=l=!1);var h=this.__chain__,f=!!this.__actions__.length,p=o&&!h,d=a&&!f;if(!o&&l){e=d?e:new Ln(this);var g=t.apply(e,s);return g.__actions__.push({func:is,args:[c],thisArg:void 0}),new Tn(g,h)}return p&&d?t.apply(this,s):(g=this.thru(c),p?i?g.value()[0]:g.value():g)})})),re(["pop","push","shift","sort","splice","unshift"],(function(t){var e=vt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Pn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Rs(r)?r:[],t)}return this[n]((function(n){return e.apply(Rs(n)?n:[],t)}))}})),ui(Ln.prototype,(function(t,e){var n=Pn[e];if(n){var i=n.name+"";Et.call(mn,i)||(mn[i]=[]),mn[i].push({name:e,func:n})}})),mn[Or(void 0,2).name]=[{name:"wrapper",func:void 0}],Ln.prototype.clone=function(){var t=new Ln(this.__wrapped__);return t.__actions__=yr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=yr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=yr(this.__views__),t},Ln.prototype.reverse=function(){if(this.__filtered__){var t=new Ln(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Ln.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Rs(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=an(e,t+s);break;case"takeRight":t=sn(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=o.start,a=o.end,u=a-s,l=i?a:s-1,c=this.__iteratees__,h=c.length,f=0,p=an(u,this.__takeCount__);if(!n||!i&&r==u&&p==u)return er(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var g=-1,y=t[l+=e];++g<h;){var _=c[g],v=_.type,m=(0,_.iteratee)(y);if(2==v)y=m;else if(!m){if(1==v)continue t;break t}}d[f++]=y}return d},Pn.prototype.at=rs,Pn.prototype.chain=function(){return ns(this)},Pn.prototype.commit=function(){return new Tn(this.value(),this.__chain__)},Pn.prototype.next=function(){void 0===this.__values__&&(this.__values__=na(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Pn.prototype.plant=function(t){for(var e,n=this;n instanceof kn;){var i=So(n);i.__index__=0,i.__values__=void 0,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},Pn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Ln){var e=t;return this.__actions__.length&&(e=new Ln(this)),(e=e.reverse()).__actions__.push({func:is,args:[qo],thisArg:void 0}),new Tn(e,this.__chain__)}return this.thru(qo)},Pn.prototype.toJSON=Pn.prototype.valueOf=Pn.prototype.value=function(){return er(this.__wrapped__,this.__actions__)},Pn.prototype.first=Pn.prototype.head,ge&&(Pn.prototype[ge]=function(){return this}),Pn}();qt._=We,void 0===(i=(function(){return We}).call(e,n,e,t))||(t.exports=i)}).call(this)}).call(this,n("aYSr")(t))},"q/Q7":function(t,e,n){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var r=n("fJCm"),o=n("i2fC"),s=i(n("wQqx"));e.default=function t(e,n,i){void 0===i&&(i={});var a=o.getGeom(e),u=o.getGeom(n);if("Polygon"===a.type&&"Polygon"===u.type){var l=s.intersection(a.coordinates,u.coordinates);if(null===l||0===l.length)return null;if(1===l.length){var c=l[0][0][0],h=l[0][0][l[0][0].length-1];return c[0]===h[0]&&c[1]===h[1]?r.polygon(l[0],i.properties):null}return r.multiPolygon(l,i.properties)}if("MultiPolygon"===a.type){for(var f=[],p=0,d=a.coordinates;p<d.length;p++){var g=t(o.getGeom(r.polygon(d[p])),u);if(g){var y=o.getGeom(g);if("Polygon"===y.type)f.push(y.coordinates);else{if("MultiPolygon"!==y.type)throw new Error("intersection is invalid");f=f.concat(y.coordinates)}}}return 0===f.length?null:1===f.length?r.polygon(f[0],i.properties):r.multiPolygon(f,i.properties)}if("MultiPolygon"===u.type)return t(u,a);throw new Error("poly1 and poly2 must be either polygons or multiPolygons")}},qnX1:function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,r=Object.prototype.toString,o=function(t){return!(i&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===r.call(t)},s=function(t){return!!o(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==r.call(t)&&"[object Function]"===r.call(t.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,t.exports=a?o:s},rHrS:function(t,e,n){"use strict";var i=n("MicU"),r=n.n(i),o=n("vog+"),s=n("lRKV"),a=n("QRdp"),u=function(){function t(t){this.rbush_=new r.a(t),this.items_={}}return t.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Object(s.c)(e)]=n},t.prototype.load=function(t,e){for(var n=new Array(e.length),i=0,r=e.length;i<r;i++){var o=t[i],a=e[i],u={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[i]=u,this.items_[Object(s.c)(a)]=u}this.rbush_.load(n)},t.prototype.remove=function(t){var e=Object(s.c)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},t.prototype.update=function(t,e){var n=this.items_[Object(s.c)(e)],i=[n.minX,n.minY,n.maxX,n.maxY];Object(o.p)(i,t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var n,i=0,r=t.length;i<r;i++)if(n=e(t[i]))return n;return n},t.prototype.isEmpty=function(){return Object(a.d)(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Object(o.k)(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}();e.a=u},rKV5:function(t,e,n){"use strict";var i,r=n("fdeV"),o=n("/GEF"),s=n("DiD3"),a=n("jFox"),u=n("yki2"),l=n("lRKV"),c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function h(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}var f,p=function(t){function e(){return t.call(this)||this}return c(e,t),e.prototype.getType=function(){return u.a.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(h(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(h(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return Object(l.b)()},e.prototype.readFeaturesFromObject=function(t,e){return Object(l.b)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(h(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return Object(l.b)()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(h(t))},e.prototype.readProjectionFromObject=function(t){return Object(l.b)()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return Object(l.b)()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return Object(l.b)()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return Object(l.b)()},e}(a.a),d=n("5urs"),g=n("vxo4"),y=n("Qs0z"),_=n("4KU7"),v=n("oVSo"),m=n("hWN6"),b=n("SHzd"),x=n("QRdp"),E=n("A5l+"),I=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),w=function(t){function e(e){var n=this,i=e||{};return(n=t.call(this)||this).dataProjection=Object(E.g)(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(n.defaultFeatureProjection=Object(E.g)(i.featureProjection)),n.geometryName_=i.geometryName,n.extractGeometryName_=i.extractGeometryName,n}return I(e,t),e.prototype.readFeatureFromObject=function(t,e){var n,i=N((n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),o=new r.a;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&o.setGeometryName(n.geometry_name),o.setGeometry(i),"id"in n&&o.setId(n.id),n.properties&&o.setProperties(n.properties,!0),o},e.prototype.readFeaturesFromObject=function(t,e){var n=null;if("FeatureCollection"===t.type){n=[];for(var i=t.features,r=0,o=i.length;r<o;++r)n.push(this.readFeatureFromObject(i[r],e))}else n=[this.readFeatureFromObject(t,e)];return n},e.prototype.readGeometryFromObject=function(t,e){return N(t,e)},e.prototype.readProjectionFromObject=function(t){var e,n=t.crs;return n?"name"==n.type?e=Object(E.g)(n.properties.name):"EPSG"===n.type?e=Object(E.g)("EPSG:"+n.properties.code):Object(b.a)(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={type:"Feature",geometry:null,properties:null},i=t.getId();if(void 0!==i&&(n.id=i),!t.hasProperties())return n;var r=t.getProperties(),o=t.getGeometry();return o&&(n.geometry=C(o,e),delete r[t.getGeometryName()]),Object(x.d)(r)||(n.properties=r),n},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}},e.prototype.writeGeometryObject=function(t,e){return C(t,this.adaptOptions(e))},e}(p);function N(t,e){if(!t)return null;var n;switch(t.type){case s.a.POINT:n=function(t){return new v.a(t.coordinates)}(t);break;case s.a.LINE_STRING:n=function(t){return new d.a(t.coordinates)}(t);break;case s.a.POLYGON:n=function(t){return new m.a(t.coordinates)}(t);break;case s.a.MULTI_POINT:n=function(t){return new y.a(t.coordinates)}(t);break;case s.a.MULTI_LINE_STRING:n=function(t){return new g.a(t.coordinates)}(t);break;case s.a.MULTI_POLYGON:n=function(t){return new _.a(t.coordinates)}(t);break;case s.a.GEOMETRY_COLLECTION:n=function(t,e){var n=t.geometries.map((function(t){return N(t,void 0)}));return new o.a(n)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return Object(a.b)(n,!1,e)}function C(t,e){var n,i=(t=Object(a.b)(t,!0,e)).getType();switch(i){case s.a.POINT:n=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case s.a.LINE_STRING:n=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case s.a.POLYGON:n=function(t,e){var n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case s.a.MULTI_POINT:n=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case s.a.MULTI_LINE_STRING:n=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case s.a.MULTI_POLYGON:n=function(t,e){var n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case s.a.GEOMETRY_COLLECTION:n=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var n=Object(x.a)({},e);return delete n.featureProjection,C(t,n)}))}}(t,e);break;case s.a.CIRCLE:n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return n}e.a=w},usjY:function(t,e,n){"use strict";var i=TypeError,r=Object.getOwnPropertyDescriptor;if(r)try{r({},"")}catch(y){r=null}var o=function(){throw new i},s=r?function(){try{return o}catch(t){try{return r(arguments,"callee").get}catch(e){return o}}}():o,a=n("V+Bs")(),u=Object.getPrototypeOf||function(t){return t.__proto__},l="undefined"==typeof Uint8Array?void 0:u(Uint8Array),c={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":a?u([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":a?u(u([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&a?u((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&a?u((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":a?u(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":a?Symbol:void 0,"%SymbolPrototype%":a?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":s,"%TypedArray%":l,"%TypedArrayPrototype%":l?l.prototype:void 0,"%TypeError%":i,"%TypeErrorPrototype%":i.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},h=n("5L5q").call(Function.call,String.prototype.replace),f=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,p=/\\(\\)?/g,d=function(t){var e=[];return h(t,f,(function(t,n,i,r){e[e.length]=i?h(r,p,"$1"):n||t})),e},g=function(t,e){if(!(t in c))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===c[t]&&!e)throw new i("intrinsic "+t+" exists, but is not available. Please file an issue!");return c[t]};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var n=d(t),o=g("%"+(n.length>0?n[0]:"")+"%",e),s=1;s<n.length;s+=1)if(null!=o)if(r&&s+1>=n.length){var a=r(o,n[s]);if(!e&&!(n[s]in o))throw new i("base intrinsic for "+t+" exists, but the property is not available.");o=a?a.get||a.value:o[n[s]]}else o=o[n[s]];return o}},vY6e:function(t,e,n){"use strict";var i=n("5L5q"),r=n("usjY"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||i.call(s,o);t.exports=function(){return a(i,s,arguments)},t.exports.apply=function(){return a(i,o,arguments)}},wQqx:function(t,e,n){!function(t){"use strict";function e(t,e){return t>e?1:t<e?-1:0}var n=function(t,n){void 0===t&&(t=e),void 0===n&&(n=!1),this._compare=t,this._root=null,this._size=0,this._noDuplicates=!!n},i={size:{configurable:!0}};function r(t,e,n){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!o(e,n)||e.isVertical()?e.prevInResult:e)),t.inResult=o(t,n)}function o(t,e){switch(t.type){case 0:switch(e){case 0:return!t.otherInOut;case 1:return t.otherInOut;case 2:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case 3:return!0}break;case 2:return 0===e||1===e;case 3:return 2===e;case 1:return!1}return!1}n.prototype.rotateLeft=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e},n.prototype.rotateRight=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e},n.prototype._splay=function(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}},n.prototype.splay=function(t){for(var e,n,i,r,o;t.parent;)(n=(e=t.parent).parent)&&n.parent?((i=n.parent).left===n?i.left=t:i.right=t,t.parent=i):(t.parent=null,this._root=t),r=t.left,o=t.right,t===e.left?(n&&(n.left===e?(e.right?(n.left=e.right,n.left.parent=n):n.left=null,e.right=n,n.parent=e):(r?(n.right=r,r.parent=n):n.right=null,t.left=n,n.parent=t)),o?(e.left=o,o.parent=e):e.left=null,t.right=e,e.parent=t):(n&&(n.right===e?(e.left?(n.right=e.left,n.right.parent=n):n.right=null,e.left=n,n.parent=e):(o?(n.left=o,o.parent=n):n.left=null,t.right=n,n.parent=t)),r?(e.right=r,r.parent=e):e.right=null,t.left=e,e.parent=t)},n.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)},n.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},n.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},n.prototype.insert=function(t,e){var n=this._root,i=null,r=this._compare;if(this._noDuplicates)for(;n;){if(i=n,0===r(n.key,t))return;n=r(n.key,t)<0?n.right:n.left}else for(;n;)i=n,n=r(n.key,t)<0?n.right:n.left;return n={key:t,data:e,left:null,right:null,parent:i},i?r(i.key,n.key)<0?i.right=n:i.left=n:this._root=n,this.splay(n),this._size++,n},n.prototype.find=function(t){for(var e=this._root,n=this._compare;e;){var i=n(e.key,t);if(i<0)e=e.right;else{if(!(i>0))return e;e=e.left}}return null},n.prototype.contains=function(t){for(var e=this._root,n=this._compare;e;){var i=n(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},n.prototype.remove=function(t){var e=this.find(t);if(!e)return!1;if(this.splay(e),e.left)if(e.right){var n=this.minNode(e.right);n.parent!==e&&(this.replace(n,n.right),n.right=e.right,n.right.parent=n),this.replace(e,n),n.left=e.left,n.left.parent=n}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0},n.prototype.removeNode=function(t){if(!t)return!1;if(this.splay(t),t.left)if(t.right){var e=this.minNode(t.right);e.parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0},n.prototype.erase=function(t){var e=this.find(t);if(e){this.splay(e);var n=e.left,i=e.right,r=null;n&&(n.parent=null,r=this.maxNode(n),this.splay(r),this._root=r),i&&(n?r.right=i:this._root=i,i.parent=r),this._size--}},n.prototype.pop=function(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},n.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)t=e,e=e.parent;return e},n.prototype.prev=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)t=e,e=e.parent;return e},n.prototype.forEach=function(t){for(var e=this._root,n=[],i=!1,r=0;!i;)e?(n.push(e),e=e.left):n.length>0?(t(e=n.pop(),r++),e=e.right):i=!0;return this},n.prototype.range=function(t,e,n,i){for(var r=[],o=this._compare,s=this._root;0!==r.length||s;)if(s)r.push(s),s=s.left;else{if(o((s=r.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(i,s))return this;s=s.right}return this},n.prototype.keys=function(){for(var t=this._root,e=[],n=[],i=!1;!i;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),n.push(t.key),t=t.right):i=!0;return n},n.prototype.values=function(){for(var t=this._root,e=[],n=[],i=!1;!i;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),n.push(t.data),t=t.right):i=!0;return n},n.prototype.at=function(t){for(var e=this._root,n=[],i=!1,r=0;!i;)if(e)n.push(e),e=e.left;else if(n.length>0){if(e=n.pop(),r===t)return e;r++,e=e.right}else i=!0;return null},n.prototype.load=function(t,e,n){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===n&&(n=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var i=t.length;return n&&function t(e,n,i,r,o){if(!(i>=r)){for(var s=e[i+r>>1],a=i-1,u=r+1;;){do{a++}while(o(e[a],s)<0);do{u--}while(o(e[u],s)>0);if(a>=u)break;var l=e[a];e[a]=e[u],e[u]=l,l=n[a],n[a]=n[u],n[u]=l}t(e,n,i,u,o),t(e,n,u+1,r,o)}}(t,e,0,i-1,this._compare),this._root=function t(e,n,i,r,o){var s=o-r;if(s>0){var a=r+Math.floor(s/2),u={key:n[a],data:i[a],parent:e};return u.left=t(u,n,i,r,a),u.right=t(u,n,i,a+1,o),u}return null}(null,t,e,0,i),this._size=i,this},n.prototype.min=function(){var t=this.minNode(this._root);return t?t.key:null},n.prototype.max=function(){var t=this.maxNode(this._root);return t?t.key:null},n.prototype.isEmpty=function(){return null===this._root},i.size.get=function(){return this._size},n.createTree=function(t,e,i,r,o){return new n(i,o).load(t,e,r)},Object.defineProperties(n.prototype,i);var s=function(t,e,n,i,r){this.left=e,this.point=t,this.otherEvent=n,this.isSubject=i,this.type=r||0,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1,this.isExteriorRing=!0};function a(t,e){return t[0]===e[0]&&t[1]===e[1]}function u(t,e,n){return(t[0]-n[0])*(e[1]-n[1])-(e[0]-n[0])*(t[1]-n[1])}function l(t,e){var n=t.point,i=e.point;return n[0]>i[0]?1:n[0]<i[0]?-1:n[1]!==i[1]?n[1]>i[1]?1:-1:function(t,e,n,i){return t.left!==e.left?t.left?1:-1:0!==u(n,t.otherEvent.point,e.otherEvent.point)?t.isBelow(e.otherEvent.point)?-1:1:!t.isSubject&&e.isSubject?1:-1}(t,e,n)}function c(t,e,n){var i=new s(e,!1,t,t.isSubject),r=new s(e,!0,t.otherEvent,t.isSubject);return a(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),i.contourId=r.contourId=t.contourId,l(r,t.otherEvent)>0&&(t.otherEvent.left=!0,r.left=!1),t.otherEvent.otherEvent=r,t.otherEvent=i,n.push(r),n.push(i),n}function h(t,e){return t[0]*e[1]-t[1]*e[0]}function f(t,e){return t[0]*e[0]+t[1]*e[1]}function p(t,e,n){var i=function(t,e,n,i,r){var o=[e[0]-t[0],e[1]-t[1]],s=[i[0]-n[0],i[1]-n[1]];function a(t,e,n){return[t[0]+e*n[0],t[1]+e*n[1]]}var u=[n[0]-t[0],n[1]-t[1]],l=h(o,s),c=l*l,p=f(o,o);if(c>0){var d=h(u,s)/l;if(d<0||d>1)return null;var g=h(u,o)/l;return g<0||g>1?null:0===d||1===d?[a(t,d,o)]:0===g||1===g?[a(n,g,s)]:[a(t,d,o)]}if((c=(l=h(u,o))*l)>0)return null;var y=f(o,u)/p,_=y+f(o,s)/p,v=Math.min(y,_),m=Math.max(y,_);return v<=1&&m>=0?1===v?[a(t,v>0?v:0,o)]:0===m?[a(t,m<1?m:1,o)]:[a(t,v>0?v:0,o),a(t,m<1?m:1,o)]:null}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),r=i?i.length:0;if(0===r)return 0;if(1===r&&(a(t.point,e.point)||a(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===r&&t.isSubject===e.isSubject)return 0;if(1===r)return a(t.point,i[0])||a(t.otherEvent.point,i[0])||c(t,i[0],n),a(e.point,i[0])||a(e.otherEvent.point,i[0])||c(e,i[0],n),1;var o=[],s=!1,u=!1;return a(t.point,e.point)?s=!0:1===l(t,e)?o.push(e,t):o.push(t,e),a(t.otherEvent.point,e.otherEvent.point)?u=!0:1===l(t.otherEvent,e.otherEvent)?o.push(e.otherEvent,t.otherEvent):o.push(t.otherEvent,e.otherEvent),s&&u||s?(e.type=1,t.type=e.inOut===t.inOut?2:3,s&&!u&&c(o[1].otherEvent,o[0].point,n),2):u?(c(o[0],o[1].point,n),3):o[0]!==o[3].otherEvent?(c(o[0],o[1].point,n),c(o[1],o[2].point,n),3):(c(o[0],o[1].point,n),c(o[3].otherEvent,o[2].point,n),3)}function d(t,e){if(t===e)return 0;if(0!==u(t.point,t.otherEvent.point,e.point)||0!==u(t.point,t.otherEvent.point,e.otherEvent.point))return a(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===l(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;var n=t.point,i=e.point;return n[0]===i[0]&&n[1]===i[1]?(n=t.otherEvent.point)[0]===(i=e.otherEvent.point)[0]&&n[1]===i[1]?0:t.contourId>e.contourId?1:-1:1===l(t,e)?1:-1}function g(t,e,n,i){var r=t+1,o=e.length;if(r>o-1)return t-1;for(var s=e[t].point,a=e[r].point;r<o&&a[0]===s[0]&&a[1]===s[1];){if(!n[r])return r;a=e[++r].point}for(r=t-1;n[r]&&r>=i;)r--;return r}s.prototype.isBelow=function(t){var e=this.point,n=this.otherEvent.point;return this.left?(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])>0:(n[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(n[1]-t[1])>0},s.prototype.isAbove=function(t){return!this.isBelow(t)},s.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},s.prototype.clone=function(){var t=new s(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.inResult=this.inResult,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t};var y=v,_=v;function v(t,e){if(!(this instanceof v))return new v(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||m,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function m(t,e){return t<e?-1:t>e?1:0}v.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,r)>=0)break;e[t]=a,t=o}e[t]=r}},y.default=_;var b=Math.max,x=Math.min,E=0;function I(t,e,n,i,r,o){var a,u,c,h,f,p;for(a=0,u=t.length-1;a<u;a++)if(h=t[a+1],f=new s(c=t[a],!1,void 0,e),p=new s(h,!1,f,e),f.otherEvent=p,c[0]!==h[0]||c[1]!==h[1]){f.contourId=p.contourId=n,o||(f.isExteriorRing=!1,p.isExteriorRing=!1),l(f,p)>0?p.left=!0:f.left=!0;var d=c[0],g=c[1];r[0]=x(r[0],d),r[1]=x(r[1],g),r[2]=b(r[2],d),r[3]=b(r[3],g),i.push(f),i.push(p)}}var w=[];function N(t,e,i){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);var o=function(t,e,n){var i=null;return t.length*e.length==0&&(0===n?i=w:2===n?i=t:1!==n&&3!==n||(i=0===t.length?e:t)),i}(t,e,i);if(o)return o===w?null:o;var s=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],u=function(t,e,n,i,r){var o,s,a,u,c,h,f=new y(null,l);for(a=0,u=t.length;a<u;a++)for(c=0,h=(o=t[a]).length;c<h;c++)(s=0===c)&&E++,I(o[c],!0,E,f,n,s);for(a=0,u=e.length;a<u;a++)for(c=0,h=(o=e[a]).length;c<h;c++)s=0===c,2===r&&(s=!1),s&&E++,I(o[c],!1,E,f,i,s);return f}(t,e,s,a,i);return(o=function(t,e,n,i,r){var o=null;return(n[0]>i[2]||i[0]>n[2]||n[1]>i[3]||i[1]>n[3])&&(0===r?o=w:2===r?o=t:1!==r&&3!==r||(o=t.concat(e))),o}(t,e,s,a,i))?o===w?null:o:function(t,e){var n,i,r,o=function(t){var e,n,i,r,o=[];for(n=0,i=t.length;n<i;n++)((e=t[n]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&o.push(e);for(var s=!1;!s;)for(s=!0,n=0,i=o.length;n<i;n++)n+1<i&&1===l(o[n],o[n+1])&&(r=o[n],o[n]=o[n+1],o[n+1]=r,s=!1);for(n=0,i=o.length;n<i;n++)(e=o[n]).pos=n;for(n=0,i=o.length;n<i;n++)(e=o[n]).left||(r=e.pos,e.pos=e.otherEvent.pos,e.otherEvent.pos=r);return o}(t),s={},a=[];for(n=0,i=o.length;n<i;n++)if(!s[n]){var u=[[]];o[n].isExteriorRing?2===e&&!o[n].isSubject&&a.length>1?a[a.length-1].push(u[0]):a.push(u):2!==e||o[n].isSubject||0!==a.length?0===a.length?a.push([[u]]):a[a.length-1].push(u[0]):a.push(u);var c=a.length-1,h=n;for(u[0].push(o[n].point);h>=n;)r=o[h],s[h]=!0,r.left?(r.resultInOut=!1,r.contourId=c):(r.otherEvent.resultInOut=!0,r.otherEvent.contourId=c),s[h=r.pos]=!0,u[0].push(o[h].point),h=g(h,o,s,n);s[h=-1===h?n:h]=s[(r=o[h]).pos]=!0,r.otherEvent.resultInOut=!0,r.otherEvent.contourId=c}return a}(function(t,e,i,o,s,a){for(var u,l,c,h=new n(d),f=[],g=Math.min(o[2],s[2]);0!==t.length;){var y=t.pop();if(f.push(y),0===a&&y.point[0]>g||2===a&&y.point[0]>o[2])break;if(y.left){l=u=h.insert(y),u=u!==(c=h.minNode())?h.prev(u):null,l=h.next(l);var _=u?u.key:null;if(r(y,_,a),l&&2===p(y,l.key,t)&&(r(y,_,a),r(y,l.key,a)),u&&2===p(u.key,y,t)){var v=u;r(_,(v=v!==c?h.prev(v):null)?v.key:null,a),r(y,_,a)}}else l=u=h.find(y=y.otherEvent),u&&l&&(u=u!==c?h.prev(u):null,l=h.next(l),h.remove(y),l&&u&&p(u.key,l.key,t))}return f}(u,0,0,s,a,i),i)}t.union=function(t,e){return N(t,e,1)},t.diff=function(t,e){return N(t,e,2)},t.xor=function(t,e){return N(t,e,3)},t.intersection=function(t,e){return N(t,e,0)},t.operations={UNION:1,DIFFERENCE:2,INTERSECTION:0,XOR:3},Object.defineProperty(t,"__esModule",{value:!0})}(e)},y1k7:function(t,e,n){"use strict";var i=n("+cQG"),r=n("rjvG"),o=n("70ZC"),s=n("j/Z9"),a=n("fzNE"),u=n("rHrS"),l=n("qsAS"),c=n("MMQm"),h=n("8f5B"),f=n("h7by");function p(t,e){return[[-1/0,-1/0,1/0,1/0]]}var d,g=n("SHzd"),y=n("vog+"),_=n("I/d5"),v=n("lRKV"),m=n("QRdp"),b=n("HK6I"),x=n("6IIn"),E=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),I=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.feature=n,r.features=i,r}return E(e,t),e}(o.a),w=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{attributions:r.attributions,projection:void 0,state:c.a.READY,wrapX:void 0===r.wrapX||r.wrapX})||this).loader_=f.c,n.format_=r.format,n.overlaps_=void 0===r.overlaps||r.overlaps,n.url_=r.url,void 0!==r.loader?n.loader_=r.loader:void 0!==n.url_&&(Object(g.a)(n.format_,7),n.loader_=Object(x.b)(n.url_,n.format_)),n.strategy_=void 0!==r.strategy?r.strategy:p;var o,s,a=void 0===r.useSpatialIndex||r.useSpatialIndex;return n.featuresRtree_=a?new u.a:null,n.loadedExtentsRtree_=new u.a,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null,Array.isArray(r.features)?s=r.features:r.features&&(s=(o=r.features).getArray()),a||void 0!==o||(o=new i.a(s)),void 0!==s&&n.addFeaturesInternal(s),void 0!==o&&n.bindFeaturesCollection_(o),n}return E(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(v.c)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new I(h.a.ADDFEATURE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(b.a)(e,s.a.CHANGE,this.handleFeatureChange_,this),Object(b.a)(e,a.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var n=!0,i=e.getId();return void 0!==i&&(i.toString()in this.idIndex_?n=!1:this.idIndex_[i.toString()]=e),n&&(Object(g.a)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],i=[],r=0,o=t.length;r<o;r++){var s=t[r],a=Object(v.c)(s);this.addToIndex_(a,s)&&n.push(s)}r=0;for(var u=n.length;r<u;r++){s=n[r],a=Object(v.c)(s),this.setupChangeEvents_(a,s);var l=s.getGeometry();if(l){var c=l.getExtent();e.push(c),i.push(s)}else this.nullGeometryFeatures_[a]=s}this.featuresRtree_&&this.featuresRtree_.load(e,i),r=0;for(var f=n.length;r<f;r++)this.dispatchEvent(new I(h.a.ADDFEATURE,n[r]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(h.a.ADDFEATURE,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(h.a.REMOVEFEATURE,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(r.a.ADD,(function(t){e||(e=!0,this.addFeature(t.element),e=!1)}).bind(this)),t.addEventListener(r.a.REMOVE,(function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}).bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(b.c);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var i=new I(h.a.CLEAR);this.dispatchEvent(i),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],(function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){var i=e(n);if(i)return i}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(m.d)(this.nullGeometryFeatures_)||Object(_.c)(t,Object(m.c)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0],i=t[1],r=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],u=e||f.b;return this.featuresRtree_.forEachInExtent(a,(function(t){if(u(t)){var e=t.getGeometry(),l=s;if((s=e.closestPointXY(n,i,o,s))<l){r=t;var c=Math.sqrt(s);a[0]=n-c,a[1]=i-c,a[2]=n+c,a[3]=i+c}}})),r},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,n=Object(v.c)(e),i=e.getGeometry();if(i){var r=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var o=e.getId();if(void 0!==o){var s=o.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new I(h.a.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(v.c)(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(m.d)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,n){var i=this.loadedExtentsRtree_,r=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var a=r[t];i.forEachInExtent(a,(function(t){return Object(y.g)(t.extent,a)}))||(s.dispatchEvent(new I(h.a.FEATURESLOADSTART)),s.loader_.call(s,a,e,n,(function(t){this.dispatchEvent(new I(h.a.FEATURESLOADEND,void 0,t))}).bind(s),(function(){this.dispatchEvent(new I(h.a.FEATURESLOADERROR))}).bind(s)),i.insert(a,{extent:a.slice()}),s.loading=s.loader_!==f.c)},s=this,a=0,u=r.length;a<u;++a)o(a)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,n=this.loadedExtentsRtree_;n.forEachInExtent(t,(function(n){if(Object(y.p)(n.extent,t))return e=n,!0})),e&&n.remove(e)},e.prototype.removeFeature=function(t){var e=Object(v.c)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Object(v.c)(t);this.featureChangeKeys_[e].forEach(b.c),delete this.featureChangeKeys_[e];var n=t.getId();void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new I(h.a.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Object(g.a)(this.format_,7),this.setLoader(Object(x.b)(t,this.format_))},e}(l.a);e.a=w},"zT+L":function(t,e,n){"use strict";var i=n("ey2t"),r="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,u=a&&function(){var t={};try{for(var e in a(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(n){return!1}}(),l=function(t,e,n,i){var r;(!(e in t)||"function"==typeof(r=i)&&"[object Function]"===o.call(r)&&i())&&(u?a(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},c=function(t,e){var n=arguments.length>2?arguments[2]:{},o=i(e);r&&(o=s.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)l(t,o[a],e[o[a]],n[o[a]])};c.supportsDescriptors=!!u,t.exports=c}}])}();