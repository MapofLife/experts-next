(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+4jp":function(t,e,n){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function i(t){this.message=t||""}function r(t){this.message=t||""}function o(){}function s(t){return null===t?At:t.color}function a(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function l(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function p(){}function f(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var _=function(){};_.prototype.interfaces_=function(){return[]},_.prototype.getClass=function(){return _},_.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var m=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),v=function(){},b={MAX_VALUE:{configurable:!0}};v.isNaN=function(t){return Number.isNaN(t)},v.doubleToLongBits=function(t){return t},v.longBitsToDouble=function(t){return t},v.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(v,b);var x=function(){},E=function(){},I=function(){},N=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},w={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};N.prototype.setOrdinate=function(t,e){switch(t){case N.X:this.x=e;break;case N.Y:this.y=e;break;case N.Z:this.z=e;break;default:throw new m("Invalid ordinate index: "+t)}},N.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!_.equalsWithTolerance(this.x,e.x,n)&&!!_.equalsWithTolerance(this.y,e.y,n)}},N.prototype.getOrdinate=function(t){switch(t){case N.X:return this.x;case N.Y:return this.y;case N.Z:return this.z}throw new m("Invalid ordinate index: "+t)},N.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||v.isNaN(this.z))&&v.isNaN(t.z)},N.prototype.equals=function(t){return t instanceof N&&this.equals2D(t)},N.prototype.equalInZ=function(t,e){return _.equalsWithTolerance(this.z,t.z,e)},N.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},N.prototype.clone=function(){},N.prototype.copy=function(){return new N(this)},N.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},N.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},N.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},N.prototype.hashCode=function(){var t=17;return 37*(t=37*t+N.hashCode(this.x))+N.hashCode(this.y)},N.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},N.prototype.interfaces_=function(){return[x,E,e]},N.prototype.getClass=function(){return N},N.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=v.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},w.DimensionalComparator.get=function(){return C},w.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},w.NULL_ORDINATE.get=function(){return v.NaN},w.X.get=function(){return 0},w.Y.get=function(){return 1},w.Z.get=function(){return 2},Object.defineProperties(N,w);var C=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new m("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};C.prototype.compare=function(t,e){var n=t,i=e,r=C.compare(n.x,i.x);if(0!==r)return r;var o=C.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:C.compare(n.z,i.z)},C.prototype.interfaces_=function(){return[I]},C.prototype.getClass=function(){return C},C.compare=function(t,e){return t<e?-1:t>e?1:v.isNaN(t)?v.isNaN(e)?0:-1:v.isNaN(e)?1:0};var O=function(){};O.prototype.create=function(){},O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O};var P=function(){},S={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};P.prototype.interfaces_=function(){return[]},P.prototype.getClass=function(){return P},P.toLocationSymbol=function(t){switch(t){case P.EXTERIOR:return"e";case P.BOUNDARY:return"b";case P.INTERIOR:return"i";case P.NONE:return"-"}throw new m("Unknown location value: "+t)},S.INTERIOR.get=function(){return 0},S.BOUNDARY.get=function(){return 1},S.EXTERIOR.get=function(){return 2},S.NONE.get=function(){return-1},Object.defineProperties(P,S);var L=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},T=function(){},M={LOG_10:{configurable:!0}};T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T},T.log10=function(t){var e=Math.log(t);return v.isInfinite(e)||v.isNaN(e)?e:e/T.LOG_10},T.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},T.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},T.wrap=function(t,e){return t<0?e- -t%e:t%e},T.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=r;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},T.average=function(t,e){return(t+e)/2},M.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(T,M);var R=function(t){this.str=t};R.prototype.append=function(t){this.str+=t},R.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},R.prototype.toString=function(t){return this.str};var A=function(t){this.value=t};A.prototype.intValue=function(){return this.value},A.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},A.isNaN=function(t){return Number.isNaN(t)};var D=function(){};D.isWhitespace=function(t){return t<=32&&t>=0||127===t},D.toUpperCase=function(t){return t.toUpperCase()};var F=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var i=arguments[0];t.call(this,t.parse(i))}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}},k={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};F.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},F.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=F.magnitude(n._hi),r=F.TEN.pow(i);(n=n.divide(r)).gt(F.TEN)?(n=n.divide(F.TEN),i+=1):n.lt(F.ONE)&&(n=n.multiply(F.TEN),i-=1);for(var o=i+1,s=new R,a=F.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,s.append(h),n=n.subtract(F.valueOf(l)).multiply(F.TEN),c&&n.selfAdd(F.TEN);var p=!0,f=F.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(p=!1),!p)break}return e[0]=i,s.toString()},F.prototype.sqr=function(){return this.multiply(this)},F.prototype.doubleValue=function(){return this._hi+this._lo},F.prototype.subtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},F.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},F.prototype.isZero=function(){return 0===this._hi&&0===this._lo},F.prototype.selfSubtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},F.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},F.prototype.min=function(t){return this.le(t)?this:t},F.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,l=null,c=null,h=null;return this._hi=h=(u=this._hi/n)+(l=(this._hi-(c=u*n)-(h=(r=(l=F.SPLIT*u)-(r=l-u))*(s=(h=F.SPLIT*n)-(s=h-n))-c+r*(a=n-s)+(o=u-r)*s+o*a)+this._lo-u*i)/n),this._lo=u-h+l,this}},F.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},F.prototype.divide=function(){if(arguments[0]instanceof F){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,s=null,a=null,u=null;return n=(o=this._hi/t._hi)-(e=(s=F.SPLIT*o)-(e=s-o)),u=e*(i=(u=F.SPLIT*t._hi)-(i=u-t._hi))-(a=o*t._hi)+e*(r=t._hi-i)+n*i+n*r,new F(u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi),o-u+s)}if("number"==typeof arguments[0]){var l=arguments[0];return v.isNaN(l)?F.createNaN():F.copy(this).selfDivide(l,0)}},F.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},F.prototype.pow=function(t){if(0===t)return F.valueOf(1);var e=new F(this),n=F.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},F.prototype.ceil=function(){if(this.isNaN())return F.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new F(t,e)},F.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},F.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},F.prototype.setValue=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},F.prototype.max=function(t){return this.ge(t)?this:t},F.prototype.sqrt=function(){if(this.isZero())return F.valueOf(0);if(this.isNegative())return F.NaN;var t=1/Math.sqrt(this._hi),e=F.valueOf(this._hi*t),n=this.subtract(e.sqr())._hi*(.5*t);return e.add(n)},F.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null;return this._hi=(n=(r=this._hi+e)+(s=e-(o=r-this._hi)+(this._hi-(r-o))+this._lo))+(i=s+(r-n)),this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var a=arguments[0],u=arguments[1],l=null,c=null,h=null,p=null,f=null,d=null,g=null;f=(p=this._hi+a)-(d=p-this._hi),h=(c=this._lo+u)-(g=c-this._lo);var y=(l=p+(d=(f=a-d+(this._hi-f))+c))+(d=(h=u-g+(this._lo-h))+(d+(p-l))),_=d+(l-y);return this._hi=y,this._lo=_,this}},F.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,l=null;r=(u=F.SPLIT*this._hi)-this._hi,r=u-r;var c=(u=this._hi*n)+(l=r*(s=(l=F.SPLIT*n)-(s=l-n))-u+r*(a=n-s)+(o=this._hi-r)*s+o*a+(this._hi*i+this._lo*n)),h=l+(r=u-c);return this._hi=c,this._lo=h,this}},F.prototype.selfSqr=function(){return this.selfMultiply(this)},F.prototype.floor=function(){if(this.isNaN())return F.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new F(t,e)},F.prototype.negate=function(){return this.isNaN()?this:new F(-this._hi,-this._lo)},F.prototype.clone=function(){},F.prototype.multiply=function(){if(arguments[0]instanceof F){var t=arguments[0];return t.isNaN()?F.createNaN():F.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return v.isNaN(e)?F.createNaN():F.copy(this).selfMultiply(e,0)}},F.prototype.isNaN=function(){return v.isNaN(this._hi)},F.prototype.intValue=function(){return Math.trunc(this._hi)},F.prototype.toString=function(){var t=F.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},F.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;return"."===n.charAt(0)?r="0"+n:i<0?r="0."+F.stringOfChar("0",-i)+n:-1===n.indexOf(".")&&(r=n+F.stringOfChar("0",i-n.length)+".0"),this.isNegative()?"-"+r:r},F.prototype.reciprocal=function(){var t,e,n,i,r=null,o=null,s=null,a=null;t=(n=1/this._hi)-(r=(s=F.SPLIT*n)-(r=s-n)),o=(a=F.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(i=n*this._hi)-(a=r*(o=a-o)-i+r*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new F(u,n-u+s)},F.prototype.toSciNotation=function(){if(this.isZero())return F.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=F.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},F.prototype.abs=function(){return this.isNaN()?F.NaN:this.isNegative()?this.negate():new F(this)},F.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},F.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},F.prototype.add=function(){if(arguments[0]instanceof F){var t=arguments[0];return F.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return F.copy(this).selfAdd(e)}},F.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof F){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},F.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},F.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},F.prototype.trunc=function(){return this.isNaN()?F.NaN:this.isPositive()?this.floor():this.ceil()},F.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},F.prototype.interfaces_=function(){return[e,x,E]},F.prototype.getClass=function(){return F},F.sqr=function(t){return F.valueOf(t).selfMultiply(t)},F.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return F.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new F(e)}},F.sqrt=function(t){return F.valueOf(t).sqrt()},F.parse=function(t){for(var e=0,n=t.length;D.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new F,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,D.isDigit(l)){var c=l-"0";o.selfMultiply(F.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=A.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-u;if(0===f)p=o;else if(f>0){var d=F.TEN.pow(f);p=o.divide(d)}else if(f<0){var g=F.TEN.pow(-f);p=o.multiply(g)}return i?p.negate():p},F.createNaN=function(){return new F(v.NaN,v.NaN)},F.copy=function(t){return new F(t)},F.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},F.stringOfChar=function(t,e){for(var n=new R,i=0;i<e;i++)n.append(t);return n.toString()},k.PI.get=function(){return new F(3.141592653589793,12246467991473532e-32)},k.TWO_PI.get=function(){return new F(6.283185307179586,24492935982947064e-32)},k.PI_2.get=function(){return new F(1.5707963267948966,6123233995736766e-32)},k.E.get=function(){return new F(2.718281828459045,14456468917292502e-32)},k.NaN.get=function(){return new F(v.NaN,v.NaN)},k.EPS.get=function(){return 123259516440783e-46},k.SPLIT.get=function(){return 134217729},k.MAX_PRINT_DIGITS.get=function(){return 32},k.TEN.get=function(){return F.valueOf(10)},k.ONE.get=function(){return F.valueOf(1)},k.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},k.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(F,k);var G=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};G.prototype.interfaces_=function(){return[]},G.prototype.getClass=function(){return G},G.orientationIndex=function(t,e,n){var i=G.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=F.valueOf(e.x).selfAdd(-t.x),o=F.valueOf(e.y).selfAdd(-t.y),s=F.valueOf(n.x).selfAdd(-e.x),a=F.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},G.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},G.intersection=function(t,e,n,i){var r=F.valueOf(i.y).selfSubtract(n.y).selfMultiply(F.valueOf(e.x).selfSubtract(t.x)),o=F.valueOf(i.x).selfSubtract(n.x).selfMultiply(F.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=F.valueOf(i.x).selfSubtract(n.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),u=F.valueOf(i.y).selfSubtract(n.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=F.valueOf(t.x).selfAdd(F.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=F.valueOf(e.x).selfSubtract(t.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),p=F.valueOf(e.y).selfSubtract(t.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(s).doubleValue(),d=F.valueOf(n.y).selfAdd(F.valueOf(i.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new N(c,d)},G.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(o<=0)return G.signum(s);i=r+o}else{if(!(r<0))return G.signum(s);if(o>=0)return G.signum(s);i=-r-o}var a=G.DP_SAFE_EPSILON*i;return s>=a||-s>=a?G.signum(s):2},G.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(G,B);var V=function(){},z={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};z.X.get=function(){return 0},z.Y.get=function(){return 1},z.Z.get=function(){return 2},z.M.get=function(){return 3},V.prototype.setOrdinate=function(t,e,n){},V.prototype.size=function(){},V.prototype.getOrdinate=function(t,e){},V.prototype.getCoordinate=function(){},V.prototype.getCoordinateCopy=function(t){},V.prototype.getDimension=function(){},V.prototype.getX=function(t){},V.prototype.clone=function(){},V.prototype.expandEnvelope=function(t){},V.prototype.copy=function(){},V.prototype.getY=function(t){},V.prototype.toCoordinateArray=function(){},V.prototype.interfaces_=function(){return[E]},V.prototype.getClass=function(){return V},Object.defineProperties(V,z);var j=function(){},U=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(j),q=function(){};q.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++},q.getProperty=function(t){return{"line.separator":"\n"}[t]};var Y=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof N&&arguments[1]instanceof N){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],g=h.y-p.y,y=p.x-h.x,_=h.x*p.y-p.x*h.y,m=f.y-d.y,v=d.x-f.x,b=f.x*d.y-d.x*f.y;this.x=y*b-v*_,this.y=m*_-g*b,this.w=g*v-m*y}};Y.prototype.getY=function(){var t=this.y/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new U;return t},Y.prototype.getX=function(){var t=this.x/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new U;return t},Y.prototype.getCoordinate=function(){var t=new N;return t.x=this.getX(),t.y=this.getY(),t},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-i.y,u=i.x-n.x,l=n.x*i.y-i.x*n.y,c=r*u-a*o,h=(o*l-u*s)/c,p=(a*s-r*l)/c;if(v.isNaN(h)||v.isInfinite(h)||v.isNaN(p)||v.isInfinite(p))throw new U;return new N(h,p)};var X=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof N){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},W={serialVersionUID:{configurable:!0}};X.prototype.getArea=function(){return this.getWidth()*this.getHeight()},X.prototype.equals=function(t){if(!(t instanceof X))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},X.prototype.intersection=function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new X:new X(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)},X.prototype.isNull=function(){return this._maxx<this._minx},X.prototype.getMaxX=function(){return this._maxx},X.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof X){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},X.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof N){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},X.prototype.getMinY=function(){return this._miny},X.prototype.getMinX=function(){return this._minx},X.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},X.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},X.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},X.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},X.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},X.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},X.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},X.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},X.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},X.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},X.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof N){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},X.prototype.centre=function(){return this.isNull()?null:new N((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},X.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},X.prototype.getMaxY=function(){return this._maxy},X.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},X.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+N.hashCode(this._minx))+N.hashCode(this._maxx))+N.hashCode(this._miny))+N.hashCode(this._maxy)},X.prototype.interfaces_=function(){return[x,e]},X.prototype.getClass=function(){return X},X.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(i.y,r.y),c=Math.max(i.y,r.y),l>u||c<a))}},W.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(X,W);var H={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},J=function(t){this.geometryFactory=t||new _e};J.prototype.read=function(t){var e,n;t=t.replace(/[\n\r]/g," ");var i=H.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=H.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),Q[n]&&(e=Q[n].apply(this,[i[2]]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},J.prototype.write=function(t){return this.extractGeometry(t)},J.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Z[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Z[e].apply(this,[t])+")"};var Z={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Z.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Z.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Z.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Z.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+Z.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Z.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Q={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(H.spaces);return this.geometryFactory.createPoint(new N(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(H.trimParens,"$1"),i.push(Q.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(H.spaces),i.push(new N(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(H.spaces),i.push(new N(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(H.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(H.trimParens,"$1"),i.push(Q.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(H.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(H.trimParens,"$1"),n=Q.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(H.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(H.trimParens,"$1"),i.push(Q.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},K=function(t){this.parser=new J(t)};K.prototype.write=function(t){return this.parser.write(t)},K.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t;if(1===arguments.length)et.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new tt:new tt(t)},et.equals=function(){var t,e,n;if(2===arguments.length)et.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(n=arguments[2],!(e=arguments[1]).equals(t=arguments[0])))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new N,this._intPt[1]=new N,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},it={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new R;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return K.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+K.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},it.DONT_INTERSECT.get=function(){return 0},it.DO_INTERSECT.get=function(){return 1},it.COLLINEAR.get=function(){return 2},it.NO_INTERSECTION.get=function(){return 0},it.POINT_INTERSECTION.get=function(){return 1},it.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,it);var rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new X(this._inputLines[0][0],this._inputLines[0][1]),n=new X(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,X.intersects(n,i,e)&&0===at.orientationIndex(n,i,e)&&0===at.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=Y.intersection(t,n,i,r)}catch(s){if(!(s instanceof U))throw s;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new N(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=G.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);q.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&q.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new N(t),o=new N(e),s=new N(n),a=new N(i),u=new N;this.normalizeToEnvCentre(r,o,s,a,u);var l=this.safeHCoordinateIntersection(r,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=X.intersects(e,n,i),s=X.intersects(e,n,r),a=X.intersects(i,r,e),u=X.intersects(i,r,n);return o&&s?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,p=n.y>i.y?n.y:i.y,f=((s>c?s:c)+(u<p?u:p))/2;r.x=((o>l?o:l)+(a<h?a:h))/2,r.y=f,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!X.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=at.orientationIndex(e,n,i),s=at.orientationIndex(e,n,r);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=at.orientationIndex(i,r,e),u=at.orientationIndex(i,r,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,i,r):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new N(i):0===s?this._intPt[0]=new N(r):0===a?this._intPt[0]=new N(e):0===u&&(this._intPt[0]=new N(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=at.distancePointLine(t,n,i),s=at.distancePointLine(e,n,i);return s<o&&(o=s,r=e),(s=at.distancePointLine(n,t,e))<o&&(o=s,r=n),(s=at.distancePointLine(i,t,e))<o&&(o=s,r=i),r},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){return ot.signOfDet2x2(e.x-t.x,e.y-t.y,n.x-e.x,n.y-e.y)},ot.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if((i-=(s=Math.floor(n/t))*e)<0)return-r;if(i>e)return r;if(t>(n-=s*t)+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if((e-=(s=Math.floor(t/n))*i)<0)return r;if(e>i)return-r;if(n>(t-=s*n)+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.y-this._p.y,o=e.y-this._p.y,s=ot.signOfDet2x2(t.x-this._p.x,r,e.x-this._p.x,o);if(0===s)return this._isPointOnSegment=!0,null;o<r&&(s=-s),s>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==P.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?P.BOUNDARY:this._crossingCount%2==1?P.INTERIOR:P.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof N&&L(arguments[1],V)){for(var t=arguments[0],e=arguments[1],n=new st(t),i=new N,r=new N,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof N&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new st(s),l=1;l<a.length;l++){var c=a[l],h=a[l-1];if(u.countSegment(c,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var at=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,n){return G.orientationIndex(t,e,n)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(L(arguments[0],V)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new N,l=new N,c=new N;s.getCoordinate(0,l),s.getCoordinate(1,c);var h=l.x;c.x-=h;for(var p=0,f=1;f<a-1;f++)u.y=l.y,l.x=c.x,l.y=c.y,s.getCoordinate(f+1,c),c.x-=h,p+=l.x*(u.y-c.y);return p/2}},at.distanceLineLine=function(t,e,n,i){if(t.equals(e))return at.distancePointLine(t,n,i);if(n.equals(i))return at.distancePointLine(i,t,e);var r=!1;if(X.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,a=((t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y))/o;(a<0||a>1||s<0||s>1)&&(r=!0)}}else r=!0;return r?T.min(at.distancePointLine(t,n,i),at.distancePointLine(e,n,i),at.distancePointLine(n,t,e),at.distancePointLine(i,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==P.EXTERIOR},at.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new N;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,u=i.y,l=a-r,c=u-o;n+=Math.sqrt(l*l+c*c),r=a,o=u}return n},at.isCCW=function(t){var e=t.length-1;if(e<3)throw new m("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var s=i;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==i);var a=i;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==i);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=at.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)},at.computeOrientation=function(t,e,n){return at.orientationIndex(t,e,n)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new m("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=at.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},at.isOnLine=function(t,e){for(var n=new rt,i=1;i<e.length;i++)if(n.computeIntersection(t,e[i-1],e[i]),n.hasIntersection())return!0;return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return at.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return at.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,ut);var lt=function(){};lt.prototype.filter=function(t){},lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new m("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new X(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[E,x,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return pt},Object.defineProperties(ct,ht);var pt=function(){};pt.interfaces_=function(){return[lt]},pt.filter=function(t){t.geometryChangedAction()};var ft=function(){};ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return yt},gt.EndPointBoundaryNodeRule.get=function(){return _t},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return mt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MOD2_BOUNDARY_RULE.get=function(){return new yt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var _t=function(){};_t.prototype.isInBoundary=function(t){return t>0},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>1},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var vt=function(){};vt.prototype.isInBoundary=function(t){return 1===t},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var xt=function(){};xt.prototype.hasNext=function(){},xt.prototype.next=function(){},xt.prototype.remove=function(){};var Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(i.prototype=new Error).name="NoSuchElementException";var It=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Nt(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Et),Nt=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new i;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xt),wt=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=!1,r=e.iterator();r.hasNext();)this.add(r.next(),n),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof N&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<a.length;l++)this.add(a[l],u);else for(var c=a.length-1;c>=0;c--)this.add(a[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof N){var h=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(h>0&&this.get(h-1).equals2D(p))return null;if(h<f&&this.get(h).equals2D(p))return null}}t.prototype.add.call(this,h,p)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],_=arguments[3],m=1;y>_&&(m=-1);for(var v=y;v!==_;v+=m)this.add(d[v],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new N(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(It),Ct=function(){},Ot={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Ot.ForwardComparator.get=function(){return Pt},Ot.BidirectionalComparator.get=function(){return St},Ot.coordArrayType.get=function(){return new Array(0).fill(null)},Ct.prototype.interfaces_=function(){return[]},Ct.prototype.getClass=function(){return Ct},Ct.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Ct.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(Ct.indexOf(i,e)<0)return i}return null},Ct.scroll=function(t,e){var n=Ct.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);q.arraycopy(t,n,i,0,t.length-n),q.arraycopy(t,0,i,t.length-n,n),q.arraycopy(i,0,t,0,t.length)},Ct.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1;return!0}},Ct.intersection=function(t,e){for(var n=new wt,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},Ct.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Ct.removeRepeatedPoints=function(t){return Ct.hasRepeatedPoints(t)?new wt(t,!1).toCoordinateArray():t},Ct.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},Ct.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},Ct.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new N(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new N(i[r+u])},Ct.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0},Ct.envelope=function(t){for(var e=new X,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Ct.toCoordinateArray=function(t){return t.toArray(Ct.coordArrayType)},Ct.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Ct.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Ct.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t[e].compareTo(t[t.length-1-e]);if(0!==n)return n}return 1},Ct.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},Ct.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Ct.extract=function(t,e,n){e=T.clamp(e,0,t.length);var i=(n=T.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r},Object.defineProperties(Ct,Ot);var Pt=function(){};Pt.prototype.compare=function(t,e){return Ct.compare(t,e)},Pt.prototype.interfaces_=function(){return[I]},Pt.prototype.getClass=function(){return Pt};var St=function(){};St.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Ct.compare(n,i);return Ct.isEqualReversed(n,i)?0:r},St.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Ct.increasingDirection(n),o=Ct.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(i[a]);if(0!==l)return l;s+=r,a+=o}return 0},St.prototype.interfaces_=function(){return[I]},St.prototype.getClass=function(){return St};var Lt=function(){};Lt.prototype.get=function(){},Lt.prototype.put=function(){},Lt.prototype.size=function(){},Lt.prototype.values=function(){},Lt.prototype.entrySet=function(){};var Tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Lt);(r.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Mt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Rt(this)},e}(o),Rt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new i;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new r},e}(xt),At=0;(h.prototype=new Tt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:At,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:At,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===l(a(a(t)))){var e=c(a(a(t)));1===s(e)?(u(a(t),At),u(e,At),u(a(a(t)),1),t=a(a(t))):(t===c(a(t))&&(t=a(t),this.rotateLeft(t)),u(a(t),At),u(a(a(t)),1),this.rotateRight(a(a(t))))}else{var n=l(a(a(t)));1===s(n)?(u(a(t),At),u(n,At),u(a(a(t)),1),t=a(a(t))):(t===l(a(t))&&(t=a(t),this.rotateRight(t)),u(a(t),At),u(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=At},h.prototype.values=function(){var t=new It,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new Mt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Dt=function(){};Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},p.prototype=new o,(f.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new r},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new Ft(this)};var Ft=function(t){this.treeSet_=t,this.position_=0};Ft.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new i;return this.treeSet_.array_[this.position_++]},Ft.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ft.prototype.remove=function(){throw new r};var kt=function(){};kt.sort=function(){var t,e,n,i=arguments[0];if(1===arguments.length)i.sort((function(t,e){return t.compareTo(e)}));else if(2===arguments.length)n=arguments[1],i.sort((function(t,e){return n.compare(t,e)}));else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var r=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<r.length;t++)i.push(r[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],e.sort((function(t,e){return n.compare(t,e)})),r=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<r.length;t++)i.push(r[t])},kt.asList=function(t){for(var e=new It,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var Gt=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt},Gt.toDimensionSymbol=function(t){switch(t){case Gt.FALSE:return Gt.SYM_FALSE;case Gt.TRUE:return Gt.SYM_TRUE;case Gt.DONTCARE:return Gt.SYM_DONTCARE;case Gt.P:return Gt.SYM_P;case Gt.L:return Gt.SYM_L;case Gt.A:return Gt.SYM_A}throw new m("Unknown dimension value: "+t)},Gt.toDimensionValue=function(t){switch(D.toUpperCase(t)){case Gt.SYM_FALSE:return Gt.FALSE;case Gt.SYM_TRUE:return Gt.TRUE;case Gt.SYM_DONTCARE:return Gt.DONTCARE;case Gt.SYM_P:return Gt.P;case Gt.SYM_L:return Gt.L;case Gt.SYM_A:return Gt.A}throw new m("Unknown dimension symbol: "+t)},Object.defineProperties(Gt,Bt);var Vt=function(){};Vt.prototype.filter=function(t){},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var zt=function(){};zt.prototype.filter=function(t,e){},zt.prototype.isDone=function(){},zt.prototype.isGeometryChanged=function(){},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt};var jt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new m("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new X,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();kt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Gt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Gt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createGeometryCollection(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(kt.asList(this._geometries)),n=new f(kt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var l=this.getGeometryN(u),c=o.getGeometryN(u),h=l.compareToSameClass(c,r);if(0!==h)return h;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){if(L(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(L(arguments[0],zt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(L(arguments[0],Vt)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(L(arguments[0],lt)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),Ut=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Gt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new qt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(jt),qt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};qt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},qt.prototype.getBoundary=function(){return this._geom instanceof Jt?this.boundaryLineString(this._geom):this._geom instanceof Ut?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},qt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},qt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},qt.prototype.computeBoundaryCoordinates=function(t){var e=new It;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Ct.toCoordinateArray(e)},qt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Yt,this._endpointMap.put(t,e)),e.count++},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new qt(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new qt(e,n).getBoundary()}};var Yt=function(){this.count=null};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var Xt=function(){},Wt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},Xt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",s=new function(){}(new function(){}(Xt.getStackTrace(i))),a=0;a<r;a++)try{o+=s.readLine()+Xt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Xt.split=function(t,e){for(var n=e.length,i=new It,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);i.add(s),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a},Xt.toString=function(){if(1===arguments.length){var t=arguments[0];return Xt.SIMPLE_ORDINATE_FORMAT.format(t)}},Xt.spaces=function(t){return Xt.chars(" ",t)},Wt.NEWLINE.get=function(){return q.getProperty("line.separator")},Wt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Xt,Wt);var Ht=function(){};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},Ht.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,V.X)===t.getOrdinate(e-1,V.X)&&t.getOrdinate(0,V.Y)===t.getOrdinate(e-1,V.Y)},Ht.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||v.isNaN(s)&&v.isNaN(a)))return!1}return!0},Ht.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Ht.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)Ht.copy(e,r-1,i,o,1);return i},Ht.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Ht.swap(t,i,e-i)},Ht.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Ht.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)Ht.copyCoord(t,e+o,n,i+o)},Ht.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new R;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(Xt.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},Ht.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Ht.createClosedRing(t,e,4):e.getOrdinate(0,V.X)===e.getOrdinate(n-1,V.X)&&e.getOrdinate(0,V.Y)===e.getOrdinate(n-1,V.Y)?e:Ht.createClosedRing(t,e,n+1)},Ht.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Ht.copy(e,0,i,0,r);for(var o=r;o<n;o++)Ht.copy(e,0,i,o,1);return i};var Jt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new X:this._points.expandEnvelope(new X)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Ht.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Gt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(L(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(L(arguments[0],zt)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(L(arguments[0],Vt)||L(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new qt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new m("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Qt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new X;var t=new X;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Gt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(L(arguments[0],ft)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(L(arguments[0],zt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(L(arguments[0],Vt)||L(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Kt=function(){};Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var $t=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new m("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new m("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e,r=this._shell,o=i._shell;if(!r.equalsExact(o,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(i._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);kt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);q.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=Ct.minCoordinate(e.getCoordinates());Ct.scroll(i,r),q.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],at.isCCW(e.getCoordinates())===n&&Ct.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,s=this._shell,a=o._shell,u=s.compareToSameClass(a,r);if(0!==u)return u;for(var l=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;h<l&&h<c;){var p=this.getInteriorRingN(h),f=o.getInteriorRingN(h),d=p.compareToSameClass(f,r);if(0!==d)return d;h++}return h<l?1:h<c?-1:0}},e.prototype.apply=function(t){if(L(t,ft)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(L(t,zt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(L(t,Vt))t.filter(this);else if(L(t,lt)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Gt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(jt),ee=function(t){function e(e,n){e instanceof N&&n instanceof _e&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Gt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new m("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new m("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Jt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createMultiPolygon(t)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new It,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(jt),ie=function(t){this._factory=t||null,this._isUserDataCopied=!1},re={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ie.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ie.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ie.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof jt?this.editGeometryCollection(t,e):t instanceof $t?this.editPolygon(t,e):t instanceof Qt||t instanceof Jt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ie.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new It,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===te?this._factory.createMultiPoint(i.toArray([])):n.getClass()===Ut?this._factory.createMultiLineString(i.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},ie.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new It,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this._factory.createPolygon(i,r.toArray([]))},ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie},ie.GeometryEditorOperation=function(){},re.NoOpGeometryOperation.get=function(){return oe},re.CoordinateOperation.get=function(){return se},re.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(ie,re);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var se=function(){};se.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Jt?e.createLineString(n):t instanceof Qt?n.length>0?e.createPoint(n[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=function(){};ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Jt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Qt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new N}else if(L(arguments[0],V)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new N}},le={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case V.X:this._coordinates[t].x=n;break;case V.Y:this._coordinates[t].y=n;break;case V.Z:this._coordinates[t].z=n;break;default:throw new m("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case V.X:return this._coordinates[t].x;case V.Y:return this._coordinates[t].y;case V.Z:return this._coordinates[t].z}return v.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new N(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new R(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[V,e]},ue.prototype.getClass=function(){return ue},le.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,le);var ce=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ue(t)}if(L(arguments[0],V)){var e=arguments[0];return new ue(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new ue(n):new ue(n,i)}},ce.prototype.interfaces_=function(){return[O,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ce},Object.defineProperties(ce,he);var pe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new It,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Mt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Lt),fe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fe.prototype.equals=function(t){return t instanceof fe&&this._modelType===t._modelType&&this._scale===t._scale},fe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new A(n).compareTo(new A(i))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fe.FLOATING?t="Floating":this._modelType===fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return v.isNaN(t)||this._modelType===fe.FLOATING_SINGLE?t:this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof N){var e=arguments[0];if(this._modelType===fe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,x]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ye={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ye.serialVersionUID.get=function(){return-552860263173159e4},ye.nameToTypeMap.get=function(){return new pe},Object.defineProperties(ge,ye),fe.Type=ge,fe.FIXED=new ge("FIXED"),fe.FLOATING=new ge("FLOATING"),fe.FLOATING_SINGLE=new ge("FLOATING SINGLE");var _e=function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?L(arguments[0],O)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},me={serialVersionUID:{configurable:!0}};_e.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new N(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new N(t.getMinX(),t.getMinY()),new N(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new N(t.getMinX(),t.getMinY()),new N(t.getMinX(),t.getMaxY()),new N(t.getMaxX(),t.getMaxY()),new N(t.getMaxX(),t.getMinY()),new N(t.getMinX(),t.getMinY())]),null)},_e.prototype.createLineString=function(t){return t?t instanceof Array?new Jt(this.getCoordinateSequenceFactory().create(t),this):L(t,V)?new Jt(t,this):void 0:new Jt(this.getCoordinateSequenceFactory().create([]),this)},_e.prototype.createMultiLineString=function(){if(0===arguments.length)return new Ut(null,this);if(1===arguments.length){var t=arguments[0];return new Ut(t,this)}},_e.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(_e.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof $t)return this.createMultiPolygon(_e.toPolygonArray(t));if(a instanceof Jt)return this.createMultiLineString(_e.toLineStringArray(t));if(a instanceof Qt)return this.createMultiPoint(_e.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},_e.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},_e.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(L(arguments[0],V)){var e=arguments[0];return new Qt(e,this)}}},_e.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},_e.prototype.createPolygon=function(){if(0===arguments.length)return new $t(null,null,this);if(1===arguments.length){if(L(arguments[0],V)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new $t(i,r,this)}},_e.prototype.getSRID=function(){return this._SRID},_e.prototype.createGeometryCollection=function(){if(0===arguments.length)return new jt(null,this);if(1===arguments.length){var t=arguments[0];return new jt(t,this)}},_e.prototype.createGeometry=function(t){return new ie(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},_e.prototype.getPrecisionModel=function(){return this._precisionModel},_e.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(L(arguments[0],V)){var e=arguments[0];return new ee(e,this)}}},_e.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ne(null,this);if(1===arguments.length){var t=arguments[0];return new ne(t,this)}},_e.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new te(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(L(arguments[0],V)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Ht.copy(n,r,o,0,1),i[r]=this.createPoint(o)}return this.createMultiPoint(i)}}},_e.prototype.interfaces_=function(){return[e]},_e.prototype.getClass=function(){return _e},_e.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},_e.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},me.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(_e,me);var ve=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new _e};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!xe[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ve.indexOf(n)?xe[n].apply(this,[e.coordinates]):xe[n].apply(this,"GeometryCollection"===n?[e.geometries]:[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!Ee[e])throw new Error("Geometry is not supported");return Ee[e].apply(this,[t])};var xe={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){if(!xe[t.geometry.type])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xe.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new N(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new N(t[0],t[1]),new N(t[2],t[1]),new N(t[2],t[3]),new N(t[0],t[3]),new N(t[0],t[1])])},Point:function(t){var e=new N(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xe.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xe.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=xe.coordinates.apply(this,[t[r]]),s=this.geometryFactory.createLinearRing(o);i.push(s)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.Polygon.apply(this,[t[n]]));return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.read(t[n]));return this.geometryFactory.createGeometryCollection(e)}},Ee={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ee.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Ee.Point.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i)e.push(Ee.coordinate.apply(this,[n[i]]));return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Ee.LineString.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ee.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=Ee.LineString.apply(this,[t._holes[i]]);e.push(r.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Ee.Polygon.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(Ee[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},Ie=function(t){this.geometryFactory=t||new _e,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};Ie.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},Ie.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ne=function(){this.parser=new be(this.geometryFactory)};Ne.prototype.write=function(t){return this.parser.write(t)};var we=function(){},Ce={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};we.prototype.interfaces_=function(){return[]},we.prototype.getClass=function(){return we},we.opposite=function(t){return t===we.LEFT?we.RIGHT:t===we.RIGHT?we.LEFT:t},Ce.ON.get=function(){return 0},Ce.LEFT.get=function(){return 1},Ce.RIGHT.get=function(){return 2},Object.defineProperties(we,Ce),(g.prototype=new Error).name="EmptyStackException",(y.prototype=new Et).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Oe=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Oe.prototype.getCoordinate=function(){return this._minCoord},Oe.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Oe.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=at.computeOrientation(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===at.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===at.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Oe.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=we.LEFT;return n[e].y<n[e+1].y&&(i=we.RIGHT),i},Oe.prototype.getEdge=function(){return this._orientedDe},Oe.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Oe.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Oe.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===we.LEFT&&(this._orientedDe=this._minDe.getSym())},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe};var Pe=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new N(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($),Se=function(){this.array_=[]};Se.prototype.addLast=function(t){this.array_.push(t)},Se.prototype.removeFirst=function(){return this.array_.shift()},Se.prototype.isEmpty=function(){return 0===this.array_.length};var Le=function(){this._finder=null,this._dirEdgeList=new It,this._nodes=new It,this._rightMostCoord=null,this._env=null,this._finder=new Oe};Le.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Le.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Le.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new Pe("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},Le.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(we.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Le.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Le.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(we.RIGHT)>=1&&e.getDepth(we.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Le.prototype.computeDepths=function(t){var e=new Mt,n=new Se,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Le.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},Le.prototype.getEnvelope=function(){if(null===this._env){for(var t=new X,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},Le.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Le.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(we.LEFT,t.getDepth(we.RIGHT)),e.setDepth(we.RIGHT,t.getDepth(we.LEFT))},Le.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},Le.prototype.getNodes=function(){return this._nodes},Le.prototype.getDirectedEdges=function(){return this._dirEdgeList},Le.prototype.interfaces_=function(){return[x]},Le.prototype.getClass=function(){return Le};var Te=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[we.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[we.ON]=o,this.location[we.LEFT]=s,this.location[we.RIGHT]=a}};Te.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Te.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==P.NONE)return!1;return!0},Te.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===P.NONE&&(this.location[e]=t)},Te.prototype.isLine=function(){return 1===this.location.length},Te.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[we.ON]=this.location[we.ON],e[we.LEFT]=P.NONE,e[we.RIGHT]=P.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===P.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Te.prototype.getLocations=function(){return this.location},Te.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[we.LEFT];this.location[we.LEFT]=this.location[we.RIGHT],this.location[we.RIGHT]=t},Te.prototype.toString=function(){var t=new R;return this.location.length>1&&t.append(P.toLocationSymbol(this.location[we.LEFT])),t.append(P.toLocationSymbol(this.location[we.ON])),this.location.length>1&&t.append(P.toLocationSymbol(this.location[we.RIGHT])),t.toString()},Te.prototype.setLocations=function(t,e,n){this.location[we.ON]=t,this.location[we.LEFT]=e,this.location[we.RIGHT]=n},Te.prototype.get=function(t){return t<this.location.length?this.location[t]:P.NONE},Te.prototype.isArea=function(){return this.location.length>1},Te.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===P.NONE)return!0;return!1},Te.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(we.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Te.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(P.NONE)},Te.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Te.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te};var Me=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Te(e),this.elt[1]=new Te(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Te(n.elt[0]),this.elt[1]=new Te(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Te(P.NONE),this.elt[1]=new Te(P.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Te(o,s,a),this.elt[1]=new Te(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Te(P.NONE,P.NONE,P.NONE),this.elt[1]=new Te(P.NONE,P.NONE,P.NONE),this.elt[u].setLocations(l,c,h)}};Me.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Me.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Me.prototype.isNull=function(t){return this.elt[t].isNull()},Me.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Me.prototype.isLine=function(t){return this.elt[t].isLine()},Me.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Te(t.elt[e]):this.elt[e].merge(t.elt[e])},Me.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Me.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(we.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Me.prototype.toString=function(){var t=new R;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Me.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Me.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Me.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(we.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},Me.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Me.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Me.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Te(this.elt[t].location[0]))},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me},Me.toLineLabel=function(t){for(var e=new Me(P.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Re=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new It,this._pts=new It,this._label=new Me(P.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new It,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Re.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},Re.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Re.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Pe("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Pe("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();et.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Re.prototype.getLinearRing=function(){return this._ring},Re.prototype.getCoordinate=function(t){return this._pts.get(t)},Re.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Re.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;n&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}},Re.prototype.isHole=function(){return this._isHole},Re.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Re.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!at.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Re.prototype.addHole=function(t){this._holes.add(t)},Re.prototype.isShell=function(){return null===this._shell},Re.prototype.getLabel=function(){return this._label},Re.prototype.getEdges=function(){return this._edges},Re.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Re.prototype.getShell=function(){return this._shell},Re.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,we.RIGHT);if(i===P.NONE)return null;if(this._label.getLocation(n)===P.NONE)return this._label.setLocation(n,i),null}},Re.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Re.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re};var Ae=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Re),De=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildMinimalRings=function(){var t=new It,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ae(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Re),Fe=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Fe.prototype.setVisited=function(t){this._isVisited=t},Fe.prototype.setInResult=function(t){this._isInResult=t},Fe.prototype.isCovered=function(){return this._isCovered},Fe.prototype.isCoveredSet=function(){return this._isCoveredSet},Fe.prototype.setLabel=function(t){this._label=t},Fe.prototype.getLabel=function(){return this._label},Fe.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Fe.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Fe.prototype.isInResult=function(){return this._isInResult},Fe.prototype.isVisited=function(){return this._isVisited},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var ke=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Me(0,P.NONE)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=P.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==P.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Me(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Me)for(var n=arguments[0],i=0;i<2;i++){var r=this.computeMergedLocation(n,i);this._label.getLocation(i)===P.NONE&&this._label.setLocation(i,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=P.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case P.BOUNDARY:n=P.INTERIOR;break;case P.INTERIOR:default:n=P.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fe),Ge=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Ge.prototype.find=function(t){return this.nodeMap.get(t)},Ge.prototype.addNode=function(){if(arguments[0]instanceof N){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ke){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},Ge.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ge.prototype.iterator=function(){return this.nodeMap.values().iterator()},Ge.prototype.values=function(){return this.nodeMap.values()},Ge.prototype.getBoundaryNodes=function(t){for(var e=new It,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===P.BOUNDARY&&e.add(i)}return e},Ge.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge};var Be=function(){},Ve={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof N&&arguments[1]instanceof N){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new m("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?Be.NE:Be.SE:i.y>=n.y?Be.NW:Be.SW}},Ve.NE.get=function(){return 0},Ve.NW.get=function(){return 1},Ve.SW.get=function(){return 2},Ve.SE.get=function(){return 3},Object.defineProperties(Be,Ve);var ze=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._edge=e,this.init(n,i),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=r,this.init(o,s),this._label=a}};ze.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},ze.prototype.getDy=function(){return this._dy},ze.prototype.getCoordinate=function(){return this._p0},ze.prototype.setNode=function(t){this._node=t},ze.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},ze.prototype.compareTo=function(t){return this.compareDirection(t)},ze.prototype.getDirectedCoordinate=function(){return this._p1},ze.prototype.getDx=function(){return this._dx},ze.prototype.getLabel=function(){return this._label},ze.prototype.getEdge=function(){return this._edge},ze.prototype.getQuadrant=function(){return this._quadrant},ze.prototype.getNode=function(){return this._node},ze.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},ze.prototype.computeLabel=function(t){},ze.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},ze.prototype.interfaces_=function(){return[x]},ze.prototype.getClass=function(){return ze};var je=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Me(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Pe("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,we.LEFT)===P.INTERIOR&&this._label.getLocation(e,we.RIGHT)===P.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[we.LEFT]+"/"+this._depth[we.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,P.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,P.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===we.LEFT&&(i=-1);var r=we.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===P.EXTERIOR&&e===P.INTERIOR?1:t===P.INTERIOR&&e===P.EXTERIOR?-1:0},e}(ze),Ue=function(){};Ue.prototype.createNode=function(t){return new ke(t,null)},Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue};var qe=function(){if(this._edges=new It,this._nodes=null,this._edgeEndList=new It,0===arguments.length)this._nodes=new Ge(new Ue);else if(1===arguments.length){var t=arguments[0];this._nodes=new Ge(t)}};qe.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},qe.prototype.find=function(t){return this._nodes.find(t)},qe.prototype.addNode=function(){if(arguments[0]instanceof ke){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof N){var e=arguments[0];return this._nodes.addNode(e)}},qe.prototype.getNodeIterator=function(){return this._nodes.iterator()},qe.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},qe.prototype.debugPrintln=function(t){q.out.println(t)},qe.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===P.BOUNDARY},qe.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},qe.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&at.computeOrientation(t,e,i)===at.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,i)},qe.prototype.getEdgeEnds=function(){return this._edgeEndList},qe.prototype.debugPrint=function(t){q.out.print(t)},qe.prototype.getEdgeIterator=function(){return this._edges.iterator()},qe.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},qe.prototype.insertEdge=function(t){this._edges.add(t)},qe.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},qe.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new je(n,!0),r=new je(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},qe.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},qe.prototype.getNodes=function(){return this._nodes.values()},qe.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe},qe.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ye=function(){this._geometryFactory=null,this._shellList=new It;var t=arguments[0];this._geometryFactory=t};Ye.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},Ye.prototype.computePolygons=function(t){for(var e=new It,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},Ye.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new Pe("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},Ye.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new It,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},Ye.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ye.prototype.buildMaximalEdgeRings=function(t){for(var e=new It,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new De(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},Ye.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},Ye.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ye.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&at.isPointInRing(r,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},Ye.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ye.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];qe.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new It,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Xe=function(){};Xe.prototype.getBounds=function(){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var We=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};We.prototype.getItem=function(){return this._item},We.prototype.getBounds=function(){return this._bounds},We.prototype.interfaces_=function(){return[Xe,e]},We.prototype.getClass=function(){return We};var He=function(){this._size=null,this._items=null,this._size=0,this._items=new It,this._items.add(null)};He.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},He.prototype.size=function(){return this._size},He.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},He.prototype.clear=function(){this._size=0,this._items.clear()},He.prototype.isEmpty=function(){return 0===this._size},He.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Je=function(){};Je.prototype.visitItem=function(t){},Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je};var Ze=function(){};Ze.prototype.insert=function(t,e){},Ze.prototype.remove=function(t,e){},Ze.prototype.query=function(){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Qe=function(){if(this._childBoundables=new It,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ke={serialVersionUID:{configurable:!0}};Qe.prototype.getLevel=function(){return this._level},Qe.prototype.size=function(){return this._childBoundables.size()},Qe.prototype.getChildBoundables=function(){return this._childBoundables},Qe.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Qe.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Qe.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Qe.prototype.interfaces_=function(){return[Xe,e]},Qe.prototype.getClass=function(){return Qe},Ke.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Qe,Ke);var $e=function(){};$e.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$e.min=function(t){return $e.sort(t),t.get(0)},$e.sort=function(t,e){var n=t.toArray();e?kt.sort(n,e):kt.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},$e.singletonList=function(t){var e=new It;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),i=tn.isComposite(this._boundable2);if(n&&i)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new m("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},tn.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),s=new tn(o,e,this._itemDistance);s.getDistance()<i&&n.add(s)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[x]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Qe};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new It,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Qe?t+=this.size(n):n instanceof We&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof We&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new It:t}if(1===arguments.length){for(var e=arguments[0],n=new It,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Qe){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof We?n.add(r.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new We(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new It;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(et.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Qe?this.boundablesAtLevel(n,s,r):(et.isTrue(s instanceof We),-1===n&&r.add(s))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new It;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(L(arguments[2],Je)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe)for(var r=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof Qe?this.query(r,l,s):l instanceof We?s.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(L(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe)for(var c=arguments[0],h=arguments[1],p=arguments[2],f=h.getChildBoundables(),d=0;d<f.size();d++){var g=f.get(d);this.getIntersectsOp().intersects(g.getBounds(),c)&&(g instanceof Qe?this.query(c,g,p):g instanceof We?p.add(g.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Qe&&(o=this.remove(n,u,r))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Qe){var i=this.depth(n);i>t&&(t=i)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new It;n.add(this.createNode(e));var i=new It(t);$e.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var sn=function(t){function n(e){t.call(this,e=e||n.DEFAULT_NODE_CAPACITY)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new It,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},n.prototype.createNode=function(t){return new an(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new It;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(L(arguments[2],Je)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe){var r=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,r,o,s)}else if(L(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new It(t);$e.sort(r,n.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(L(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var i=arguments[0];return this.nearestNeighbour(i,v.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&L(arguments[1],on)){var r=arguments[0],o=arguments[1],s=new tn(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=null,c=new He;for(c.add(a);!c.isEmpty()&&u>0;){var h=c.poll(),p=h.getDistance();if(p>=u)break;h.isLeaves()?(u=p,l=h):h.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],d=arguments[1],g=arguments[2],y=new We(f,d),_=new tn(this.getRoot(),y,g);return this.nearestNeighbour(_)[0]}},n.prototype.interfaces_=function(){return[Ze,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},i.STRtreeNode.get=function(){return an},i.serialVersionUID.get=function(){return 0x39920f7d5f261e0},i.xComparator.get=function(){return{interfaces_:function(){return[I]},compare:function(e,i){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(i.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[I]},compare:function(e,i){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(i.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,i),n}(en),an=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new X(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qe),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:t>e?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=un.relativeSign(e.x,n.x),r=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(i,r);case 1:return un.compareValue(r,i);case 2:return un.compareValue(r,-i);case 3:return un.compareValue(-i,r);case 4:return un.compareValue(-i,-r);case 5:return un.compareValue(-r,-i);case 6:return un.compareValue(-r,i);case 7:return un.compareValue(i,-r)}return et.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ln=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new N(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};ln.prototype.getCoordinate=function(){return this.coord},ln.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ln.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},ln.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ln.prototype.isInterior=function(){return this._isInterior},ln.prototype.interfaces_=function(){return[x]},ln.prototype.getClass=function(){return ln};var cn=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new wt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new It;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new A(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new N(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new N(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new A(e[0])),i=r}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new N(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return r&&(o[s]=new N(e.coord)),new dn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new ln(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(et.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new $("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new $("bad split edge end point at "+r)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof N&&arguments[1]instanceof N){var r=arguments[0],o=arguments[1],s=o.x-r.x,a=o.y-r.y;if(0===s&&0===a)throw new m("Cannot compute the octant for two identical points "+r);return hn.octant(s,a)}};var pn=function(){};pn.prototype.getCoordinates=function(){},pn.prototype.size=function(){},pn.prototype.getCoordinate=function(t){},pn.prototype.isClosed=function(){},pn.prototype.setData=function(t){},pn.prototype.getData=function(){},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var fn=function(){};fn.prototype.addIntersection=function(t,e){},fn.prototype.interfaces_=function(){return[pn]},fn.prototype.getClass=function(){return fn};var dn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[3],o=new N(n.getIntersection(r));this.addIntersection(o,i)}},dn.prototype.toString=function(){return K.toLineString(new ue(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;return i<this._pts.length&&t.equals2D(this._pts[i])&&(n=i),this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},dn.prototype.interfaces_=function(){return[fn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new It;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(i)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new N,this.p1=new N;else if(1===arguments.length){var t=arguments[0];this.p0=new N(t.p0),this.p1=new N(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new N(e,n),this.p1=new N(i,r)}},yn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),n=at.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof N){var i=arguments[0];return at.orientationIndex(this.p0,this.p1,i)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new rt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof N){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new N(t);var e=this.projectionFactor(t),n=new N;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var s=this.project(i.p0);r<0&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(i.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new gn(s,a)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?v.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=v.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(r=u.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=u),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return Y.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof U))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*r/s,u=e*o/s}return new N(n-u,i+a)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||v.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof N){var e=arguments[0];return at.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new N;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=v.doubleToLongBits(this.p0.x);t^=31*v.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=v.doubleToLongBits(this.p1.x);return n^=31*v.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[x,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new N((t.x+e.x)/2,(t.y+e.y)/2)},yn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,yn);var _n=function(){this.tempEnv1=new X,this.tempEnv2=new X,this._overlapSeg1=new gn,this._overlapSeg2=new gn};_n.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var mn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};mn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},mn.prototype.computeSelect=function(t,e,n,i){if(i.tempEnv1.init(this._pts[e],this._pts[n]),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var r=Math.trunc((e+n)/2);e<r&&this.computeSelect(t,e,r,i),r<n&&this.computeSelect(t,r,n,i)},mn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},mn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},mn.prototype.setId=function(t){this._id=t},mn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},mn.prototype.getEnvelope=function(){return null===this._env&&(this._env=new X(this._pts[this._start],this._pts[this._end])),this._env},mn.prototype.getEndIndex=function(){return this._end},mn.prototype.getStartIndex=function(){return this._start},mn.prototype.getContext=function(){return this._context},mn.prototype.getId=function(){return this._id},mn.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var s=this._pts[t],a=this._pts[e],u=n._pts[i],l=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);t<c&&(i<h&&this.computeOverlapsInternal(t,c,n,i,h,o),h<r&&this.computeOverlapsInternal(t,c,n,h,r,o)),c<e&&(i<h&&this.computeOverlapsInternal(c,e,n,i,h,o),h<r&&this.computeOverlapsInternal(c,e,n,h,r,o))},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var vn=function(){};vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},vn.getChainStartIndices=function(t){var e=0,n=new It;n.add(new A(e));do{var i=vn.findChainEnd(t,e);n.add(new A(i)),e=i}while(e<t.length-1);return vn.toIntArray(n)},vn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Be.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Be.quadrant(t[r-1],t[r])===i);)r++;return r-1},vn.getChains=function(){if(1===arguments.length){var t=arguments[0];return vn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new It,r=vn.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new mn(e,r[o],r[o+1],n);i.add(s)}return i}},vn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var xn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xn.prototype.setSegmentIntersector=function(t){this._segInt=t},xn.prototype.interfaces_=function(){return[bn]},xn.prototype.getClass=function(){return xn};var En=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new It,this._index=new sn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=vn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new In(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return In},Object.defineProperties(e,n),e}(xn),In=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],o=e.getContext(),s=i.getContext();this._si.processIntersections(o,n,s,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_n),Nn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},wn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Nn.prototype.getEndCapStyle=function(){return this._endCapStyle},Nn.prototype.isSingleSided=function(){return this._isSingleSided},Nn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Nn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Nn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Nn.JOIN_ROUND&&(this._quadrantSegments=Nn.DEFAULT_QUADRANT_SEGMENTS)},Nn.prototype.getJoinStyle=function(){return this._joinStyle},Nn.prototype.setJoinStyle=function(t){this._joinStyle=t},Nn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Nn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Nn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Nn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Nn.prototype.getMitreLimit=function(){return this._mitreLimit},Nn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Nn.prototype.setSingleSided=function(t){this._isSingleSided=t},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},wn.CAP_ROUND.get=function(){return 1},wn.CAP_FLAT.get=function(){return 2},wn.CAP_SQUARE.get=function(){return 3},wn.JOIN_ROUND.get=function(){return 1},wn.JOIN_MITRE.get=function(){return 2},wn.JOIN_BEVEL.get=function(){return 3},wn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},wn.DEFAULT_MITRE_LIMIT.get=function(){return 5},wn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Nn,wn);var Cn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},On={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Cn.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)},Cn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var r=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Cn.DELETE,r=!0,i=!0),e=this.findNextNonDeletedIndex(t=r?n:e),n=this.findNextNonDeletedIndex(e)}return i},Cn.prototype.isShallowConcavity=function(t,e,n,i){return at.computeOrientation(t,e,n)===this._angleOrientation&&at.distancePointLine(e,t,n)<i},Cn.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/Cn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<i;s+=o)if(!this.isShallow(t,e,this._inputLine[s],r))return!1;return!0},Cn.prototype.isConcave=function(t,e,n){return at.computeOrientation(t,e,n)===this._angleOrientation},Cn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Cn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Cn.DELETE;)e++;return e},Cn.prototype.isShallow=function(t,e,n,i){return at.distancePointLine(e,t,n)<i},Cn.prototype.collapseLine=function(){for(var t=new wt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Cn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.simplify=function(t,e){return new Cn(t).simplify(e)},On.INIT.get=function(){return 0},On.DELETE.get=function(){return 1},On.KEEP.get=function(){return 1},On.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Cn,On);var Pn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new It},Sn={COORDINATE_ARRAY_TYPE:{configurable:!0}};Pn.prototype.getCoordinates=function(){return this._ptList.toArray(Pn.COORDINATE_ARRAY_TYPE)},Pn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Pn.prototype.addPt=function(t){var e=new N(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Pn.prototype.revere=function(){},Pn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},Pn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Pn.prototype.toString=function(){return(new _e).createLineString(this.getCoordinates()).toString()},Pn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new N(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Pn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Sn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Pn,Sn);var Ln=function(){},Tn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Ln.toDegrees=function(t){return 180*t/Math.PI},Ln.normalize=function(t){for(;t>Math.PI;)t-=Ln.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ln.PI_TIMES_2;return t},Ln.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},Ln.isAcute=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)>0},Ln.isObtuse=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)<0},Ln.interiorAngle=function(t,e,n){var i=Ln.angle(e,t),r=Ln.angle(e,n);return Math.abs(r-i)},Ln.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ln.PI_TIMES_2;t>=Ln.PI_TIMES_2&&(t=0)}else{for(;t>=Ln.PI_TIMES_2;)t-=Ln.PI_TIMES_2;t<0&&(t=0)}return t},Ln.angleBetween=function(t,e,n){var i=Ln.angle(e,t),r=Ln.angle(e,n);return Ln.diff(i,r)},Ln.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Ln.toRadians=function(t){return t*Math.PI/180},Ln.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Ln.COUNTERCLOCKWISE:n<0?Ln.CLOCKWISE:Ln.NONE},Ln.angleBetweenOriented=function(t,e,n){var i=Ln.angle(e,t),r=Ln.angle(e,n)-i;return r<=-Math.PI?r+Ln.PI_TIMES_2:r>Math.PI?r-Ln.PI_TIMES_2:r},Tn.PI_TIMES_2.get=function(){return 2*Math.PI},Tn.PI_OVER_2.get=function(){return Math.PI/2},Tn.PI_OVER_4.get=function(){return Math.PI/4},Tn.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},Tn.CLOCKWISE.get=function(){return at.CLOCKWISE},Tn.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(Ln,Tn);var Mn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new rt,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Nn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},Rn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Mn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=at.computeOrientation(this._s0,this._s1,this._s2),i=n===at.CLOCKWISE&&this._side===we.LEFT||n===at.COUNTERCLOCKWISE&&this._side===we.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Mn.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),i=new gn;this.computeOffsetSegment(n,we.LEFT,this._distance,i);var r=new gn;this.computeOffsetSegment(n,we.RIGHT,this._distance,r);var o=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case Nn.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,o+Math.PI/2,o-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case Nn.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case Nn.CAP_SQUARE:var s=new N;s.x=Math.abs(this._distance)*Math.cos(o),s.y=Math.abs(this._distance)*Math.sin(o);var a=new N(i.p1.x+s.x,i.p1.y+s.y),u=new N(r.p1.x+s.x,r.p1.y+s.y);this._segList.addPt(a),this._segList.addPt(u)}},Mn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Mn.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=Y.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof U))throw t;o=new N(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},Mn.prototype.addFilletCorner=function(t,e,n,i,r){var o=Math.atan2(e.y-t.y,e.x-t.x),s=Math.atan2(n.y-t.y,n.x-t.x);i===at.CLOCKWISE?o<=s&&(o+=2*Math.PI):o>=s&&(o-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,o,s,i,r),this._segList.addPt(n)},Mn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Nn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Nn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Mn.prototype.createSquare=function(t){this._segList.addPt(new N(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new N(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new N(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new N(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Mn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Mn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Mn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Mn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Mn.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=Ln.angle(r,this._seg0.p0),s=Ln.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=Ln.normalize(o+s),u=Ln.normalize(a+Math.PI),l=i*n,c=n-l*Math.abs(Math.sin(s)),h=r.x+l*Math.cos(u),p=r.y+l*Math.sin(u),f=new N(h,p),d=new gn(r,f),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===we.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Mn.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===we.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=r*n*o/a,l=r*n*s/a;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u},Mn.prototype.addFilletArc=function(t,e,n,i,r){var o=i===at.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new N;l<s;){var h=e+o*l;c.x=t.x+r*Math.cos(h),c.y=t.y+r*Math.sin(h),this._segList.addPt(c),l+=u}},Mn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new N((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new N((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Mn.prototype.createCircle=function(t){var e=new N(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Mn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Mn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Pn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Mn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Mn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Nn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Nn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},Mn.prototype.closeRing=function(){this._segList.closeRing()},Mn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Rn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Rn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Rn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Rn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Mn,Rn);var An=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};An.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&Ct.reverse(o),o},An.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=Cn.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],we.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=Cn.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],we.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},An.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===we.RIGHT&&(i=-i);var r=Cn.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++)n.addNextSegment(r[s],1!==s);n.closeRing()},An.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=Cn.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],we.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=Cn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],we.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},An.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Nn.CAP_ROUND:e.createCircle(t);break;case Nn.CAP_SQUARE:e.createSquare(t)}},An.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],i):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,i):this.computeLineBufferCurve(t,i),i.getCoordinates()},An.prototype.getBufferParameters=function(){return this._bufParams},An.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},An.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return An.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},An.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=Cn.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],we.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=Cn.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],we.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},An.prototype.getSegGen=function(t){return new Mn(this._precisionModel,this._bufParams,t)},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},An.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new N(t[n]);return e};var Dn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new at;var t=arguments[0];this._subgraphs=t},Fn={DepthSegment:{configurable:!0}};Dn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new It,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(L(arguments[2],Et)&&arguments[0]instanceof N&&arguments[1]instanceof je){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var c=s.getDepth(we.LEFT);this._seg.p0.equals(u[l])||(c=s.getDepth(we.RIGHT));var h=new kn(this._seg,c);a.add(h)}}else if(L(arguments[2],Et)&&arguments[0]instanceof N&&L(arguments[1],Et))for(var p=arguments[0],f=arguments[1],d=arguments[2],g=f.iterator();g.hasNext();){var y=g.next();y.isForward()&&this.findStabbedSegments(p,y,d)}},Dn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$e.min(e)._leftDepth},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn},Fn.DepthSegment.get=function(){return kn},Object.defineProperties(Dn,Fn);var kn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};kn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},kn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},kn.prototype.toString=function(){return this._upwardSeg.toString()},kn.prototype.interfaces_=function(){return[x]},kn.prototype.getClass=function(){return kn};var Gn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Gn.prototype.area=function(){return Gn.area(this.p0,this.p1,this.p2)},Gn.prototype.signedArea=function(){return Gn.signedArea(this.p0,this.p1,this.p2)},Gn.prototype.interpolateZ=function(t){if(null===t)throw new m("Supplied point is null.");return Gn.interpolateZ(t,this.p0,this.p1,this.p2)},Gn.prototype.longestSideLength=function(){return Gn.longestSideLength(this.p0,this.p1,this.p2)},Gn.prototype.isAcute=function(){return Gn.isAcute(this.p0,this.p1,this.p2)},Gn.prototype.circumcentre=function(){return Gn.circumcentre(this.p0,this.p1,this.p2)},Gn.prototype.area3D=function(){return Gn.area3D(this.p0,this.p1,this.p2)},Gn.prototype.centroid=function(){return Gn.centroid(this.p0,this.p1,this.p2)},Gn.prototype.inCentre=function(){return Gn.inCentre(this.p0,this.p1,this.p2)},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn},Gn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Gn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Gn.det=function(t,e,n,i){return t*i-e*n},Gn.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,u=n.y-o,l=i.y-o,c=s*l-a*u,h=t.x-r,p=t.y-o;return e.z+(l*h-a*p)/c*(n.z-e.z)+(-u*h+s*p)/c*(i.z-e.z)},Gn.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s},Gn.isAcute=function(t,e,n){return!!Ln.isAcute(t,e,n)&&!!Ln.isAcute(e,n,t)&&!!Ln.isAcute(n,t,e)},Gn.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,u=e.y-r,l=2*Gn.det(o,s,a,u),c=Gn.det(s,o*o+s*s,u,a*a+u*u),h=Gn.det(o,o*o+s*s,a,a*a+u*u);return new N(i-c/l,r+h/l)},Gn.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new Y(t.x+n/2,t.y+i/2,1),o=new Y(t.x-i+n/2,t.y+n+i/2,1);return new Y(r,o)},Gn.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n));return new N(t.x+r*(n.x-t.x),t.y+r*(n.y-t.y))},Gn.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=r*u-o*a,c=o*s-i*u,h=i*a-r*s;return Math.sqrt(l*l+c*c+h*h)/2},Gn.centroid=function(t,e,n){return new N((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},Gn.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o;return new N((i*t.x+r*e.x+o*n.x)/s,(i*t.y+r*e.y+o*n.y)/s)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new It;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,P.EXTERIOR,P.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=we.LEFT;this._distance<0&&(e=-this._distance,n=we.RIGHT);var i=t.getExteriorRing(),r=Ct.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,P.EXTERIOR,P.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Ct.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,we.opposite(n),P.INTERIOR,P.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Gn(t[0],t[1],t[2]),i=n.inCentre();return at.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Ct.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,P.EXTERIOR,P.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new dn(t,new Me(0,P.BOUNDARY,e,n));this._curveList.add(i)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=r,s=i,n=we.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $t?this.addPolygon(t):t instanceof Jt?this.addLineString(t):t instanceof Qt?this.addPoint(t):(t instanceof te||t instanceof Ut||t instanceof ne||t instanceof jt)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var Vn=function(){};Vn.prototype.locate=function(t){},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn};var zn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};zn.prototype.next=function(){if(this._atStart)return this._atStart=!1,zn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new i;var t=this._parent.getGeometryN(this._index++);return t instanceof jt?(this._subcollectionIterator=new zn(t),this._subcollectionIterator.next()):t},zn.prototype.remove=function(){throw new Error(this.getClass().getName())},zn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},zn.prototype.interfaces_=function(){return[xt]},zn.prototype.getClass=function(){return zn},zn.isAtomic=function(t){return!(t instanceof jt)};var jn=function(){this._geom=null;var t=arguments[0];this._geom=t};jn.prototype.locate=function(t){return jn.locate(t,this._geom)},jn.prototype.interfaces_=function(){return[Vn]},jn.prototype.getClass=function(){return jn},jn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},jn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!jn.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(jn.isPointInRing(t,r))return!1}return!0},jn.containsPoint=function(t,e){if(e instanceof $t)return jn.containsPointInPolygon(t,e);if(e instanceof jt)for(var n=new zn(e);n.hasNext();){var i=n.next();if(i!==e&&jn.containsPoint(t,i))return!0}return!1},jn.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:jn.containsPoint(t,e)?P.INTERIOR:P.EXTERIOR};var Un=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[P.NONE,P.NONE]};Un.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Un.prototype.propagateSideLabels=function(t){for(var e=P.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,we.LEFT)!==P.NONE&&(e=i.getLocation(t,we.LEFT))}if(e===P.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,we.ON)===P.NONE&&a.setLocation(t,we.ON,r),a.isArea(t)){var u=a.getLocation(t,we.LEFT),l=a.getLocation(t,we.RIGHT);if(l!==P.NONE){if(l!==r)throw new Pe("side location conflict",s.getCoordinate());u===P.NONE&&et.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=u}else et.isTrue(a.getLocation(t,we.LEFT)===P.NONE,"found single null side"),a.setLocation(t,we.RIGHT,r),a.setLocation(t,we.LEFT,r)}}},Un.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Un.prototype.print=function(t){q.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Un.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Un.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,we.LEFT);et.isTrue(i!==P.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();et.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,we.LEFT),u=s.getLocation(t,we.RIGHT);if(a===u)return!1;if(u!==r)return!1;r=a}return!0},Un.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Un.prototype.iterator=function(){return this.getEdges().iterator()},Un.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new It(this._edgeMap.values())),this._edgeList},Un.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===P.NONE&&(this._ptInAreaLocation[t]=jn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Un.prototype.toString=function(){var t=new R;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Un.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Un.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===P.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=P.NONE;if(e[u])l=P.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},Un.prototype.getDegree=function(){return this._edgeMap.size()},Un.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var qn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Pe("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){this.insertEdgeEnd(t,t)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Be.isNorthern(r)&&Be.isNorthern(o)?n:Be.isNorthern(r)||Be.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){q.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new It;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(we.LEFT),i=t.getDepth(we.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new Pe("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=o;u<s;u++){var l=this._edgeList.get(u);l.setEdgeDepths(we.RIGHT,a),a=l.getDepth(we.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=P.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=P.INTERIOR;break}if(i.isInResult()){t=P.EXTERIOR;break}}}if(t===P.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===P.INTERIOR):(s.isInResult()&&(r=P.EXTERIOR),a.isInResult()&&(r=P.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Me(P.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==P.INTERIOR&&o!==P.BOUNDARY||this._label.setLocation(r,P.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Un),Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createNode=function(t){return new ke(t,new qn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ue),Xn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Xn.prototype.compareTo=function(t){return Xn.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},Xn.prototype.interfaces_=function(){return[x]},Xn.prototype.getClass=function(){return Xn},Xn.orientation=function(t){return 1===Ct.increasingDirection(t)},Xn.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=r)===s,p=(l+=o)===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Wn=function(){this._edges=new It,this._ocaMap=new h};Wn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},Wn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Wn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Wn.prototype.iterator=function(){return this._edges.iterator()},Wn.prototype.getEdges=function(){return this._edges},Wn.prototype.get=function(t){return this._edges.get(t)},Wn.prototype.findEqualEdge=function(t){var e=new Xn(t.getCoordinates());return this._ocaMap.get(e)},Wn.prototype.add=function(t){this._edges.add(t);var e=new Xn(t.getCoordinates());this._ocaMap.put(e,t)},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Hn=function(){};Hn.prototype.processIntersections=function(t,e,n,i){},Hn.prototype.isDone=function(){},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Jn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Jn.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Jn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},Jn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Jn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Jn.prototype.getLineIntersector=function(){return this._li},Jn.prototype.hasProperIntersection=function(){return this._hasProper},Jn.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Jn.prototype.hasIntersection=function(){return this._hasIntersection},Jn.prototype.isDone=function(){return!1},Jn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Jn.prototype.interfaces_=function(){return[Hn]},Jn.prototype.getClass=function(){return Jn},Jn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new N(t),this.segmentIndex=e,this.dist=n};Zn.prototype.getSegmentIndex=function(){return this.segmentIndex},Zn.prototype.getCoordinate=function(){return this.coord},Zn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zn.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},Zn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zn.prototype.getDistance=function(){return this.dist},Zn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zn.prototype.interfaces_=function(){return[x]},Zn.prototype.getClass=function(){return Zn};var Qn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Qn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Qn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Qn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},Qn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Qn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);i||n--;var r=new Array(n).fill(null),o=0;r[o++]=new N(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)r[o++]=this.edge.pts[s];return i&&(r[o]=e.coord),new ni(r,new Me(this.edge._label))},Qn.prototype.add=function(t,e,n){var i=new Zn(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},Qn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var Kn=function(){};Kn.prototype.getChainStartIndices=function(t){var e=0,n=new It;n.add(new A(e));do{var i=this.findChainEnd(t,e);n.add(new A(i)),e=i}while(e<t.length-1);return Kn.toIntArray(n)},Kn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&Be.quadrant(t[i-1],t[i])===n;)i++;return i-1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Kn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $n=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new X,this.env2=new X;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Kn;this.startIndex=e.getChainStartIndices(this.pts)};$n.prototype.getCoordinates=function(){return this.pts},$n.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},$n.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},$n.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[r],h=this.pts[o],p=s.pts[a],f=s.pts[u];if(o-r==1&&u-a==1)return l.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(c,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),g=Math.trunc((a+u)/2);r<d&&(a<g&&this.computeIntersectsForChain(r,d,s,a,g,l),g<u&&this.computeIntersectsForChain(r,d,s,g,u,l)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,l),g<u&&this.computeIntersectsForChain(d,o,s,g,u,l))}},$n.prototype.getStartIndexes=function(){return this.startIndex},$n.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var ti=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},ei={NULL_VALUE:{configurable:!0}};ti.prototype.getDepth=function(t,e){return this._depth[t][e]},ti.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},ti.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==ti.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===ti.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._depth[i][r]===ti.NULL_VALUE}},ti.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}},ti.prototype.getDelta=function(t){return this._depth[t][we.RIGHT]-this._depth[t][we.LEFT]},ti.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?P.EXTERIOR:P.INTERIOR},ti.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ti.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==P.EXTERIOR&&i!==P.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=ti.depthAtLocation(i):this._depth[e][n]+=ti.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===P.INTERIOR&&this._depth[r][o]++}},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ti.depthAtLocation=function(t){return t===P.EXTERIOR?0:t===P.INTERIOR?1:ti.NULL_VALUE},ei.NULL_VALUE.get=function(){return-1},Object.defineProperties(ti,ei);var ni=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Qn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ti,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Me.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(i=!1),this.pts[s].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $n(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new X;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new N(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;a<this.pts.length&&r.equals2D(this.pts[a])&&(o=a,s=0),this.eiList.add(r,o,s)},e.prototype.toString=function(){var t=new R;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,we.ON),e.getLocation(1,we.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,we.LEFT),e.getLocation(1,we.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,we.RIGHT),e.getLocation(1,we.RIGHT),2))},e}(Fe),ii=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Wn,this._bufParams=t||null};ii.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ii.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Me(t.getLabel())).flip(),n.merge(i);var r=ii.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ii.depthDelta(t.getLabel()))},ii.prototype.buildSubgraphs=function(t,e){for(var n=new It,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new Dn(n).getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},ii.prototype.createSubgraphs=function(t){for(var e=new It,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Le;r.create(i),e.add(r)}}return $e.sort(e,$e.reverseOrder()),e},ii.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ii.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new En,n=new rt;return n.setPrecisionModel(t),e.setSegmentIntersector(new Jn(n)),e},ii.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new An(n,this._bufParams),r=new Bn(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new qe(new Yn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Ye(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},ii.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new ni(r.getCoordinates(),new Me(s));this.insertUniqueEdge(a)}}},ii.prototype.setNoder=function(t){this._workingNoder=t},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.depthDelta=function(t){var e=t.getLocation(0,we.LEFT),n=t.getLocation(0,we.RIGHT);return e===P.INTERIOR&&n===P.EXTERIOR?1:e===P.EXTERIOR&&n===P.INTERIOR?-1:0},ii.convertSegStrings=function(t){for(var e=new _e,n=new It;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var ri=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ri.prototype.rescale=function(){if(L(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&q.out.println(n)}},ri.prototype.scale=function(){if(L(arguments[0],bt)){for(var t=arguments[0],e=new It,n=t.iterator();n.hasNext();){var i=n.next();e.add(new dn(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),s=0;s<r.length;s++)o[s]=new N(Math.round((r[s].x-this._offsetX)*this._scaleFactor),Math.round((r[s].y-this._offsetY)*this._scaleFactor),r[s].z);return Ct.removeRepeatedPoints(o)}},ri.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ri.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ri.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ri.prototype.interfaces_=function(){return[bn]},ri.prototype.getClass=function(){return ri};var oi=function(){this._li=new rt,this._segStrings=null;var t=arguments[0];this._segStrings=t},si={fact:{configurable:!0}};oi.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new $("found endpt/interior pt intersection at index "+o+" :pt "+n)},oi.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(r,u,o,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(c===p&&h===f)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],y=p.getCoordinates()[f],_=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,y,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,_)))throw new $("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+_)}},oi.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},oi.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},oi.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},oi.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new $("found non-noded collapse at "+oi.fact.createLineString([t,e,n]))},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},si.fact.get=function(){return new _e},Object.defineProperties(oi,si);var ai=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new m("Scale factor must be non-zero");1!==e&&(this._pt=new N(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new N,this._p1Scaled=new N),this.initCorners(this._pt)},ui={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ai.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return et.isTrue(!(s&&a),"Found bad envelope test"),a},ai.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new N(this._maxx,this._maxy),this._corner[1]=new N(this._minx,this._maxy),this._corner[2]=new N(this._minx,this._miny),this._corner[3]=new N(this._maxx,this._miny)},ai.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ai.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ai.prototype.getCoordinate=function(){return this._originalPt},ai.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ai.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ai.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new X(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ai.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ai.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},ai.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai},ui.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ai,ui);var li=function(){this.tempEnv1=new X,this.selectedSegment=new gn};li.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li};var ci=function(){this._index=null;var t=arguments[0];this._index=t},hi={HotPixelSnapAction:{configurable:!0}};ci.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new pi(e,n,i);return this._index.query(r,{interfaces_:function(){return[Je]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},hi.HotPixelSnapAction.get=function(){return pi},Object.defineProperties(ci,hi);var pi=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],i=e.getContext();if(null!==this._parentEdge&&i===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(li),fi=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new It};fi.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},fi.prototype.isDone=function(){return!1},fi.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fi.prototype.interfaces_=function(){return[Hn]},fi.prototype.getClass=function(){return fi};var di=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new rt,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};di.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new oi(e);try{n.checkValid()}catch(t){if(!(t instanceof j))throw t;t.printStackTrace()}},di.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},di.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},di.prototype.findInteriorIntersections=function(t,e){var n=new fi(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},di.prototype.computeVertexSnaps=function(){if(L(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new ai(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},di.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new En,this._pointSnapper=new ci(this._noder.getIndex()),this.snapRound(t,this._li)},di.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new ai(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}},di.prototype.interfaces_=function(){return[bn]},di.prototype.getClass=function(){return di};var gi=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Nn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yi={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gi.prototype.bufferFixedPrecision=function(t){var e=new ri(new di(new fe(1)),t.getScale()),n=new ii(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gi.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gi.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Pe))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=gi.precisionScaleFactor(this._argGeom,this._distance,n),r=new fe(i);this.bufferFixedPrecision(r)}},gi.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gi.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gi.prototype.bufferOriginalPrecision=function(){try{var t=new ii(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $))throw t;this._saveException=t}},gi.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gi.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi},gi.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new gi(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2],o=new gi(n);return o.setQuadrantSegments(r),o.getResultGeometry(i)}if(arguments[2]instanceof Nn&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=arguments[2];return new gi(s,u).getResultGeometry(a)}}else if(4===arguments.length){var l=arguments[0],c=arguments[1],h=arguments[2],p=arguments[3],f=new gi(l);return f.setQuadrantSegments(h),f.setEndCapStyle(p),f.getResultGeometry(c)}},gi.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=T.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},yi.CAP_ROUND.get=function(){return Nn.CAP_ROUND},yi.CAP_BUTT.get=function(){return Nn.CAP_FLAT},yi.CAP_FLAT.get=function(){return Nn.CAP_FLAT},yi.CAP_SQUARE.get=function(){return Nn.CAP_SQUARE},yi.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gi,yi);var _i=function(){this._pt=[new N,new N],this._distance=v.NaN,this._isNull=!0};_i.prototype.getCoordinates=function(){return this._pt},_i.prototype.getCoordinate=function(t){return this._pt[t]},_i.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},_i.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},_i.prototype.getDistance=function(){return this._distance},_i.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i};var mi=function(){};mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi},mi.computeDistance=function(){if(arguments[2]instanceof _i&&arguments[0]instanceof Jt&&arguments[1]instanceof N)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=t.getCoordinates(),r=new gn,o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof _i&&arguments[0]instanceof $t&&arguments[1]instanceof N){var a=arguments[0],u=arguments[1],l=arguments[2];mi.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)mi.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof _i&&arguments[0]instanceof ct&&arguments[1]instanceof N){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof Jt)mi.computeDistance(h,p,f);else if(h instanceof $t)mi.computeDistance(h,p,f);else if(h instanceof jt)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);mi.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof _i&&arguments[0]instanceof gn&&arguments[1]instanceof N){var _=arguments[0],m=arguments[1],v=arguments[2],b=_.closestPoint(m);v.setMinimum(b,m)}};var vi=function(t){this._maxPtDist=new _i,this._inputGeom=t||null},bi={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};vi.prototype.computeMaxMidpointDistance=function(t){var e=new Ei(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vi.prototype.computeMaxVertexDistance=function(t){var e=new xi(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vi.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},vi.prototype.getDistancePoints=function(){return this._maxPtDist},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi},bi.MaxPointDistanceFilter.get=function(){return xi},bi.MaxMidpointDistanceFilter.get=function(){return Ei},Object.defineProperties(vi,bi);var xi=function(t){this._maxPtDist=new _i,this._minPtDist=new _i,this._geom=t||null};xi.prototype.filter=function(t){this._minPtDist.initialize(),mi.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xi.prototype.getMaxPointDistance=function(){return this._maxPtDist},xi.prototype.interfaces_=function(){return[ft]},xi.prototype.getClass=function(){return xi};var Ei=function(t){this._maxPtDist=new _i,this._minPtDist=new _i,this._geom=t||null};Ei.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new N((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),mi.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ei.prototype.isDone=function(){return!1},Ei.prototype.isGeometryChanged=function(){return!1},Ei.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ei.prototype.interfaces_=function(){return[zt]},Ei.prototype.getClass=function(){return Ei};var Ii=function(t){this._comps=t||null};Ii.prototype.filter=function(t){t instanceof $t&&this._comps.add(t)},Ii.prototype.interfaces_=function(){return[Vt]},Ii.prototype.getClass=function(){return Ii},Ii.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Ii.getPolygons(t,new It)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $t?n.add(e):e instanceof jt&&e.apply(new Ii(n)),n}};var Ni=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Ni.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Jt&&this._lines.add(t)},Ni.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Ni.prototype.interfaces_=function(){return[lt]},Ni.prototype.getClass=function(){return Ni},Ni.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Ni.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Ni.getLines(e,n))}},Ni.getLines=function(){if(1===arguments.length){var t=arguments[0];return Ni.getLines(t,!1)}if(2===arguments.length){if(L(arguments[0],bt)&&L(arguments[1],bt)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();Ni.getLines(r,n)}return n}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new It;return o.apply(new Ni(a,s)),a}if(arguments[0]instanceof ct&&L(arguments[1],bt)){var u=arguments[0],l=arguments[1];return u instanceof Jt?l.add(u):u.apply(new Ni(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&L(arguments[0],bt)&&L(arguments[1],bt)){for(var c=arguments[0],h=arguments[1],p=arguments[2],f=c.iterator();f.hasNext();){var d=f.next();Ni.getLines(d,h,p)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&L(arguments[1],bt)){var g=arguments[0],y=arguments[1],_=arguments[2];return g.apply(new Ni(y,_)),y}}};var wi=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new m("Rule must be non-null");this._boundaryRule=t}};wi.prototype.locateInternal=function(){if(arguments[0]instanceof N&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];if(e.isEmpty())return P.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===P.EXTERIOR)return P.EXTERIOR;if(i===P.BOUNDARY)return P.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===P.INTERIOR)return P.EXTERIOR;if(s===P.BOUNDARY)return P.BOUNDARY}return P.INTERIOR}if(arguments[0]instanceof N&&arguments[1]instanceof Jt){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return P.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?at.isOnLine(a,l)?P.INTERIOR:P.EXTERIOR:P.BOUNDARY}if(arguments[0]instanceof N&&arguments[1]instanceof Qt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?P.INTERIOR:P.EXTERIOR}},wi.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):P.EXTERIOR},wi.prototype.intersects=function(t,e){return this.locate(t,e)!==P.EXTERIOR},wi.prototype.updateLocationInfo=function(t){t===P.INTERIOR&&(this._isIn=!0),t===P.BOUNDARY&&this._numBoundaries++},wi.prototype.computeLocation=function(t,e){if(e instanceof Qt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Jt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ut)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof ne)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof jt)for(var u=new zn(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},wi.prototype.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:e instanceof Jt||e instanceof $t?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?P.BOUNDARY:this._numBoundaries>0||this._isIn?P.INTERIOR:P.EXTERIOR)},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var Ci=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._component=i,this._segIndex=r,this._pt=o}},Oi={INSIDE_AREA:{configurable:!0}};Ci.prototype.isInsideArea=function(){return this._segIndex===Ci.INSIDE_AREA},Ci.prototype.getCoordinate=function(){return this._pt},Ci.prototype.getGeometryComponent=function(){return this._component},Ci.prototype.getSegmentIndex=function(){return this._segIndex},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Oi.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ci,Oi);var Pi=function(t){this._pts=t||null};Pi.prototype.filter=function(t){t instanceof Qt&&this._pts.add(t)},Pi.prototype.interfaces_=function(){return[Vt]},Pi.prototype.getClass=function(){return Pi},Pi.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Qt?$e.singletonList(t):Pi.getPoints(t,new It)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof jt&&e.apply(new Pi(n)),n}};var Si=function(){this._locations=null;var t=arguments[0];this._locations=t};Si.prototype.filter=function(t){(t instanceof Qt||t instanceof Jt||t instanceof $t)&&this._locations.add(new Ci(t,0,t.getCoordinate()))},Si.prototype.interfaces_=function(){return[Vt]},Si.prototype.getClass=function(){return Si},Si.getLocations=function(t){var e=new It;return t.apply(new Si(e)),e};var Li=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new wi,this._minDistanceLocation=null,this._minDistance=v.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};Li.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=Ii.getPolygons(this._geom[e]);if(r.size()>0){var o=Si.getLocations(this._geom[i]);if(this.computeContainmentDistance(o,r,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&L(arguments[0],Et)&&L(arguments[1],Et)){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=0;l<s.size();l++)for(var c=s.get(l),h=0;h<a.size();h++)if(this.computeContainmentDistance(c,a.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ci&&arguments[1]instanceof $t){var p=arguments[0],f=arguments[1],d=arguments[2],g=p.getCoordinate();if(P.EXTERIOR!==this._ptLocator.locate(g,f))return this._minDistance=0,d[0]=p,d[1]=new Ci(f,g),null}},Li.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},Li.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Ni.getLines(this._geom[0]),n=Ni.getLines(this._geom[1]),i=Pi.getPoints(this._geom[0]),r=Pi.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},Li.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Li.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Li.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Li.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Jt&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var s=at.distancePointLine(r,i[o],i[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new gn(i[o],i[o+1]).closestPoint(r);n[0]=new Ci(t,o,a),n[1]=new Ci(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Jt&&arguments[1]instanceof Jt){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),p=l.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var g=at.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new gn(h[f],h[f+1]),_=new gn(p[d],p[d+1]),m=y.closestPoints(_);c[0]=new Ci(u,f,m[0]),c[1]=new Ci(l,d,m[1])}if(this._minDistance<=this._terminateDistance)return null}}},Li.prototype.computeMinDistancePoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Ci(r,0,r.getCoordinate()),n[1]=new Ci(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Li.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new m("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Li.prototype.computeMinDistanceLines=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.distance=function(t,e){return new Li(t,e).distance()},Li.isWithinDistance=function(t,e,n){return new Li(t,e,n).distance()<=n},Li.nearestPoints=function(t,e){return new Li(t,e).nearestPoints()};var Ti=function(){this._pt=[new N,new N],this._distance=v.NaN,this._isNull=!0};Ti.prototype.getCoordinates=function(){return this._pt},Ti.prototype.getCoordinate=function(t){return this._pt[t]},Ti.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Ti.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Ti.prototype.toString=function(){return K.toLineString(this._pt[0],this._pt[1])},Ti.prototype.getDistance=function(){return this._distance},Ti.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti};var Mi=function(){};Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.computeDistance=function(){if(arguments[2]instanceof Ti&&arguments[0]instanceof Jt&&arguments[1]instanceof N)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new gn,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Ti&&arguments[0]instanceof $t&&arguments[1]instanceof N){var a=arguments[0],u=arguments[1],l=arguments[2];Mi.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Mi.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Ti&&arguments[0]instanceof ct&&arguments[1]instanceof N){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof Jt)Mi.computeDistance(h,p,f);else if(h instanceof $t)Mi.computeDistance(h,p,f);else if(h instanceof jt)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Mi.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Ti&&arguments[0]instanceof gn&&arguments[1]instanceof N){var _=arguments[0],m=arguments[1],v=arguments[2],b=_.closestPoint(m);v.setMinimum(b,m)}};var Ri=function(){this._g0=null,this._g1=null,this._ptDist=new Ti,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Ai={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Ri.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Ri.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new m("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Ri.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Ri.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Ri.prototype.computeOrientedDistance=function(t,e,n){var i=new Di(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new Fi(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},Ri.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ri(t,e).distance()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new Ri(n,i);return o.setDensifyFraction(r),o.distance()}},Ai.MaxPointDistanceFilter.get=function(){return Di},Ai.MaxDensifiedByFractionDistanceFilter.get=function(){return Fi},Object.defineProperties(Ri,Ai);var Di=function(){this._maxPtDist=new Ti,this._minPtDist=new Ti,this._euclideanDist=new Mi,this._geom=null;var t=arguments[0];this._geom=t};Di.prototype.filter=function(t){this._minPtDist.initialize(),Mi.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Di.prototype.getMaxPointDistance=function(){return this._maxPtDist},Di.prototype.interfaces_=function(){return[ft]},Di.prototype.getClass=function(){return Di};var Fi=function(){this._maxPtDist=new Ti,this._minPtDist=new Ti,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Fi.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,o=(i.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=new N(n.x+s*r,n.y+s*o);this._minPtDist.initialize(),Mi.computeDistance(this._geom,a,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Fi.prototype.isDone=function(){return!1},Fi.prototype.isGeometryChanged=function(){return!1},Fi.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fi.prototype.interfaces_=function(){return[zt]},Fi.prototype.getClass=function(){return Fi};var ki=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Gi={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};ki.prototype.checkMaximumDistance=function(t,e,n){var i=new Ri(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+K.toLineString(r[0],r[1])+")"}},ki.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=ki.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),ki.VERBOSE&&q.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},ki.prototype.checkNegativeValid=function(){if(!(this._input instanceof $t||this._input instanceof ne||this._input instanceof jt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},ki.prototype.getErrorIndicator=function(){return this._errorIndicator},ki.prototype.checkMinimumDistance=function(t,e,n){var i=new Li(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+K.toLineString(r[0],r[1])+" )"}},ki.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},ki.prototype.getErrorLocation=function(){return this._errorLocation},ki.prototype.getPolygonLines=function(t){for(var e=new It,n=new Ni(e),i=Ii.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},ki.prototype.getErrorMessage=function(){return this._errMsg},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},Gi.VERBOSE.get=function(){return!1},Gi.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ki,Gi);var Bi=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Vi={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Bi.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Bi.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Bi.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new X(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new X(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Bi.prototype.checkDistance=function(){var t=new ki(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Bi.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Bi.prototype.checkPolygonal=function(){this._result instanceof $t||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Bi.prototype.getErrorIndicator=function(){return this._errorIndicator},Bi.prototype.getErrorLocation=function(){return this._errorLocation},Bi.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Bi.prototype.report=function(t){if(!Bi.VERBOSE)return null;q.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Bi.prototype.getErrorMessage=function(){return this._errorMsg},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi},Bi.isValidMsg=function(t,e,n){var i=new Bi(t,e,n);return i.isValid()?null:i.getErrorMessage()},Bi.isValid=function(t,e,n){return!!new Bi(t,e,n).isValid()},Vi.VERBOSE.get=function(){return!1},Vi.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bi,Vi);var zi=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};zi.prototype.getCoordinates=function(){return this._pts},zi.prototype.size=function(){return this._pts.length},zi.prototype.getCoordinate=function(t){return this._pts[t]},zi.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},zi.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},zi.prototype.setData=function(t){this._data=t},zi.prototype.getData=function(){return this._data},zi.prototype.toString=function(){return K.toLineString(new ue(this._pts))},zi.prototype.interfaces_=function(){return[pn]},zi.prototype.getClass=function(){return zi};var ji=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new It,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};ji.prototype.getInteriorIntersection=function(){return this._interiorIntersection},ji.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},ji.prototype.getIntersectionSegments=function(){return this._intSegments},ji.prototype.count=function(){return this._intersectionCount},ji.prototype.getIntersections=function(){return this._intersections},ji.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},ji.prototype.setKeepIntersections=function(t){this._keepIntersections=t},ji.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},ji.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},ji.prototype.hasIntersection=function(){return null!==this._interiorIntersection},ji.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},ji.prototype.interfaces_=function(){return[Hn]},ji.prototype.getClass=function(){return ji},ji.createAllIntersectionsFinder=function(t){var e=new ji(t);return e.setFindAllIntersections(!0),e},ji.createAnyIntersectionFinder=function(t){return new ji(t)},ji.createIntersectionCounter=function(t){var e=new ji(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Ui=function(){this._li=new rt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Ui.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Ui.prototype.getIntersections=function(){return this._segInt.getIntersections()},Ui.prototype.isValid=function(){return this.execute(),this._isValid},Ui.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ui.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new ji(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new En;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Ui.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Pe(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Ui.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+K.toLineString(t[0],t[1])+" and "+K.toLineString(t[2],t[3])},Ui.prototype.interfaces_=function(){return[]},Ui.prototype.getClass=function(){return Ui},Ui.computeIntersections=function(t){var e=new Ui(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var qi=function t(){this._nv=null;var e=arguments[0];this._nv=new Ui(t.toSegmentStrings(e))};qi.prototype.checkValid=function(){this._nv.checkValid()},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi},qi.toSegmentStrings=function(t){for(var e=new It,n=t.iterator();n.hasNext();){var i=n.next();e.add(new zi(i.getCoordinates(),i))}return e},qi.checkValid=function(t){new qi(t).checkValid()};var Yi=function(t){this._mapOp=t};Yi.prototype.map=function(t){for(var e=new It,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(_e.toGeometryArray(e))},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi},Yi.map=function(t,e){return new Yi(e).map(t)};var Xi=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new It,this._resultLineList=new It;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Xi.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Xi.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Xi.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Xi.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Cr.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},Xi.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},Xi.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Xi.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},Xi.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Cr.isResultOfOp(i,e)&&e===Cr.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi};var Wi=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new It;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Wi.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Wi.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Cr.INTERSECTION)){var i=n.getLabel();Cr.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},Wi.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi};var Hi=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Hi.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Hi.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof ee&&!i.isEmpty()||(n=!1);for(var r=new It,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ee||(n=!1),r.add(s))}if(n)return this._factory.createPolygon(i,r.toArray([]));var a=new It;return null!==i&&a.add(i),a.addAll(r),this._factory.buildGeometry(a)},Hi.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Hi.prototype.getInputGeometry=function(){return this._inputGeom},Hi.prototype.transformMultiLineString=function(t,e){for(var n=new It,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Hi.prototype.transformCoordinates=function(t,e){return this.copy(t)},Hi.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Hi.prototype.transformMultiPoint=function(t,e){for(var n=new It,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Hi.prototype.transformMultiPolygon=function(t,e){for(var n=new It,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Hi.prototype.copy=function(t){return t.copy()},Hi.prototype.transformGeometryCollection=function(t,e){for(var n=new It,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(_e.toGeometryArray(n)):this._factory.buildGeometry(n)},Hi.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Qt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Jt)return this.transformLineString(t,null);if(t instanceof Ut)return this.transformMultiLineString(t,null);if(t instanceof $t)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof jt)return this.transformGeometryCollection(t,null);throw new m("Unknown Geometry subtype: "+t.getClass().getName())},Hi.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi};var Ji=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Jt&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1];this._srcPts=i,this._isClosed=t.isClosed(i),this._snapTolerance=r}};Ji.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new N(o)),0===i&&this._isClosed&&t.set(t.size()-1,new N(o)))}},Ji.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Ji.prototype.snapTo=function(t){var e=new wt(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Ji.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new N(r),!1)}},Ji.prototype.findSegmentIndexToSnap=function(t,e){for(var n=v.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},Ji.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Ji.prototype.interfaces_=function(){return[]},Ji.prototype.getClass=function(){return Ji},Ji.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Zi=function(t){this._srcGeom=t||null},Qi={SNAP_PRECISION_FACTOR:{configurable:!0}};Zi.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Ki(e,n).transform(this._srcGeom)},Zi.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new Ki(t,n,!0).transform(this._srcGeom),r=i;return e&&L(r,Kt)&&(r=i.buffer(0)),r},Zi.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Zi.prototype.extractTargetCoordinates=function(t){for(var e=new f,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},Zi.prototype.computeMinimumSegmentLength=function(t){for(var e=v.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},Zi.prototype.interfaces_=function(){return[]},Zi.prototype.getClass=function(){return Zi},Zi.snap=function(t,e,n){var i=new Array(2).fill(null),r=new Zi(t);i[0]=r.snapTo(e,n);var o=new Zi(e);return i[1]=o.snapTo(i[0],n),i},Zi.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Zi.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===fe.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(Zi.computeOverlaySnapTolerance(r),Zi.computeOverlaySnapTolerance(o))}},Zi.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zi.SNAP_PRECISION_FACTOR},Zi.snapToSelf=function(t,e,n){return new Zi(t).snapToSelf(e,n)},Qi.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zi,Qi);var Ki=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.snapLine=function(t,e){var n=new Ji(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hi),$i=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$i.prototype.getCommon=function(){return v.longBitsToDouble(this._commonBits)},$i.prototype.add=function(t){var e=v.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=$i.signExpBits(this._commonBits),this._isFirst=!1,null):$i.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$i.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=$i.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$i.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=v.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+v.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},$i.getBit=function(t,e){return 0!=(t&1<<e)?1:0},$i.signExpBits=function(t){return t>>52},$i.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$i.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if($i.getBit(t,i)!==$i.getBit(e,i))return n;n++}return 52};var tr=function(){this._commonCoord=null,this._ccFilter=new nr},er={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};tr.prototype.addCommonBits=function(t){var e=new ir(this._commonCoord);t.apply(e),t.geometryChanged()},tr.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new N(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ir(e);return t.apply(n),t.geometryChanged(),t},tr.prototype.getCommonCoordinate=function(){return this._commonCoord},tr.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},er.CommonCoordinateFilter.get=function(){return nr},er.Translater.get=function(){return ir},Object.defineProperties(tr,er);var nr=function(){this._commonBitsX=new $i,this._commonBitsY=new $i};nr.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},nr.prototype.getCommonCoordinate=function(){return new N(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},nr.prototype.interfaces_=function(){return[ft]},nr.prototype.getClass=function(){return nr};var ir=function(){this.trans=null;var t=arguments[0];this.trans=t};ir.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},ir.prototype.isDone=function(){return!1},ir.prototype.isGeometryChanged=function(){return!0},ir.prototype.interfaces_=function(){return[zt]},ir.prototype.getClass=function(){return ir};var rr=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};rr.prototype.selfSnap=function(t){return new Zi(t).snapTo(t,this._snapTolerance)},rr.prototype.removeCommonBits=function(t){this._cbr=new tr,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rr.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rr.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Cr.overlayOp(e[0],e[1],t);return this.prepareResult(n)},rr.prototype.checkValid=function(t){t.isValid()||q.out.println("Snapped geometry is invalid")},rr.prototype.computeSnapTolerance=function(){this._snapTolerance=Zi.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rr.prototype.snap=function(t){var e=this.removeCommonBits(t);return Zi.snap(e[0],e[1],this._snapTolerance)},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.overlayOp=function(t,e,n){return new rr(t,e).getResultGeometry(n)},rr.union=function(t,e){return rr.overlayOp(t,e,Cr.UNION)},rr.intersection=function(t,e){return rr.overlayOp(t,e,Cr.INTERSECTION)},rr.symDifference=function(t,e){return rr.overlayOp(t,e,Cr.SYMDIFFERENCE)},rr.difference=function(t,e){return rr.overlayOp(t,e,Cr.DIFFERENCE)};var or=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};or.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=Cr.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof $))throw t;i=t}if(!n)try{e=rr.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $?i:t}return e},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.overlayOp=function(t,e,n){return new or(t,e).getResultGeometry(n)},or.union=function(t,e){return or.overlayOp(t,e,Cr.UNION)},or.intersection=function(t,e){return or.overlayOp(t,e,Cr.INTERSECTION)},or.symDifference=function(t,e){return or.overlayOp(t,e,Cr.SYMDIFFERENCE)},or.difference=function(t,e){return or.overlayOp(t,e,Cr.DIFFERENCE)};var sr=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};sr.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr};var ar=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},ur={INSERT:{configurable:!0},DELETE:{configurable:!0}};ar.prototype.isDelete=function(){return this._eventType===ar.DELETE},ar.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ar.prototype.getObject=function(){return this._obj},ar.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},ar.prototype.getInsertEvent=function(){return this._insertEvent},ar.prototype.isInsert=function(){return this._eventType===ar.INSERT},ar.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ar.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ar.prototype.interfaces_=function(){return[x]},ar.prototype.getClass=function(){return ar},ur.INSERT.get=function(){return 1},ur.DELETE.get=function(){return 2},Object.defineProperties(ar,ur);var lr=function(){};lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var cr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};cr.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(cr.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},cr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},cr.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},cr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},cr.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},cr.prototype.hasProperIntersection=function(){return this._hasProper},cr.prototype.hasIntersection=function(){return this._hasIntersection},cr.prototype.isDone=function(){return this._isDone},cr.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},cr.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},cr.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},cr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hr=function(t){function e(){t.call(this),this.events=new It,this.nOverlaps=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.prepareEvents=function(){$e.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof cr&&L(arguments[0],Et)&&L(arguments[1],Et)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&L(arguments[0],Et)&&arguments[1]instanceof cr){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new sr(n,r),s=new ar(e,n.getMinX(r),o);this.events.add(s),this.events.add(new ar(n.getMaxX(r),s))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();this.addEdge(o,i)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lr),pr=function(){this._min=v.POSITIVE_INFINITY,this._max=v.NEGATIVE_INFINITY},fr={NodeComparator:{configurable:!0}};pr.prototype.getMin=function(){return this._min},pr.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pr.prototype.getMax=function(){return this._max},pr.prototype.toString=function(){return K.toLineString(new N(this._min,0),new N(this._max,0))},pr.prototype.interfaces_=function(){return[]},pr.prototype.getClass=function(){return pr},fr.NodeComparator.get=function(){return dr},Object.defineProperties(pr,fr);var dr=function(){};dr.prototype.compare=function(t,e){var n=(t._min+t._max)/2,i=(e._min+e._max)/2;return n<i?-1:n>i?1:0},dr.prototype.interfaces_=function(){return[I]},dr.prototype.getClass=function(){return dr};var gr=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],i=arguments[2];this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pr),yr=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pr),_r=function(){this._leaves=new It,this._root=null,this._level=0};_r.prototype.buildTree=function(){$e.sort(this._leaves,new pr.NodeComparator);for(var t=this._leaves,e=null,n=new It;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},_r.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gr(t,e,n))},_r.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},_r.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},_r.prototype.printNode=function(t){q.out.println(K.toLineString(new N(t._min,this._level),new N(t._max,this._level)))},_r.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},_r.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new yr(t.get(n),t.get(n+1));e.add(r)}}},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r};var mr=function(){this._items=new It};mr.prototype.visitItem=function(t){this._items.add(t)},mr.prototype.getItems=function(){return this._items},mr.prototype.interfaces_=function(){return[Je]},mr.prototype.getClass=function(){return mr};var vr=function(){this._index=null;var t=arguments[0];if(!L(t,Kt))throw new m("Argument must be Polygonal");this._index=new Er(t)},br={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};vr.prototype.locate=function(t){var e=new st(t),n=new xr(e);return this._index.query(t.y,t.y,n),e.getLocation()},vr.prototype.interfaces_=function(){return[Vn]},vr.prototype.getClass=function(){return vr},br.SegmentVisitor.get=function(){return xr},br.IntervalIndexedGeometry.get=function(){return Er},Object.defineProperties(vr,br);var xr=function(){this._counter=null;var t=arguments[0];this._counter=t};xr.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xr.prototype.interfaces_=function(){return[Je]},xr.prototype.getClass=function(){return xr};var Er=function(){this._index=new _r;var t=arguments[0];this.init(t)};Er.prototype.init=function(t){for(var e=Ni.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Er.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},Er.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mr;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er};var Ir=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new wi,2===arguments.length){var e=arguments[0],n=arguments[1],i=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;i.getLocation(t,we.ON)===P.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new cr(n,!0,!1);o.setIsDoneIfProperInt(r);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof $t||this._parentGeom instanceof ne,u=i||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new cr(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Qt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,P.INTERIOR)}else if(arguments[0]instanceof N){var e=arguments[0];this.insertPoint(this._argIndex,e,P.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),P.EXTERIOR,P.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,P.INTERIOR,P.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],P.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],P.BOUNDARY)},e.prototype.addLineString=function(t){var e=Ct.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new ni(e,new Me(this._argIndex,P.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===P.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=Ct.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;at.isCCW(i)&&(r=n,o=e);var s=new ni(i,new Me(this._argIndex,P.BOUNDARY,r,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],P.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new Me(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hr},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof $t)this.addPolygon(e);else if(e instanceof Jt)this.addLineString(e);else if(e instanceof Qt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Ut)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof jt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return L(this._parentGeom,Kt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new vr(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?P.BOUNDARY:P.INTERIOR},e}(qe),Nr=function(){if(this._li=new rt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ir(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ir(0,e,i),this._arg[1]=new Ir(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ir(0,r,s),this._arg[1]=new Ir(1,o,s)}};Nr.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Nr.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr};var wr=function(){};wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr},wr.map=function(){if(arguments[0]instanceof ct&&L(arguments[1],wr.MapOp)){for(var t=arguments[0],e=arguments[1],n=new It,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(L(arguments[0],bt)&&L(arguments[1],wr.MapOp)){for(var o=arguments[0],s=arguments[1],a=new It,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},wr.MapOp=function(){};var Cr=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new wi,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Wn,this._resultPolyList=new It,this._resultLineList=new It,this._resultPointList=new It,this._graph=new qe(new Yn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Me(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new It;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==P.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new It,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new It;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),qi.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ye(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new Xi(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new Wi(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,we.RIGHT),r.getLocation(1,we.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(et.isTrue(!i.isNull(r,we.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,we.LEFT,i.getLocation(r,we.LEFT)),et.isTrue(!i.isNull(r,we.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,we.RIGHT,i.getLocation(r,we.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Nr);Cr.overlayOp=function(t,e,n){return new Cr(t,e).getResultGeometry(n)},Cr.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Cr.createEmptyResult(Cr.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Yi.map(t,{interfaces_:function(){return[wr.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Cr.INTERSECTION)},Cr.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Cr.createEmptyResult(Cr.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Cr.SYMDIFFERENCE)},Cr.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Cr.INTERSECTION:o=Math.min(i,r);break;case Cr.UNION:o=Math.max(i,r);break;case Cr.DIFFERENCE:o=i;break;case Cr.SYMDIFFERENCE:o=Math.max(i,r)}return o},Cr.createEmptyResult=function(t,e,n,i){var r=null;switch(Cr.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Cr.difference=function(t,e){return t.isEmpty()?Cr.createEmptyResult(Cr.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Cr.DIFFERENCE))},Cr.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Cr.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===P.BOUNDARY&&(r=P.INTERIOR),o===P.BOUNDARY&&(o=P.INTERIOR),s){case Cr.INTERSECTION:return r===P.INTERIOR&&o===P.INTERIOR;case Cr.UNION:return r===P.INTERIOR||o===P.INTERIOR;case Cr.DIFFERENCE:return r===P.INTERIOR&&o!==P.INTERIOR;case Cr.SYMDIFFERENCE:return r===P.INTERIOR&&o!==P.INTERIOR||r!==P.INTERIOR&&o===P.INTERIOR}return!1}},Cr.INTERSECTION=1,Cr.UNION=2,Cr.DIFFERENCE=3,Cr.SYMDIFFERENCE=4;var Or=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new wi,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Or.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),i=0;i<n.size()-1;i++)if(n.getCoordinate(i,this._seg.p0),n.getCoordinate(i+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Or.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?P.BOUNDARY:this._ptLocator.locate(t,this._g)},Or.prototype.extractLinework=function(t){var e=new Pr;t.apply(e);var n=e.getLinework(),i=_e.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or};var Pr=function(){this._linework=null,this._linework=new It};Pr.prototype.getLinework=function(){return this._linework},Pr.prototype.filter=function(t){if(t instanceof $t){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Pr.prototype.interfaces_=function(){return[Vt]},Pr.prototype.getClass=function(){return Pr};var Sr=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Sr.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},Sr.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Sr.prototype.getPoints=function(t){for(var e=new It,n=Ni.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},Sr.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,s=Math.sqrt(r*r+o*o),a=n*r/s,u=n*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new N(l-u,c+a);i.add(h)}if(this._doRight){var p=new N(l+u,c-a);i.add(p)}},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr};var Lr=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new It;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new Or(this._geom[0],this._boundaryDistanceTolerance),new Or(this._geom[1],this._boundaryDistanceTolerance),new Or(this._geom[2],this._boundaryDistanceTolerance)]},Tr={TOLERANCE:{configurable:!0}};Lr.prototype.reportResult=function(t,e,n){q.out.println("Overlay result invalid - A:"+P.toLocationSymbol(e[0])+" B:"+P.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+P.toLocationSymbol(e[2]))},Lr.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Lr.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!Lr.hasLocation(this._location,P.BOUNDARY)||this.isValidResult(i,this._location)}},Lr.prototype.addTestPts=function(t){var e=new Sr(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Lr.prototype.isValidResult=function(t,e){var n=Cr.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===P.INTERIOR);return i||this.reportResult(t,e,n),i},Lr.prototype.getInvalidLocation=function(){return this._invalidLocation},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Lr.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Zi.computeSizeBasedSnapTolerance(t),Zi.computeSizeBasedSnapTolerance(e))},Lr.isValid=function(t,e,n,i){return new Lr(t,e,i).isValid(n)},Tr.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Lr,Tr);var Mr=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Mr.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},Mr.prototype.combine=function(){for(var t=new It,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.combine=function(){if(1===arguments.length){var t=arguments[0];return new Mr(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Mr(Mr.createList(e,n)).combine()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];return new Mr(Mr.createList(i,r,o)).combine()}},Mr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Mr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new It;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=new It;return s.add(i),s.add(r),s.add(o),s}};var Rr=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new It)},Ar={STRTREE_NODE_CAPACITY:{configurable:!0}};Rr.prototype.reduceToGeometries=function(t){for(var e=new It,n=t.iterator();n.hasNext();){var i=n.next(),r=null;L(i,Et)?r=this.unionTree(i):i instanceof ct&&(r=i),e.add(r)}return e},Rr.prototype.extractByEnvelope=function(t,e,n){for(var i=new It,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},Rr.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return Mr.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},Rr.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new sn(Rr.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},Rr.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Rr.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Rr.getGeometry(e,n),Rr.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,i);return this.unionSafe(s,a)}},Rr.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},Rr.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Rr.prototype.unionActual=function(t,e){return Rr.restrictToPolygons(t.union(e))},Rr.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Rr.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new It,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);return i.add(s),Mr.combine(i)},Rr.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Rr.restrictToPolygons=function(t){if(L(t,Kt))return t;var e=Ii.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(_e.toPolygonArray(e))},Rr.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Rr.union=function(t){return new Rr(t).union()},Ar.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Rr,Ar);var Dr=function(){};Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Cr.createEmptyResult(Cr.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Cr.UNION)},t.GeoJSONReader=Ie,t.GeoJSONWriter=Ne,t.OverlayOp=Cr,t.UnionOp=Dr,t.BufferOp=gi,Object.defineProperty(t,"__esModule",{value:!0})}(e)},"06eB":function(t,e,n){var i=n("ey2t"),r=n("qnX1"),o=n("eYkv"),s=n("UV1p"),a=n("R6B+"),u=n("hoKw"),l=Date.prototype.getTime;function c(t){return null==t}function h(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}t.exports=function t(e,n,p){var f=p||{};return!!(f.strict?o(e,n):e===n)||(!e||!n||"object"!=typeof e&&"object"!=typeof n?f.strict?o(e,n):e==n:function(e,n,o){var p,f;if(typeof e!=typeof n)return!1;if(c(e)||c(n))return!1;if(e.prototype!==n.prototype)return!1;if(r(e)!==r(n))return!1;var d=s(e),g=s(n);if(d!==g)return!1;if(d||g)return e.source===n.source&&a(e)===a(n);if(u(e)&&u(n))return l.call(e)===l.call(n);var y=h(e),_=h(n);if(y!==_)return!1;if(y||_){if(e.length!==n.length)return!1;for(p=0;p<e.length;p++)if(e[p]!==n[p])return!1;return!0}if(typeof e!=typeof n)return!1;try{var m=i(e),v=i(n)}catch(b){return!1}if(m.length!==v.length)return!1;for(m.sort(),v.sort(),p=m.length-1;p>=0;p--)if(m[p]!=v[p])return!1;for(p=m.length-1;p>=0;p--)if(!t(e[f=m[p]],n[f],o))return!1;return!0}(e,n,f))}},"3S/X":function(t,e,n){"use strict";var i=TypeError,r=Object.getOwnPropertyDescriptor;if(r)try{r({},"")}catch(y){r=null}var o=function(){throw new i},s=r?function(){try{return o}catch(t){try{return r(arguments,"callee").get}catch(e){return o}}}():o,a=n("V+Bs")(),u=Object.getPrototypeOf||function(t){return t.__proto__},l="undefined"==typeof Uint8Array?void 0:u(Uint8Array),c={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":a?u([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":a?u(u([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&a?u((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&a?u((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":a?u(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":a?Symbol:void 0,"%SymbolPrototype%":a?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":s,"%TypedArray%":l,"%TypedArrayPrototype%":l?l.prototype:void 0,"%TypeError%":i,"%TypeErrorPrototype%":i.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},h=n("5L5q").call(Function.call,String.prototype.replace),p=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,f=/\\(\\)?/g,d=function(t){var e=[];return h(t,p,(function(t,n,i,r){e[e.length]=i?h(r,f,"$1"):n||t})),e},g=function(t,e){if(!(t in c))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===c[t]&&!e)throw new i("intrinsic "+t+" exists, but is not available. Please file an issue!");return c[t]};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var n=d(t),o=g("%"+(n.length>0?n[0]:"")+"%",e),s=1;s<n.length;s+=1)if(null!=o)if(r&&s+1>=n.length){var a=r(o,n[s]);if(!e&&!(n[s]in o))throw new i("base intrinsic for "+t+" exists, but the property is not available.");o=a?a.get||a.value:o[n[s]]}else o=o[n[s]];return o}},"48gJ":function(t,e,n){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var i=Object.getOwnPropertySymbols(t);if(1!==i.length||i[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0}},"4oW2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("fJCm");function r(t,e,n){if(null!==t)for(var i,o,s,a,u,l,c,h,p=0,f=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,_=g?t.features.length:1,m=0;m<_;m++){u=(h=!!(c=g?t.features[m].geometry:y?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<u;v++){var b=0,x=0;if(null!==(a=h?c.geometries[v]:c)){l=a.coordinates;var E=a.type;switch(p=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===e(l,f,m,b,x))return!1;f++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],f,m,b,x))return!1;f++,"MultiPoint"===E&&b++}"LineString"===E&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-p;o++){if(!1===e(l[i][o],f,m,b,x))return!1;f++}"MultiLineString"===E&&b++,"Polygon"===E&&x++}"Polygon"===E&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,o=0;o<l[i].length;o++){for(s=0;s<l[i][o].length-p;s++){if(!1===e(l[i][o][s],f,m,b,x))return!1;f++}x++}b++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===r(a.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function a(t,e){var n,i,r,o,s,a,u,l,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(l=f?t.features[n].properties:d?t.properties:{},c=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(u=!!(a=f?t.features[n].geometry:d?t.geometry:t)&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=u?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,c,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],p,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,c,h))return!1;p++}}function u(t,e){a(t,(function(t,n,r,o,s){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(i.feature(t,r,{bbox:o,id:s}),n,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++)if(!1===e(i.feature({type:a,coordinates:t.coordinates[l]},r),n,l))return!1}))}function l(t,e){u(t,(function(t,n,o){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var u,l=0,c=0,h=0;return!1!==r(t,(function(r,a,p,f,d){if(void 0===u||n>l||f>c||d>h)return u=r,l=n,c=f,h=d,void(s=0);var g=i.lineString([u,r],t.properties);if(!1===e(g,n,o,d,s))return!1;s++,u=r}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.coordinates;switch(t.geometry.type){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(i.lineString(o[s],t.properties),n,r,s))return!1}}}))}e.coordEach=r,e.coordReduce=function(t,e,n,i){var o=n;return r(t,(function(t,i,r,s,a){o=0===i&&void 0===n?t:e(o,t,i,r,s,a)}),i),o},e.propEach=o,e.propReduce=function(t,e,n){var i=n;return o(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.featureEach=s,e.featureReduce=function(t,e,n){var i=n;return s(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.coordAll=function(t){var e=[];return r(t,(function(t){e.push(t)})),e},e.geomEach=a,e.geomReduce=function(t,e,n){var i=n;return a(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)})),i},e.flattenEach=u,e.flattenReduce=function(t,e,n){var i=n;return u(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i},e.segmentEach=l,e.segmentReduce=function(t,e,n){var i=n,r=!1;return l(t,(function(t,o,s,a,u){i=!1===r&&void 0===n?t:e(i,t,o,s,a,u),r=!0})),i},e.lineEach=c,e.lineReduce=function(t,e,n){var i=n;return c(t,(function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)})),i},e.findSegment=function(t,e){if(!i.isObject(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),u=u||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),i.lineString([l[a],l[a+1]],u,e);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a-1),i.lineString([l[s][a],l[s][a+1]],u,e);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),i.lineString([l[o][a],l[o][a+1]],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a-1),i.lineString([l[o][s][a],l[o][s][a+1]],u,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(!i.isObject(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),u=u||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return i.point(l,u,e);case"MultiPoint":return o<0&&(o=l.length+o),i.point(l[o],u,e);case"LineString":return a<0&&(a=l.length+a),i.point(l[a],u,e);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a),i.point(l[s][a],u,e);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),i.point(l[o][a],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a),i.point(l[o][s][a],u,e)}throw new Error("geojson is invalid")}},"5EX2":function(t,e){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},"5L5q":function(t,e,n){"use strict";var i=n("8iDC");t.exports=Function.prototype.bind||i},"8iDC":function(t,e,n){"use strict";var i="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,o=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==o.call(e))throw new TypeError(i+e);for(var n,s=r.call(arguments,1),a=function(){if(this instanceof n){var i=e.apply(this,s.concat(r.call(arguments)));return Object(i)===i?i:this}return e.apply(t,s.concat(r.call(arguments)))},u=Math.max(0,e.length-s.length),l=[],c=0;c<u;c++)l.push("$"+c);if(n=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(a),e.prototype){var h=function(){};h.prototype=e.prototype,n.prototype=new h,h.prototype=null}return n}},ARQ1:function(t,e,n){"use strict";var i=function(t){return t!=t};t.exports=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!i(t)||!i(e))}},CmXO:function(t,e,n){"use strict";var i=n("zT+L").supportsDescriptors,r=n("IlOi"),o=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,u=Object.getPrototypeOf,l=/a/;t.exports=function(){if(!i||!u)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=r(),e=u(l),n=o(e,"flags");return n&&n.get===t||s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},D57K:function(t,e,n){"use strict";function i(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{u(i.next(t))}catch(e){o(e)}}function a(t){try{u(i.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))}function r(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){!function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)}(i,r,(e=t[n](e)).done,e.value)}))}}}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}))},F3Ih:function(t,e,n){"use strict";var i;if(!Object.keys){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=n("cTt9"),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),l=a.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(e){return!0}}catch(e){return!0}return!1}();i=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===o.call(t),i=s(t),a=e&&"[object String]"===o.call(t),p=[];if(!e&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var d=l&&n;if(a&&t.length>0&&!r.call(t,0))for(var g=0;g<t.length;++g)p.push(String(g));if(i&&t.length>0)for(var y=0;y<t.length;++y)p.push(String(y));else for(var _ in t)d&&"prototype"===_||!r.call(t,_)||p.push(String(_));if(u)for(var m=function(t){if("undefined"==typeof window||!f)return h(t);try{return h(t)}catch(e){return!1}}(t),v=0;v<c.length;++v)m&&"constructor"===c[v]||!r.call(t,c[v])||p.push(c[v]);return p}}t.exports=i},FGo3:function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},GM35:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return i}));class i{constructor(t=[],e=r){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1),o=e[i];const s=i+1;if(s<this.length&&n(e[s],o)<0&&(i=s,o=e[s]),n(o,r)>=0)break;e[t]=o,t=i}e[t]=r}}function r(t,e){return t<e?-1:t>e?1:0}},IVkz:function(t,e,n){"use strict";var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),r=new Uint8Array(16);function o(){if(!i)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)}for(var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(t){return"string"==typeof t&&s.test(t)},u=[],l=0;l<256;++l)u.push((l+256).toString(16).substr(1));e.a=function(t,e,n){var i=(t=t||{}).random||(t.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=i[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!a(n))throw TypeError("Stringified UUID is invalid");return n}(i)}},IlOi:function(t,e,n){"use strict";var i=n("YZE+"),r=n("zT+L").supportsDescriptors,o=Object.getOwnPropertyDescriptor,s=TypeError;t.exports=function(){if(!r)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return i}},"Kt/E":function(t,e,n){"use strict";var i,r=n("+cQG"),o=n("rjvG"),s=n("70ZC"),a=n("j/Z9"),u=n("fdeV"),l=n("DiD3"),c=n("mm/l"),h=n("oVSo"),p=n("H40N"),f=n("rHrS"),d=n("8f5B"),g=n("mTvk"),y=n("y1k7"),_=n("7Gkf"),m=n("vog+"),v=n("61KW"),b=n("m+aV"),x=n("I/d5"),E=n("hWN6"),I=n("A5l+"),N=n("lRKV"),w=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),C=[0,0,0,0],O=[],P=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.features=n,r.mapBrowserEvent=i,r}return w(e,t),e}(s.a),S=function(t){function e(e){var n,i,s=t.call(this,e)||this;if(s.boundHandleFeatureChange_=s.handleFeatureChange_.bind(s),s.condition_=e.condition?e.condition:_.i,s.defaultDeleteCondition_=function(t){return Object(_.b)(t)&&Object(_.k)(t)},s.deleteCondition_=e.deleteCondition?e.deleteCondition:s.defaultDeleteCondition_,s.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:_.d,s.vertexFeature_=null,s.vertexSegments_=null,s.lastPixel_=[0,0],s.ignoreNextSingleClick_=!1,s.featuresBeingModified_=null,s.rBush_=new f.a,s.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,s.snappedToVertex_=!1,s.changingFeature_=!1,s.dragSegments_=[],s.overlay_=new g.a({source:new y.a({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(n=Object(b.b)(),function(t,e){return n[l.a.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),s.SEGMENT_WRITERS_={Point:s.writePointGeometry_.bind(s),LineString:s.writeLineStringGeometry_.bind(s),LinearRing:s.writeLineStringGeometry_.bind(s),Polygon:s.writePolygonGeometry_.bind(s),MultiPoint:s.writeMultiPointGeometry_.bind(s),MultiLineString:s.writeMultiLineStringGeometry_.bind(s),MultiPolygon:s.writeMultiPolygonGeometry_.bind(s),Circle:s.writeCircleGeometry_.bind(s),GeometryCollection:s.writeGeometryCollectionGeometry_.bind(s)},s.source_=null,s.hitDetection_=null,e.features?i=e.features:e.source&&(s.source_=e.source,i=new r.a(s.source_.getFeatures()),s.source_.addEventListener(d.a.ADDFEATURE,s.handleSourceAdd_.bind(s)),s.source_.addEventListener(d.a.REMOVEFEATURE,s.handleSourceRemove_.bind(s))),!i)throw new Error("The modify interaction requires features, a source or a layer");return e.hitDetection&&(s.hitDetection_=e.hitDetection),s.features_=i,s.features_.forEach(s.addFeature_.bind(s)),s.features_.addEventListener(o.a.ADD,s.handleFeatureAdd_.bind(s)),s.features_.addEventListener(o.a.REMOVE,s.handleFeatureRemove_.bind(s)),s.lastPointerEvent_=null,s.delta_=[0,0],s}return w(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var n=this.SEGMENT_WRITERS_[e.getType()];n&&n(t,e)}var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),t.addEventListener(a.a.CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new r.a;for(var n=this.featuresBeingModified_.getArray(),i=0,o=e.length;i<o;++i){var s=e[i][0].feature;-1===n.indexOf(s)&&this.featuresBeingModified_.push(s)}this.dispatchEvent(new P("modifystart",this.featuresBeingModified_,t))}},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(a.a.CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,n=[];e.forEach((function(e){t===e.feature&&n.push(e)}));for(var i=n.length-1;i>=0;--i){for(var r=n[i],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===r&&this.dragSegments_.splice(o,1);e.remove(r)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){this.removeFeature_(t.element)},e.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates(),i={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i){var o=n[i],s={feature:t,geometry:e,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length-1;i<r;++i){var o=n.slice(i,i+2),s={feature:t,geometry:e,index:i,segment:o};this.rBush_.insert(Object(m.b)(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),l={feature:t,geometry:e,depth:[i],index:s,segment:u};this.rBush_.insert(Object(m.b)(u),l)}},e.prototype.writePolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),l={feature:t,geometry:e,depth:[i],index:s,segment:u};this.rBush_.insert(Object(m.b)(u),l)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],s=0,a=o.length;s<a;++s)for(var u=o[s],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),p={feature:t,geometry:e,depth:[s,i],index:l,segment:h};this.rBush_.insert(Object(m.b)(h),p)}},e.prototype.writeCircleGeometry_=function(t,e){var n=e.getCenter(),i={feature:t,geometry:e,index:0,segment:[n,n]},r={feature:t,geometry:e,index:1,segment:[n,n]},o=[i,r];i.featureSegments=o,r.featureSegments=o,this.rBush_.insert(Object(m.m)(n),i);var s=e,a=Object(I.k)();if(a&&this.getMap()){var u=this.getMap().getView().getProjection();s=s.clone().transform(a,u),s=Object(E.b)(s).transform(u,a)}this.rBush_.insert(s.getExtent(),r)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var n=e.getGeometriesArray(),i=0;i<n.length;++i){var r=n[i];(0,this.SEGMENT_WRITERS_[r.getType()])(t,r)}},e.prototype.createOrUpdateVertexFeature_=function(t,e,n){var i=this.vertexFeature_;return i?i.getGeometry().setCoordinates(t):(i=new u.a(new h.a(t)),this.vertexFeature_=i,this.overlay_.getSource().addFeature(i)),i.set("features",e),i.set("geometries",n),i},e.prototype.handleEvent=function(e){return!e.originalEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=c.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(n=!(e.type!=c.a.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==c.a.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!n);var n},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);for(var e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],n=[],i=[],r=0,o=this.dragSegments_.length;r<o;++r){var s=this.dragSegments_[r],a=s[0],u=a.feature;-1===n.indexOf(u)&&n.push(u);var c=a.geometry;-1===i.indexOf(c)&&i.push(c);for(var h=a.depth,p=void 0,f=a.segment,d=s[1];e.length<c.getStride();)e.push(f[d][e.length]);switch(c.getType()){case l.a.POINT:p=e,f[0]=e,f[1]=e;break;case l.a.MULTI_POINT:(p=c.getCoordinates())[a.index]=e,f[0]=e,f[1]=e;break;case l.a.LINE_STRING:(p=c.getCoordinates())[a.index+d]=e,f[d]=e;break;case l.a.MULTI_LINE_STRING:case l.a.POLYGON:(p=c.getCoordinates())[h[0]][a.index+d]=e,f[d]=e;break;case l.a.MULTI_POLYGON:(p=c.getCoordinates())[h[1]][h[0]][a.index+d]=e,f[d]=e;break;case l.a.CIRCLE:if(f[0]=e,f[1]=e,0===a.index)this.changingFeature_=!0,c.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var g=t.map.getView().getProjection(),y=Object(v.c)(Object(I.e)(c.getCenter(),g),Object(I.e)(e,g)),_=Object(I.k)();if(_){var m=c.clone().transform(_,g);m.setRadius(y),y=m.transform(g,_).getRadius()}c.setRadius(y),this.changingFeature_=!1}}p&&this.setGeometryCoordinates_(c,p)}this.createOrUpdateVertexFeature_(e,n,i)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;var n=this.vertexFeature_;if(n){var i=t.map.getView().getProjection(),r=[],o=n.getGeometry().getCoordinates(),s=Object(m.b)([o]),a=this.rBush_.getInExtent(s),u={};a.sort(L);for(var c=0,h=a.length;c<h;++c){var p=a[c],f=p.segment,d=Object(N.c)(p.geometry),g=p.depth;if(g&&(d+="-"+g.join("-")),u[d]||(u[d]=new Array(2)),p.geometry.getType()!==l.a.CIRCLE||1!==p.index)if(!Object(v.d)(f[0],o)||u[d][0])if(!Object(v.d)(f[1],o)||u[d][1])Object(N.c)(f)in this.vertexSegments_&&!u[d][0]&&!u[d][1]&&this.insertVertexCondition_(t)&&r.push(p);else{if((p.geometry.getType()===l.a.LINE_STRING||p.geometry.getType()===l.a.MULTI_LINE_STRING)&&u[d][0]&&0===u[d][0].index)continue;this.dragSegments_.push([p,1]),u[d][1]=p}else this.dragSegments_.push([p,0]),u[d][0]=p;else{var y=M(e,p,i);Object(v.d)(y,o)&&!u[d][0]&&(this.dragSegments_.push([p,0]),u[d][0]=p)}}r.length&&this.willModifyFeatures_(t,[r]);for(var _=r.length-1;_>=0;--_)this.insertVertex_(r[_],o)}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var n=this.dragSegments_[e][0],i=n.geometry;if(i.getType()===l.a.CIRCLE){var r=i.getCenter(),o=n.featureSegments[0],s=n.featureSegments[1];o.segment[0]=r,o.segment[1]=r,s.segment[0]=r,s.segment[1]=r,this.rBush_.update(Object(m.m)(r),o);var a=i,u=Object(I.k)();if(u){var c=t.map.getView().getProjection();a=a.clone().transform(u,c),a=Object(E.b)(a).transform(c,u)}this.rBush_.update(a.getExtent(),s)}else this.rBush_.update(Object(m.b)(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new P("modifyend",this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,n){var i,r,o=this,s=n||e.getCoordinateFromPixel(t),a=e.getView().getProjection();if(this.hitDetection_&&e.forEachFeatureAtPixel(t,(function(t,e,n){if((n=n||t.getGeometry()).getType()===l.a.POINT){r=n;var o=n.getCoordinates();i=[{feature:t,geometry:n,segment:[o,o]}]}return!0}),{layerFilter:"object"==typeof this.hitDetection_?function(t){return t===o.hitDetection_}:void 0}),!i){var u=Object(I.f)(Object(m.m)(s,C),a),c=e.getView().getResolution()*this.pixelTolerance_,h=Object(I.n)(Object(m.c)(u,c,C),a);i=this.rBush_.getInExtent(h)}if(i&&i.length>0){var p=i.sort((function(t,e){return T(s,t,a)-T(s,e,a)}))[0],f=p.segment,d=M(s,p,a),g=e.getPixelFromCoordinate(d),y=Object(v.c)(t,g);if(r||y<=this.pixelTolerance_){var _={};if(_[Object(N.c)(f)]=!0,this.delta_[0]=d[0]-s[0],this.delta_[1]=d[1]-s[1],p.geometry.getType()===l.a.CIRCLE&&1===p.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(d,[p.feature],[p.geometry]);else{var b=e.getPixelFromCoordinate(f[0]),x=e.getPixelFromCoordinate(f[1]),E=Object(v.h)(g,b),w=Object(v.h)(g,x);y=Math.sqrt(Math.min(E,w)),this.snappedToVertex_=y<=this.pixelTolerance_,this.snappedToVertex_&&(d=E>w?f[1]:f[0]),this.createOrUpdateVertexFeature_(d,[p.feature],[p.geometry]);var O={};O[Object(N.c)(p.geometry)]=!0;for(var P=1,S=i.length;P<S;++P){var L=i[P].segment;if(!(Object(v.d)(f[0],L[0])&&Object(v.d)(f[1],L[1])||Object(v.d)(f[0],L[1])&&Object(v.d)(f[1],L[0])))break;var R=Object(N.c)(i[P].geometry);R in O||(O[R]=!0,_[Object(N.c)(L)]=!0)}}return void(this.vertexSegments_=_)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var n,i=t.segment,r=t.feature,o=t.geometry,s=t.depth,a=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case l.a.MULTI_LINE_STRING:case l.a.POLYGON:(n=o.getCoordinates())[s[0]].splice(a+1,0,e);break;case l.a.MULTI_POLYGON:(n=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case l.a.LINE_STRING:(n=o.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(o,n);var u=this.rBush_;u.remove(t),this.updateSegmentIndices_(o,a,s,1);var c={segment:[i[0],e],feature:r,geometry:o,depth:s,index:a};u.insert(Object(m.b)(c.segment),c),this.dragSegments_.push([c,1]);var h={segment:[e,i[1]],feature:r,geometry:o,depth:s,index:a+1};u.insert(Object(m.b)(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=c.a.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);var e=this.removeVertex_();return this.dispatchEvent(new P("modifyend",this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1},e.prototype.removeVertex_=function(){var t,e,n,i,r,o,s,a,u,c,h,p=this.dragSegments_,f={},d=!1;for(r=p.length-1;r>=0;--r)c=(n=p[r])[0],h=Object(N.c)(c.feature),c.depth&&(h+="-"+c.depth.join("-")),h in f||(f[h]={}),0===n[1]?(f[h].right=c,f[h].index=c.index):1==n[1]&&(f[h].left=c,f[h].index=c.index+1);for(h in f){switch(u=f[h].right,(a=(o=f[h].index)-1)<0&&(a=0),t=e=(i=(c=void 0!==(s=f[h].left)?s:u).geometry).getCoordinates(),d=!1,i.getType()){case l.a.MULTI_LINE_STRING:e[c.depth[0]].length>2&&(e[c.depth[0]].splice(o,1),d=!0);break;case l.a.LINE_STRING:e.length>2&&(e.splice(o,1),d=!0);break;case l.a.MULTI_POLYGON:t=t[c.depth[1]];case l.a.POLYGON:(t=t[c.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),d=!0,0===o&&(t.pop(),t.push(t[0]),a=t.length-1))}if(d){this.setGeometryCoordinates_(i,e);var g=[];if(void 0!==s&&(this.rBush_.remove(s),g.push(s.segment[0])),void 0!==u&&(this.rBush_.remove(u),g.push(u.segment[1])),void 0!==s&&void 0!==u){var y={depth:c.depth,feature:c.feature,geometry:c.geometry,index:a,segment:g};this.rBush_.insert(Object(m.b)(y.segment),y)}this.updateSegmentIndices_(i,o,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),p.length=0}}return d},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,n,i){this.rBush_.forEachInExtent(t.getExtent(),(function(r){r.geometry===t&&(void 0===n||void 0===r.depth||Object(x.b)(r.depth,n))&&r.index>e&&(r.index+=i)}))},e}(p.b);function L(t,e){return t.index-e.index}function T(t,e,n){var i=e.geometry;if(i.getType()===l.a.CIRCLE){var r=i;if(1===e.index){var o=Object(I.k)();o&&(r=r.clone().transform(o,n));var s=Object(v.h)(r.getCenter(),Object(I.e)(t,n)),a=Math.sqrt(s)-r.getRadius();return a*a}}var u=Object(I.e)(t,n);return O[0]=Object(I.e)(e.segment[0],n),O[1]=Object(I.e)(e.segment[1],n),Object(v.i)(u,O)}function M(t,e,n){var i=e.geometry;if(i.getType()===l.a.CIRCLE&&1===e.index){var r=i,o=Object(I.k)();return o&&(r=r.clone().transform(o,n)),Object(I.m)(r.getClosestPoint(Object(I.e)(t,n)),n)}var s=Object(I.e)(t,n);return O[0]=Object(I.e)(e.segment[0],n),O[1]=Object(I.e)(e.segment[1],n),Object(I.m)(Object(v.b)(s,O),n)}e.a=S},Mi3R:function(t,e,n){"use strict";var i=n("Z4rD"),r=n("zT+L");t.exports=function(){var t=i();return r(Object,{is:t},{is:function(){return Object.is!==t}}),t}},PewW:function(t,e,n){"use strict";n.d(e,"b",(function(){return ie})),n.d(e,"a",(function(){return ue}));var i,r=n("EM62"),o=n("C05f"),s=n("D57K"),a=n("6q3V"),u=n("fdeV"),l=n("+cQG"),c=n("XZLj"),h=n("g+5l"),p=n("8bJt"),f=n("IVkz"),d=n("4KU7"),g=n("/GEF"),y=n("YibT"),_=n("DiD3"),m=n("5urs"),v=n("vxo4"),b=n("Qs0z"),x=n("oVSo"),E=n("hWN6"),I=n("jFox"),N=n("yki2"),w=n("lRKV"),C=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function O(t){return"string"==typeof t?t:""}var P=function(t){function e(){return t.call(this)||this}return C(e,t),e.prototype.getType=function(){return N.a.TEXT},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(O(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return Object(w.b)()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(O(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return Object(w.b)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(O(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return Object(w.b)()},e.prototype.readProjection=function(t){return this.readProjectionFromText(O(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return Object(w.b)()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return Object(w.b)()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return Object(w.b)()},e}(I.a),S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),L={POINT:x.a,LINESTRING:m.a,POLYGON:E.a,MULTIPOINT:b.a,MULTILINESTRING:v.a,MULTIPOLYGON:d.a},T={};for(var M in _.a)T[M]=_.a[M].toUpperCase();var R=function(){function t(t){this.wkt=t,this.index_=-1}return t.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},t.prototype.nextToken=function(){var t,e=this.nextChar_(),n=this.index_,i=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.isNumeric_(e)||"-"==e)t=4,i=this.readNumber_();else if(this.isAlpha_(e))t=1,i=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=6}return{position:n,value:i,type:t}},t.prototype.readNumber_=function(){var t,e=this.index_,n=!1,i=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},t.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},t}(),A=function(){function t(t){this.lexer_=t,this.layout_=y.a.XY}return t.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},t.prototype.isTokenType=function(t){return this.token_.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},t.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},t.prototype.parseGeometryLayout_=function(){var t=y.a.XY,e=this.token_;if(this.isTokenType(1)){var n=e.value;"Z"===n?t=y.a.XYZ:"M"===n?t=y.a.XYM:"ZM"===n&&(t=y.a.XYZM),t!==y.a.XY&&this.consume_()}return t},t.prototype.parseGeometryCollectionText_=function(){if(this.match(2)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePointText_=function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},t.prototype.parseLineStringText_=function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePolygonText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPointText_=function(){var t;if(this.match(2)){if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiLineStringText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPolygonText_=function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,n=0;n<e;++n){var i=this.token_;if(!this.match(4))break;t.push(i.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},t.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t},t.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t},t.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t},t.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t},t.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(1)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t},t.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},t.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(1)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var n=this.parseGeometryCollectionText_();return new g.a(n)}var i=L[e];if(!i)throw new Error("Invalid geometry type: "+e);var r=void 0;switch(e){case"POINT":r=this.parsePointText_();break;case"LINESTRING":r=this.parseLineStringText_();break;case"POLYGON":r=this.parsePolygonText_();break;case"MULTIPOINT":r=this.parseMultiPointText_();break;case"MULTILINESTRING":r=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":r=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return r||(r=i===L.POINT?[NaN,NaN]:[]),new i(r,this.layout_)}throw new Error(this.formatErrorMessage_())},t}(),D=function(t){function e(e){var n=t.call(this)||this,i=e||{};return n.splitCollection_=void 0!==i.splitCollection&&i.splitCollection,n}return S(e,t),e.prototype.parse_=function(t){var e=new R(t);return new A(e).parse()},e.prototype.readFeatureFromText=function(t,e){var n=this.readGeometryFromText(t,e);if(n){var i=new u.a;return i.setGeometry(n),i}return null},e.prototype.readFeaturesFromText=function(t,e){for(var n,i=this.readGeometryFromText(t,e),r=[],o=0,s=(n=this.splitCollection_&&i.getType()==_.a.GEOMETRY_COLLECTION?i.getGeometriesArray():[i]).length;o<s;++o){var a=new u.a;a.setGeometry(n[o]),r.push(a)}return r},e.prototype.readGeometryFromText=function(t,e){var n=this.parse_(t);return n?Object(I.b)(n,!1,e):null},e.prototype.writeFeatureText=function(t,e){var n=t.getGeometry();return n?this.writeGeometryText(n,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var n=[],i=0,r=t.length;i<r;++i)n.push(t[i].getGeometry());var o=new g.a(n);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return V(Object(I.b)(t,!0,e))},e}(P);function F(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function k(t){for(var e=t.getCoordinates(),n=[],i=0,r=e.length;i<r;++i)n.push(e[i].join(" "));return n.join(",")}function G(t){for(var e=[],n=t.getLinearRings(),i=0,r=n.length;i<r;++i)e.push("("+k(n[i])+")");return e.join(",")}var B={Point:F,LineString:k,Polygon:G,MultiPoint:function(t){for(var e=[],n=t.getPoints(),i=0,r=n.length;i<r;++i)e.push("("+F(n[i])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],n=t.getLineStrings(),i=0,r=n.length;i<r;++i)e.push("("+k(n[i])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],n=t.getPolygons(),i=0,r=n.length;i<r;++i)e.push("("+G(n[i])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],n=t.getGeometries(),i=0,r=n.length;i<r;++i)e.push(V(n[i]));return e.join(",")}};function V(t){var e=t.getType(),n=(0,B[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var i=function(t){var e=t.getLayout(),n="";return e!==y.a.XYZ&&e!==y.a.XYZM||(n+="Z"),e!==y.a.XYM&&e!==y.a.XYZM||(n+="M"),n}(t);i.length>0&&(e+=" "+i)}return 0===n.length?e+" EMPTY":e+"("+n+")"}var z=D,j=n("nsO7"),U=n("Jr41"),q=n("nkxq"),Y=n("W1gw"),X=n("OZ4H"),W=n("sEIs"),H=n("2kYt"),J=n("UwWW"),Z=n("VkHG"),Q=n("seVz"),K=n("QcI7"),$=n("Sv/w"),tt=n("wqpa"),et=n("i8+0");let nt=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["mol-species-dataset-menu-legend-overlay"]],decls:25,vars:0,consts:[[1,"legend-box"],["src","https://cdn.mol.org/static/images/legends/ranges/seasonality-breeding.png",1,"legend-img"],["src","https://cdn.mol.org/static/images/legends/ranges/seasonality-non-breeding.png",1,"legend-img"],["src","https://cdn.mol.org/static/images/legends/ranges/seasonality-resident.png",1,"legend-img"],["src","https://cdn.mol.org/static/images/legends/ranges/seasonality-passage.png",1,"legend-img"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"h3"),r.Jc(2,"Expert range maps key"),r.Vb(),r.Wb(3,"table"),r.Wb(4,"tbody"),r.Wb(5,"tr"),r.Wb(6,"td"),r.Rb(7,"img",1),r.Vb(),r.Wb(8,"td"),r.Jc(9," Breeding "),r.Vb(),r.Vb(),r.Wb(10,"tr"),r.Wb(11,"td"),r.Rb(12,"img",2),r.Vb(),r.Wb(13,"td"),r.Jc(14," Non-breeding "),r.Vb(),r.Vb(),r.Wb(15,"tr"),r.Wb(16,"td"),r.Rb(17,"img",3),r.Vb(),r.Wb(18,"td"),r.Jc(19," Resident "),r.Vb(),r.Vb(),r.Wb(20,"tr"),r.Wb(21,"td"),r.Rb(22,"img",4),r.Vb(),r.Wb(23,"td"),r.Jc(24," Passage "),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb())},styles:[".legend-box[_ngcontent-%COMP%]{background-color:#fff;padding:10px;display:block;top:-16px;left:80px;box-shadow:0 4px 7px 0 rgba(0,0,0,.2),0 4px 4px 0 rgba(0,0,0,.14),0 5px 4px -4px rgba(0,0,0,.12)}h3[_ngcontent-%COMP%]{padding:0;margin:0;font-size:1em}.legend-img[_ngcontent-%COMP%]{width:25px;height:25px;padding:3px}table[_ngcontent-%COMP%]{border-spacing:0;font-size:.5em;border-collapse:collapse}"]}),t})();var it=n("aiQ1"),rt=n("HYj3"),ot=n("PBFl"),st=n("Y2X+"),at=n("bFHC"),ut=n("s2Ay");function lt(t,e){1&t&&r.Rb(0,"button",13)}function ct(t,e){1&t&&(r.Wb(0,"button",14),r.Rb(1,"i",15),r.Vb())}const ht=function(){return{"feature-count":!0}};function pt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"mat-tree-node",3),r.Wb(1,"div",4),r.Wb(2,"div",5),r.Hc(3,lt,1,0,"button",6),r.Hc(4,ct,2,0,"button",7),r.Wb(5,"button",8),r.ec("click",(function(){r.zc(t);const n=e.$implicit;return r.ic().toggleDataset(n.data)})),r.Wb(6,"mat-icon"),r.Jc(7),r.Vb(),r.Vb(),r.Wb(8,"div",9),r.ec("click",(function(){r.zc(t);const n=e.$implicit;return r.ic().info(n,!0)})),r.Jc(9),r.Vb(),r.Wb(10,"span",10),r.Jc(11),r.Vb(),r.Wb(12,"button",11),r.ec("click",(function(){r.zc(t);const n=e.$implicit;return r.ic().zoom(n)})),r.jc(13,"translate"),r.Wb(14,"mat-icon"),r.Jc(15,"zoom_in"),r.Vb(),r.Vb(),r.Wb(16,"button",11),r.ec("click",(function(){r.zc(t);const n=e.$implicit;return r.ic().info(n,!0)})),r.jc(17,"translate"),r.Rb(18,"i",12),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&t){const t=e.$implicit;r.Cb(3),r.oc("ngIf",!t.data.user_dataset),r.Cb(1),r.oc("ngIf",t.data.user_dataset),r.Cb(3),r.Lc(" ",t.data.visible?"check_box":"check_box_outline_blank"," "),r.Cb(1),r.oc("matTooltip",t.data.dataset_title)("matTooltipShowDelay",500),r.Cb(1),r.Lc(" ",t.data.dataset_title," "),r.Cb(1),r.Eb(r.qc(16,ht)),r.oc("matTooltip",t.data.tooltip),r.Cb(1),r.Kc(t.data.n_display),r.Cb(1),r.oc("matTooltip",r.kc(13,12,"info_zoom_dataset")),r.Cb(4),r.oc("matTooltip",r.kc(17,14,"info_about_dataset"))}}function ft(t,e){if(1&t&&(r.Wb(0,"div",22),r.Jc(1),r.jc(2,"translate"),r.Vb()),2&t){const t=r.ic().$implicit;r.Db("aria-label","toggle "+t.data.type_title),r.Cb(1),r.Lc(" ",r.kc(2,2,"src_"+t.data.product_type)," ")}}function dt(t,e){if(1&t&&(r.Wb(0,"div",22),r.Jc(1),r.Vb()),2&t){const t=r.ic().$implicit;r.Db("aria-label","toggle "+t.data.type_title),r.Cb(1),r.Lc(" ",t.data.type_title," ")}}function gt(t,e){if(1&t&&(r.Wb(0,"div",22),r.Jc(1," Movement "),r.Vb()),2&t){const t=r.ic().$implicit;r.Db("aria-label","toggle "+t.data.type_title)}}function yt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"mat-tree-node",3),r.Wb(1,"button",16),r.Wb(2,"mat-icon",17),r.Jc(3),r.Vb(),r.Vb(),r.Wb(4,"button",18),r.ec("click",(function(){r.zc(t);const n=e.$implicit;return r.ic().toggleDatatype(n)})),r.Wb(5,"mat-icon"),r.Jc(6),r.Vb(),r.Vb(),r.Hc(7,ft,3,4,"div",19),r.Hc(8,dt,2,2,"div",19),r.Hc(9,gt,2,1,"div",19),r.Rb(10,"img",20),r.Wb(11,"span",21),r.Jc(12),r.Vb(),r.Wb(13,"button",11),r.ec("click",(function(){r.zc(t);const n=e.$implicit;return r.ic().zoom(n)})),r.jc(14,"translate"),r.Wb(15,"mat-icon"),r.Jc(16,"zoom_in"),r.Vb(),r.Vb(),r.Wb(17,"button",11),r.ec("click",(function(){r.zc(t);const n=e.$implicit;return r.ic().info(n,!1)})),r.jc(18,"translate"),r.Rb(19,"i",12),r.Vb(),r.Vb()}if(2&t){const t=e.$implicit,n=r.ic();r.Cb(1),r.Db("aria-label","toggle "+t.data.type_title),r.Cb(2),r.Lc(" ",n.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),r.Cb(3),r.Lc(" ",t.data.icon," "),r.Cb(1),r.oc("ngIf","movement"!=t.data.product_type&&"alienchecklist"!=t.data.product_type),r.Cb(1),r.oc("ngIf","alienchecklist"==t.data.product_type),r.Cb(1),r.oc("ngIf","movement"==t.data.product_type),r.Cb(1),r.oc("src","https://cdn.mol.org/static/images/legends/datatypes/"+("points"===t.data.product_type?"points_agg":t.data.product_type)+".png",r.Bc),r.Cb(1),r.oc("matTooltip",t.data.tooltip),r.Cb(1),r.Kc(t.data.n_display),r.Cb(1),r.oc("matTooltip",r.kc(14,11,"info_zoom_data_type")),r.Cb(4),r.oc("matTooltip",r.kc(18,13,"info_about_data_type"))}}const _t=(t,e)=>({expandable:!!t.children&&t.children.length>0,data:t.data,level:e});let mt=(()=>{class t{constructor(t,e,n,i,o){this.species=t,this.datasetService=e,this.dialog=n,this.decimal=i,this.overlay=o,this.scientificname="",this.defaultSelected=[],this.defaultDatasetType="",this.selectedDatasetIdsChanged=new r.o,this.selectedDatasets=new r.o,this.selectedOccurrenceDatasetIdsChanged=new r.o,this.selectedModelDatasets=new r.o,this.zoomToDatasetExtent=new r.o,this.datasets=[],this.selectedDatasetIds=[],this.maxOcc=tt.c,this.first=!0,this.modelThresholdStore={},this.treeControl=new Q.j(t=>t.level,t=>t.expandable),this.treeFlattener=new K.c(_t,t=>t.level,t=>t.expandable,t=>t.children),this.dataSource=new K.b(this.treeControl,this.treeFlattener),this.countFormatter=new Intl.NumberFormat(void 0,{notation:"compact",maximumFractionDigits:0}),this.hasChild=(t,e)=>e.expandable}ngOnInit(){}ngOnChanges(t){t.scientificname.currentValue!==t.scientificname.previousValue&&this.species.getDatasets(this.scientificname).subscribe(t=>{this.datasets=t,this.dataSource.data=this.makeHierarchical(t),this.updatedSelectedDatasetIds()})}makeHierarchical(t){const e=Array.from(new Set(t.map(t=>t.product_type))),n={},i=t.find(t=>"704898e7-b945-4721-b201-9286bd00c0a9"===t.dataset_id),r=t.find(t=>"d542e050-2ae5-457e-8476-027741538965"===t.dataset_id),o=t.find(t=>"ec694c34-bddd-4111-ba99-926a5f7866e8"===t.dataset_id);return o&&(t.filter(t=>"range"===t.product_type).forEach(t=>{t.visible=!1}),o.visible=!0),i&&r&&(i.visible=!1),t.forEach(t=>{if(n[t.product_type]){const e=n[t.product_type];e.data.bounds.northEast.lat=Math.max(e.data.bounds.northEast.lat,t.bounds.northEast.lat),e.data.bounds.northEast.lng=Math.max(e.data.bounds.northEast.lng,t.bounds.northEast.lng),e.data.bounds.southWest.lat=Math.min(e.data.bounds.southWest.lat,t.bounds.southWest.lat),e.data.bounds.southWest.lng=Math.min(e.data.bounds.southWest.lng,t.bounds.southWest.lng),e.data.no_rows+=t.no_rows,e.children.push({data:t}),t.visible&&!e.data.visible&&(e.data.visible=!0,e.data.icon="indeterminate_check_box")}else n[t.product_type]={expandable:!0,data:Object.assign({icon:t.visible?"check_box":"check_box_outline_blank"},t),children:[{data:t}]};"model"===t.product_type&&(t.visible=!1,this.species.getModelInfo(this.scientificname).subscribe(e=>{e.forEach(e=>{this.modelThresholdStore[t.dataset_id]=[];const n=["th05","th10"];Object.keys(e).forEach(i=>{if(Object(it.isNumber)(e[i])&&n.indexOf(i)>-1){const r={code:i,threshold:e[i],visible:i===n[0]};this.modelThresholdStore[t.dataset_id].push(r),t.thresholds?t.thresholds.push(r):t.thresholds=[r]}})})}))}),e.forEach(t=>{const e=this.countDataTypeTooltip(n[t]);n[t].data.tooltip=e,n[t].children.forEach(t=>{t.data.tooltip=this.countDatasetTooltip(t)})}),e.map(t=>n[t])}legend(t){t.data.legend=!t.data.legend}toggleDataset(t){t.visible=!t.visible;const e=this.dataSource.data.find(e=>e.data.product_type===t.product_type);e.children.every(e=>e.data.visible===t.visible)&&e.data.visible!==t.visible&&(e.data.visible=t.visible),this.updatedSelectedDatasetIds()}toggleDatatype(t){t.data.visible=!t.data.visible,this.datasets.filter(e=>e.product_type===t.data.product_type).forEach(e=>e.visible=t.data.visible),this.updatedSelectedDatasetIds()}updatedSelectedDatasetIds(){let t=!1;this.first&&(this.defaultSelected.length>=1?(t=!0,this.datasets.forEach(t=>{t.visible=-1!==this.defaultSelected.indexOf(t.dataset_id)})):""!==this.defaultDatasetType&&(t=!0,this.datasets.forEach(t=>{t.product_type!==this.defaultDatasetType&&(t.visible=!1)})),this.first=!1),this.dataSource.data.map(t=>{const e=t.children.map(t=>t.data.visible),n=-1!==e.indexOf(!0),i=-1!==e.indexOf(!1);!n&&i?(t.data.visible=!1,t.data.icon="check_box_outline_blank"):n&&!i?(t.data.visible=!0,t.data.icon="check_box"):n&&i&&(t.data.visible=!0,t.data.icon="indeterminate_check_box")});const e=this.datasets.filter(t=>t.visible),n=e.filter(t=>"points"===t.product_type).map(t=>t.dataset_id),i=e.filter(t=>"model"===t.product_type).map(t=>t.dataset_id).map(t=>({thresholds:this.modelThresholdStore[t],dataset_id:t}));this.selectedDatasets.emit(e),this.selectedDatasetIds=e.map(t=>t.dataset_id),this.selectedOccurrenceDatasetIdsChanged.emit(n),this.selectedModelDatasets.emit(i.length>0?i[0]:null),this.selectedDatasetIdsChanged.emit(this.selectedDatasetIds)}countDatasetTooltip(t){const e=t.data.no_rows;return t.data.n_display=this.countFormatter.format(e),`${this.decimal.transform(e)} features available in ${t.data.dataset_title}.`}countDataTypeTooltip(t){if(!t)return"";const e=this.datasets.filter(e=>e.product_type===t.data.product_type).length;return t.data.n_display=this.countFormatter.format(t.data.no_rows),`${this.decimal.transform(t.data.no_rows)} ${t.data.type_title} features available across ${e} datasets.`}zoom(t){this.zoomToDatasetExtent.emit(t.data.bounds)}info(t,e){e?this.datasetService.metadata(t.data.dataset_id).subscribe(e=>{this.openInfoModal({info:e.metadata,dataset_id:t.data.dataset_id,heading:t.data.dataset_title})}):this.datasetService.type(t.data.product_type).subscribe(t=>{t.length>=1&&this.openInfoModal({info:[{children:t}],heading:t[0].value})})}openInfoModal(t){this.dialog.open(et.a,{data:t})}openLegendOverlay(t,e){if("range"!==e.data.product_type)return;const n=this.overlay.position().flexibleConnectedTo(t.srcElement).withPositions([{originX:"start",originY:"center",overlayX:"end",overlayY:"center"}]);this.overlayRef=this.overlay.create({positionStrategy:n,hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop"}),this.overlayRef.attach(new $.d(nt)),this.overlayRef.backdropClick().subscribe(()=>this.overlayRef.dispose()),setTimeout(()=>{this.overlayRef.dispose()},1e3)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(c.g),r.Qb(c.c),r.Qb(X.b),r.Qb(H.g),r.Qb(rt.c))},t.\u0275cmp=r.Kb({type:t,selectors:[["mol-species-dataset-menu"]],inputs:{scientificname:"scientificname",defaultSelected:"defaultSelected",defaultDatasetType:"defaultDatasetType"},outputs:{selectedDatasetIdsChanged:"selectedDatasetIdsChanged",selectedDatasets:"selectedDatasets",selectedOccurrenceDatasetIdsChanged:"selectedOccurrenceDatasetIdsChanged",selectedModelDatasets:"selectedModelDatasets",zoomToDatasetExtent:"zoomToDatasetExtent"},features:[r.Bb([H.g]),r.Ab],decls:3,vars:3,consts:[[3,"dataSource","treeControl"],["matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding",""],[1,"node-container"],[1,"node-row"],["mat-icon-button","","disabled","",4,"ngIf"],["mat-icon-button","",4,"ngIf"],["mat-icon-button","","matTooltip","Toggle dataset visibility.",3,"click"],["mat-flat-button","",1,"dataset-button",3,"matTooltip","matTooltipShowDelay","click"],["matTooltipPosition","right",3,"matTooltip"],["mat-icon-button","","matTooltipPosition","right",3,"matTooltip","click"],[1,"fa","fa-info"],["mat-icon-button","","disabled",""],["mat-icon-button",""],[1,"fa","fa-user"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["mat-icon-button","",3,"click"],["mat-flat-button","","matTreeNodeToggle","","class","product-type-button",4,"ngIf"],[1,"product-type-logo",3,"src"],["matTooltipPosition","right",1,"feature-count",3,"matTooltip"],["mat-flat-button","","matTreeNodeToggle","",1,"product-type-button"]],template:function(t,e){1&t&&(r.Wb(0,"mat-tree",0),r.Hc(1,pt,19,17,"mat-tree-node",1),r.Hc(2,yt,20,15,"mat-tree-node",2),r.Vb()),2&t&&(r.oc("dataSource",e.dataSource)("treeControl",e.treeControl),r.Cb(2),r.oc("matTreeNodeDefWhen",e.hasChild))},directives:[K.a,K.f,K.e,K.g,H.t,ot.b,st.a,at.a,K.h],pipes:[ut.c],styles:["strong[_ngcontent-%COMP%]{display:block;margin:10px 0 0 10px;font-size:1.1em}.product-type-logo[_ngcontent-%COMP%]{height:25px;width:25px}.dataset-button[_ngcontent-%COMP%], .product-type-button[_ngcontent-%COMP%]{cursor:pointer;width:150px;min-width:150px;max-width:150px;text-decoration:underline;font-weight:300;text-align:left;padding:0;display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.dataset-button[_ngcontent-%COMP%]{min-width:135px;max-width:135px;width:135px;line-height:40px}.feature-count[_ngcontent-%COMP%]{display:inline;width:50px;max-width:50px;min-width:50px;line-height:30px;padding:5px 0;font-weight:700;text-align:center;word-break:keep-all}.feature-count.points[_ngcontent-%COMP%]{text-align:center;width:100px}.node-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.node-container[_ngcontent-%COMP%]   .node-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:middle;width:100%}.dataset-menu-button[_ngcontent-%COMP%]{height:25px;line-height:25px;margin:3px}@media screen and (max-device-width:480px){.mat-icon-button[_ngcontent-%COMP%]{width:34px}}"]}),t})();const vt=["sliderInput"],bt=function(t){return{left:t}};function xt(t,e){if(1&t&&(r.Wb(0,"div",12),r.Wb(1,"div",13),r.Jc(2),r.Vb(),r.Vb()),2&t){const t=r.ic();r.oc("ngStyle",r.rc(2,bt,t.bestValueLeftPos+"px")),r.Cb(2),r.Kc(t.round(t.bestValue))}}function Et(t,e){if(1&t&&(r.Wb(0,"div",14),r.Wb(1,"div",13),r.Jc(2),r.Vb(),r.Vb()),2&t){const t=r.ic();r.oc("ngStyle",r.rc(2,bt,t.defaultValueLeftPos+"px")),r.Cb(2),r.Kc(t.round(t.defaultValue))}}function It(t,e){if(1&t&&(r.Wb(0,"span"),r.Jc(1),r.Vb()),2&t){const t=r.ic();r.Cb(1),r.Lc(" ",t.round(t.min)," ")}}function Nt(t,e){if(1&t&&(r.Wb(0,"span"),r.Jc(1),r.Vb()),2&t){const t=r.ic();r.Cb(1),r.Lc(" ",t.round(t.min+(t.max-t.min)/2)," ")}}function wt(t,e){if(1&t&&(r.Wb(0,"span"),r.Jc(1),r.Vb()),2&t){const t=r.ic();r.Cb(1),r.Lc(" ",t.round(t.max)," ")}}let Ct=(()=>{class t{constructor(){this.step=.01,this.valueChanges=new r.o,this.clickLike=new r.o,this.thumbIconLeftPos=0,this.bestValueLeftPos=0,this.defaultValueLeftPos=0,this.currentValue=0,this.defaultValue=0}get min(){return this._min}set min(t){this._min=this.round(t)}get max(){return this._max}set max(t){this._max=this.round(t)}get value(){return this._value}set value(t){this._value=this.round(t)}get bestValue(){return this._bestValue}set bestValue(t){this._bestValue=this.round(t)}ngOnInit(){this.currentValue=this.bestValue,this.defaultValue=this.value,this.calculateLeftPos(this.bestValue)}ngAfterViewInit(){setTimeout(()=>{this.sliderInput.nativeElement.value=this.bestValue,this.calculateBestValuePos(),this.calculateDefaultValuePos(),this.calculateLeftPos(this.bestValue)},0)}onInput(){const t=+this.sliderInput.nativeElement.value;this.calculateLeftPos(t),this.currentValue=t,this.valueChanges.emit(this.currentValue)}setLikeValue(){this.bestValue=this.currentValue,this.calculateBestValuePos(),this.calculateLeftPos(this.bestValue),this.clickLike.emit(this.bestValue)}calculateBestValuePos(){this.bestValueLeftPos=this.round(this.sliderInput.nativeElement.clientWidth*((this.bestValue-this.min)/(this.max-this.min)))}calculateDefaultValuePos(){this.defaultValueLeftPos=this.round(this.sliderInput.nativeElement.clientWidth*((this.defaultValue-this.min)/(this.max-this.min)))}calculateLeftPos(t){var e;const n=null===(e=this.sliderInput)||void 0===e?void 0:e.nativeElement.clientWidth,i=(t-this.min)/(this.max-this.min);this.thumbIconLeftPos=this.round(n*i-25*i),this.isMinMarkVisible=this.thumbIconLeftPos>25,this.isMiddleMarkVisible=this.thumbIconLeftPos<n/2-25||this.thumbIconLeftPos>n/2,this.isMaxMarkVisible=this.thumbIconLeftPos<n-25,this.isBestValueVisible=this.thumbIconLeftPos<this.bestValueLeftPos-25||this.thumbIconLeftPos>this.bestValueLeftPos,this.isDefaultValueVisible=this.thumbIconLeftPos<this.defaultValueLeftPos-25||this.thumbIconLeftPos>this.defaultValueLeftPos}round(t){return Math.round(100*t)/100}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["mol-threshold-slider"]],viewQuery:function(t,e){var n;1&t&&r.Pc(vt,!0),2&t&&r.uc(n=r.fc())&&(e.sliderInput=n.first)},inputs:{min:"min",max:"max",step:"step",value:"value",bestValue:"bestValue",disabled:"disabled"},outputs:{valueChanges:"valueChanges",clickLike:"clickLike"},decls:15,vars:15,consts:[["class","slider-best-value",3,"ngStyle",4,"ngIf"],["class","slider-default-value",3,"ngStyle",4,"ngIf"],["type","range",1,"slider",3,"min","max","step","disabled","input"],["sliderInput",""],[1,"slider-thumb-info",3,"ngStyle"],[1,"slider-thumb-icon",3,"click"],[1,"slider-thumb-value"],[1,"slider-range-marks"],[1,"min-mark"],[4,"ngIf"],[1,"middle-mark"],[1,"max-mark"],[1,"slider-best-value",3,"ngStyle"],[1,"value"],[1,"slider-default-value",3,"ngStyle"]],template:function(t,e){1&t&&(r.Hc(0,xt,3,4,"div",0),r.Hc(1,Et,3,4,"div",1),r.Wb(2,"input",2,3),r.ec("input",(function(){return e.onInput()})),r.Vb(),r.Wb(4,"div",4),r.Wb(5,"div",5),r.ec("click",(function(){return e.setLikeValue()})),r.Vb(),r.Wb(6,"div",6),r.Jc(7),r.Vb(),r.Vb(),r.Wb(8,"div",7),r.Wb(9,"div",8),r.Hc(10,It,2,1,"span",9),r.Vb(),r.Wb(11,"div",10),r.Hc(12,Nt,2,1,"span",9),r.Vb(),r.Wb(13,"div",11),r.Hc(14,wt,2,1,"span",9),r.Vb(),r.Vb()),2&t&&(r.oc("ngIf",e.isBestValueVisible&&!e.disabled),r.Cb(1),r.oc("ngIf",e.isDefaultValueVisible&&!e.disabled),r.Cb(1),r.oc("min",e.min)("max",e.max)("step",e.step)("disabled",e.disabled),r.Cb(2),r.oc("ngStyle",r.rc(13,bt,e.thumbIconLeftPos+"px")),r.Cb(1),r.Gb("is-best",e.currentValue===e.bestValue),r.Cb(2),r.Lc(" ",e.round(e.currentValue)," "),r.Cb(3),r.oc("ngIf",e.isMinMarkVisible),r.Cb(2),r.oc("ngIf",e.isMiddleMarkVisible),r.Cb(2),r.oc("ngIf",e.isMaxMarkVisible))},directives:[H.t,H.w],styles:['[_nghost-%COMP%]{display:block;width:100%;height:82px;position:relative;overflow:visible;z-index:1;padding-top:40px;padding-bottom:26px;margin-top:12px}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;height:5px;background:linear-gradient(270deg,#00692d,#348a55 50.04%,#e5f5ec);outline:none;border-radius:0}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]:disabled{background:#6d7278}[_nghost-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{position:relative;-webkit-appearance:none;appearance:none;width:25px;height:25px;border-radius:50%;border:0;background:url(https://mapoflife.github.io/experts-next/icon-slider.67d48475bc8dbb9cd1cb.svg);background-size:contain;cursor:-webkit-grab;cursor:grab;overflow:visible;pointer-events:none}[_nghost-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb:active{cursor:-webkit-grabbing;cursor:grabbing}[_nghost-%COMP%]   .slider-thumb-info[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;justify-content:space-between;height:80px;top:0;width:25px;align-items:center;z-index:2;transform:rotate(1turn);pointer-events:none}[_nghost-%COMP%]   .slider-thumb-info[_ngcontent-%COMP%] > .slider-thumb-icon[_ngcontent-%COMP%]{position:relative;width:36px;height:36px;pointer-events:all;background:url(https://mapoflife.github.io/experts-next/icon-thumbsup.47c92c6002d25b843819.svg);background-size:cover;z-index:2}[_nghost-%COMP%]   .slider-thumb-info[_ngcontent-%COMP%] > .slider-thumb-icon.is-best[_ngcontent-%COMP%]{background:url(https://mapoflife.github.io/experts-next/icon-thumbsup-green.0706b99d697f723f9839.svg);background-size:cover}[_nghost-%COMP%]   .slider-thumb-info[_ngcontent-%COMP%] > .slider-thumb-value[_ngcontent-%COMP%]{color:#000;font-family:Fira Sans;font-size:10px;font-weight:300;letter-spacing:0;line-height:12px}[_nghost-%COMP%]   .slider-best-value[_ngcontent-%COMP%]{position:absolute;top:47px;display:block;height:8px;width:1px;background:#333;box-sizing:border-box;z-index:0}[_nghost-%COMP%]   .slider-best-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#000;font-family:Fira Sans;font-size:10px;font-weight:300;letter-spacing:0;line-height:12px;display:flex;justify-content:center;margin-top:12px}[_nghost-%COMP%]   .slider-best-value[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-17px;left:-6px;width:13px;height:13px;background-image:url(https://mapoflife.github.io/experts-next/icon-like.c9766e4ce04606187f36.svg);background-size:contain}[_nghost-%COMP%]   .slider-default-value[_ngcontent-%COMP%]{position:absolute;top:47px;display:block;height:8px;width:1px;background:#333;box-sizing:border-box;z-index:0}[_nghost-%COMP%]   .slider-default-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#000;font-family:Fira Sans;font-size:10px;font-weight:300;letter-spacing:0;line-height:12px;display:flex;justify-content:center;margin-top:12px}[_nghost-%COMP%]   .slider-range-marks[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:6px}[_nghost-%COMP%]   .slider-range-marks[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;width:18px;height:17px;line-height:17px;font-size:14px;color:#000;font-family:Fira Sans;font-weight:300;letter-spacing:0}[_nghost-%COMP%]   .slider-range-marks[_ngcontent-%COMP%]   .min-mark[_ngcontent-%COMP%]{justify-content:flex-start}[_nghost-%COMP%]   .slider-range-marks[_ngcontent-%COMP%]   .middle-mark[_ngcontent-%COMP%]{justify-content:center}[_nghost-%COMP%]   .slider-range-marks[_ngcontent-%COMP%]   .max-mark[_ngcontent-%COMP%]{justify-content:flex-end}']}),t})();var Ot=n("+Tre");function Pt(t,e){if(1&t&&(r.Wb(0,"div",12),r.Wb(1,"h2"),r.Jc(2),r.Vb(),r.Vb()),2&t){const t=r.ic();r.Cb(2),r.Mc("",t.title,": ",t.taxa,"")}}function St(t,e){if(1&t&&(r.Wb(0,"div",12),r.Wb(1,"h2"),r.Jc(2),r.Vb(),r.Vb()),2&t){const t=r.ic();r.Cb(2),r.Kc(t.title)}}function Lt(t,e){if(1&t&&(r.Wb(0,"div",29),r.Jc(1),r.Vb()),2&t){const t=r.ic().$implicit;r.Cb(1),r.Lc(" (",t.features.getLength(),") ")}}function Tt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",31),r.Wb(1,"div",32),r.Jc(2),r.Vb(),r.Wb(3,"button",33),r.ec("click",(function(){r.zc(t);const n=e.$implicit,i=r.ic(2).$implicit;return r.ic(2).openEditAttributeModal(i.speciesScientificName,n.feature.ol_uid,null==n?null:n.attributes)})),r.Jc(4," Edit attributes "),r.Vb(),r.Vb()}if(2&t){const t=e.index;r.Cb(2),r.Lc("Feature ",t+1,"")}}function Mt(t,e){if(1&t&&(r.Ub(0),r.Hc(1,Tt,5,1,"div",30),r.Tb()),2&t){const t=r.ic().$implicit;r.Cb(1),r.oc("ngForOf",t.features.getArray())}}function Rt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",18),r.Wb(1,"div",19),r.Wb(2,"div",20),r.ec("click",(function(){r.zc(t);const n=e.$implicit;return r.ic(2).setActiveSpecies(n.speciesScientificName)})),r.Wb(3,"div",21),r.Wb(4,"div",22),r.Wb(5,"span",23),r.ec("click",(function(){r.zc(t);const n=e.$implicit;return r.ic(2).toggleSpeciesFeatures(n.speciesScientificName)})),r.Jc(6," keyboard_arrow_up "),r.Vb(),r.Vb(),r.Wb(7,"div",24),r.Jc(8),r.Vb(),r.Hc(9,Lt,2,1,"div",25),r.Rb(10,"div",26),r.Vb(),r.Wb(11,"div",27),r.Wb(12,"span",28),r.ec("click",(function(){r.zc(t);const n=e.$implicit;return r.ic(2).deleteSelectedSpecies(n.speciesScientificName)})),r.Jc(13," delete "),r.Vb(),r.Vb(),r.Vb(),r.Hc(14,Mt,2,1,"ng-container",6),r.Vb(),r.Vb()}if(2&t){const t=e.$implicit,n=r.ic(2);r.Cb(1),r.Gb("active",n.isActiveSpecies(t.speciesScientificName)),r.Cb(4),r.Gb("rotate",t.isOpenFeatures),r.Cb(3),r.Lc(" ",t.speciesScientificName," "),r.Cb(1),r.oc("ngIf",0!==t.features.length),r.Cb(5),r.oc("ngIf",t.isOpenFeatures)}}function At(t,e){if(1&t&&(r.Ub(0),r.Hc(1,Rt,15,7,"div",17),r.Tb()),2&t){const t=r.ic();r.Cb(1),r.oc("ngForOf",t.selectedSpecies)}}function Dt(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"mol-search-select",34),r.ec("selectedItem",(function(e){return r.zc(t),r.ic().selectedItem(e)})),r.Vb(),r.Tb()}if(2&t){const t=r.ic(),e=r.vc(12);r.Cb(1),r.oc("title","Species")("searchFn",t.speciesSearchFn)("displayFn",t.speciesDisplayFn)("defaultValue",t.activeSpeciesScientificName)("itemTemplate",e)}}function Ft(t,e){if(1&t&&(r.Wb(0,"div"),r.Jc(1),r.Vb(),r.Wb(2,"div"),r.Jc(3),r.Vb()),2&t){const t=e.$implicit;r.Cb(1),r.Kc(t.scientificname),r.Cb(2),r.Kc(t.vernacular)}}function kt(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"mol-search-select",39),r.ec("selectedItem",(function(e){return r.zc(t),r.ic(2).selectedItem(e)})),r.Vb(),r.Tb()}if(2&t){const t=r.ic(2),e=r.vc(12);r.Cb(1),r.oc("title","")("searchFn",t.speciesSearchFn)("displayFn",t.speciesDisplayFn)("itemTemplate",e)}}function Gt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",35),r.Wb(1,"div",36),r.Wb(2,"span",37),r.ec("click",(function(){return r.zc(t),r.ic().toggleAddMoreSpecies()})),r.Jc(3," add "),r.Vb(),r.Wb(4,"div",38),r.Jc(5,"Add new species"),r.Vb(),r.Vb(),r.Hc(6,kt,2,4,"ng-container",6),r.Vb()}if(2&t){const t=r.ic();r.Cb(6),r.oc("ngIf",t.isAddMoreSpecies)}}function Bt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",40),r.Wb(1,"mol-button",41),r.ec("click",(function(){return r.zc(t),r.ic().openSavingModal()})),r.Vb(),r.Vb()}if(2&t){const t=r.ic();r.Cb(1),r.oc("title","Save dataset")("disabled",t.isDialogOpen||t.isEmptyFeatures)}}function Vt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",42),r.Wb(1,"div",43),r.Jc(2),r.Vb(),r.Wb(3,"mol-species-dataset-menu",44),r.ec("selectedDatasetIdsChanged",(function(e){return r.zc(t),r.ic().changedSelectedDetailedDatasetIds(e)}))("zoomToDatasetExtent",(function(e){return r.zc(t),r.ic().zoomToDatasetExtent(e)}))("selectedOccurrenceDatasetIdsChanged",(function(e){return r.zc(t),r.ic().changedSelectedOccurrenceDatasetIds(e)})),r.Vb(),r.Vb()}if(2&t){const t=r.ic();r.Cb(2),r.Lc(" Sources for ",t.activeSpeciesScientificName," "),r.Cb(1),r.oc("scientificname",t.activeSpeciesScientificName)}}function zt(t,e){1&t&&(r.Wb(0,"p",45),r.Jc(1," Select a model and a threshold and vote positive or negative. "),r.Vb())}function jt(t,e){1&t&&(r.Wb(0,"p",45),r.Jc(1," No species distribution models available for this species. "),r.Vb())}function Ut(t,e){1&t&&(r.Wb(0,"span",52),r.Jc(1,"stars"),r.Vb())}function qt(t,e){1&t&&(r.Wb(0,"span",53),r.Jc(1,"highlight_off"),r.Vb())}function Yt(t,e){if(1&t&&r.Rb(0,"img",64),2&t){const t=r.ic(3);r.oc("src",t.modelThumb,r.Bc)}}function Xt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",71),r.ec("click",(function(){r.zc(t);const e=r.ic(3).index;return r.ic().toggleBestModel(e)})),r.Wb(1,"span",72),r.Jc(2,"stars"),r.Vb(),r.Wb(3,"div",73),r.Jc(4),r.Vb(),r.Vb()}if(2&t){const t=r.ic(3).$implicit;r.Cb(1),r.oc("ngClass",t.isBest?"material-icons":"material-icons-outlined"),r.Cb(3),r.Lc(" ",t.isBest?"Unmark best model":"Mark as best model"," ")}}function Wt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",65),r.Wb(1,"div",66),r.Jc(2,"Choose a suitability threshold:"),r.Vb(),r.Wb(3,"mol-threshold-slider",67),r.ec("valueChanges",(function(e){r.zc(t);const n=r.ic(2).index;return r.ic().clickedModelThreshold(e,n)}))("clickLike",(function(e){r.zc(t);const n=r.ic(2).index;return r.ic().clickModelLike(e,n)})),r.Vb(),r.Wb(4,"div",68),r.Wb(5,"mat-checkbox",69),r.ec("click",(function(e){r.zc(t);const n=r.ic(2).index;return r.ic().toggleBinaryModel(e,n)})),r.Jc(6," Binary"),r.Vb(),r.Vb(),r.Hc(7,Xt,5,2,"div",70),r.Vb()}if(2&t){const t=r.ic(2).$implicit,e=r.ic();r.Cb(3),r.oc("min",t.minSuitability)("max",t.maxSuitability)("value",t.suitability)("bestValue",t.temporarySuitability),r.Cb(2),r.oc("checked",t.isBinary)("checked",t.isBinary),r.Cb(2),r.oc("ngIf",!e.isBestModelSelected()||t.isBest)}}function Ht(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",54),r.Wb(1,"div",55),r.Hc(2,Yt,1,1,"img",56),r.Wb(3,"div",57),r.Wb(4,"div",58),r.ec("click",(function(){r.zc(t);const e=r.ic().index;return r.ic().setModelRetain(e)})),r.Wb(5,"span",59),r.Jc(6," check_circle "),r.Vb(),r.Wb(7,"div",60),r.Jc(8,"Retain"),r.Vb(),r.Vb(),r.Wb(9,"div",61),r.ec("click",(function(){r.zc(t);const e=r.ic().index;return r.ic().setModelDiscard(e)})),r.Wb(10,"span",62),r.Jc(11," highlight_off "),r.Vb(),r.Wb(12,"div",60),r.Jc(13,"Discard"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Hc(14,Wt,8,7,"div",63),r.Vb()}if(2&t){const t=r.ic().$implicit,e=r.ic();r.Cb(2),r.oc("ngIf",!!e.modelThumb),r.Cb(3),r.oc("ngClass","RETAINED"===t.status?"material-icons":"material-icons-outlined"),r.Cb(5),r.oc("ngClass","DISCARDED"===t.status?"material-icons-round":"material-icons"),r.Cb(4),r.oc("ngIf","RETAINED"===t.status||"BEST"===t.status)}}function Jt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",46),r.Wb(1,"div",47),r.Wb(2,"div",21),r.Wb(3,"span",23),r.ec("click",(function(){r.zc(t);const n=e.index;return r.ic().toggleModel(n)})),r.Jc(4," keyboard_arrow_up "),r.Vb(),r.Wb(5,"div",48),r.Jc(6),r.Vb(),r.Hc(7,Ut,2,0,"span",49),r.Hc(8,qt,2,0,"span",50),r.Vb(),r.Wb(9,"div",27),r.Jc(10,"\u2139"),r.Vb(),r.Vb(),r.Hc(11,Ht,15,4,"div",51),r.Vb()}if(2&t){const t=e.$implicit,n=e.index;r.Gb("active",t.isOpen),r.Cb(3),r.Gb("rotate",t.isOpen),r.Cb(3),r.Lc("Model ",n+1,""),r.Cb(1),r.oc("ngIf",t.isBest),r.Cb(1),r.oc("ngIf","DISCARDED"===t.status),r.Cb(3),r.oc("ngIf",t.isOpen)}}let Zt=(()=>{class t{constructor(t,e,n,i,s,u,l){this.speciesService=t,this.userDatasetService=e,this.authService=n,this.snackBar=i,this.dialog=s,this.actRoute=u,this.router=l,this.drawedPolygon=new o.a(null),this.updatedPolygons=new o.a(null),this.deletedPolygon=new r.o(null),this.setActiveLayer=new o.a(null),this.deleteLayer=new o.a(null),this.selectedDetailedDatasetIds=new o.a([]),this.selectedOccurrenceDatasetIds=new o.a([]),this.zoomToDatasetExtentData=new o.a(null),this.isCanClose=new r.o(!0),this.updateSpeciesModel=new r.o,this.disableSpeciesModel=new r.o,this.deletePolygon=new r.o(null),this.unselectSelectedPolygons=new r.o,this.setupVotingMode=new r.o,this.createPolygon=new r.o(null),this.isOpenSidebar=!0,this.isAddMoreSpecies=!1,this.latestModalAttributes={presence:a.d[0],origin:a.c[0],season:a.e[0],temporalScope:{from:Object(q.a)(new Date(2e3,0,1).toUTCString()),to:Object(q.a)((new Date).toUTCString())}},this.isVotingMode=!1,this.selectedSpecies=[],this.activeSpeciesScientificName="",this.title="",this.taxa="",this.userFullName="",this.models=[],this.isSpeciesModelFetched=!1,this.authService.currentUser.subscribe(t=>{this.userFullName=t.fullname})}selectedItem(t){this.setActiveSpecies(t.scientificname)}changedSelectedDetailedDatasetIds(t){this.selectedDetailedDatasetIds.next(t)}zoomToDatasetExtent(t){this.zoomToDatasetExtentData.next(t)}changedSelectedOccurrenceDatasetIds(t){this.selectedOccurrenceDatasetIds.next(t)}ngOnInit(){this.datasetId=this.actRoute.snapshot.params.datasetId,"vote"===this.datasetId?(this.title=this.actRoute.snapshot.queryParamMap.get("dataset"),this.setupVotingMode.emit(),this.isVotingMode=!0,this.speciesService.getSpeciesModels(this.title).subscribe(t=>{this.isSpeciesModelFetched=!0,this.models=t.map(t=>({molid:t.molid,maxSuitability:t.vis.max,minSuitability:t.vis.min,suitability:t.vis.default,isBest:"BEST"===t.user.status,isOpen:!1,isBinary:!0,temporarySuitability:t.user.threshold||t.vis.default,status:t.user.status}))})):(this.setActiveSpecies(this.actRoute.snapshot.queryParams.species),this.userDatasetService.overview(this.datasetId).subscribe(t=>{this.taxa=t[0].summary.taxa,this.title=t[0].summary.dataset_title,this.dataset=t[0],this.speciesService.availableTaxa().subscribe(t=>{const e=t.find(t=>t.title===this.taxa).taxa;this.speciesSearchFn=t=>this.speciesService.search(t,e)})}),this.userDatasetService.records(this.datasetId).subscribe(t=>{const e=Object(j.uniqBy)(t.records,"scientificname"),n=e.map(t=>t.scientificname);e.map(e=>Object(s.b)(this,void 0,void 0,(function*(){this.userDatasetService.speciesGeometry(this.datasetId,e.scientificname).subscribe(e=>{e.records.map(e=>{var n,i,r;const o=new d.a(e.geom.coordinates);o.transform("EPSG:4326","EPSG:3857");const s=t.records.find(t=>t.recid===e.recid),c={presence:{value:+s.metadata.presence,label:null===(n=a.d.find(t=>t.value===+s.metadata.presence))||void 0===n?void 0:n.label},origin:{value:s.metadata.origin,label:null===(i=a.c.find(t=>t.value===s.metadata.origin))||void 0===i?void 0:i.label},season:{value:+s.metadata.season,label:null===(r=a.e.find(t=>t.value===+s.metadata.season))||void 0===r?void 0:r.label},temporalScope:{from:Object(q.a)(s.metadata.temporal_scope_start),to:Object(q.a)(s.metadata.temporal_scope_end)}},h=new u.a(o);-1===this.selectedSpecies.findIndex(t=>t.speciesScientificName===s.scientificname)?this.selectedSpecies.push({features:new l.a([{feature:h,molidId:e.recid,geomId:e.geom_id,featureId:h.ol_uid,attributes:c}]),isOpenFeatures:this.activeSpeciesScientificName===s.scientificname,speciesScientificName:s.scientificname}):this.selectedSpecies.find(t=>t.speciesScientificName===s.scientificname).features.push({feature:h,featureId:h.ol_uid,geomId:e.geom_id,molidId:e.recid,attributes:c}),this.createPolygon.emit({key:s.scientificname,value:h})})})})));const i=this.actRoute.snapshot.queryParams.species;n.includes(i)?this.setActiveSpecies(i):this.setActiveSpecies(n[0])}),this.speciesDisplayFn=t=>null==t?void 0:t.scientificname,this.speciesSearchFn=t=>this.speciesService.search(t),this.setActiveLayer.subscribe(t=>{t&&(this.isSpeciesModelFetched=!1,this.speciesService.getSpeciesModels(t).subscribe(t=>{this.isSpeciesModelFetched=!0,this.models=t.map(t=>({molid:t.molid,maxSuitability:t.vis.max,minSuitability:t.vis.min,suitability:t.vis.default,isBest:"BEST"===t.user.status,isOpen:!1,isBinary:!0,temporarySuitability:t.user.threshold||t.vis.default,status:t.user.status}))}))}),this.drawedPolygon.subscribe(t=>{if(t){const{key:e,value:n}=t,i=this.dialog.open(a.a,{data:this.latestModalAttributes,height:"700px",position:{left:"50px"}});this.isCanClose.emit(!1),i.afterClosed().toPromise().then(t=>{if(t&&t.attributes){if(e===this.activeSpeciesScientificName){const i=n.ol_uid,r=f.a(),o=f.a();this.latestModalAttributes=t.attributes,this.isActiveSpesiecInSelectedSpecies()?this.selectedSpecies.find(t=>t.speciesScientificName===e).features.push({feature:n,molidId:r,geomId:o,featureId:i,attributes:t.attributes}):(this.selectedSpecies.push({features:new l.a([{feature:n,molidId:r,geomId:o,featureId:i,attributes:t.attributes}]),isOpenFeatures:!1,speciesScientificName:this.activeSpeciesScientificName}),this.isAddMoreSpecies=!1),this.addFeatureToDataset(r,n,t.attributes).then(()=>this.isCanClose.emit(!0))}}else this.isCanClose.emit(!0),this.deletePolygon.next(n.ol_uid)})}}),this.updatedPolygons.subscribe(t=>{if(t){this.isCanClose.emit(!1);const{key:e,value:n}=t;n.getArray().map(t=>{const n=this.selectedSpecies.find(t=>t.speciesScientificName===e).features.getArray().find(e=>e.feature.getId()===t.getId());n.feature=t,this.addFeatureToDataset(n.molidId,t,n.attributes,n.geomId).then(()=>this.isCanClose.emit(!0),()=>this.snackBar.open("API Error: Error on saving feature to dataset","Dismiss"))})}}),this.deletedPolygon.subscribe(t=>{if(t){this.isCanClose.emit(!1);const{key:e,value:n}=t,i=this.selectedSpecies.find(t=>t.speciesScientificName===e),r=i.features.getArray().find(t=>t.feature.ol_uid===n.ol_uid);this.userDatasetService.deleteFeature(this.datasetId,r.molidId).subscribe(()=>{this.isCanClose.emit(!0),i.features.remove(r),0===i.features.getLength()&&(this.selectedSpecies.splice(this.selectedSpecies.indexOf(i),1),this.isCanClose.emit(0===this.selectedSpecies.length))},()=>this.snackBar.open("API Error: Error on deleting feature from dataset","Dismiss"))}}))}isActiveSpesiecInSelectedSpecies(){return this.selectedSpecies.some(t=>t.speciesScientificName===this.activeSpeciesScientificName)}isActiveSpecies(t){return this.activeSpeciesScientificName&&this.activeSpeciesScientificName===t}setActiveSpecies(t){if(this.activeSpeciesScientificName!==t)return this.activeSpeciesScientificName=t,this.selectedDetailedDatasetIds.next([]),this.selectedOccurrenceDatasetIds.next([]),this.disableSpeciesModel.emit(),this.router.navigate([],{relativeTo:this.actRoute,queryParamsHandling:"merge",queryParams:{species:t}}),this.openSpeciesFeatureAndCloseAnother(t),this.setActiveLayer.next(t)}addFeatureToDataset(t,e,n,i){return Object(s.b)(this,void 0,void 0,(function*(){const r=i||f.a(),o={geom_id:r,wkt:(new z).writeFeature(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})},s=[{molid:t,metadata_field:"scientificname",metadata_value:this.activeSpeciesScientificName},{molid:t,metadata_field:"recordedby",metadata_value:this.userFullName}];return Object.entries(n).map(([e,n])=>{null!==n&&(n.value?s.push({molid:t,metadata_field:e,metadata_value:n.value.toString()}):n.from?(s.push({molid:t,metadata_field:"temporal_scope_start",metadata_value:Object(q.b)(n.from)}),s.push({molid:t,metadata_field:"temporal_scope_end",metadata_value:Object(q.b)(n.to)})):s.push({molid:t,metadata_field:e,metadata_value:n.toString()}))}),this.userDatasetService.addFeature({molid:t,geom_id:o.geom_id,dataset_id:this.datasetId,product_type:"range",scientificname:this.activeSpeciesScientificName},s,{geom_id:r,wkt:o.wkt}).toPromise()}))}openEditAttributeModal(t,e,n){this.dialog.open(a.a,{data:Object.assign(Object.assign({},n),{isEdit:!0}),position:{left:"50px"}}).afterClosed().toPromise().then(n=>{if(n&&n.attributes){const i=this.selectedSpecies.find(e=>e.speciesScientificName===t).features.getArray().find(t=>t.feature.ol_uid===e);i.attributes=n.attributes,this.addFeatureToDataset(i.molidId,i.feature,n.attributes)}else if(n&&n.isDelete){const n=this.selectedSpecies.find(e=>e.speciesScientificName===t).features.getArray().findIndex(t=>t.feature.ol_uid===e),i=this.selectedSpecies.find(e=>e.speciesScientificName===t).features.getArray()[n];this.userDatasetService.deleteFeature(this.datasetId,i.molidId).toPromise().then(()=>{this.selectedSpecies.find(e=>e.speciesScientificName===t).features.getArray().splice(n,1),this.deletePolygon.next(i.feature.ol_uid)})}})}get isDialogOpen(){return 0!==this.dialog.openDialogs.length}get isEmptyFeatures(){return 0===this.selectedSpecies.length}openSavingModal(){if(!this.isDialogOpen&&!this.isEmptyFeatures){this.unselectSelectedPolygons.emit();const t={datasetId:this.datasetId,title:this.title,description:Object(j.get)(Object(j.find)(this.dataset.metadata[0].children,{id:"description"}),"value",""),notes:Object(j.get)(Object(j.find)(this.dataset.metadata[0].children,{id:"notes"}),"value",""),project_url:Object(j.get)(Object(j.find)(this.dataset.metadata[0].children,{id:"project_url"}),"value",""),citation:Object(j.get)(Object(j.find)(this.dataset.metadata[0].children,{id:"citation_formatted"}),"value",""),release_date:this.dataset.summary.release_date,keywords:Object(j.get)(Object(j.find)(this.dataset.metadata[0].children,{id:"keywords"}),"value",""),license:Object(j.get)(Object(j.find)(this.dataset.metadata[0].children,{id:"license"}),"value",null),license_holder:Object(j.get)(Object(j.find)(this.dataset.metadata[0].children,{id:"license_holder"}),"value",""),allow_download:this.dataset.summary.allow_download,public:this.dataset.summary.public,mol_modeling:this.dataset.summary.mol_modeling,taxa:this.taxa,species:this.selectedSpecies};this.dialog.open(h.a,{width:"600px",height:"630px",hasBackdrop:!1,data:t}).afterClosed().toPromise().then(t=>{t&&(this.isCanClose.next(!0),this.router.navigate(["dataset",t]))})}}toggleSidebar(){this.isOpenSidebar=!this.isOpenSidebar}toggleAddMoreSpecies(){this.isAddMoreSpecies=!this.isAddMoreSpecies}toggleSpeciesFeatures(t){for(let e of this.selectedSpecies)e.speciesScientificName===t&&(e.isOpenFeatures=!e.isOpenFeatures)}openSpeciesFeatureAndCloseAnother(t){for(let e of this.selectedSpecies)e.isOpenFeatures=e.speciesScientificName===t}deleteSelectedSpecies(t){return Object(s.b)(this,void 0,void 0,(function*(){this.dialog.open(U.a,{data:{title:"Deleting species",question:"Are you sure want to delete this species?"}}).afterClosed().toPromise().then(e=>Object(s.b)(this,void 0,void 0,(function*(){var n,i;if(e){try{for(var r,o=Object(s.a)(this.selectedSpecies.entries());!(r=yield o.next()).done;){let[e,n]=r.value;n.speciesScientificName===t&&(this.deleteLayer.next(t),n.features.getArray().map(t=>{this.userDatasetService.deleteFeature(this.datasetId,t.molidId).toPromise()}),this.selectedSpecies.splice(e,1),this.isCanClose.emit(0===this.selectedSpecies.length))}}catch(a){n={error:a}}finally{try{r&&!r.done&&(i=o.return)&&(yield i.call(o))}finally{if(n)throw n.error}}0!==this.selectedSpecies.length&&this.setActiveSpecies(this.selectedSpecies[0].speciesScientificName)}})))}))}get isSpeciesSelected(){return 0!==this.selectedSpecies.length}toggleModel(t){this.models.map((e,n)=>{n!==t&&e.isOpen&&(e.isOpen=!1,this.disableSpeciesModel.emit())});const e=this.models[t];e.isOpen?(e.isOpen=!1,this.disableSpeciesModel.emit()):(e.isOpen=!0,this.speciesService.getSpeciesModelThumb(e.molid,340,340).subscribe(t=>this.modelThumb=t),this.updateSpeciesModel.emit({threshold_raw:e.temporarySuitability,molid:e.molid,as_binary:e.isBinary}))}toggleBestModel(t){for(let[e,n]of this.models.entries())e===t?n.isBest?(n.isBest=!1,n.status=p.a.RETAINED,this.speciesService.setSpeciesModelVote(n.molid,null,n.status).subscribe(()=>this.snackBar.open("Your vote for best model has been counted."," Dismiss"),()=>this.snackBar.open("Something went wrong on voting","Dismiss"))):(n.isBest=!0,n.status=p.a.BEST,this.speciesService.setSpeciesModelVote(n.molid,null,n.status).subscribe(()=>this.snackBar.open("Your vote for best model has been counted."," Dismiss"),()=>this.snackBar.open("Something went wrong on voting","Dismiss"))):(n.isBest=!1,n.status===p.a.BEST&&(n.status=p.a.RETAINED))}clickedModelThreshold(t,e){const n=this.models[e];this.updateSpeciesModel.emit({threshold_raw:t,molid:n.molid,as_binary:n.isBinary})}setModelRetain(t){const e=this.models[t];e.status=p.a.RETAINED,e.isBest=!1,this.speciesService.setSpeciesModelVote(e.molid,null,e.status).subscribe(()=>this.snackBar.open("Your vote to keep this model has been counted."," Dismiss"),()=>this.snackBar.open("Something went wrong on voting","Dismiss"))}setModelDiscard(t){const e=this.models[t];e.status=p.a.DISCARDED,this.disableSpeciesModel.emit(),e.isBest=!1,e.isOpen=!1,this.speciesService.setSpeciesModelVote(e.molid,null,e.status).subscribe(()=>this.snackBar.open("Your vote to discard this model has been counted."," Dismiss"),()=>this.snackBar.open("Something went wrong on voting","Dismiss"))}toggleBinaryModel(t,e){t.preventDefault(),this.snackBar.open("Displaying SDM`s in non-binary mode is planned in future updates.","Dismiss")}clickModelLike(t,e){const n=this.models[e];n.suitability=t,this.speciesService.setSpeciesModelVote(n.molid,n.suitability,n.status).subscribe(()=>this.snackBar.open(`You have chosen ${n.suitability} as the best threshold for this model.`," Dismiss"),()=>this.snackBar.open("Something went wrong on voting","Dismiss"))}isBestModelSelected(){return!!this.models.find(t=>t.isBest)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(c.g),r.Qb(c.k),r.Qb(c.b),r.Qb(Y.a),r.Qb(X.b),r.Qb(W.a),r.Qb(W.f))},t.\u0275cmp=r.Kb({type:t,selectors:[["mol-sidebar"]],inputs:{drawedPolygon:"drawedPolygon",updatedPolygons:"updatedPolygons",deletedPolygon:"deletedPolygon"},outputs:{setActiveLayer:"setActiveLayer",deleteLayer:"deleteLayer",selectedDetailedDatasetIds:"selectedDetailedDatasetIds",selectedOccurrenceDatasetIds:"selectedOccurrenceDatasetIds",zoomToDatasetExtentData:"zoomToDatasetExtentData",isCanClose:"isCanClose",updateSpeciesModel:"updateSpeciesModel",disableSpeciesModel:"disableSpeciesModel",deletePolygon:"deletePolygon",unselectSelectedPolygons:"unselectSelectedPolygons",setupVotingMode:"setupVotingMode",createPolygon:"createPolygon"},decls:25,vars:14,consts:[[1,"sidebar__wrapper"],[1,"heading"],["routerLink","/dashboard",1,"go-back"],[1,"material-icons","go-back-icon"],[1,"go-back-title"],["class","title",4,"ngIf"],[4,"ngIf"],["speciesSearchTemplate",""],["class","add-new-species__wrapper",4,"ngIf"],["class","button-wrapper",4,"ngIf"],["class","sources__wrapper",4,"ngIf"],[1,"models__wrapper"],[1,"title"],["class","description",4,"ngIf"],["class","model-item",3,"active",4,"ngFor","ngForOf"],[1,"toggle-btn",3,"click"],[1,"material-icons","arrow-left"],["class","species-list",4,"ngFor","ngForOf"],[1,"species-list"],[1,"species-item"],[1,"species-name__wrapper",3,"click"],[1,"left-part"],[1,"species-arrow"],[1,"material-icons","arrow-up",3,"click"],[1,"species-name"],["class","species-features-amount",4,"ngIf"],[1,"species-color"],[1,"right-part"],[1,"species-delete","material-icons","delete",3,"click"],[1,"species-features-amount"],["class","species-features",4,"ngFor","ngForOf"],[1,"species-features"],[1,"feature-number"],[1,"sidebar_edit-attribute-btn",3,"click"],["theme","light",3,"title","searchFn","displayFn","defaultValue","itemTemplate","selectedItem"],[1,"add-new-species__wrapper"],[1,"add-new-species-title__wrapper"],[1,"material-icons","add",3,"click"],[1,"add-new-species-title"],["theme","light",3,"title","searchFn","displayFn","itemTemplate","selectedItem"],[1,"button-wrapper"],["inverseStyle","true",3,"title","disabled","click"],[1,"sources__wrapper"],[1,"sources-title"],[3,"scientificname","selectedDatasetIdsChanged","zoomToDatasetExtent","selectedOccurrenceDatasetIdsChanged"],[1,"description"],[1,"model-item"],[1,"model-title__wrapper"],[1,"model-title"],["class","material-icons stars star-icon","md-16","",4,"ngIf"],["class","material-icons highlight_off button-icon","md-16","",4,"ngIf"],["class","model-content__wrapper",4,"ngIf"],["md-16","",1,"material-icons","stars","star-icon"],["md-16","",1,"material-icons","highlight_off","button-icon"],[1,"model-content__wrapper"],[1,"model-map-image"],[3,"src",4,"ngIf"],[1,"buttons__wrapper"],[1,"button","retain",3,"click"],[1,"check_circle","button-icon",3,"ngClass"],[1,"button-text"],[1,"button","discard",3,"click"],[1,"highlight_off","button-icon",3,"ngClass"],["class","model-subcontent__wrapper",4,"ngIf"],[3,"src"],[1,"model-subcontent__wrapper"],[1,"subtitle"],[3,"min","max","value","bestValue","valueChanges","clickLike"],[1,"binary-checkbox"],["color","primary",1,"radio-button",3,"checked","click"],["class","best-model-star",3,"click",4,"ngIf"],[1,"best-model-star",3,"click"],[1,"stars","star-icon",3,"ngClass"],[1,"star-text"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"a",2),r.Wb(3,"span",3),r.Jc(4," arrow_back "),r.Vb(),r.Wb(5,"span",4),r.Jc(6," Dashboard "),r.Vb(),r.Vb(),r.Hc(7,Pt,3,2,"div",5),r.Hc(8,St,3,1,"div",5),r.Hc(9,At,2,1,"ng-container",6),r.Hc(10,Dt,2,5,"ng-container",6),r.Hc(11,Ft,4,2,"ng-template",null,7,r.Ic),r.Hc(13,Gt,7,1,"div",8),r.Hc(14,Bt,2,2,"div",9),r.Vb(),r.Hc(15,Vt,4,2,"div",10),r.Wb(16,"div",11),r.Wb(17,"div",12),r.Jc(18,"Species distribution models:"),r.Vb(),r.Hc(19,zt,2,0,"p",13),r.Hc(20,jt,2,0,"p",13),r.Hc(21,Jt,12,8,"div",14),r.Vb(),r.Vb(),r.Wb(22,"div",15),r.ec("click",(function(){return e.toggleSidebar()})),r.Wb(23,"span",16),r.Jc(24," keyboard_arrow_left "),r.Vb(),r.Vb()),2&t&&(r.Gb("hide",!e.isOpenSidebar),r.Cb(7),r.oc("ngIf",!e.isVotingMode),r.Cb(1),r.oc("ngIf",e.isVotingMode),r.Cb(1),r.oc("ngIf",!e.isVotingMode),r.Cb(1),r.oc("ngIf",!e.isSpeciesSelected&&!e.isVotingMode),r.Cb(3),r.oc("ngIf",e.isSpeciesSelected&&!e.isVotingMode),r.Cb(1),r.oc("ngIf",!e.isVotingMode),r.Cb(1),r.oc("ngIf",!!e.activeSpeciesScientificName),r.Cb(4),r.oc("ngIf",e.isSpeciesModelFetched&&0!==e.models.length),r.Cb(1),r.oc("ngIf",e.isSpeciesModelFetched&&0===e.models.length),r.Cb(1),r.oc("ngForOf",e.models),r.Cb(2),r.Gb("rotate",!e.isOpenSidebar))},directives:[W.i,H.t,H.s,J.a,Z.a,mt,H.q,Ct,Ot.a],styles:["[_nghost-%COMP%]{position:relative}.sidebar__wrapper[_ngcontent-%COMP%]{height:100%;width:420px;overflow:scroll;transition:all .3s}.sidebar__wrapper.hide[_ngcontent-%COMP%]{width:0}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{background-color:#062d66;padding:30px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .go-back[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;margin-bottom:20px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .go-back[_ngcontent-%COMP%]   .go-back-icon[_ngcontent-%COMP%]{font-size:22px;color:#fff;margin-right:14px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .go-back[_ngcontent-%COMP%]   .go-back-title[_ngcontent-%COMP%]{color:#fff;font-family:Fira Sans;font-size:14px;letter-spacing:0;line-height:17px;text-transform:uppercase;font-weight:300}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:20px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-family:Fira Sans;font-size:21px;font-weight:500;letter-spacing:0;line-height:31px;margin:0}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]{margin-top:10px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]{margin-left:-30px;margin-right:-30px;padding:6px 30px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item.active[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1)}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]{display:flex;color:#fff;justify-content:space-between}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]{display:flex}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]   .species-arrow[_ngcontent-%COMP%]{cursor:pointer}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]   .species-name[_ngcontent-%COMP%]{font-size:16px;line-height:24px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]   .species-features-amount[_ngcontent-%COMP%]{margin-left:5px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]   .species-color[_ngcontent-%COMP%]{margin-left:12px;border-radius:50%}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-name__wrapper[_ngcontent-%COMP%]   .species-delete[_ngcontent-%COMP%]{cursor:pointer;margin-left:50px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-list[_ngcontent-%COMP%]   .species-item[_ngcontent-%COMP%]   .species-features[_ngcontent-%COMP%]{margin-left:36px;color:#fff;display:flex}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .add-new-species__wrapper[_ngcontent-%COMP%]{margin-top:16px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .add-new-species__wrapper[_ngcontent-%COMP%]   .add-new-species-title__wrapper[_ngcontent-%COMP%]{display:flex}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .add-new-species__wrapper[_ngcontent-%COMP%]   .add-new-species-title__wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;background-color:#fff}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .add-new-species__wrapper[_ngcontent-%COMP%]   .add-new-species-title__wrapper[_ngcontent-%COMP%]   .add-new-species-title[_ngcontent-%COMP%]{margin-left:13px;color:#fff;font-size:16px;line-height:24px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .species-dropdown_label[_ngcontent-%COMP%]{color:#fff;font-family:Fira Sans;font-size:16px;font-weight:500;letter-spacing:0;line-height:23px}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:center}.sidebar__wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]     mol-button span{margin-left:32px;margin-right:32px}.sidebar__wrapper[_ngcontent-%COMP%]   .sources__wrapper[_ngcontent-%COMP%]{padding:30px;width:100%;background-color:#fff}.sidebar__wrapper[_ngcontent-%COMP%]   .sources__wrapper[_ngcontent-%COMP%]   .sources-title[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:16px;margin-bottom:20px}.sidebar__wrapper[_ngcontent-%COMP%]   .sources__wrapper[_ngcontent-%COMP%]   .sources__wrapper[_ngcontent-%COMP%]:not(:last-child){margin-bottom:20px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]{width:100%;padding:30px;background-color:#e9e9e9}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#333;font-family:Fira Sans;font-size:16px;font-weight:500;letter-spacing:0;line-height:23px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#333;font-family:Fira Sans;font-size:14px;font-weight:300;letter-spacing:0;line-height:22px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]{border-radius:4px;padding-left:10px;padding-right:10px;padding-bottom:10px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item.active[_ngcontent-%COMP%]{background-color:#fff}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-top:20px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]{display:flex;align-items:center}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s;transform:rotate(0)}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]   span.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]   .model-title[_ngcontent-%COMP%]{margin-left:10px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{color:#70c36f;font-size:16px;margin-left:8px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]   .highlight_off[_ngcontent-%COMP%]{color:red;font-size:16px;margin-left:8px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-title__wrapper[_ngcontent-%COMP%]   .right-part[_ngcontent-%COMP%]{font-size:20px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]{margin-top:12px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]{height:180px;width:340px;position:relative}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;max-height:100%}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]   .buttons__wrapper[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:space-around;top:calc(50% - 20px);width:100%}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]   .buttons__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;justify-content:center;width:100px;background-color:#fff;border-radius:4px;border:2px solid #ccc;height:40px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]   .buttons__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-icon.check_circle[_ngcontent-%COMP%]{color:#70c36f}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]   .buttons__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-icon.highlight_off[_ngcontent-%COMP%]{color:red}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .model-map-image[_ngcontent-%COMP%]   .buttons__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]{margin-left:6px;font-size:16px;font-weight:500;letter-spacing:0}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin-top:12px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .binary-checkbox[_ngcontent-%COMP%]{margin-top:13px}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .best-model-star[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;margin-top:8px;cursor:pointer}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .best-model-star[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{color:#70c36f}.sidebar__wrapper[_ngcontent-%COMP%]   .models__wrapper[_ngcontent-%COMP%]   .model-item[_ngcontent-%COMP%]   .model-content__wrapper[_ngcontent-%COMP%]   .best-model-star[_ngcontent-%COMP%]   .star-text[_ngcontent-%COMP%]{margin-left:10px;color:#333;font-size:14px}.toggle-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;cursor:pointer;height:45px;width:45px;background-color:#fff;right:-45px;top:0;z-index:10}.material-icons[_ngcontent-%COMP%]{transform:rotate(0);transition:all .5s}.material-icons.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.sidebar_edit-attribute-btn[_ngcontent-%COMP%]{color:#fff;font-family:Fira Sans;font-size:14px;font-weight:300;letter-spacing:0;line-height:17px;border:none;background:transparent;text-decoration:underline;cursor:pointer;outline:none;padding:0;margin-left:16px}"]}),t})();var Qt=n("SWYI");function Kt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",7),r.Wb(1,"div",8),r.ec("click",(function(){return r.zc(t),r.ic().togglePresentActiveLayer()})),r.Jc(2),r.Vb(),r.Vb()}if(2&t){const t=r.ic();r.Cb(1),r.Gb("active",!t.isPesentActiveLayer),r.Cb(1),r.Lc(" ",t.isPesentActiveLayer?"Hide polygons":"Show polygons"," ")}}function $t(t,e){1&t&&(r.Wb(0,"span",14),r.Jc(1," clear "),r.Vb())}function te(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",8),r.ec("click",(function(e){return r.zc(t),r.ic(3).createMinimumConvexPolygon(e)})),r.Wb(1,"div",19),r.Jc(2," Add a minimum convex polygon "),r.Vb(),r.Vb()}}function ee(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"div",8),r.ec("click",(function(){return r.zc(t),r.ic(2).startMapDrawing()})),r.jc(2,"async"),r.Wb(3,"div",15),r.Jc(4," Draw on the map "),r.Vb(),r.Vb(),r.Hc(5,te,3,0,"div",16),r.Wb(6,"div",17),r.Wb(7,"span",18),r.Jc(8," info "),r.Vb(),r.Wb(9,"div",12),r.Jc(10,"Click on a feature to copy its geometry"),r.Vb(),r.Vb(),r.Tb()}if(2&t){const t=r.ic(2);r.Cb(1),r.Gb("active",r.kc(2,3,t.isDrawingMode)),r.Cb(4),r.oc("ngIf",t.isReadyForCreateMinimumConvexPolygon)}}function ne(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",9),r.Wb(1,"div",10),r.ec("click",(function(){return r.zc(t),r.ic().toggleEditingSection()})),r.Hc(2,$t,2,0,"span",11),r.Wb(3,"div",12),r.Jc(4),r.Vb(),r.Vb(),r.Hc(5,ee,11,5,"ng-container",13),r.Vb()}if(2&t){const t=r.ic();r.Cb(1),r.Gb("closed",!t.isOpenButtonsGroup),r.Cb(1),r.oc("ngIf",t.isOpenButtonsGroup),r.Cb(1),r.Gb("space",t.isOpenButtonsGroup),r.Cb(1),r.Lc(" ",t.isOpenButtonsGroup?"Close editing mode":"Start editing ranges"," "),r.Cb(1),r.oc("ngIf",t.isOpenButtonsGroup)}}let ie=(()=>{class t{constructor(){this.isDrawingMode=new o.a(!1),this.isReadyForDraw=!1,this.isPesentActiveLayer=!0,this.isOpenButtonsGroup=!1,this.drawingLayer=new o.a(null),this.deleteLayer=new o.a(null),this.drawedPolygon=new o.a(null),this.presentActiveLayer=new r.o(null),this.updatedPolygons=new o.a(null),this.deletedPolygon=new r.o(null),this.deletePolygonFromMap=new r.o(null),this.createPolygonFromMap=new r.o(null),this.isCanClose=!0,this.detailedDatasetIds=new o.a([]),this.speciesModel=new r.o,this.disableSpeciesModel=new r.o,this.unselectSelectedPolygons=new r.o,this.occurrenceDatasetIds=new o.a([]),this.zoomDatasetExtentData=new o.a(null),this.createMinimumConvexPolygonEvent=new r.o,this.isVotingMode=!1}ngOnInit(){this.drawingLayer.subscribe(t=>{this.isReadyForDraw=!!t})}canDeactivate(){return this.isCanClose}setupVotingMode(){this.isVotingMode=!0}togglePresentActiveLayer(){this.isPesentActiveLayer=!this.isPesentActiveLayer,this.presentActiveLayer.emit(this.isPesentActiveLayer)}checkCanExit(t){if(!this.isCanClose)return t.preventDefault(),confirm("WARNING: You have unsaved changes. Press Cancel to go back and save these changes, or OK to lose these changes.")}isReadyForCreateMinimumConvexPolygon(){return this.isDrawingMode.getValue()}createMinimumConvexPolygon(t){this.createMinimumConvexPolygonEvent.emit(t)}updateSpeciesModel(t){this.speciesModel.emit(t)}setDisableSpeciesModel(){this.disableSpeciesModel.emit()}setUnselectSelectedPolygons(){this.unselectSelectedPolygons.emit()}setZoomToDatasetExtent(t){this.zoomDatasetExtentData.next(t)}createdPolygon(t){this.drawedPolygon.next(t)}changeIsCanClose(t){this.isCanClose=t}updatePolygons(t){this.updatedPolygons.next(t)}deletePolygon(t){this.deletedPolygon.emit(t)}deletePolygonFromMapEvent(t){this.deletePolygonFromMap.emit(t)}createPolygonFromMapEvent(t){this.createPolygonFromMap.emit(t)}startMapDrawing(){this.isDrawingMode.next(!0)}toggleEditingSection(){this.isOpenButtonsGroup&&this.isDrawingMode.next(!1),this.isOpenButtonsGroup=!this.isOpenButtonsGroup}setActiveLayer(t){t&&this.drawingLayer.next(t)}deleteLayerFromMap(t){this.deleteLayer.next(t)}setSelectedDetailedDatasetIds(t){this.detailedDatasetIds.next(t)}setSelectedOccurrenceDatasetIds(t){this.occurrenceDatasetIds.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["mol-map-root"]],hostBindings:function(t,e){1&t&&r.ec("beforeunload",(function(t){return e.checkCanExit(t)}),!1,r.yc)},decls:7,vars:19,consts:[[1,"map-page__wrapper"],[1,"green-header"],[1,"content"],[3,"drawedPolygon","updatedPolygons","deletedPolygon","setActiveLayer","deleteLayer","deletePolygon","createPolygon","selectedDetailedDatasetIds","zoomToDatasetExtentData","selectedOccurrenceDatasetIds","updateSpeciesModel","disableSpeciesModel","isCanClose","unselectSelectedPolygons","setupVotingMode"],[3,"drawingLayer","speciesModelMap","disableSpeciesModel","isDrawingMode","deleteLayer","detailedDatasetIds","unselectSelectedPolygons","zoomToDatasetExtent","occurrenceDatasetIds","createMinimumConvexPolygonEvent","deletePolygon","createPolygon","presentActiveLayer","readOnly","createdPolygon","updatedPolygons","deletedPolygon"],["class","button__wrapper",4,"ngIf"],["class","buttons-block__wrapper",4,"ngIf"],[1,"button__wrapper"],[1,"button",3,"click"],[1,"buttons-block__wrapper"],[1,"button","blue",3,"click"],["class","material-icons clear button-icon",4,"ngIf"],[1,"button-text"],[4,"ngIf"],[1,"material-icons","clear","button-icon"],["matTooltip","Click to draw and modify polygons","matTooltipPosition","before","matTooltipClass","increased-tooltip",1,"button-text"],["class","button",3,"click",4,"ngIf"],[1,"button","inactive"],["matTooltip","Click on a feature to copy its geometry.","matTooltipPosition","before","matTooltipClass","increased-tooltip",1,"material-icons","info"],["matTooltip","Create minimum convex polygons based on existing occurrence ranges.","matTooltipPosition","before","matTooltipClass","increased-tooltip",1,"button-text"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Rb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"mol-sidebar",3),r.ec("setActiveLayer",(function(t){return e.setActiveLayer(t)}))("deleteLayer",(function(t){return e.deleteLayerFromMap(t)}))("deletePolygon",(function(t){return e.deletePolygonFromMapEvent(t)}))("createPolygon",(function(t){return e.createPolygonFromMapEvent(t)}))("selectedDetailedDatasetIds",(function(t){return e.setSelectedDetailedDatasetIds(t)}))("zoomToDatasetExtentData",(function(t){return e.setZoomToDatasetExtent(t)}))("selectedOccurrenceDatasetIds",(function(t){return e.setSelectedOccurrenceDatasetIds(t)}))("updateSpeciesModel",(function(t){return e.updateSpeciesModel(t)}))("disableSpeciesModel",(function(){return e.setDisableSpeciesModel()}))("isCanClose",(function(t){return e.changeIsCanClose(t)}))("unselectSelectedPolygons",(function(){return e.setUnselectSelectedPolygons()}))("setupVotingMode",(function(){return e.setupVotingMode()})),r.Vb(),r.Wb(4,"mol-erm-map",4),r.ec("createdPolygon",(function(t){return e.createdPolygon(t)}))("updatedPolygons",(function(t){return e.updatePolygons(t)}))("deletedPolygon",(function(t){return e.deletePolygon(t)})),r.Vb(),r.Hc(5,Kt,3,3,"div",5),r.Hc(6,ne,6,7,"div",6),r.Vb(),r.Vb()),2&t&&(r.Cb(3),r.oc("drawedPolygon",e.drawedPolygon)("updatedPolygons",e.updatedPolygons)("deletedPolygon",e.deletedPolygon),r.Cb(1),r.oc("drawingLayer",e.drawingLayer)("speciesModelMap",e.speciesModel)("disableSpeciesModel",e.disableSpeciesModel)("isDrawingMode",e.isDrawingMode)("deleteLayer",e.deleteLayer)("detailedDatasetIds",e.detailedDatasetIds)("unselectSelectedPolygons",e.unselectSelectedPolygons)("zoomToDatasetExtent",e.zoomDatasetExtentData)("occurrenceDatasetIds",e.occurrenceDatasetIds)("createMinimumConvexPolygonEvent",e.createMinimumConvexPolygonEvent)("deletePolygon",e.deletePolygonFromMap)("createPolygon",e.createPolygonFromMap)("presentActiveLayer",e.presentActiveLayer)("readOnly",e.isVotingMode),r.Cb(1),r.oc("ngIf",e.isReadyForDraw),r.Cb(1),r.oc("ngIf",e.isReadyForDraw))},directives:[Zt,Qt.a,H.t,st.a],pipes:[H.b],styles:["[_nghost-%COMP%]{display:block;flex-grow:1}.map-page__wrapper[_ngcontent-%COMP%]{height:calc(100vh - 85px)}.map-page__wrapper[_ngcontent-%COMP%]   .green-header[_ngcontent-%COMP%]{height:15px;background-color:#8cbf44}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;height:calc(100% - 15px);position:relative}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   mol-erm-map[_ngcontent-%COMP%]{height:100%;flex-grow:1;position:relative}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button__wrapper[_ngcontent-%COMP%]{right:120px;position:absolute;right:330px;top:18px;width:145px}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;justify-content:center;height:45px;background-color:#062d66;border-radius:4px 4px 4px 4px;color:#fff;font-size:16px;letter-spacing:0}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button__wrapper[_ngcontent-%COMP%]   .button.active[_ngcontent-%COMP%]{background-color:#fff;color:#333}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]{position:absolute;right:79px;top:18px}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;width:245px;height:45px;background-color:#fff;color:#333;font-size:14px;letter-spacing:0}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button.active[_ngcontent-%COMP%]{background-color:#e9e9e9}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button.inactive[_ngcontent-%COMP%]{cursor:default}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button.inactive[_ngcontent-%COMP%]:hover{background-color:#fff}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#e9e9e9}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button.blue[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:500;background-color:#062d66}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button.blue[_ngcontent-%COMP%]:hover{background-color:#062d66}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:first-of-type{border-radius:4px 4px 0 0}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:last-of-type{border-radius:0 0 4px 4px}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button.closed[_ngcontent-%COMP%]{justify-content:center;border-radius:4px 4px 4px 4px}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]{margin-left:14px;max-width:157px}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-text.space[_ngcontent-%COMP%]{margin-left:14px}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-text.center[_ngcontent-%COMP%]{margin:5px auto}.map-page__wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons-block__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin-left:32px;height:23px;width:23px}"]}),t})();var re=n("jxfh"),oe=n("M0ag"),se=n("nIj0"),ae=n("F1o0");let ue=(()=>{class t{}return t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({factory:function(e){return new(e||t)},providers:[],imports:[[H.c,oe.a,W.j,ae.d,Ot.b,st.b,re.f,re.e,se.l,se.B]]}),t})()},QrlV:function(t,e,n){!function(t){"use strict";const e=134217729;function n(t,e,n,i,r){let o,s,a,u,l=e[0],c=i[0],h=0,p=0;c>l==c>-l?(o=l,l=e[++h]):(o=c,c=i[++p]);let f=0;if(h<t&&p<n)for(c>l==c>-l?(a=o-((s=l+o)-l),l=e[++h]):(a=o-((s=c+o)-c),c=i[++p]),o=s,0!==a&&(r[f++]=a);h<t&&p<n;)c>l==c>-l?(a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++h]):(a=o-((s=o+c)-(u=s-o))+(c-u),c=i[++p]),o=s,0!==a&&(r[f++]=a);for(;h<t;)a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++h],o=s,0!==a&&(r[f++]=a);for(;p<n;)a=o-((s=o+c)-(u=s-o))+(c-u),c=i[++p],o=s,0!==a&&(r[f++]=a);return 0===o&&0!==f||(r[f++]=o),f}function i(t){return new Float64Array(t)}const r=i(4),o=i(8),s=i(12),a=i(16),u=i(4);t.orient2d=function(t,i,l,c,h,p){const f=(i-p)*(l-h),d=(t-h)*(c-p),g=f-d;if(0===f||0===d||f>0!=d>0)return g;const y=Math.abs(f+d);return Math.abs(g)>=33306690738754716e-32*y?g:-function(t,i,l,c,h,p,f){let d,g,y,_,m,v,b,x,E,I,N,w,C,O,P,S,L,T;const M=t-h,R=l-h,A=i-p,D=c-p;m=(P=(x=M-(b=(v=e*M)-(v-M)))*(I=D-(E=(v=e*D)-(v-D)))-((O=M*D)-b*E-x*E-b*I))-(N=P-(L=(x=A-(b=(v=e*A)-(v-A)))*(I=R-(E=(v=e*R)-(v-R)))-((S=A*R)-b*E-x*E-b*I))),r[0]=P-(N+m)+(m-L),m=(C=O-((w=O+N)-(m=w-O))+(N-m))-(N=C-S),r[1]=C-(N+m)+(m-S),m=(T=w+N)-w,r[2]=w-(T-m)+(N-m),r[3]=T;let F=function(t,e){let n=e[0];for(let i=1;i<4;i++)n+=e[i];return n}(0,r),k=22204460492503146e-32*f;if(F>=k||-F>=k)return F;if(d=t-(M+(m=t-M))+(m-h),y=l-(R+(m=l-R))+(m-h),g=i-(A+(m=i-A))+(m-p),_=c-(D+(m=c-D))+(m-p),0===d&&0===g&&0===y&&0===_)return F;if(k=11093356479670487e-47*f+33306690738754706e-32*Math.abs(F),(F+=M*_+D*d-(A*y+R*g))>=k||-F>=k)return F;m=(P=(x=d-(b=(v=e*d)-(v-d)))*(I=D-(E=(v=e*D)-(v-D)))-((O=d*D)-b*E-x*E-b*I))-(N=P-(L=(x=g-(b=(v=e*g)-(v-g)))*(I=R-(E=(v=e*R)-(v-R)))-((S=g*R)-b*E-x*E-b*I))),u[0]=P-(N+m)+(m-L),m=(C=O-((w=O+N)-(m=w-O))+(N-m))-(N=C-S),u[1]=C-(N+m)+(m-S),m=(T=w+N)-w,u[2]=w-(T-m)+(N-m),u[3]=T;const G=n(4,r,4,u,o);m=(P=(x=M-(b=(v=e*M)-(v-M)))*(I=_-(E=(v=e*_)-(v-_)))-((O=M*_)-b*E-x*E-b*I))-(N=P-(L=(x=A-(b=(v=e*A)-(v-A)))*(I=y-(E=(v=e*y)-(v-y)))-((S=A*y)-b*E-x*E-b*I))),u[0]=P-(N+m)+(m-L),m=(C=O-((w=O+N)-(m=w-O))+(N-m))-(N=C-S),u[1]=C-(N+m)+(m-S),m=(T=w+N)-w,u[2]=w-(T-m)+(N-m),u[3]=T;const B=n(G,o,4,u,s);m=(P=(x=d-(b=(v=e*d)-(v-d)))*(I=_-(E=(v=e*_)-(v-_)))-((O=d*_)-b*E-x*E-b*I))-(N=P-(L=(x=g-(b=(v=e*g)-(v-g)))*(I=y-(E=(v=e*y)-(v-y)))-((S=g*y)-b*E-x*E-b*I))),u[0]=P-(N+m)+(m-L),m=(C=O-((w=O+N)-(m=w-O))+(N-m))-(N=C-S),u[1]=C-(N+m)+(m-S),m=(T=w+N)-w,u[2]=w-(T-m)+(N-m),u[3]=T;const V=n(B,s,4,u,a);return a[V-1]}(t,i,l,c,h,p,y)},t.orient2dfast=function(t,e,n,i,r,o){return(e-o)*(n-r)-(t-r)*(i-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},"R6B+":function(t,e,n){"use strict";var i=n("zT+L"),r=n("RtUh"),o=n("YZE+"),s=n("IlOi"),a=n("CmXO"),u=r(o);i(u,{getPolyfill:s,implementation:o,shim:a}),t.exports=u},RtUh:function(t,e,n){"use strict";var i=n("5L5q"),r=n("3S/X"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||i.call(s,o);t.exports=function(){return a(i,s,arguments)},t.exports.apply=function(){return a(i,o,arguments)}},SWYI:function(t,e,n){"use strict";n.d(e,"a",(function(){return Sr}));var i=n("EM62"),r=n("auRg"),o=n("Kt/E");class s extends Error{constructor(t){super(t),this.name=Object.keys({Exception:s})[0]}toString(){return this.message}}class a extends s{constructor(t){super(t),this.name=Object.keys({IllegalArgumentException:a})[0]}}class u{static toLocationSymbol(t){switch(t){case u.EXTERIOR:return"e";case u.BOUNDARY:return"b";case u.INTERIOR:return"i";case u.NONE:return"-"}throw new a("Unknown location value: "+t)}}u.INTERIOR=0,u.BOUNDARY=1,u.EXTERIOR=2,u.NONE=-1;class l{add(){}addAll(){}isEmpty(){}iterator(){}size(){}toArray(){}remove(){}}class c extends s{constructor(t){super(t),this.name=Object.keys({NoSuchElementException:c})[0]}}class h extends s{constructor(t){super(t),this.name=Object.keys({UnsupportedOperationException:h})[0]}}class p extends l{contains(){}}class f extends p{}class d extends f{constructor(t){super(),this.array=[],t instanceof l&&this.addAll(t)}contains(t){for(const e of this.array)if(0===e.compareTo(t))return!0;return!1}add(t){if(this.contains(t))return!1;for(let e=0,n=this.array.length;e<n;e++)if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t);return this.array.push(t),!0}addAll(t){for(const e of t)this.add(e);return!0}remove(){throw new h}size(){return this.array.length}isEmpty(){return 0===this.array.length}toArray(){return this.array.slice()}iterator(){return new g(this.array)}}class g{constructor(t){this.array=t,this.position=0}next(){if(this.position===this.array.length)throw new c;return this.array[this.position++]}hasNext(){return this.position<this.array.length}remove(){throw new h}}class y{filter(t){}}function _(){}function m(){}function v(){}class b{static equalsWithTolerance(t,e,n){return Math.abs(t-e)<=n}}class x{constructor(t,e){this.low=e||0,this.high=t||0}static toBinaryString(t){let e,n="";for(e=2147483648;e>0;e>>>=1)n+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)n+=(t.low&e)===e?"1":"0";return n}}function E(){}function I(){}E.NaN=NaN,E.isNaN=t=>Number.isNaN(t),E.isInfinite=t=>!Number.isFinite(t),E.MAX_VALUE=Number.MAX_VALUE,E.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,E.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?function(){const t=new Float64Array(1),e=new Int32Array(t.buffer);E.doubleToLongBits=function(n){t[0]=n;let i=0|e[0],r=0|e[1];return 2146435072==(2146435072&r)&&0!=(1048575&r)&&0!==i&&(i=0,r=2146959360),new x(r,i)},E.longBitsToDouble=function(n){return e[0]=n.low,e[1]=n.high,t[0]}}():function(){const t=Math.log2,e=Math.floor,n=Math.pow,i=function(){for(let i=53;i>0;i--){const r=n(2,i)-1;if(e(t(r))+1===i)return r}return 0}();E.doubleToLongBits=function(r){let o,s,a,u,l,c,h,p,f;if(r<0||1/r===Number.NEGATIVE_INFINITY?(c=1<<31,r=-r):c=0,0===r)return f=0,p=c,new x(p,f);if(r===1/0)return f=0,p=2146435072|c,new x(p,f);if(r!=r)return f=0,p=2146959360,new x(p,f);if(u=0,f=0,o=e(r),o>1)if(o<=i)u=e(t(o)),u<=20?(f=0,p=o<<20-u&1048575):(a=u-20,s=n(2,a),f=o%s<<32-a,p=o/s&1048575);else for(a=o,f=0;s=a/2,a=e(s),0!==a;)u++,f>>>=1,f|=(1&p)<<31,p>>>=1,s!==a&&(p|=524288);if(h=u+1023,l=0===o,o=r-o,u<52&&0!==o)for(a=0;;){if(s=2*o,s>=1?(o=s-1,l?(h--,l=!1):(a<<=1,a|=1,u++)):(o=s,l?0==--h&&(u++,l=!1):(a<<=1,u++)),20===u)p|=a,a=0;else if(52===u){f|=a;break}if(1===s){u<20?p|=a<<20-u:u<52&&(f|=a<<52-u);break}}return p|=h<<20,p|=c,new x(p,f)},E.longBitsToDouble=function(t){let e,i,r,o;const s=t.high,a=t.low,u=s&1<<31?-1:1;for(r=((2146435072&s)>>20)-1023,o=0,i=1<<19,e=1;e<=20;e++)s&i&&(o+=n(2,-e)),i>>>=1;for(i=1<<31,e=21;e<=52;e++)a&i&&(o+=n(2,-e)),i>>>=1;if(-1023===r){if(0===o)return 0*u;r=-1022}else{if(1024===r)return 0===o?u/0:NaN;o+=1}return u*o*n(2,r)}}();class N extends s{constructor(t){super(t),this.name=Object.keys({RuntimeException:N})[0]}}class w extends N{constructor(){super(),w.constructor_.apply(this,arguments)}static constructor_(){0===arguments.length?N.constructor_.call(this):1===arguments.length&&N.constructor_.call(this,arguments[0])}}class C{static shouldNeverReachHere(){if(0===arguments.length)C.shouldNeverReachHere(null);else if(1===arguments.length){const t=arguments[0];throw new w("Should never reach here"+(null!==t?": "+t:""))}}static isTrue(){if(1===arguments.length)C.isTrue(arguments[0],null);else if(2===arguments.length){const t=arguments[1];if(!arguments[0])throw null===t?new w:new w(t)}}static equals(){if(2===arguments.length)C.equals(arguments[0],arguments[1],null);else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];if(!e.equals(t))throw new w("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))}}}const O=new ArrayBuffer(8),P=new Float64Array(O),S=new Int32Array(O);class L{constructor(){L.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)L.constructor_.call(this,0,0);else if(1===arguments.length){const t=arguments[0];L.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length)L.constructor_.call(this,arguments[0],arguments[1],L.NULL_ORDINATE);else if(3===arguments.length){const t=arguments[1],e=arguments[2];this.x=arguments[0],this.y=t,this.z=e}}static hashCode(t){return P[0]=t,S[0]^S[1]}getM(){return E.NaN}setOrdinate(t,e){switch(t){case L.X:this.x=e;break;case L.Y:this.y=e;break;case L.Z:this.setZ(e);break;default:throw new a("Invalid ordinate index: "+t)}}equals2D(){if(1===arguments.length){const t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){const t=arguments[0],e=arguments[1];return!!b.equalsWithTolerance(this.x,t.x,e)&&!!b.equalsWithTolerance(this.y,t.y,e)}}setM(t){throw new a("Invalid ordinate index: "+L.M)}getZ(){return this.z}getOrdinate(t){switch(t){case L.X:return this.x;case L.Y:return this.y;case L.Z:return this.getZ()}throw new a("Invalid ordinate index: "+t)}equals3D(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||E.isNaN(this.getZ())&&E.isNaN(t.getZ()))}equals(t){return t instanceof L&&this.equals2D(t)}equalInZ(t,e){return b.equalsWithTolerance(this.getZ(),t.getZ(),e)}setX(t){this.x=t}compareTo(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}getX(){return this.x}setZ(t){this.z=t}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return C.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}copy(){return new L(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}distance3D(t){const e=this.x-t.x,n=this.y-t.y,i=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+i*i)}getY(){return this.y}setY(t){this.y=t}distance(t){const e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}hashCode(){let t=17;return t=37*t+L.hashCode(this.x),t=37*t+L.hashCode(this.y),t}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}get interfaces_(){return[_,m,v]}}class T{constructor(){T.constructor_.apply(this,arguments)}static constructor_(){if(this._dimensionsToTest=2,0===arguments.length)T.constructor_.call(this,2);else if(1===arguments.length){const t=arguments[0];if(2!==t&&3!==t)throw new a("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}static compare(t,e){return t<e?-1:t>e?1:E.isNaN(t)?E.isNaN(e)?0:-1:E.isNaN(e)?1:0}compare(t,e){const n=T.compare(t.x,e.x);if(0!==n)return n;const i=T.compare(t.y,e.y);return 0!==i?i:this._dimensionsToTest<=2?0:T.compare(t.getZ(),e.getZ())}get interfaces_(){return[I]}}L.DimensionalComparator=T,L.NULL_ORDINATE=E.NaN,L.X=0,L.Y=1,L.Z=2,L.M=3;class M{constructor(){M.constructor_.apply(this,arguments)}static constructor_(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof L){const t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else arguments[0]instanceof M&&this.init(arguments[0]);else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])}static intersects(){if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];let r=Math.min(n.x,i.x),o=Math.max(n.x,i.x),s=Math.min(t.x,e.x),a=Math.max(t.x,e.x);return!(s>o||a<r||(r=Math.min(n.y,i.y),o=Math.max(n.y,i.y),s=Math.min(t.y,e.y),a=Math.max(t.y,e.y),s>o||a<r))}}getArea(){return this.getWidth()*this.getHeight()}equals(t){if(!(t instanceof M))return!1;const e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}intersection(t){return this.isNull()||t.isNull()||!this.intersects(t)?new M:new M(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof L){const t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof M){const t=arguments[0];return!this.isNull()&&!t.isNull()&&t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];return!this.isNull()&&t>=this._minx&&t<=this._maxx&&e>=this._miny&&e<=this._maxy}}intersects(){if(1===arguments.length){if(arguments[0]instanceof M){const t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof L){const t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){if(arguments[0]instanceof L&&arguments[1]instanceof L){const t=arguments[0],e=arguments[1];return!(this.isNull()||(t.x<e.x?t.x:e.x)>this._maxx||(t.x>e.x?t.x:e.x)<this._minx||(t.y<e.y?t.y:e.y)>this._maxy||(t.y>e.y?t.y:e.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return!this.isNull()&&!(t>this._maxx||t<this._minx||e>this._maxy||e<this._miny)}}}getMinY(){return this._miny}getDiameter(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof L){const t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof M){const t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.isNull()?(this._minx=t,this._maxx=t,this._miny=e,this._maxy=e):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e))}}minExtent(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return t<e?t:e}getWidth(){return this.isNull()?0:this._maxx-this._minx}compareTo(t){const e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}translate(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}copy(){return new M(this)}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}disjoint(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return t>e?t:e}expandBy(){if(1===arguments.length){const t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=e,this._maxy+=e,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof M)return this.covers(arguments[0]);if(arguments[0]instanceof L)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])}centre(){return this.isNull()?null:new L((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof L){const t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof M){const t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t<e?(this._minx=t,this._maxx=e):(this._minx=e,this._maxx=t),n<i?(this._miny=n,this._maxy=i):(this._miny=i,this._maxy=n)}}getMaxY(){return this._maxy}distance(t){if(this.intersects(t))return 0;let e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);let n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}hashCode(){let t=17;return t=37*t+L.hashCode(this._minx),t=37*t+L.hashCode(this._maxx),t=37*t+L.hashCode(this._miny),t=37*t+L.hashCode(this._maxy),t}get interfaces_(){return[_,v]}}class R{constructor(){R.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===R.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(t){return this}getArea(){return 0}isRectangle(){return!1}equalsExact(t){return this===t||this.equalsExact(t,0)}geometryChanged(){this.apply(R.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){let t;if(1===arguments.length){const e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){const e=arguments[0],n=arguments[1];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e,n)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}checkNotGeometryCollection(t){if(t.getTypeCode()===R.TYPECODE_GEOMETRYCOLLECTION)throw new a("This method does not support GeometryCollection arguments")}equal(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}norm(){const t=this.copy();return t.normalize(),t}reverse(){const t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}copy(){const t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new M(this._envelope)}setSRID(t){this._SRID=t}setUserData(t){this._userData=t}compare(t,e){const n=t.iterator(),i=e.iterator();for(;n.hasNext()&&i.hasNext();){const t=n.next(),e=i.next(),r=t.compareTo(e);if(0!==r)return r}return n.hasNext()?1:i.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isEquivalentClass(t){return this.getClass()===t.getClass()}isGeometryCollectionOrDerived(){return this.getTypeCode()===R.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===R.TYPECODE_MULTIPOINT||this.getTypeCode()===R.TYPECODE_MULTILINESTRING||this.getTypeCode()===R.TYPECODE_MULTIPOLYGON}get interfaces_(){return[m,_,v]}getClass(){return R}static hasNonEmptyElements(t){for(let e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}static hasNullElements(t){for(let e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}R.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},R.TYPECODE_POINT=0,R.TYPECODE_MULTIPOINT=1,R.TYPECODE_LINESTRING=2,R.TYPECODE_LINEARRING=3,R.TYPECODE_MULTILINESTRING=4,R.TYPECODE_POLYGON=5,R.TYPECODE_MULTIPOLYGON=6,R.TYPECODE_GEOMETRYCOLLECTION=7,R.TYPENAME_POINT="Point",R.TYPENAME_MULTIPOINT="MultiPoint",R.TYPENAME_LINESTRING="LineString",R.TYPENAME_LINEARRING="LinearRing",R.TYPENAME_MULTILINESTRING="MultiLineString",R.TYPENAME_POLYGON="Polygon",R.TYPENAME_MULTIPOLYGON="MultiPolygon",R.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",R.geometryChangedFilter={get interfaces_(){return[y]},filter(t){t.geometryChangedAction()}};class A{filter(t){}}var D=function(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1};class F{}class k{getM(t){if(this.hasM()){const e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return E.NaN}setOrdinate(t,e,n){}getZ(t){return this.hasZ()?this.getOrdinate(t,2):E.NaN}size(){}getOrdinate(t,e){}getCoordinate(){}getCoordinateCopy(t){}createCoordinate(){}getDimension(){}hasM(){return this.getMeasures()>0}getX(t){}hasZ(){return this.getDimension()-this.getMeasures()>2}getMeasures(){return 0}expandEnvelope(t){}copy(){}getY(t){}toCoordinateArray(){}get interfaces_(){return[m]}}k.X=0,k.Y=1,k.Z=2,k.M=3;class G{static copyCoord(t,e,n,i){const r=Math.min(t.getDimension(),n.getDimension());for(let o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))}static isRing(t){const e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,k.X)===t.getOrdinate(e-1,k.X)&&t.getOrdinate(0,k.Y)===t.getOrdinate(e-1,k.Y)}static scroll(){if(2===arguments.length){if(D(arguments[0],k)&&Number.isInteger(arguments[1])){const t=arguments[0];G.scroll(t,arguments[1],G.isRing(t))}else if(D(arguments[0],k)&&arguments[1]instanceof L){const t=arguments[0],e=G.indexOf(arguments[1],t);if(e<=0)return null;G.scroll(t,e)}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];if(e<=0)return null;const i=t.copy(),r=n?t.size()-1:t.size();for(let o=0;o<r;o++)for(let n=0;n<t.getDimension();n++)t.setOrdinate(o,n,i.getOrdinate((e+o)%r,n));if(n)for(let o=0;o<t.getDimension();o++)t.setOrdinate(r,o,t.getOrdinate(0,o))}}static isEqual(t,e){const n=t.size();if(n!==e.size())return!1;const i=Math.min(t.getDimension(),e.getDimension());for(let r=0;r<n;r++)for(let n=0;n<i;n++){const i=t.getOrdinate(r,n),o=e.getOrdinate(r,n);if(!(t.getOrdinate(r,n)===e.getOrdinate(r,n)||E.isNaN(i)&&E.isNaN(o)))return!1}return!0}static minCoordinateIndex(){if(1===arguments.length){const t=arguments[0];return G.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){const t=arguments[0],e=arguments[2];let n=-1,i=null;for(let r=arguments[1];r<=e;r++){const e=t.getCoordinate(r);(null===i||i.compareTo(e)>0)&&(i=e,n=r)}return n}}static extend(t,e,n){const i=t.create(n,e.getDimension()),r=e.size();if(G.copy(e,0,i,0,r),r>0)for(let o=r;o<n;o++)G.copy(e,r-1,i,o,1);return i}static reverse(t){const e=t.size()-1,n=Math.trunc(e/2);for(let i=0;i<=n;i++)G.swap(t,i,e-i)}static swap(t,e,n){if(e===n)return null;for(let i=0;i<t.getDimension();i++){const r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}}static copy(t,e,n,i,r){for(let o=0;o<r;o++)G.copyCoord(t,e+o,n,i+o)}static ensureValidRing(t,e){const n=e.size();return 0===n?e:n<=3?G.createClosedRing(t,e,4):e.getOrdinate(0,k.X)===e.getOrdinate(n-1,k.X)&&e.getOrdinate(0,k.Y)===e.getOrdinate(n-1,k.Y)?e:G.createClosedRing(t,e,n+1)}static indexOf(t,e){for(let n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,k.X)&&t.y===e.getOrdinate(n,k.Y))return n;return-1}static createClosedRing(t,e,n){const i=t.create(n,e.getDimension()),r=e.size();G.copy(e,0,i,0,r);for(let o=r;o<n;o++)G.copy(e,0,i,o,1);return i}static minCoordinate(t){let e=null;for(let n=0;n<t.size();n++){const i=t.getCoordinate(n);(null===e||e.compareTo(i)>0)&&(e=i)}return e}}class B{static isWhitespace(t){return t<=32&&t>=0||127===t}static toUpperCase(t){return t.toUpperCase()}}class V{static toDimensionSymbol(t){switch(t){case V.FALSE:return V.SYM_FALSE;case V.TRUE:return V.SYM_TRUE;case V.DONTCARE:return V.SYM_DONTCARE;case V.P:return V.SYM_P;case V.L:return V.SYM_L;case V.A:return V.SYM_A}throw new a("Unknown dimension value: "+t)}static toDimensionValue(t){switch(B.toUpperCase(t)){case V.SYM_FALSE:return V.FALSE;case V.SYM_TRUE:return V.TRUE;case V.SYM_DONTCARE:return V.DONTCARE;case V.SYM_P:return V.P;case V.SYM_L:return V.L;case V.SYM_A:return V.A}throw new a("Unknown dimension symbol: "+t)}}V.P=0,V.L=1,V.A=2,V.FALSE=-1,V.TRUE=-2,V.DONTCARE=-3,V.SYM_FALSE="F",V.SYM_TRUE="T",V.SYM_DONTCARE="*",V.SYM_P="0",V.SYM_L="1",V.SYM_A="2";class z{filter(t){}}class j{filter(t,e){}isDone(){}isGeometryChanged(){}}class U extends R{constructor(){super(),U.constructor_.apply(this,arguments)}static constructor_(){if(this._points=null,0===arguments.length);else if(2===arguments.length){const t=arguments[0];R.constructor_.call(this,arguments[1]),this.init(t)}}computeEnvelopeInternal(){return this.isEmpty()?new M:this._points.expandEnvelope(new M)}isRing(){return this.isClosed()&&this.isSimple()}getCoordinates(){return this._points.toCoordinateArray()}copyInternal(){return new U(this._points.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof R){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const n=t;if(this._points.size()!==n._points.size())return!1;for(let i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),n._points.getCoordinate(i),e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(let t=0;t<Math.trunc(this._points.size()/2);t++){const e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){const t=this._points.copy();G.reverse(t),this._points=t}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?V.FALSE:0}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}reverseInternal(){const t=this._points.copy();return G.reverse(t),this.getFactory().createLineString(t)}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return R.TYPECODE_LINESTRING}getDimension(){return 1}getLength(){return class{static ofLine(t){const e=t.size();if(e<=1)return 0;let n=0;const i=new L;t.getCoordinate(0,i);let r=i.x,o=i.y;for(let s=1;s<e;s++){t.getCoordinate(s,i);const e=i.x,a=i.y,u=e-r,l=a-o;n+=Math.sqrt(u*u+l*l),r=e,o=a}return n}}.ofLine(this._points)}getNumPoints(){return this._points.size()}compareToSameClass(){if(1===arguments.length){const t=arguments[0];let e=0,n=0;for(;e<this._points.size()&&n<t._points.size();){const i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)}apply(){if(D(arguments[0],A)){const t=arguments[0];for(let e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e))}else if(D(arguments[0],j)){const t=arguments[0];if(0===this._points.size())return null;for(let e=0;e<this._points.size()&&(t.filter(this._points,e),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else(D(arguments[0],z)||D(arguments[0],y))&&arguments[0].filter(this)}getBoundary(){throw new h}isEquivalentClass(t){return t instanceof U}getCoordinateN(t){return this._points.getCoordinate(t)}getGeometryType(){return R.TYPENAME_LINESTRING}getCoordinateSequence(){return this._points}isEmpty(){return 0===this._points.size()}init(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new a("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}isCoordinate(t){for(let e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}getPointN(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}get interfaces_(){return[F]}}class q{create(){if(1===arguments.length)arguments[0]instanceof Array||D(arguments[0],k);else if(2===arguments.length);else if(3===arguments.length)return this.create(arguments[0],arguments[1])}}class Y{}class X extends R{constructor(){super(),X.constructor_.apply(this,arguments)}static constructor_(){this._coordinates=null;const t=arguments[0];R.constructor_.call(this,arguments[1]),this.init(t)}computeEnvelopeInternal(){if(this.isEmpty())return new M;const t=new M;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}copyInternal(){return new X(this._coordinates.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof R){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return super.equalsExact.apply(this,arguments)}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return V.FALSE}reverseInternal(){return this.getFactory().createPoint(this._coordinates.copy())}getTypeCode(){return R.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}getX(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}compareToSameClass(){if(1===arguments.length){const t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)}apply(){if(D(arguments[0],A)){const t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(D(arguments[0],j)){const t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else(D(arguments[0],z)||D(arguments[0],y))&&arguments[0].filter(this)}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return R.TYPENAME_POINT}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}isEmpty(){return 0===this._coordinates.size()}init(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),C.isTrue(t.size()<=1),this._coordinates=t}isSimple(){return!0}get interfaces_(){return[Y]}}class W{static ofRing(){return arguments[0]instanceof Array||D(arguments[0],k)?Math.abs(W.ofRingSigned(arguments[0])):void 0}static ofRingSigned(){if(arguments[0]instanceof Array){const t=arguments[0];if(t.length<3)return 0;let e=0;const n=t[0].x;for(let i=1;i<t.length-1;i++)e+=(t[i].x-n)*(t[i-1].y-t[i+1].y);return e/2}if(D(arguments[0],k)){const t=arguments[0],e=t.size();if(e<3)return 0;const n=new L,i=new L,r=new L;t.getCoordinate(0,i),t.getCoordinate(1,r);const o=i.x;r.x-=o;let s=0;for(let a=1;a<e-1;a++)n.y=i.y,i.x=r.x,i.y=r.y,t.getCoordinate(a+1,r),r.x-=o,s+=i.x*(n.y-r.y);return s/2}}}class H extends s{constructor(t){super(t),this.name=Object.keys({IndexOutOfBoundsException:H})[0]}}class J extends l{get(){}set(){}isEmpty(){}}class Z extends J{constructor(t){super(),this.array=[],t instanceof l&&this.addAll(t)}get interfaces_(){return[J,l]}ensureCapacity(){}add(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}clear(){this.array=[]}addAll(t){for(const e of t)this.array.push(e)}set(t,e){const n=this.array[t];return this.array[t]=e,n}iterator(){return new Q(this)}get(t){if(t<0||t>=this.size())throw new H;return this.array[t]}isEmpty(){return 0===this.array.length}sort(t){t?this.array.sort((e,n)=>t.compare(e,n)):this.array.sort()}size(){return this.array.length}toArray(){return this.array.slice()}remove(t){for(let e=0,n=this.array.length;e<n;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}[Symbol.iterator](){return this.array.values()}}class Q{constructor(t){this.arrayList=t,this.position=0}next(){if(this.position===this.arrayList.size())throw new c;return this.arrayList.get(this.position++)}hasNext(){return this.position<this.arrayList.size()}set(t){return this.arrayList.set(this.position-1,t)}remove(){this.arrayList.remove(this.arrayList.get(this.position))}}class K{static sort(){const t=arguments[0];if(1===arguments.length)t.sort((t,e)=>t.compareTo(e));else if(2===arguments.length)t.sort((t,e)=>arguments[1].compare(t,e));else if(3===arguments.length){const e=t.slice(arguments[1],arguments[2]);e.sort();const n=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);for(const i of n)t.push(i)}else if(4===arguments.length){const e=t.slice(arguments[1],arguments[2]);e.sort((t,e)=>arguments[3].compare(t,e));const n=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);for(const i of n)t.push(i)}}static asList(t){const e=new Z;for(const n of t)e.add(n);return e}static copyOf(t,e){return t.slice(0,e)}}class ${constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}toString(){return this.str}}class tt{constructor(t){this.value=t}intValue(){return this.value}compareTo(t){return this.value<t?-1:this.value>t?1:0}static compare(t,e){return t<e?-1:t>e?1:0}static isNan(t){return Number.isNaN(t)}static valueOf(t){return new tt(t)}}class et{constructor(){et.constructor_.apply(this,arguments)}static constructor_(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof et?this.init(arguments[0]):"string"==typeof arguments[0]&&et.constructor_.call(this,et.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])}static determinant(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[1],e=arguments[2],n=arguments[3];return et.determinant(et.valueOf(arguments[0]),et.valueOf(t),et.valueOf(e),et.valueOf(n))}if(arguments[3]instanceof et&&arguments[2]instanceof et&&arguments[0]instanceof et&&arguments[1]instanceof et){const t=arguments[1],e=arguments[2];return arguments[0].multiply(arguments[3]).selfSubtract(t.multiply(e))}}static sqr(t){return et.valueOf(t).selfMultiply(t)}static valueOf(){return"string"==typeof arguments[0]?et.parse(arguments[0]):"number"==typeof arguments[0]?new et(arguments[0]):void 0}static sqrt(t){return et.valueOf(t).sqrt()}static parse(t){let e=0;const n=t.length;for(;B.isWhitespace(t.charAt(e));)e++;let i=!1;if(e<n){const n=t.charAt(e);"-"!==n&&"+"!==n||(e++,"-"===n&&(i=!0))}const r=new et;let o=0,s=0,a=0,u=!1;for(;!(e>=n);){const n=t.charAt(e);if(e++,B.isDigit(n)){const t=n-"0";r.selfMultiply(et.TEN),r.selfAdd(t),o++}else{if("."!==n){if("e"===n||"E"===n){const n=t.substring(e);try{a=tt.parseInt(n)}catch(h){throw h instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+n+" in string "+t):h}break}throw new NumberFormatException("Unexpected character '"+n+"' at position "+e+" in string "+t)}s=o,u=!0}}let l=r;u||(s=o);const c=o-s-a;if(0===c)l=r;else if(c>0){const t=et.TEN.pow(c);l=r.divide(t)}else if(c<0){const t=et.TEN.pow(-c);l=r.multiply(t)}return i?l.negate():l}static createNaN(){return new et(E.NaN,E.NaN)}static copy(t){return new et(t)}static magnitude(t){const e=Math.abs(t),n=Math.log(e)/Math.log(10);let i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i}static stringOfChar(t,e){const n=new $;for(let i=0;i<e;i++)n.append(t);return n.toString()}le(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}extractSignificantDigits(t,e){let n=this.abs(),i=et.magnitude(n._hi);const r=et.TEN.pow(i);n=n.divide(r),n.gt(et.TEN)?(n=n.divide(et.TEN),i+=1):n.lt(et.ONE)&&(n=n.multiply(et.TEN),i-=1);const o=i+1,s=new $,a=et.MAX_PRINT_DIGITS-1;for(let u=0;u<=a;u++){t&&u===o&&s.append(".");const e=Math.trunc(n._hi);if(e<0)break;let i=!1,r=0;e>9?(i=!0,r="9"):r="0"+e,s.append(r),n=n.subtract(et.valueOf(e)).multiply(et.TEN),i&&n.selfAdd(et.TEN);let l=!0;const c=et.magnitude(n._hi);if(c<0&&Math.abs(c)>=a-u&&(l=!1),!l)break}return e[0]=i,s.toString()}sqr(){return this.multiply(this)}doubleValue(){return this._hi+this._lo}subtract(){return arguments[0]instanceof et?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0}equals(){if(1===arguments.length&&arguments[0]instanceof et){const t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof et){const t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}min(t){return this.le(t)?this:t}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof et){const t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){const t=arguments[0];let e=null,n=null,i=null,r=null,o=null,s=null,a=null,u=null;return o=this._hi/t,s=et.SPLIT*o,e=s-o,u=et.SPLIT*t,e=s-e,n=o-e,i=u-t,a=o*t,i=u-i,r=t-i,u=e*i-a+e*r+n*i+n*r,s=(this._hi-a-u+this._lo-o*arguments[1])/t,u=o+s,this._hi=u,this._lo=o-u+s,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof et){const t=arguments[0];let e=null,n=null,i=null,r=null,o=null,s=null,a=null,u=null;return o=this._hi/t._hi,s=et.SPLIT*o,e=s-o,u=et.SPLIT*t._hi,e=s-e,n=o-e,i=u-t._hi,a=o*t._hi,i=u-i,r=t._hi-i,u=e*i-a+e*r+n*i+n*r,s=(this._hi-a-u+this._lo-o*t._lo)/t._hi,u=o+s,new et(u,o-u+s)}if("number"==typeof arguments[0]){const t=arguments[0];return E.isNaN(t)?et.createNaN():et.copy(this).selfDivide(t,0)}}ge(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}pow(t){if(0===t)return et.valueOf(1);let e=new et(this),n=et.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),i/=2,i>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n}ceil(){if(this.isNaN())return et.NaN;const t=Math.ceil(this._hi);let e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new et(t,e)}compareTo(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0}rint(){return this.isNaN()?this:this.add(.5).floor()}setValue(){return arguments[0]instanceof et||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0}max(t){return this.ge(t)?this:t}sqrt(){if(this.isZero())return et.valueOf(0);if(this.isNegative())return et.NaN;const t=1/Math.sqrt(this._hi),e=et.valueOf(this._hi*t),n=this.subtract(e.sqr());return e.add(n._hi*(.5*t))}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof et){const t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];let e=null,n=null,i=null,r=null,o=null,s=null;return i=this._hi+t,o=i-this._hi,r=i-o,r=t-o+(this._hi-r),s=r+this._lo,e=i+s,n=s+(i-e),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let n=null,i=null,r=null,o=null,s=null,a=null,u=null,l=null;s=this._hi+t,r=this._lo+e,u=s-this._hi,l=r-this._lo,a=s-u,o=r-l,a=t-u+(this._hi-a),o=e-l+(this._lo-o),u=a+r,n=s+u,i=u+(s-n),u=o+i;const c=n+u,h=u+(n-c);return this._hi=c,this._lo=h,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof et){const t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){const t=arguments[0];let e=null,n=null,i=null,r=null,o=null,s=null;o=et.SPLIT*this._hi,e=o-this._hi,s=et.SPLIT*t,e=o-e,n=this._hi-e,i=s-t,o=this._hi*t,i=s-i,r=t-i,s=e*i-o+e*r+n*i+n*r+(this._hi*arguments[1]+this._lo*t);const a=o+s;e=o-a;const u=s+e;return this._hi=a,this._lo=u,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return et.NaN;const t=Math.floor(this._hi);let e=0;return t===this._hi&&(e=Math.floor(this._lo)),new et(t,e)}negate(){return this.isNaN()?this:new et(-this._hi,-this._lo)}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}multiply(){if(arguments[0]instanceof et){const t=arguments[0];return t.isNaN()?et.createNaN():et.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){const t=arguments[0];return E.isNaN(t)?et.createNaN():et.copy(this).selfMultiply(t,0)}}isNaN(){return E.isNaN(this._hi)}intValue(){return Math.trunc(this._hi)}toString(){const t=et.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){const t=this.getSpecialNumberString();if(null!==t)return t;const e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1;let r=n;return"."===n.charAt(0)?r="0"+n:i<0?r="0."+et.stringOfChar("0",-i)+n:-1===n.indexOf(".")&&(r=n+et.stringOfChar("0",i-n.length)+".0"),this.isNegative()?"-"+r:r}reciprocal(){let t=null,e=null,n=null,i=null,r=null,o=null,s=null,a=null;r=1/this._hi,o=et.SPLIT*r,t=o-r,a=et.SPLIT*this._hi,t=o-t,e=r-t,n=a-this._hi,s=r*this._hi,n=a-n,i=this._hi-n,a=t*n-s+t*i+e*n+e*i,o=(1-s-a-r*this._lo)/this._hi;const u=r+o;return new et(u,r-u+o)}toSciNotation(){if(this.isZero())return et.SCI_NOT_ZERO;const t=this.getSpecialNumberString();if(null!==t)return t;const e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=et.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);let r="";n.length>1&&(r=n.substring(1));const o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i}abs(){return this.isNaN()?et.NaN:this.isNegative()?this.negate():new et(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}add(){if(arguments[0]instanceof et){const t=arguments[0];return et.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){const t=arguments[0];return et.copy(this).selfAdd(t)}}init(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof et){const t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){const t=arguments[1];this._hi=arguments[0],this._lo=t}}gt(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?et.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}get interfaces_(){return[v,_,m]}}et.PI=new et(3.141592653589793,12246467991473532e-32),et.TWO_PI=new et(6.283185307179586,24492935982947064e-32),et.PI_2=new et(1.5707963267948966,6123233995736766e-32),et.E=new et(2.718281828459045,14456468917292502e-32),et.NaN=new et(E.NaN,E.NaN),et.EPS=123259516440783e-46,et.SPLIT=134217729,et.MAX_PRINT_DIGITS=32,et.TEN=et.valueOf(10),et.ONE=et.valueOf(1),et.SCI_NOT_EXPONENT_CHAR="E",et.SCI_NOT_ZERO="0.0E0";class nt{static orientationIndex(t,e,n){const i=nt.orientationIndexFilter(t,e,n);if(i<=1)return i;const r=et.valueOf(e.x).selfAdd(-t.x),o=et.valueOf(e.y).selfAdd(-t.y),s=et.valueOf(n.x).selfAdd(-e.x),a=et.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()}static signOfDet2x2(){if(arguments[3]instanceof et&&arguments[2]instanceof et&&arguments[0]instanceof et&&arguments[1]instanceof et){const t=arguments[1],e=arguments[2];return arguments[0].multiply(arguments[3]).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[1],e=arguments[2],n=arguments[3],i=et.valueOf(arguments[0]),r=et.valueOf(t),o=et.valueOf(e),s=et.valueOf(n);return i.multiply(s).selfSubtract(r.multiply(o)).signum()}}static intersection(t,e,n,i){const r=new et(t.y).selfSubtract(e.y),o=new et(e.x).selfSubtract(t.x),s=new et(t.x).selfMultiply(e.y).selfSubtract(new et(e.x).selfMultiply(t.y)),a=new et(n.y).selfSubtract(i.y),u=new et(i.x).selfSubtract(n.x),l=new et(n.x).selfMultiply(i.y).selfSubtract(new et(i.x).selfMultiply(n.y)),c=o.multiply(l).selfSubtract(u.multiply(s)),h=a.multiply(s).selfSubtract(r.multiply(l)),p=r.multiply(u).selfSubtract(a.multiply(o)),f=c.selfDivide(p).doubleValue(),d=h.selfDivide(p).doubleValue();return E.isNaN(f)||E.isInfinite(f)||E.isNaN(d)||E.isInfinite(d)?null:new L(f,d)}static orientationIndexFilter(t,e,n){let i=null;const r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(o<=0)return nt.signum(s);i=r+o}else{if(!(r<0))return nt.signum(s);if(o>=0)return nt.signum(s);i=-r-o}const a=nt.DP_SAFE_EPSILON*i;return s>=a||-s>=a?nt.signum(s):2}static signum(t){return t>0?1:t<0?-1:0}}nt.DP_SAFE_EPSILON=1e-15;class it{static index(t,e,n){return nt.orientationIndex(t,e,n)}static isCCW(){if(arguments[0]instanceof Array){const t=arguments[0],e=t.length-1;if(e<3)throw new a("Ring has fewer than 4 points, so orientation cannot be determined");let n=t[0],i=0;for(let a=1;a<=e;a++){const e=t[a];e.y>n.y&&(n=e,i=a)}let r=i;do{r-=1,r<0&&(r=e)}while(t[r].equals2D(n)&&r!==i);let o=i;do{o=(o+1)%e}while(t[o].equals2D(n)&&o!==i);const s=t[r],u=t[o];if(s.equals2D(n)||u.equals2D(n)||s.equals2D(u))return!1;const l=it.index(s,n,u);let c=null;return c=0===l?s.x>u.x:l>0,c}if(D(arguments[0],k)){const t=arguments[0],e=t.size()-1;if(e<3)throw new a("Ring has fewer than 4 points, so orientation cannot be determined");let n=t.getCoordinate(0),i=0;for(let a=1;a<=e;a++){const e=t.getCoordinate(a);e.y>n.y&&(n=e,i=a)}let r=null,o=i;do{o-=1,o<0&&(o=e),r=t.getCoordinate(o)}while(r.equals2D(n)&&o!==i);let s=null,u=i;do{u=(u+1)%e,s=t.getCoordinate(u)}while(s.equals2D(n)&&u!==i);if(r.equals2D(n)||s.equals2D(n)||r.equals2D(s))return!1;const l=it.index(r,n,s);let c=null;return c=0===l?r.x>s.x:l>0,c}}}it.CLOCKWISE=-1,it.RIGHT=it.CLOCKWISE,it.COUNTERCLOCKWISE=1,it.LEFT=it.COUNTERCLOCKWISE,it.COLLINEAR=0,it.STRAIGHT=it.COLLINEAR;class rt{}class ot extends R{constructor(){super(),ot.constructor_.apply(this,arguments)}static constructor_(){this._shell=null,this._holes=null;let t=arguments[0],e=arguments[1];if(R.constructor_.call(this,arguments[2]),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),R.hasNullElements(e))throw new a("holes must not contain null elements");if(t.isEmpty()&&R.hasNonEmptyElements(e))throw new a("shell is empty but holes are not");this._shell=t,this._holes=e}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];const t=new Array(this.getNumPoints()).fill(null);let e=-1;const n=this._shell.getCoordinates();for(let i=0;i<n.length;i++)e++,t[e]=n[i];for(let i=0;i<this._holes.length;i++){const n=this._holes[i].getCoordinates();for(let i=0;i<n.length;i++)e++,t[e]=n[i]}return t}getArea(){let t=0;t+=W.ofRing(this._shell.getCoordinateSequence());for(let e=0;e<this._holes.length;e++)t-=W.ofRing(this._holes[e].getCoordinateSequence());return t}copyInternal(){const t=this._shell.copy(),e=new Array(this._holes.length).fill(null);for(let n=0;n<this._holes.length;n++)e[n]=this._holes[n].copy();return new ot(t,e,this._factory)}isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;const t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal();for(let r=0;r<5;r++){const n=t.getX(r);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;const i=t.getY(r);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}let n=t.getX(0),i=t.getY(0);for(let r=1;r<=4;r++){const e=t.getX(r),o=t.getY(r);if(e!==n==(o!==i))return!1;n=e,i=o}return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof R){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const n=t;if(!this._shell.equalsExact(n._shell,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(let i=0;i<this._holes.length;i++)if(!this._holes[i].equalsExact(n._holes[i],e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(let t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);K.sort(this._holes)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(t.isEmpty())return null;const n=t.getCoordinateSequence(),i=G.minCoordinateIndex(n,0,n.size()-2);G.scroll(n,i,!0),it.isCCW(n)===e&&G.reverse(n)}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}reverseInternal(){const t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null);for(let n=0;n<e.length;n++)e[n]=this.getInteriorRingN(n).reverse();return this.getFactory().createPolygon(t,e)}getTypeCode(){return R.TYPECODE_POLYGON}getDimension(){return 2}getLength(){let t=0;t+=this._shell.getLength();for(let e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}getNumPoints(){let t=this._shell.getNumPoints();for(let e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}convexHull(){return this.getExteriorRing().convexHull()}normalized(t,e){const n=t.copy();return this.normalize(n,e),n}compareToSameClass(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){const t=arguments[1],e=arguments[0],n=this._shell.compareToSameClass(e._shell,t);if(0!==n)return n;const i=this.getNumInteriorRing(),r=e.getNumInteriorRing();let o=0;for(;o<i&&o<r;){const n=this.getInteriorRingN(o),i=e.getInteriorRingN(o),r=n.compareToSameClass(i,t);if(0!==r)return r;o++}return o<i?1:o<r?-1:0}}apply(){if(D(arguments[0],A)){const t=arguments[0];this._shell.apply(t);for(let e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(D(arguments[0],j)){const t=arguments[0];if(this._shell.apply(t),!t.isDone())for(let e=0;e<this._holes.length&&(this._holes[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(D(arguments[0],z))arguments[0].filter(this);else if(D(arguments[0],y)){const t=arguments[0];t.filter(this),this._shell.apply(t);for(let e=0;e<this._holes.length;e++)this._holes[e].apply(t)}}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(let e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}getGeometryType(){return R.TYPENAME_POLYGON}getExteriorRing(){return this._shell}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(t){return this._holes[t]}get interfaces_(){return[rt]}}class st extends R{constructor(){super(),st.constructor_.apply(this,arguments)}static constructor_(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0];if(R.constructor_.call(this,arguments[1]),null===t&&(t=[]),R.hasNullElements(t))throw new a("geometries must not contain null elements");this._geometries=t}}computeEnvelopeInternal(){const t=new M;for(let e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}getGeometryN(t){return this._geometries[t]}getCoordinates(){const t=new Array(this.getNumPoints()).fill(null);let e=-1;for(let n=0;n<this._geometries.length;n++){const i=this._geometries[n].getCoordinates();for(let n=0;n<i.length;n++)e++,t[e]=i[n]}return t}getArea(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new st(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof R){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const n=t;if(this._geometries.length!==n._geometries.length)return!1;for(let i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(n._geometries[i],e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(let t=0;t<this._geometries.length;t++)this._geometries[t].normalize();K.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){let t=V.FALSE;for(let e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}reverseInternal(){const t=this._geometries.length,e=new Z(t);for(let n=0;n<t;n++)e.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(e)}getTypeCode(){return R.TYPECODE_GEOMETRYCOLLECTION}getDimension(){let t=V.FALSE;for(let e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}getLength(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}getNumPoints(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}getNumGeometries(){return this._geometries.length}compareToSameClass(){if(1===arguments.length){const t=arguments[0],e=new d(K.asList(this._geometries)),n=new d(K.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){const t=arguments[1],e=arguments[0],n=this.getNumGeometries(),i=e.getNumGeometries();let r=0;for(;r<n&&r<i;){const n=this.getGeometryN(r),i=e.getGeometryN(r),o=n.compareToSameClass(i,t);if(0!==o)return o;r++}return r<n?1:r<i?-1:0}}apply(){if(D(arguments[0],A)){const t=arguments[0];for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(D(arguments[0],j)){const t=arguments[0];if(0===this._geometries.length)return null;for(let e=0;e<this._geometries.length&&(this._geometries[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(D(arguments[0],z)){const t=arguments[0];t.filter(this);for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(D(arguments[0],y)){const t=arguments[0];t.filter(this);for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}}getBoundary(){return R.checkNotGeometryCollection(this),C.shouldNeverReachHere(),null}getGeometryType(){return R.TYPENAME_GEOMETRYCOLLECTION}isEmpty(){for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}class at extends st{constructor(){super(),at.constructor_.apply(this,arguments)}static constructor_(){st.constructor_.call(this,arguments[0],arguments[1])}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new at(t,this._factory)}isValid(){return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof R){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getCoordinate(){return 1===arguments.length&&Number.isInteger(arguments[0])?this._geometries[arguments[0]].getCoordinate():super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return V.FALSE}getTypeCode(){return R.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return R.TYPENAME_MULTIPOINT}get interfaces_(){return[Y]}}class ut extends U{constructor(){super(),ut.constructor_.apply(this,arguments)}static constructor_(){U.constructor_.call(this,arguments[0],arguments[1]),this.validateConstruction()}copyInternal(){return new ut(this._points.copy(),this._factory)}getBoundaryDimension(){return V.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}reverseInternal(){const t=this._points.copy();return G.reverse(t),this.getFactory().createLinearRing(t)}getTypeCode(){return R.TYPECODE_LINEARRING}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new a("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<ut.MINIMUM_VALID_SIZE)throw new a("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return R.TYPENAME_LINEARRING}}ut.MINIMUM_VALID_SIZE=4;class lt extends L{constructor(){super(),lt.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)L.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof lt){const t=arguments[0];L.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof L){const t=arguments[0];L.constructor_.call(this,t.x,t.y)}}else 2===arguments.length&&L.constructor_.call(this,arguments[0],arguments[1],L.NULL_ORDINATE)}setOrdinate(t,e){switch(t){case lt.X:this.x=e;break;case lt.Y:this.y=e;break;default:throw new a("Invalid ordinate index: "+t)}}getZ(){return L.NULL_ORDINATE}getOrdinate(t){switch(t){case lt.X:return this.x;case lt.Y:return this.y}throw new a("Invalid ordinate index: "+t)}setZ(t){throw new a("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new lt(this)}toString(){return"("+this.x+", "+this.y+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}lt.X=0,lt.Y=1,lt.Z=-1,lt.M=-1;class ct extends L{constructor(){super(),ct.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)L.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof ct){const t=arguments[0];L.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof L){const t=arguments[0];L.constructor_.call(this,t.x,t.y),this._m=this.getM()}}else if(3===arguments.length){const t=arguments[2];L.constructor_.call(this,arguments[0],arguments[1],L.NULL_ORDINATE),this._m=t}}getM(){return this._m}setOrdinate(t,e){switch(t){case ct.X:this.x=e;break;case ct.Y:this.y=e;break;case ct.M:this._m=e;break;default:throw new a("Invalid ordinate index: "+t)}}setM(t){this._m=t}getZ(){return L.NULL_ORDINATE}getOrdinate(t){switch(t){case ct.X:return this.x;case ct.Y:return this.y;case ct.M:return this._m}throw new a("Invalid ordinate index: "+t)}setZ(t){throw new a("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new ct(this)}toString(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}ct.X=0,ct.Y=1,ct.Z=-1,ct.M=2;class ht extends L{constructor(){super(),ht.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)L.constructor_.call(this),this._m=0;else if(1===arguments.length)if(arguments[0]instanceof ht){const t=arguments[0];L.constructor_.call(this,t),this._m=t._m}else arguments[0]instanceof L&&(L.constructor_.call(this,arguments[0]),this._m=this.getM());else if(4===arguments.length){const t=arguments[3];L.constructor_.call(this,arguments[0],arguments[1],arguments[2]),this._m=t}}getM(){return this._m}setOrdinate(t,e){switch(t){case L.X:this.x=e;break;case L.Y:this.y=e;break;case L.Z:this.z=e;break;case L.M:this._m=e;break;default:throw new a("Invalid ordinate index: "+t)}}setM(t){this._m=t}getOrdinate(t){switch(t){case L.X:return this.x;case L.Y:return this.y;case L.Z:return this.getZ();case L.M:return this.getM()}throw new a("Invalid ordinate index: "+t)}copy(){return new ht(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}class pt{static measures(t){return t instanceof lt?0:t instanceof ct||t instanceof ht?1:0}static dimension(t){return t instanceof lt?2:t instanceof ct?3:t instanceof ht?4:3}static create(){if(1===arguments.length)return pt.create(arguments[0],0);if(2===arguments.length){const t=arguments[0],e=arguments[1];return 2===t?new lt:3===t&&0===e?new L:3===t&&1===e?new ct:4===t&&1===e?new ht:new L}}}class ft extends Z{constructor(){super(),ft.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length);else if(1===arguments.length){const t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.ensureCapacity(t.length),this.add(t,e)}}getCoordinate(t){return this.get(t)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&D(arguments[0],l)){const t=arguments[1];let e=!1;for(let n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),e=!0;return e}return super.addAll.apply(this,arguments)}clone(){const t=super.clone.call(this);for(let e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}toCoordinateArray(){if(0===arguments.length)return this.toArray(ft.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(ft.coordArrayType);const t=this.size(),e=new Array(t).fill(null);for(let n=0;n<t;n++)e[n]=this.get(t-n-1);return e}}add(){if(1===arguments.length)return super.add.call(this,arguments[0]);if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof L&&"boolean"==typeof arguments[1]){const t=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(t))return null;super.add.call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(arguments[2])for(let n=0;n<t.length;n++)this.add(t[n],e);else for(let n=t.length-1;n>=0;n--)this.add(t[n],e);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof L){const t=arguments[0],e=arguments[1];if(!arguments[2]){const n=this.size();if(n>0){if(t>0&&this.get(t-1).equals2D(e))return null;if(t<n&&this.get(t).equals2D(e))return null}}super.add.call(this,t,e)}}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];let r=1;n>i&&(r=-1);for(let o=n;o!==i;o+=r)this.add(t[o],e);return!0}}closeRing(){if(this.size()>0){const t=this.get(0).copy();this.add(t,!1)}}}ft.coordArrayType=new Array(0).fill(null);class dt{static log10(t){const e=Math.log(t);return E.isInfinite(e)||E.isNaN(e)?e:e/dt.LOG_10}static min(t,e,n,i){let r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}}static wrap(t,e){return t<0?e- -t%e:t%e}static max(){if(3===arguments.length){const t=arguments[1],e=arguments[2];let n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){const t=arguments[1],e=arguments[2],n=arguments[3];let i=arguments[0];return t>i&&(i=t),e>i&&(i=e),n>i&&(i=n),i}}static average(t,e){return(t+e)/2}}dt.LOG_10=Math.log(10);class gt{static arraycopy(t,e,n,i,r){let o=0;for(let s=e;s<e+r;s++)n[i+o]=t[s],o++}static getProperty(t){return{"line.separator":"\n"}[t]}}class yt{static isRing(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}static ptNotInList(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(yt.indexOf(i,e)<0)return i}return null}static scroll(t,e){const n=yt.indexOf(e,t);if(n<0)return null;const i=new Array(t.length).fill(null);gt.arraycopy(t,n,i,0,t.length-n),gt.arraycopy(t,0,i,t.length-n,n),gt.arraycopy(i,0,t,0,t.length)}static equals(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(0!==n.compare(t[i],e[i]))return!1;return!0}}static intersection(t,e){const n=new ft;for(let i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()}static measures(t){if(null===t||0===t.length)return 0;let e=0;for(const n of t)e=Math.max(e,pt.measures(n));return e}static hasRepeatedPoints(t){for(let e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}static removeRepeatedPoints(t){return yt.hasRepeatedPoints(t)?new ft(t,!1).toCoordinateArray():t}static reverse(t){const e=t.length-1,n=Math.trunc(e/2);for(let i=0;i<=n;i++){const n=t[i];t[i]=t[e-i],t[e-i]=n}}static removeNull(t){let e=0;for(let r=0;r<t.length;r++)null!==t[r]&&e++;const n=new Array(e).fill(null);if(0===e)return n;let i=0;for(let r=0;r<t.length;r++)null!==t[r]&&(n[i++]=t[r]);return n}static copyDeep(){if(1===arguments.length){const t=arguments[0],e=new Array(t.length).fill(null);for(let n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(5===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[4];for(let o=0;o<r;o++)n[i+o]=t[e+o].copy()}}static isEqualReversed(t,e){for(let n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0}static envelope(t){const e=new M;for(let n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}static toCoordinateArray(t){return t.toArray(yt.coordArrayType)}static dimension(t){if(null===t||0===t.length)return 3;let e=0;for(const n of t)e=Math.max(e,pt.dimension(n));return e}static atLeastNCoordinatesOrNothing(t,e){return e.length>=t?e:[]}static indexOf(t,e){for(let n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}static increasingDirection(t){for(let e=0;e<Math.trunc(t.length/2);e++){const n=t[e].compareTo(t[t.length-1-e]);if(0!==n)return n}return 1}static compare(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0}static minCoordinate(t){let e=null;for(let n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}static extract(t,e,n){e=dt.clamp(e,0,t.length);let i=(n=dt.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);const r=new Array(i).fill(null);if(0===i)return r;let o=0;for(let s=e;s<=n;s++)r[o++]=t[s];return r}}yt.ForwardComparator=class{compare(t,e){return yt.compare(t,e)}get interfaces_(){return[I]}},yt.BidirectionalComparator=class{compare(t,e){const n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;const r=yt.compare(n,i);return yt.isEqualReversed(n,i)?0:r}OLDcompare(t,e){const n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;const r=yt.increasingDirection(n),o=yt.increasingDirection(i);let s=r>0?0:n.length-1,a=o>0?0:n.length-1;for(let u=0;u<n.length;u++){const t=n[s].compareTo(i[a]);if(0!==t)return t;s+=r,a+=o}return 0}get interfaces_(){return[I]}},yt.coordArrayType=new Array(0).fill(null);class _t{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}toString(){return this.str}}class mt{constructor(){mt.constructor_.apply(this,arguments)}static constructor_(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];mt.constructor_.call(this,t,yt.dimension(t),yt.measures(t))}else if(Number.isInteger(arguments[0])){const t=arguments[0];this._coordinates=new Array(t).fill(null);for(let e=0;e<t;e++)this._coordinates[e]=new L}else if(D(arguments[0],k)){const t=arguments[0];if(null===t)return this._coordinates=new Array(0).fill(null),null;this._dimension=t.getDimension(),this._measures=t.getMeasures(),this._coordinates=new Array(t.size()).fill(null);for(let e=0;e<this._coordinates.length;e++)this._coordinates[e]=t.getCoordinateCopy(e)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0];mt.constructor_.call(this,t,arguments[1],yt.measures(t))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];this._coordinates=new Array(t).fill(null),this._dimension=e;for(let n=0;n<t;n++)this._coordinates[n]=pt.create(e)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[2];this._dimension=arguments[1],this._measures=e,this._coordinates=null===t?new Array(0).fill(null):t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],n=arguments[2];this._coordinates=new Array(t).fill(null),this._dimension=e,this._measures=n;for(let i=0;i<t;i++)this._coordinates[i]=this.createCoordinate()}}getM(t){return this.hasM()?this._coordinates[t].getM():E.NaN}setOrdinate(t,e,n){switch(e){case k.X:this._coordinates[t].x=n;break;case k.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}getZ(t){return this.hasZ()?this._coordinates[t].getZ():E.NaN}size(){return this._coordinates.length}getOrdinate(t,e){switch(e){case k.X:return this._coordinates[t].x;case k.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}getCoordinate(){if(1===arguments.length)return this._coordinates[arguments[0]];2===arguments.length&&arguments[1].setCoordinate(this._coordinates[arguments[0]])}getCoordinateCopy(t){const e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}createCoordinate(){return pt.create(this.getDimension(),this.getMeasures())}getDimension(){return this._dimension}getX(t){return this._coordinates[t].x}getMeasures(){return this._measures}expandEnvelope(t){for(let e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}copy(){const t=new Array(this.size()).fill(null);for(let e=0;e<this._coordinates.length;e++){const n=this.createCoordinate();n.setCoordinate(this._coordinates[e]),t[e]=n}return new mt(t,this._dimension,this._measures)}toString(){if(this._coordinates.length>0){const t=new _t(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(let e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}getY(t){return this._coordinates[t].y}toCoordinateArray(){return this._coordinates}get interfaces_(){return[k,v]}}class vt{static instance(){return vt.instanceObject}readResolve(){return vt.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array)return new mt(arguments[0]);if(D(arguments[0],k))return new mt(arguments[0])}else{if(2===arguments.length){let t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new mt(arguments[0],t)}if(3===arguments.length){let t=arguments[2],e=arguments[1]-t;return t>1&&(t=1),e>3&&(e=3),e<2&&(e=2),new mt(arguments[0],e+t,t)}}}get interfaces_(){return[q,v]}}vt.instanceObject=new vt;class bt extends st{constructor(){super(),bt.constructor_.apply(this,arguments)}static constructor_(){st.constructor_.call(this,arguments[0],arguments[1])}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new bt(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof R){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return R.TYPECODE_MULTIPOLYGON}getDimension(){return 2}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const t=new Z;for(let n=0;n<this._geometries.length;n++){const e=this._geometries[n].getBoundary();for(let n=0;n<e.getNumGeometries();n++)t.add(e.getGeometryN(n))}const e=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(e))}getGeometryType(){return R.TYPENAME_MULTIPOLYGON}get interfaces_(){return[rt]}}class xt{get(){}put(){}size(){}values(){}entrySet(){}}class Et extends p{constructor(t){super(),this.map=new Map,t instanceof l&&this.addAll(t)}contains(t){const e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}add(t){const e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}addAll(t){for(const e of t)this.add(e);return!0}remove(){throw new h}size(){return this.map.size}isEmpty(){return 0===this.map.size}toArray(){return Array.from(this.map.values())}iterator(){return new It(this.map)}[Symbol.iterator](){return this.map}}class It{constructor(t){this.iterator=t.values();const{done:e,value:n}=this.iterator.next();this.done=e,this.value=n}next(){if(this.done)throw new c;const t=this.value,{done:e,value:n}=this.iterator.next();return this.done=e,this.value=n,t}hasNext(){return!this.done}remove(){throw new h}}class Nt extends xt{constructor(){super(),this.map=new Map}get(t){return this.map.get(t)||null}put(t,e){return this.map.set(t,e),e}values(){const t=new Z,e=this.map.values();let n=e.next();for(;!n.done;)t.add(n.value),n=e.next();return t}entrySet(){const t=new Et;return this.map.entries().forEach(e=>t.add(e)),t}size(){return this.map.size()}}class wt{constructor(){wt.constructor_.apply(this,arguments)}static constructor_(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=wt.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Ct){const t=arguments[0];this._modelType=t,t===wt.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){const t=arguments[0];this._modelType=wt.FIXED,this.setScale(t)}else if(arguments[0]instanceof wt){const t=arguments[0];this._modelType=t._modelType,this._scale=t._scale}}static mostPrecise(t,e){return t.compareTo(e)>=0?t:e}equals(t){return t instanceof wt&&this._modelType===t._modelType&&this._scale===t._scale}compareTo(t){const e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return tt.compare(n,i)}getScale(){return this._scale}isFloating(){return this._modelType===wt.FLOATING||this._modelType===wt.FLOATING_SINGLE}getType(){return this._modelType}toString(){let t="UNKNOWN";return this._modelType===wt.FLOATING?t="Floating":this._modelType===wt.FLOATING_SINGLE?t="Floating-Single":this._modelType===wt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}makePrecise(){if("number"==typeof arguments[0]){const t=arguments[0];return E.isNaN(t)||this._modelType===wt.FLOATING_SINGLE?t:this._modelType===wt.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof L){const t=arguments[0];if(this._modelType===wt.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}getMaximumSignificantDigits(){let t=16;return this._modelType===wt.FLOATING?t=16:this._modelType===wt.FLOATING_SINGLE?t=6:this._modelType===wt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}setScale(t){this._scale=Math.abs(t)}get interfaces_(){return[v,_]}}class Ct{constructor(){Ct.constructor_.apply(this,arguments)}static constructor_(){this._name=null;const t=arguments[0];this._name=t,Ct.nameToTypeMap.put(t,this)}readResolve(){return Ct.nameToTypeMap.get(this._name)}toString(){return this._name}get interfaces_(){return[v]}}Ct.nameToTypeMap=new Nt,wt.Type=Ct,wt.FIXED=new Ct("FIXED"),wt.FLOATING=new Ct("FLOATING"),wt.FLOATING_SINGLE=new Ct("FLOATING SINGLE"),wt.maximumPreciseValue=9007199254740992;class Ot extends st{constructor(){super(),Ot.constructor_.apply(this,arguments)}static constructor_(){st.constructor_.call(this,arguments[0],arguments[1])}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new Ot(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof R){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?V.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}getTypeCode(){return R.TYPECODE_MULTILINESTRING}getDimension(){return 1}getBoundary(){throw new h}getGeometryType(){return R.TYPENAME_MULTILINESTRING}get interfaces_(){return[F]}}class Pt{constructor(){Pt.constructor_.apply(this,arguments)}static constructor_(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)Pt.constructor_.call(this,new wt,0);else if(1===arguments.length)if(D(arguments[0],q)){const t=arguments[0];Pt.constructor_.call(this,new wt,0,t)}else arguments[0]instanceof wt&&Pt.constructor_.call(this,arguments[0],0,Pt.getDefaultCoordinateSequenceFactory());else if(2===arguments.length)Pt.constructor_.call(this,arguments[0],arguments[1],Pt.getDefaultCoordinateSequenceFactory());else if(3===arguments.length){const t=arguments[1],e=arguments[2];this._precisionModel=arguments[0],this._coordinateSequenceFactory=e,this._SRID=t}}static toMultiPolygonArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toGeometryArray(t){if(null===t)return null;const e=new Array(t.size()).fill(null);return t.toArray(e)}static getDefaultCoordinateSequenceFactory(){return vt.instance()}static toMultiLineStringArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toLineStringArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toMultiPointArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toLinearRingArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toPointArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toPolygonArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static createPointFromInternalCoord(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}createEmpty(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new a("Invalid dimension: "+t)}}toGeometry(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new L(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new L(t.getMinX(),t.getMinY()),new L(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new L(t.getMinX(),t.getMinY()),new L(t.getMinX(),t.getMaxY()),new L(t.getMaxX(),t.getMaxY()),new L(t.getMaxX(),t.getMinY()),new L(t.getMinX(),t.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(D(arguments[0],k))return new U(arguments[0],this)}}createMultiLineString(){return 0===arguments.length?new Ot(null,this):1===arguments.length?new Ot(arguments[0],this):void 0}buildGeometry(t){let e=null,n=!1,i=!1;for(let o=t.iterator();o.hasNext();){const t=o.next(),r=t.getTypeCode();null===e&&(e=r),r!==e&&(n=!0),t instanceof st&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(Pt.toGeometryArray(t));const r=t.iterator().next();if(t.size()>1){if(r instanceof ot)return this.createMultiPolygon(Pt.toPolygonArray(t));if(r instanceof U)return this.createMultiLineString(Pt.toLineStringArray(t));if(r instanceof X)return this.createMultiPoint(Pt.toPointArray(t));C.shouldNeverReachHere("Unhandled geometry type: "+r.getGeometryType())}return r}createMultiPointFromCoords(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof L){const t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(D(arguments[0],k))return new X(arguments[0],this)}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(D(arguments[0],k))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof ut)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new ot(arguments[0],arguments[1],this)}getSRID(){return this._SRID}createGeometryCollection(){return 0===arguments.length?new st(null,this):1===arguments.length?new st(arguments[0],this):void 0}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(D(arguments[0],k))return new ut(arguments[0],this)}}createMultiPolygon(){return 0===arguments.length?new bt(null,this):1===arguments.length?new bt(arguments[0],this):void 0}createMultiPoint(){if(0===arguments.length)return new at(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new at(arguments[0],this);if(D(arguments[0],k)){const t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));const e=new Array(t.size()).fill(null);for(let n=0;n<t.size();n++){const i=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());G.copy(t,n,i,0,1),e[n]=this.createPoint(i)}return this.createMultiPoint(e)}}}get interfaces_(){return[v]}}class St{static opposite(t){return t===St.LEFT?St.RIGHT:t===St.RIGHT?St.LEFT:t}}St.ON=0,St.LEFT=1,St.RIGHT=2;class Lt{static intersection(t,e,n,i){const r=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,a=t.y>e.y?t.y:e.y,u=n.x<i.x?n.x:i.x,l=n.y<i.y?n.y:i.y,c=n.x>i.x?n.x:i.x,h=n.y>i.y?n.y:i.y,p=((r>u?r:u)+(s<c?s:c))/2,f=((o>l?o:l)+(a<h?a:h))/2,d=t.x-p,g=t.y-f,y=e.x-p,_=e.y-f,m=n.x-p,v=n.y-f,b=i.x-p,x=i.y-f,I=g-_,N=y-d,w=d*_-y*g,C=v-x,O=b-m,P=m*x-b*v,S=I*O-C*N,T=(N*P-O*w)/S,M=(C*w-I*P)/S;return E.isNaN(T)||E.isInfinite(T)||E.isNaN(M)||E.isInfinite(M)?null:new L(T+p,M+f)}}class Tt{static segmentToSegment(t,e,n,i){if(t.equals(e))return Tt.pointToSegment(t,n,i);if(n.equals(i))return Tt.pointToSegment(i,t,e);let r=!1;if(M.intersects(t,e,n,i)){const o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{const s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,a=((t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y))/o;(a<0||a>1||s<0||s>1)&&(r=!0)}}else r=!0;return r?dt.min(Tt.pointToSegment(t,n,i),Tt.pointToSegment(e,n,i),Tt.pointToSegment(n,t,e),Tt.pointToSegment(i,t,e)):0}static pointToSegment(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);const i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return r<=0?t.distance(e):r>=1?t.distance(n):Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)}static pointToLinePerpendicular(t,e,n){const i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)}static pointToSegmentString(t,e){if(0===e.length)throw new a("Line array must contain at least one vertex");let n=t.distance(e[0]);for(let i=0;i<e.length-1;i++){const r=Tt.pointToSegment(t,e[i],e[i+1]);r<n&&(n=r)}return n}}const Mt={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Rt={};for(const Lr in Mt)Rt[Lr]=Mt[Lr].toUpperCase();class At{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}isWhiteSpace_(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),e=this.index_;let n,i=t;if("("==t)n=2;else if(","==t)n=5;else if(")"==t)n=3;else if(this.isNumeric_(t)||"-"==t)n=4,i=this.readNumber_();else if(this.isAlpha_(t))n=1,i=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);n=6}return{position:e,value:i,type:n}}readNumber_(){let t;const e=this.index_;let n=!1,i=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let t;const e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}class Dt{constructor(t,e){this.lexer_=t,this.layout_="XY",this.factory=e}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const e=this.isTokenType(t);return e&&this.consume_(),e}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t="XY";const e=this.token_;if(this.isTokenType(1)){const n=e.value;"Z"===n?t="XYZ":"M"===n?t="XYM":"ZM"===n&&(t="XYZM"),"XY"!==t&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(2)){const t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(2)){const t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(2)){const t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(2)){const t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(2)){let t;if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(2)){const t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(2)){const t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],e=this.layout_.length;for(let n=0;n<e;++n){const e=this.token_;if(!this.match(4))break;t.push(e.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];for(;this.match(5);)t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];for(;this.match(5);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];for(;this.match(5);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];for(;this.match(5);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(1)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.factory,e=t=>new L(...t),n=n=>{const i=n.map(n=>t.createLinearRing(n.map(e)));return i.length>1?t.createPolygon(i[0],i.slice(1)):t.createPolygon(i[0])},i=this.token_;if(this.match(1)){const r=i.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==r){const e=this.parseGeometryCollectionText_();return t.createGeometryCollection(e)}switch(r){case"POINT":{const e=this.parsePointText_();return e?t.createPoint(new L(...e)):t.createPoint()}case"LINESTRING":{const n=this.parseLineStringText_().map(e);return t.createLineString(n)}case"LINEARRING":{const n=this.parseLineStringText_().map(e);return t.createLinearRing(n)}case"POLYGON":{const e=this.parsePolygonText_();return e&&0!==e.length?n(e):t.createPolygon()}case"MULTIPOINT":{const n=this.parseMultiPointText_();if(!n||0===n.length)return t.createMultiPoint();const i=n.map(e).map(e=>t.createPoint(e));return t.createMultiPoint(i)}case"MULTILINESTRING":{const n=this.parseMultiLineStringText_().map(n=>t.createLineString(n.map(e)));return t.createMultiLineString(n)}case"MULTIPOLYGON":{const e=this.parseMultiPolygonText_();if(!e||0===e.length)return t.createMultiPolygon();const i=e.map(n);return t.createMultiPolygon(i)}default:throw new Error("Invalid geometry type: "+r)}}throw new Error(this.formatErrorMessage_())}}function Ft(t){if(t.isEmpty())return"";const e=t.getCoordinate(),n=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||n.push(e.z),void 0===e.m||Number.isNaN(e.m)||n.push(e.m),n.join(" ")}function kt(t){const e=t.getCoordinates().map(t=>{const e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e}),n=[];for(let i=0,r=e.length;i<r;++i)n.push(e[i].join(" "));return n.join(", ")}function Gt(t){const e=[];e.push("("+kt(t.getExteriorRing())+")");for(let n=0,i=t.getNumInteriorRing();n<i;++n)e.push("("+kt(t.getInteriorRingN(n))+")");return e.join(", ")}const Bt={Point:Ft,LineString:kt,LinearRing:kt,Polygon:Gt,MultiPoint:function(t){const e=[];for(let n=0,i=t.getNumGeometries();n<i;++n)e.push("("+Ft(t.getGeometryN(n))+")");return e.join(", ")},MultiLineString:function(t){const e=[];for(let n=0,i=t.getNumGeometries();n<i;++n)e.push("("+kt(t.getGeometryN(n))+")");return e.join(", ")},MultiPolygon:function(t){const e=[];for(let n=0,i=t.getNumGeometries();n<i;++n)e.push("("+Gt(t.getGeometryN(n))+")");return e.join(", ")},GeometryCollection:function(t){const e=[];for(let n=0,i=t.getNumGeometries();n<i;++n)e.push(Vt(t.getGeometryN(n)));return e.join(", ")}};function Vt(t){let e=t.getGeometryType();const n=Bt[e];e=e.toUpperCase();const i=function(t){let e="";if(t.isEmpty())return e;const n=t.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(e+="Z"),void 0===n.m||Number.isNaN(n.m)||(e+="M"),e}(t);return i.length>0&&(e+=" "+i),t.isEmpty()?e+" EMPTY":e+" ("+n(t)+")"}class zt{constructor(t){this.geometryFactory=t||new Pt,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(t){const e=new At(t);return new Dt(e,this.geometryFactory).parse()}write(t){return Vt(t)}}class jt{constructor(t){this.parser=new zt(t)}write(t){return this.parser.write(t)}static toLineString(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}class Ut{constructor(){Ut.constructor_.apply(this,arguments)}static constructor_(){this._result=null,this._inputLines=Array(2).fill().map(()=>Array(2)),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new L,this._intPt[1]=new L,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}static computeEdgeDistance(t,e,n){const i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y);let o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{const n=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);o=i>r?n:s,0!==o||t.equals(e)||(o=Math.max(n,s))}return C.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}static nonRobustComputeEdgeDistance(t,e,n){const i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return C.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}getIndexAlongSegment(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}getTopologySummary(){const t=new _t;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}computeIntersection(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(()=>Array(2)),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){const t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(t){this._precisionModel=t}isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){const t=arguments[0];for(let e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}getIntersection(t){return this._intPt[t]}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==Ut.NO_INTERSECTION}getEdgeDistance(t,e){return Ut.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}isCollinear(){return this._result===Ut.COLLINEAR_INTERSECTION}toString(){return jt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+jt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(t,e){return this._inputLines[t][e]}isIntersection(t){for(let e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}getIntersectionAlongSegment(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}Ut.DONT_INTERSECT=0,Ut.DO_INTERSECT=1,Ut.COLLINEAR=2,Ut.NO_INTERSECTION=0,Ut.POINT_INTERSECTION=1,Ut.COLLINEAR_INTERSECTION=2;class qt extends Ut{constructor(){super()}static nearestEndpoint(t,e,n,i){let r=t,o=Tt.pointToSegment(t,n,i),s=Tt.pointToSegment(e,n,i);return s<o&&(o=s,r=e),s=Tt.pointToSegment(n,t,e),s<o&&(o=s,r=n),s=Tt.pointToSegment(i,t,e),s<o&&(o=s,r=i),r}isInSegmentEnvelopes(t){const e=new M(this._inputLines[0][0],this._inputLines[0][1]),n=new M(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)}computeIntersection(){if(3!==arguments.length)return super.computeIntersection.apply(this,arguments);{const t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,M.intersects(e,n,t)&&0===it.index(e,n,t)&&0===it.index(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=Ut.POINT_INTERSECTION,null;this._result=Ut.NO_INTERSECTION}}intersection(t,e,n,i){let r=this.intersectionSafe(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new L(qt.nearestEndpoint(t,e,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(r),r}checkDD(t,e,n,i,r){const o=nt.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);gt.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&gt.out.println("Distance = "+r.distance(o))}intersectionSafe(t,e,n,i){let r=Lt.intersection(t,e,n,i);return null===r&&(r=qt.nearestEndpoint(t,e,n,i)),r}computeCollinearIntersection(t,e,n,i){const r=M.intersects(t,e,n),o=M.intersects(t,e,i),s=M.intersects(n,i,t),a=M.intersects(n,i,e);return r&&o?(this._intPt[0]=n,this._intPt[1]=i,Ut.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=t,this._intPt[1]=e,Ut.COLLINEAR_INTERSECTION):r&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?Ut.COLLINEAR_INTERSECTION:Ut.POINT_INTERSECTION):r&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?Ut.COLLINEAR_INTERSECTION:Ut.POINT_INTERSECTION):o&&s?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||r||a?Ut.COLLINEAR_INTERSECTION:Ut.POINT_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||r||s?Ut.COLLINEAR_INTERSECTION:Ut.POINT_INTERSECTION):Ut.NO_INTERSECTION}computeIntersect(t,e,n,i){if(this._isProper=!1,!M.intersects(t,e,n,i))return Ut.NO_INTERSECTION;const r=it.index(t,e,n),o=it.index(t,e,i);if(r>0&&o>0||r<0&&o<0)return Ut.NO_INTERSECTION;const s=it.index(n,i,t),a=it.index(n,i,e);return s>0&&a>0||s<0&&a<0?Ut.NO_INTERSECTION:0===r&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,n,i):(0===r||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:0===r?this._intPt[0]=new L(n):0===o?this._intPt[0]=new L(i):0===s?this._intPt[0]=new L(t):0===a&&(this._intPt[0]=new L(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,i)),Ut.POINT_INTERSECTION)}}class Yt{constructor(){Yt.constructor_.apply(this,arguments)}static constructor_(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]}static locatePointInRing(){if(arguments[0]instanceof L&&D(arguments[1],k)){const t=arguments[1],e=new Yt(arguments[0]),n=new L,i=new L;for(let r=1;r<t.size();r++)if(t.getCoordinate(r,n),t.getCoordinate(r-1,i),e.countSegment(n,i),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof L&&arguments[1]instanceof Array){const t=arguments[1],e=new Yt(arguments[0]);for(let n=1;n<t.length;n++)if(e.countSegment(t[n],t[n-1]),e.isOnSegment())return e.getLocation();return e.getLocation()}}countSegment(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){let n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){let n=it.index(t,e,this._p);if(n===it.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(n=-n),n===it.LEFT&&this._crossingCount++}}isPointInPolygon(){return this.getLocation()!==u.EXTERIOR}getLocation(){return this._isPointOnSegment?u.BOUNDARY:this._crossingCount%2==1?u.INTERIOR:u.EXTERIOR}isOnSegment(){return this._isPointOnSegment}}class Xt{static isOnLine(){if(arguments[0]instanceof L&&D(arguments[1],k)){const t=arguments[0],e=arguments[1],n=new qt,i=new L,r=new L,o=e.size();for(let s=1;s<o;s++)if(e.getCoordinate(s-1,i),e.getCoordinate(s,r),n.computeIntersection(t,i,r),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof L&&arguments[1]instanceof Array){const t=arguments[0],e=arguments[1],n=new qt;for(let i=1;i<e.length;i++)if(n.computeIntersection(t,e[i-1],e[i]),n.hasIntersection())return!0;return!1}}static locateInRing(t,e){return Yt.locatePointInRing(t,e)}static isInRing(t,e){return Xt.locateInRing(t,e)!==u.EXTERIOR}}class Wt extends N{constructor(t,e){super(e?t+" [ "+e+" ]":t),this.pt=e?new L(e):void 0,this.name=Object.keys({TopologyException:Wt})[0]}getCoordinate(){return this.pt}}class Ht{constructor(){Ht.constructor_.apply(this,arguments)}static constructor_(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){const t=arguments[0];this.init(1),this.location[St.ON]=t}else if(arguments[0]instanceof Ht){const t=arguments[0];if(this.init(t.location.length),null!==t)for(let e=0;e<this.location.length;e++)this.location[e]=t.location[e]}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this.init(3),this.location[St.ON]=t,this.location[St.LEFT]=e,this.location[St.RIGHT]=n}}setAllLocations(t){for(let e=0;e<this.location.length;e++)this.location[e]=t}isNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]!==u.NONE)return!1;return!0}setAllLocationsIfNull(t){for(let e=0;e<this.location.length;e++)this.location[e]===u.NONE&&(this.location[e]=t)}isLine(){return 1===this.location.length}merge(t){if(t.location.length>this.location.length){const t=new Array(3).fill(null);t[St.ON]=this.location[St.ON],t[St.LEFT]=u.NONE,t[St.RIGHT]=u.NONE,this.location=t}for(let e=0;e<this.location.length;e++)this.location[e]===u.NONE&&e<t.location.length&&(this.location[e]=t.location[e])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;const t=this.location[St.LEFT];this.location[St.LEFT]=this.location[St.RIGHT],this.location[St.RIGHT]=t}toString(){const t=new $;return this.location.length>1&&t.append(u.toLocationSymbol(this.location[St.LEFT])),t.append(u.toLocationSymbol(this.location[St.ON])),this.location.length>1&&t.append(u.toLocationSymbol(this.location[St.RIGHT])),t.toString()}setLocations(t,e,n){this.location[St.ON]=t,this.location[St.LEFT]=e,this.location[St.RIGHT]=n}get(t){return t<this.location.length?this.location[t]:u.NONE}isArea(){return this.location.length>1}isAnyNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]===u.NONE)return!0;return!1}setLocation(){1===arguments.length?this.setLocation(St.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])}init(t){this.location=new Array(t).fill(null),this.setAllLocations(u.NONE)}isEqualOnSide(t,e){return this.location[e]===t.location[e]}allPositionsEqual(t){for(let e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}class Jt{constructor(){Jt.constructor_.apply(this,arguments)}static constructor_(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){const t=arguments[0];this.elt[0]=new Ht(t),this.elt[1]=new Ht(t)}else if(arguments[0]instanceof Jt){const t=arguments[0];this.elt[0]=new Ht(t.elt[0]),this.elt[1]=new Ht(t.elt[1])}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[0]=new Ht(u.NONE),this.elt[1]=new Ht(u.NONE),this.elt[t].setLocation(e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this.elt[0]=new Ht(t,e,n),this.elt[1]=new Ht(t,e,n)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.elt[0]=new Ht(u.NONE,u.NONE,u.NONE),this.elt[1]=new Ht(u.NONE,u.NONE,u.NONE),this.elt[t].setLocations(e,n,i)}}static toLineLabel(t){const e=new Jt(u.NONE);for(let n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e}getGeometryCount(){let t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}setAllLocations(t,e){this.elt[t].setAllLocations(e)}isNull(t){return this.elt[t].isNull()}setAllLocationsIfNull(){if(1===arguments.length){const t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])}isLine(t){return this.elt[t].isLine()}merge(t){for(let e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ht(t.elt[e]):this.elt[e].merge(t.elt[e])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){return 1===arguments.length?this.elt[arguments[0]].get(St.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0}toString(){const t=new $;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}isArea(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0}isAnyNull(t){return this.elt[t].isAnyNull()}setLocation(){2===arguments.length?this.elt[arguments[0]].setLocation(St.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])}isEqualOnSide(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}allPositionsEqual(t,e){return this.elt[t].allPositionsEqual(e)}toLine(t){this.elt[t].isArea()&&(this.elt[t]=new Ht(this.elt[t].location[0]))}}class Zt{constructor(){Zt.constructor_.apply(this,arguments)}static constructor_(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new Z,this._pts=new Z,this._label=new Jt(u.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Z,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){const t=arguments[0];this._geometryFactory=arguments[1],this.computePoints(t),this.computeRing()}}computeRing(){if(null!==this._ring)return null;const t=new Array(this._pts.size()).fill(null);for(let e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=it.isCCW(this._ring.getCoordinates())}isIsolated(){return 1===this._label.getGeometryCount()}computePoints(t){this._startDe=t;let e=t,n=!0;do{if(null===e)throw new Wt("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Wt("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);const t=e.getLabel();C.isTrue(t.isArea()),this.mergeLabel(t),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}getLinearRing(){return this._ring}getCoordinate(t){return this._pts.get(t)}computeMaxNodeDegree(){this._maxNodeDegree=0;let t=this._startDe;do{const e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}addPoints(t,e,n){const i=t.getCoordinates();if(e){let t=1;n&&(t=0);for(let e=t;e<i.length;e++)this._pts.add(i[e])}else{let t=i.length-2;n&&(t=i.length-1);for(let e=t;e>=0;e--)this._pts.add(i[e])}}isHole(){return this._isHole}setInResult(){let t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}containsPoint(t){const e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Xt.isInRing(t,e.getCoordinates()))return!1;for(let n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0}addHole(t){this._holes.add(t)}isShell(){return null===this._shell}getLabel(){return this._label}getEdges(){return this._edges}getMaxNodeDegree(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}getShell(){return this._shell}mergeLabel(){if(1===arguments.length){const t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){const t=arguments[1],e=arguments[0].getLocation(t,St.RIGHT);if(e===u.NONE)return null;if(this._label.getLocation(t)===u.NONE)return this._label.setLocation(t,e),null}}setShell(t){this._shell=t,null!==t&&t.addHole(this)}toPolygon(t){const e=new Array(this._holes.size()).fill(null);for(let n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}}class Qt extends Zt{constructor(){super(),Qt.constructor_.apply(this,arguments)}static constructor_(){Zt.constructor_.call(this,arguments[0],arguments[1])}setEdgeRing(t,e){t.setMinEdgeRing(e)}getNext(t){return t.getNextMin()}}class Kt extends Zt{constructor(){super(),Kt.constructor_.apply(this,arguments)}static constructor_(){Zt.constructor_.call(this,arguments[0],arguments[1])}buildMinimalRings(){const t=new Z;let e=this._startDe;do{if(null===e.getMinEdgeRing()){const n=new Qt(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t}setEdgeRing(t,e){t.setEdgeRing(e)}linkDirectedEdgesForMinimalEdgeRings(){let t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}getNext(t){return t.getNext()}}class $t{locate(t){}}class te{hasNext(){}next(){}remove(){}}class ee{constructor(){ee.constructor_.apply(this,arguments)}static constructor_(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;const t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}static isAtomic(t){return!(t instanceof st)}next(){if(this._atStart)return this._atStart=!1,ee.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new c;const t=this._parent.getGeometryN(this._index++);return t instanceof st?(this._subcollectionIterator=new ee(t),this._subcollectionIterator.next()):t}remove(){throw new h(this.getClass().getName())}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}get interfaces_(){return[te]}}class ne{constructor(){ne.constructor_.apply(this,arguments)}static constructor_(){this._geom=null,this._geom=arguments[0]}static locatePointInPolygon(t,e){if(e.isEmpty())return u.EXTERIOR;const n=e.getExteriorRing(),i=ne.locatePointInRing(t,n);if(i!==u.INTERIOR)return i;for(let r=0;r<e.getNumInteriorRing();r++){const n=e.getInteriorRingN(r),i=ne.locatePointInRing(t,n);if(i===u.BOUNDARY)return u.BOUNDARY;if(i===u.INTERIOR)return u.EXTERIOR}return u.INTERIOR}static locatePointInRing(t,e){return e.getEnvelopeInternal().intersects(t)?Xt.locateInRing(t,e.getCoordinates()):u.EXTERIOR}static containsPointInPolygon(t,e){return u.EXTERIOR!==ne.locatePointInPolygon(t,e)}static locateInGeometry(t,e){if(e instanceof ot)return ne.locatePointInPolygon(t,e);if(e instanceof st){const n=new ee(e);for(;n.hasNext();){const i=n.next();if(i!==e){const e=ne.locateInGeometry(t,i);if(e!==u.EXTERIOR)return e}}}return u.EXTERIOR}static isContained(t,e){return u.EXTERIOR!==ne.locate(t,e)}static locate(t,e){return e.isEmpty()?u.EXTERIOR:e.getEnvelopeInternal().intersects(t)?ne.locateInGeometry(t,e):u.EXTERIOR}locate(t){return ne.locate(t,this._geom)}get interfaces_(){return[$t]}}class ie extends xt{}function re(t){return null==t?0:t.color}function oe(t){return null==t?null:t.parent}function se(t,e){null!==t&&(t.color=e)}function ae(t){return null==t?null:t.left}function ue(t){return null==t?null:t.right}class le extends ie{constructor(){super(),this.root_=null,this.size_=0}get(t){let e=this.root_;for(;null!==e;){const n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null}put(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;let n,i,r=this.root_;do{if(n=r,i=t.compareTo(r.key),i<0)r=r.left;else{if(!(i>0)){const t=r.value;return r.value=e,t}r=r.right}}while(null!==r);const o={key:t,left:null,right:null,value:e,parent:n,color:0,getValue(){return this.value},getKey(){return this.key}};return i<0?n.left=o:n.right=o,this.fixAfterInsertion(o),this.size_++,null}fixAfterInsertion(t){let e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)oe(t)===ae(oe(oe(t)))?(e=ue(oe(oe(t))),1===re(e)?(se(oe(t),0),se(e,0),se(oe(oe(t)),1),t=oe(oe(t))):(t===ue(oe(t))&&(t=oe(t),this.rotateLeft(t)),se(oe(t),0),se(oe(oe(t)),1),this.rotateRight(oe(oe(t))))):(e=ae(oe(oe(t))),1===re(e)?(se(oe(t),0),se(e,0),se(oe(oe(t)),1),t=oe(oe(t))):(t===ae(oe(t))&&(t=oe(t),this.rotateRight(t)),se(oe(t),0),se(oe(oe(t)),1),this.rotateLeft(oe(oe(t)))));this.root_.color=0}values(){const t=new Z;let e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=le.successor(e));)t.add(e.value);return t}entrySet(){const t=new Et;let e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=le.successor(e));)t.add(e);return t}rotateLeft(t){if(null!=t){const e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}rotateRight(t){if(null!=t){const e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}getFirstEntry(){let t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}static successor(t){let e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}{e=t.parent;let n=t;for(;null!==e&&n===e.right;)n=e,e=e.parent;return e}}size(){return this.size_}containsKey(t){let e=this.root_;for(;null!==e;){const n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return!0;e=e.right}}return!1}}class ce{constructor(){ce.constructor_.apply(this,arguments)}static constructor_(){this._edgeMap=new le,this._edgeList=null,this._ptInAreaLocation=[u.NONE,u.NONE]}getNextCW(t){this.getEdges();const e=this._edgeList.indexOf(t);let n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)}propagateSideLabels(t){let e=u.NONE;for(let i=this.iterator();i.hasNext();){const n=i.next().getLabel();n.isArea(t)&&n.getLocation(t,St.LEFT)!==u.NONE&&(e=n.getLocation(t,St.LEFT))}if(e===u.NONE)return null;let n=e;for(let i=this.iterator();i.hasNext();){const e=i.next(),r=e.getLabel();if(r.getLocation(t,St.ON)===u.NONE&&r.setLocation(t,St.ON,n),r.isArea(t)){const i=r.getLocation(t,St.LEFT),o=r.getLocation(t,St.RIGHT);if(o!==u.NONE){if(o!==n)throw new Wt("side location conflict",e.getCoordinate());i===u.NONE&&C.shouldNeverReachHere("found single null side (at "+e.getCoordinate()+")"),n=i}else C.isTrue(r.getLocation(t,St.LEFT)===u.NONE,"found single null side"),r.setLocation(t,St.RIGHT,n),r.setLocation(t,St.LEFT,n)}}}getCoordinate(){const t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}print(t){gt.out.println("EdgeEndStar:   "+this.getCoordinate());for(let e=this.iterator();e.hasNext();)e.next().print(t)}isAreaLabelsConsistent(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}checkAreaLabelsConsistent(t){const e=this.getEdges();if(e.size()<=0)return!0;const n=e.size()-1,i=e.get(n).getLabel().getLocation(t,St.LEFT);C.isTrue(i!==u.NONE,"Found unlabelled area edge");let r=i;for(let o=this.iterator();o.hasNext();){const e=o.next().getLabel();C.isTrue(e.isArea(t),"Found non-area edge");const n=e.getLocation(t,St.LEFT),i=e.getLocation(t,St.RIGHT);if(n===i)return!1;if(i!==r)return!1;r=n}return!0}findIndex(t){this.iterator();for(let e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new Z(this._edgeMap.values())),this._edgeList}getLocation(t,e,n){return this._ptInAreaLocation[t]===u.NONE&&(this._ptInAreaLocation[t]=ne.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]}toString(){const t=new $;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(let e=this.iterator();e.hasNext();){const n=e.next();t.append(n),t.append("\n")}return t.toString()}computeEdgeEndLabels(t){for(let e=this.iterator();e.hasNext();)e.next().computeLabel(t)}computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);const e=[!1,!1];for(let n=this.iterator();n.hasNext();){const t=n.next().getLabel();for(let n=0;n<2;n++)t.isLine(n)&&t.getLocation(n)===u.BOUNDARY&&(e[n]=!0)}for(let n=this.iterator();n.hasNext();){const i=n.next(),r=i.getLabel();for(let n=0;n<2;n++)if(r.isAnyNull(n)){let o=u.NONE;if(e[n])o=u.EXTERIOR;else{const e=i.getCoordinate();o=this.getLocation(n,e,t)}r.setAllLocationsIfNull(n,o)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(t,e){this._edgeMap.put(t,e),this._edgeList=null}}class he{static isNorthern(t){return t===he.NE||t===he.NW}static isOpposite(t,e){return t!==e&&2==(t-e+4)%4}static commonHalfPlane(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;const n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}static isInHalfPlane(t,e){return e===he.SE?t===he.SE||t===he.SW:t===e||t===e+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new a("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?he.NE:he.SE:e>=0?he.NW:he.SW}if(arguments[0]instanceof L&&arguments[1]instanceof L){const t=arguments[0],e=arguments[1];if(e.x===t.x&&e.y===t.y)throw new a("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?he.NE:he.SE:e.y>=t.y?he.NW:he.SW}}}he.NE=0,he.NW=1,he.SW=2,he.SE=3;class pe extends ce{constructor(){super(),pe.constructor_.apply(this,arguments)}static constructor_(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}linkResultDirectedEdges(){this.getResultAreaEdges();let t=null,e=null,n=this._SCANNING_FOR_INCOMING;for(let i=0;i<this._resultAreaEdgeList.size();i++){const r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Wt("no outgoing dirEdge found",this.getCoordinate());C.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}insert(t){this.insertEdgeEnd(t,t)}getRightmostEdge(){const t=this.getEdges(),e=t.size();if(e<1)return null;const n=t.get(0);if(1===e)return n;const i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return he.isNorthern(r)&&he.isNorthern(o)?n:he.isNorthern(r)||he.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(C.shouldNeverReachHere("found two horizontal edges incident on node"),null):i}print(t){gt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(let e=this.iterator();e.hasNext();){const n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}}getResultAreaEdges(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Z;for(let t=this.iterator();t.hasNext();){const e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}updateLabelling(t){for(let e=this.iterator();e.hasNext();){const n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}}linkAllDirectedEdges(){this.getEdges();let t=null,e=null;for(let n=this._edgeList.size()-1;n>=0;n--){const i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)}computeDepths(){if(1===arguments.length){const t=arguments[0],e=this.findIndex(t),n=t.getDepth(St.LEFT),i=t.getDepth(St.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new Wt("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){const t=arguments[1];let e=arguments[2];for(let n=arguments[0];n<t;n++){const t=this._edgeList.get(n);t.setEdgeDepths(St.RIGHT,e),e=t.getDepth(St.LEFT)}return e}}mergeSymLabels(){for(let t=this.iterator();t.hasNext();){const e=t.next();e.getLabel().merge(e.getSym().getLabel())}}linkMinimalDirectedEdges(t){let e=null,n=null,i=this._SCANNING_FOR_INCOMING;for(let r=this._resultAreaEdgeList.size()-1;r>=0;r--){const o=this._resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(C.isTrue(null!==e,"found null for first outgoing dirEdge"),C.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))}getOutgoingDegree(){if(0===arguments.length){let t=0;for(let e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){const t=arguments[0];let e=0;for(let n=this.iterator();n.hasNext();)n.next().getEdgeRing()===t&&e++;return e}}getLabel(){return this._label}findCoveredLineEdges(){let t=u.NONE;for(let n=this.iterator();n.hasNext();){const e=n.next(),i=e.getSym();if(!e.isLineEdge()){if(e.isInResult()){t=u.INTERIOR;break}if(i.isInResult()){t=u.EXTERIOR;break}}}if(t===u.NONE)return null;let e=t;for(let n=this.iterator();n.hasNext();){const t=n.next(),i=t.getSym();t.isLineEdge()?t.getEdge().setCovered(e===u.INTERIOR):(t.isInResult()&&(e=u.EXTERIOR),i.isInResult()&&(e=u.INTERIOR))}}computeLabelling(t){super.computeLabelling.call(this,t),this._label=new Jt(u.NONE);for(let e=this.iterator();e.hasNext();){const t=e.next().getEdge().getLabel();for(let e=0;e<2;e++){const n=t.getLocation(e);n!==u.INTERIOR&&n!==u.BOUNDARY||this._label.setLocation(e,u.INTERIOR)}}}}class fe{constructor(){fe.constructor_.apply(this,arguments)}static constructor_(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length||1===arguments.length&&(this._label=arguments[0])}setVisited(t){this._isVisited=t}setInResult(t){this._isInResult=t}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}setLabel(t){this._label=t}getLabel(){return this._label}setCovered(t){this._isCovered=t,this._isCoveredSet=!0}updateIM(t){C.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}isInResult(){return this._isInResult}isVisited(){return this._isVisited}}class de extends fe{constructor(){super(),de.constructor_.apply(this,arguments)}static constructor_(){this._coord=null,this._edges=null;const t=arguments[1];this._coord=arguments[0],this._edges=t,this._label=new Jt(0,u.NONE)}isIncidentEdgeInResult(){for(let t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}print(t){t.println("node "+this._coord+" lbl: "+this._label)}computeIM(t){}computeMergedLocation(t,e){let n=u.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){const i=t.getLocation(e);n!==u.BOUNDARY&&(n=i)}return n}setLabel(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{const t=arguments[0],e=arguments[1];null===this._label?this._label=new Jt(t,e):this._label.setLocation(t,e)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof de)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof Jt){const t=arguments[0];for(let e=0;e<2;e++){const n=this.computeMergedLocation(t,e);this._label.getLocation(e)===u.NONE&&this._label.setLocation(e,n)}}}add(t){this._edges.insert(t),t.setNode(this)}setLabelBoundary(t){if(null===this._label)return null;let e=u.NONE;null!==this._label&&(e=this._label.getLocation(t));let n=null;switch(e){case u.BOUNDARY:n=u.INTERIOR;break;case u.INTERIOR:default:n=u.BOUNDARY}this._label.setLocation(t,n)}}class ge{createNode(t){return new de(t,null)}}class ye extends ge{constructor(){super()}createNode(t){return new de(t,new pe)}}class _e{constructor(){_e.constructor_.apply(this,arguments)}static constructor_(){this.nodeMap=new le,this.nodeFact=null,this.nodeFact=arguments[0]}find(t){return this.nodeMap.get(t)}addNode(){if(arguments[0]instanceof L){const t=arguments[0];let e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof de){const t=arguments[0],e=this.nodeMap.get(t.getCoordinate());return null===e?(this.nodeMap.put(t.getCoordinate(),t),t):(e.mergeLabel(t),e)}}print(t){for(let e=this.iterator();e.hasNext();)e.next().print(t)}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(t){const e=new Z;for(let n=this.iterator();n.hasNext();){const i=n.next();i.getLabel().getLocation(t)===u.BOUNDARY&&e.add(i)}return e}add(t){const e=t.getCoordinate();this.addNode(e).add(t)}}class me{constructor(){me.constructor_.apply(this,arguments)}static constructor_(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length)me.constructor_.call(this,arguments[0],arguments[1],arguments[2],null);else if(4===arguments.length){const t=arguments[1],e=arguments[2],n=arguments[3];me.constructor_.call(this,arguments[0]),this.init(t,e),this._label=n}}compareDirection(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:it.index(t._p0,t._p1,this._p1)}getDy(){return this._dy}getCoordinate(){return this._p0}setNode(t){this._node=t}print(t){const e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}compareTo(t){return this.compareDirection(t)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getLabel(){return this._label}getEdge(){return this._edge}getQuadrant(){return this._quadrant}getNode(){return this._node}toString(){const t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}computeLabel(t){}init(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=he.quadrant(this._dx,this._dy),C.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}get interfaces_(){return[_]}}class ve extends me{constructor(){super(),ve.constructor_.apply(this,arguments)}static constructor_(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];const t=arguments[0],e=arguments[1];if(me.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{const e=t.getNumPoints()-1;this.init(t.getCoordinate(e),t.getCoordinate(e-1))}this.computeDirectedLabel()}static depthFactor(t,e){return t===u.EXTERIOR&&e===u.INTERIOR?1:t===u.INTERIOR&&e===u.EXTERIOR?-1:0}getNextMin(){return this._nextMin}getDepth(t){return this._depth[t]}setVisited(t){this._isVisited=t}computeDirectedLabel(){this._label=new Jt(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}setDepth(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Wt("assigned depths do not match",this.getCoordinate());this._depth[t]=e}isInteriorAreaEdge(){let t=!0;for(let e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,St.LEFT)===u.INTERIOR&&this._label.getLocation(e,St.RIGHT)===u.INTERIOR||(t=!1);return t}setNextMin(t){this._nextMin=t}print(t){super.print.call(this,t),t.print(" "+this._depth[St.LEFT]+"/"+this._depth[St.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}setMinEdgeRing(t){this._minEdgeRing=t}isLineEdge(){const t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,u.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,u.EXTERIOR);return t&&e&&n}setEdgeRing(t){this._edgeRing=t}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){let t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}setInResult(t){this._isInResult=t}getSym(){return this._sym}isForward(){return this._isForward}getEdge(){return this._edge}printEdge(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}setSym(t){this._sym=t}setVisitedEdge(t){this.setVisited(t),this._sym.setVisited(t)}setEdgeDepths(t,e){let n=this.getEdge().getDepthDelta();this._isForward||(n=-n);let i=1;t===St.LEFT&&(i=-1);const r=St.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(t){this._next=t}isVisited(){return this._isVisited}}class be{constructor(){be.constructor_.apply(this,arguments)}static constructor_(){this._edges=new Z,this._nodes=null,this._edgeEndList=new Z,0===arguments.length?this._nodes=new _e(new ge):1===arguments.length&&(this._nodes=new _e(arguments[0]))}static linkResultDirectedEdges(t){for(let e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}printEdges(t){t.println("Edges:");for(let e=0;e<this._edges.size();e++){t.println("edge "+e+":");const n=this._edges.get(e);n.print(t),n.eiList.print(t)}}find(t){return this._nodes.find(t)}addNode(){return arguments[0]instanceof de||arguments[0]instanceof L?this._nodes.addNode(arguments[0]):void 0}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}debugPrintln(t){gt.out.println(t)}isBoundaryNode(t,e){const n=this._nodes.find(e);if(null===n)return!1;const i=n.getLabel();return null!==i&&i.getLocation(t)===u.BOUNDARY}linkAllDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}matchInSameDirection(t,e,n,i){return!!t.equals(n)&&it.index(t,e,i)===it.COLLINEAR&&he.quadrant(t,e)===he.quadrant(n,i)}getEdgeEnds(){return this._edgeEndList}debugPrint(t){gt.out.print(t)}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(t,e){for(let n=0;n<this._edges.size();n++){const i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null}insertEdge(t){this._edges.add(t)}findEdgeEnd(t){for(let e=this.getEdgeEnds().iterator();e.hasNext();){const n=e.next();if(n.getEdge()===t)return n}return null}addEdges(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this._edges.add(t);const n=new ve(t,!0),i=new ve(t,!1);n.setSym(i),i.setSym(n),this.add(n),this.add(i)}}add(t){this._nodes.add(t),this._edgeEndList.add(t)}getNodes(){return this._nodes.values()}findEdge(t,e){for(let n=0;n<this._edges.size();n++){const i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null}}class xe{constructor(){xe.constructor_.apply(this,arguments)}static constructor_(){this._geometryFactory=new Pt,this._geomGraph=null,this._disconnectedRingcoord=null,this._geomGraph=arguments[0]}static findDifferentPoint(t,e){for(let n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null}visitInteriorRing(t,e){if(t.isEmpty())return null;const n=t.getCoordinates(),i=n[0],r=xe.findDifferentPoint(n,i),o=e.findEdgeInSameDirection(i,r),s=e.findEdgeEnd(o);let a=null;s.getLabel().getLocation(0,St.RIGHT)===u.INTERIOR?a=s:s.getSym().getLabel().getLocation(0,St.RIGHT)===u.INTERIOR&&(a=s.getSym()),C.isTrue(null!==a,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(a)}visitShellInteriors(t,e){if(t instanceof ot&&this.visitInteriorRing(t.getExteriorRing(),e),t instanceof bt){const n=t;for(let t=0;t<n.getNumGeometries();t++){const i=n.getGeometryN(t);this.visitInteriorRing(i.getExteriorRing(),e)}}}getCoordinate(){return this._disconnectedRingcoord}setInteriorEdgesInResult(t){for(let e=t.getEdgeEnds().iterator();e.hasNext();){const t=e.next();t.getLabel().getLocation(0,St.RIGHT)===u.INTERIOR&&t.setInResult(!0)}}visitLinkedDirectedEdges(t){const e=t;let n=t;do{C.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext()}while(n!==e)}buildEdgeRings(t){const e=new Z;for(let n=t.iterator();n.hasNext();){const t=n.next();if(t.isInResult()&&null===t.getEdgeRing()){const n=new Kt(t,this._geometryFactory);n.linkDirectedEdgesForMinimalEdgeRings();const i=n.buildMinimalRings();e.addAll(i)}}return e}hasUnvisitedShellEdge(t){for(let e=0;e<t.size();e++){const n=t.get(e);if(n.isHole())continue;const i=n.getEdges();let r=i.get(0);if(r.getLabel().getLocation(0,St.RIGHT)===u.INTERIOR)for(let t=0;t<i.size();t++)if(r=i.get(t),!r.isVisited())return this._disconnectedRingcoord=r.getCoordinate(),!0}return!1}isInteriorsConnected(){const t=new Z;this._geomGraph.computeSplitEdges(t);const e=new be(new ye);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();const n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this._geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)}}class Ee{isInBoundary(t){}}class Ie{isInBoundary(t){return t%2==1}get interfaces_(){return[Ee]}}class Ne{isInBoundary(t){return t>0}get interfaces_(){return[Ee]}}class we{isInBoundary(t){return t>1}get interfaces_(){return[Ee]}}class Ce{isInBoundary(t){return 1===t}get interfaces_(){return[Ee]}}Ee.Mod2BoundaryNodeRule=Ie,Ee.EndPointBoundaryNodeRule=Ne,Ee.MultiValentEndPointBoundaryNodeRule=we,Ee.MonoValentEndPointBoundaryNodeRule=Ce,Ee.MOD2_BOUNDARY_RULE=new Ie,Ee.ENDPOINT_BOUNDARY_RULE=new Ne,Ee.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new we,Ee.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new Ce,Ee.OGC_SFS_BOUNDARY_RULE=Ee.MOD2_BOUNDARY_RULE;class Oe{constructor(){Oe.constructor_.apply(this,arguments)}static constructor_(){if(this._boundaryRule=Ee.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){const t=arguments[0];if(null===t)throw new a("Rule must be non-null");this._boundaryRule=t}}locateInPolygonRing(t,e){return e.getEnvelopeInternal().intersects(t)?Xt.locateInRing(t,e.getCoordinates()):u.EXTERIOR}intersects(t,e){return this.locate(t,e)!==u.EXTERIOR}updateLocationInfo(t){t===u.INTERIOR&&(this._isIn=!0),t===u.BOUNDARY&&this._numBoundaries++}computeLocation(t,e){if(e instanceof X&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof U)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof ot)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof Ot){const n=e;for(let e=0;e<n.getNumGeometries();e++){const i=n.getGeometryN(e);this.updateLocationInfo(this.locateOnLineString(t,i))}}else if(e instanceof bt){const n=e;for(let e=0;e<n.getNumGeometries();e++){const i=n.getGeometryN(e);this.updateLocationInfo(this.locateInPolygon(t,i))}}else if(e instanceof st){const n=new ee(e);for(;n.hasNext();){const i=n.next();i!==e&&this.computeLocation(t,i)}}}locateOnPoint(t,e){return e.getCoordinate().equals2D(t)?u.INTERIOR:u.EXTERIOR}locateOnLineString(t,e){if(!e.getEnvelopeInternal().intersects(t))return u.EXTERIOR;const n=e.getCoordinateSequence();return e.isClosed()||!t.equals(n.getCoordinate(0))&&!t.equals(n.getCoordinate(n.size()-1))?Xt.isOnLine(t,n)?u.INTERIOR:u.EXTERIOR:u.BOUNDARY}locateInPolygon(t,e){if(e.isEmpty())return u.EXTERIOR;const n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===u.EXTERIOR)return u.EXTERIOR;if(i===u.BOUNDARY)return u.BOUNDARY;for(let r=0;r<e.getNumInteriorRing();r++){const n=e.getInteriorRingN(r),i=this.locateInPolygonRing(t,n);if(i===u.INTERIOR)return u.EXTERIOR;if(i===u.BOUNDARY)return u.BOUNDARY}return u.INTERIOR}locate(t,e){return e.isEmpty()?u.EXTERIOR:e instanceof U?this.locateOnLineString(t,e):e instanceof ot?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?u.BOUNDARY:this._numBoundaries>0||this._isIn?u.INTERIOR:u.EXTERIOR)}}class Pe{constructor(){Pe.constructor_.apply(this,arguments)}static constructor_(){this.mce=null,this.chainIndex=null;const t=arguments[1];this.mce=arguments[0],this.chainIndex=t}computeIntersections(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)}}class Se{constructor(){Se.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){const t=arguments[0],e=arguments[1];this._eventType=Se.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this._eventType=Se.INSERT,this._label=t,this._xValue=e,this._obj=n}}isDelete(){return this._eventType===Se.DELETE}setDeleteEventIndex(t){this._deleteEventIndex=t}getObject(){return this._obj}compareTo(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===Se.INSERT}isSameLabel(t){return null!==this._label&&this._label===t._label}getDeleteEventIndex(){return this._deleteEventIndex}get interfaces_(){return[_]}}Se.INSERT=1,Se.DELETE=2;const Le={reverseOrder:function(){return{compare:(t,e)=>e.compareTo(t)}},min:function(t){return Le.sort(t),t.get(0)},sort:function(t,e){const n=t.toArray();e?K.sort(n,e):K.sort(n);const i=t.iterator();for(let r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},singletonList:function(t){const e=new Z;return e.add(t),e}};var Te=Le;class Me{constructor(){Me.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;const t=arguments[1],e=arguments[2];this._li=arguments[0],this._includeProper=t,this._recordIsolated=e}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Me.isAdjacentSegments(e,i))return!0;if(t.isClosed()){const n=t.getNumPoints()-1;if(0===e&&i===n||0===i&&e===n)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(t){this._isDoneWhenProperInt=t}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(t,e){for(let n=e.iterator();n.hasNext();){const e=n.next().getCoordinate();if(t.isIntersection(e))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))}setBoundaryNodes(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e}addIntersections(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;const r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}}class Re extends class{}{constructor(){super(),Re.constructor_.apply(this,arguments)}static constructor_(){this.events=new Z,this.nOverlaps=null}prepareEvents(){Te.sort(this.events);for(let t=0;t<this.events.size();t++){const e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}}computeIntersections(){if(1===arguments.length){const t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(let e=0;e<this.events.size();e++){const n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Me&&D(arguments[0],J)&&D(arguments[1],J)){const t=arguments[0],e=arguments[1],n=arguments[2];this.addEdges(t,t),this.addEdges(e,e),this.computeIntersections(n)}else if("boolean"==typeof arguments[2]&&D(arguments[0],J)&&arguments[1]instanceof Me){const t=arguments[0],e=arguments[1];arguments[2]?this.addEdges(t,null):this.addEdges(t),this.computeIntersections(e)}}addEdge(t,e){const n=t.getMonotoneChainEdge(),i=n.getStartIndexes();for(let r=0;r<i.length-1;r++){const t=new Pe(n,r),i=new Se(e,n.getMinX(r),t);this.events.add(i),this.events.add(new Se(n.getMaxX(r),i))}}processOverlaps(t,e,n,i){const r=n.getObject();for(let o=t;o<e;o++){const t=this.events.get(o);if(t.isInsert()){const e=t.getObject();n.isSameLabel(t)||(r.computeIntersections(e,i),this.nOverlaps++)}}}addEdges(){if(1===arguments.length)for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.addEdge(e,e)}else if(2===arguments.length){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){const n=e.next();this.addEdge(n,t)}}}}class Ae{visitItem(t){}}class De{constructor(){De.constructor_.apply(this,arguments)}static constructor_(){this._min=E.POSITIVE_INFINITY,this._max=E.NEGATIVE_INFINITY}getMin(){return this._min}intersects(t,e){return!(this._min>e||this._max<t)}getMax(){return this._max}toString(){return jt.toLineString(new L(this._min,0),new L(this._max,0))}}De.NodeComparator=class{compare(t,e){const n=(t._min+t._max)/2,i=(e._min+e._max)/2;return n<i?-1:n>i?1:0}get interfaces_(){return[I]}};class Fe extends De{constructor(){super(),Fe.constructor_.apply(this,arguments)}static constructor_(){this._item=null;const t=arguments[1],e=arguments[2];this._min=arguments[0],this._max=t,this._item=e}query(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)}}class ke extends De{constructor(){super(),ke.constructor_.apply(this,arguments)}static constructor_(){this._node1=null,this._node2=null;const t=arguments[1];this._node1=arguments[0],this._node2=t,this.buildExtent(this._node1,this._node2)}buildExtent(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}query(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)}}class Ge{constructor(){Ge.constructor_.apply(this,arguments)}static constructor_(){this._leaves=new Z,this._root=null,this._level=0}buildTree(){Te.sort(this._leaves,new De.NodeComparator);let t=this._leaves,e=null,n=new Z;for(;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}}insert(t,e,n){if(null!==this._root)throw new IllegalStateException("Index cannot be added to once it has been queried");this._leaves.add(new Fe(t,e,n))}query(t,e,n){if(this.init(),null===this._root)return null;this._root.query(t,e,n)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(t){gt.out.println(jt.toLineString(new L(t._min,this._level),new L(t._max,this._level)))}init(){return null!==this._root||0===this._leaves.size()?null:void this.buildRoot()}buildLevel(t,e){this._level++,e.clear();for(let n=0;n<t.size();n+=2){const i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{const i=new ke(t.get(n),t.get(n+1));e.add(i)}}}}class Be{constructor(){Be.constructor_.apply(this,arguments)}static constructor_(){if(this.p0=null,this.p1=null,0===arguments.length)Be.constructor_.call(this,new L,new L);else if(1===arguments.length){const t=arguments[0];Be.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){const t=arguments[1];this.p0=arguments[0],this.p1=t}else if(4===arguments.length){const t=arguments[2],e=arguments[3];Be.constructor_.call(this,new L(arguments[0],arguments[1]),new L(t,e))}}static midPoint(t,e){return new L((t.x+e.x)/2,(t.y+e.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof Be){const t=arguments[0],e=it.index(this.p0,this.p1,t.p0),n=it.index(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof L)return it.index(this.p0,this.p1,arguments[0])}toGeometry(t){return t.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}equals(t){if(!(t instanceof Be))return!1;const e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}intersection(t){const e=new qt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}project(){if(arguments[0]instanceof L){const t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new L(t);const e=this.projectionFactor(t),n=new L;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Be){const t=arguments[0],e=this.projectionFactor(t.p0),n=this.projectionFactor(t.p1);if(e>=1&&n>=1)return null;if(e<=0&&n<=0)return null;let i=this.project(t.p0);e<0&&(i=this.p0),e>1&&(i=this.p1);let r=this.project(t.p1);return n<0&&(r=this.p0),n>1&&(r=this.p1),new Be(i,r)}}normalize(){this.p1.compareTo(this.p0)<0&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(t){return 0===t?this.p0:this.p1}distancePerpendicular(t){return Tt.pointToLinePerpendicular(t,this.p0,this.p1)}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return Be.midPoint(this.p0,this.p1)}projectionFactor(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;const e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?E.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i}closestPoints(t){const e=this.intersection(t);if(null!==e)return[e,e];const n=new Array(2).fill(null);let i=E.MAX_VALUE,r=null;const o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;const s=this.closestPoint(t.p1);r=s.distance(t.p1),r<i&&(i=r,n[0]=s,n[1]=t.p1);const a=t.closestPoint(this.p0);r=a.distance(this.p0),r<i&&(i=r,n[0]=this.p0,n[1]=a);const u=t.closestPoint(this.p1);return r=u.distance(this.p1),r<i&&(i=r,n[0]=this.p1,n[1]=u),n}closestPoint(t){const e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(t){const e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}reverse(){const t=this.p0;this.p0=this.p1,this.p1=t}equalsTopo(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}lineIntersection(t){return Lt.intersection(this.p0,this.p1,t.p0,t.p1)}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(t,e){const n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o);let a=0,u=0;if(0!==e){if(s<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/s,u=e*o/s}return new L(n-u,i+a)}setCoordinates(){if(1===arguments.length){const t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y}}segmentFraction(t){let e=this.projectionFactor(t);return e<0?e=0:(e>1||E.isNaN(e))&&(e=1),e}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}isHorizontal(){return this.p0.y===this.p1.y}reflect(t){const e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),i=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),r=e*e+n*n,o=e*e-n*n,s=t.getX(),a=t.getY();return new L((-o*s-2*e*n*a-2*e*i)/r,(o*a-2*e*n*s-2*n*i)/r)}distance(){if(arguments[0]instanceof Be){const t=arguments[0];return Tt.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof L)return Tt.pointToSegment(arguments[0],this.p0,this.p1)}pointAlong(t){const e=new L;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}hashCode(){let t=E.doubleToLongBits(this.p0.x);t^=31*E.doubleToLongBits(this.p0.y);const e=Math.trunc(t)^Math.trunc(t>>32);let n=E.doubleToLongBits(this.p1.x);return n^=31*E.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)}get interfaces_(){return[_,v]}}class Ve{constructor(){Ve.constructor_.apply(this,arguments)}static constructor_(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){const t=arguments[1];this._lines=arguments[0],this._isForcedToLineString=t}}static getGeometry(){if(1===arguments.length){const t=arguments[0];return t.getFactory().buildGeometry(Ve.getLines(t))}if(2===arguments.length){const t=arguments[0],e=arguments[1];return t.getFactory().buildGeometry(Ve.getLines(t,e))}}static getLines(){if(1===arguments.length)return Ve.getLines(arguments[0],!1);if(2===arguments.length){if(D(arguments[0],l)&&D(arguments[1],l)){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){const n=e.next();Ve.getLines(n,t)}return t}if(arguments[0]instanceof R&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1],n=new Z;return t.apply(new Ve(n,e)),n}if(arguments[0]instanceof R&&D(arguments[1],l)){const t=arguments[0],e=arguments[1];return t instanceof U?e.add(t):t.apply(new Ve(e)),e}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&D(arguments[0],l)&&D(arguments[1],l)){const t=arguments[1],e=arguments[2];for(let n=arguments[0].iterator();n.hasNext();){const i=n.next();Ve.getLines(i,t,e)}return t}if("boolean"==typeof arguments[2]&&arguments[0]instanceof R&&D(arguments[1],l)){const t=arguments[1];return arguments[0].apply(new Ve(t,arguments[2])),t}}}filter(t){if(this._isForcedToLineString&&t instanceof ut){const e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof U&&this._lines.add(t)}setForceToLineString(t){this._isForcedToLineString=t}get interfaces_(){return[y]}}class ze{constructor(){ze.constructor_.apply(this,arguments)}static constructor_(){this._items=new Z}visitItem(t){this._items.add(t)}getItems(){return this._items}get interfaces_(){return[Ae]}}class je{constructor(){je.constructor_.apply(this,arguments)}static constructor_(){this._geom=null,this._index=null;const t=arguments[0];if(!(D(t,rt)||t instanceof ut))throw new a("Argument must be Polygonal or LinearRing");this._geom=t}locate(t){null===this._index&&(this._index=new qe(this._geom),this._geom=null);const e=new Yt(t),n=new Ue(e);return this._index.query(t.y,t.y,n),e.getLocation()}get interfaces_(){return[$t]}}class Ue{constructor(){Ue.constructor_.apply(this,arguments)}static constructor_(){this._counter=null,this._counter=arguments[0]}visitItem(t){const e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))}get interfaces_(){return[Ae]}}class qe{constructor(){qe.constructor_.apply(this,arguments)}static constructor_(){this._isEmpty=!1,this._index=new Ge;const t=arguments[0];t.isEmpty()?this._isEmpty=!0:this.init(t)}init(t){for(let e=Ve.getLines(t).iterator();e.hasNext();){const t=e.next().getCoordinates();this.addLine(t)}}addLine(t){for(let e=1;e<t.length;e++){const n=new Be(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}}query(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this._isEmpty)return new Z;const n=new ze;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){if(this._isEmpty)return null;this._index.query(arguments[0],arguments[1],arguments[2])}}}je.SegmentVisitor=Ue,je.IntervalIndexedGeometry=qe;class Ye{constructor(){Ye.constructor_.apply(this,arguments)}static constructor_(){this.coord=null,this.segmentIndex=null,this.dist=null;const t=arguments[1],e=arguments[2];this.coord=new L(arguments[0]),this.segmentIndex=t,this.dist=e}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}compareTo(t){return this.compare(t.segmentIndex,t.dist)}isEndPoint(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}get interfaces_(){return[_]}}class Xe{constructor(){Xe.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new le,this.edge=null,this.edge=arguments[0]}print(t){t.println("Intersections:");for(let e=this.iterator();e.hasNext();)e.next().print(t)}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints();const e=this.iterator();let n=e.next();for(;e.hasNext();){const i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}addEndpoints(){const t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}createSplitEdge(t,e){let n=e.segmentIndex-t.segmentIndex+2;const i=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);i||n--;const r=new Array(n).fill(null);let o=0;r[o++]=new L(t.coord);for(let s=t.segmentIndex+1;s<=e.segmentIndex;s++)r[o++]=this.edge.pts[s];return i&&(r[o]=e.coord),new Ke(r,new Jt(this.edge._label))}add(t,e,n){const i=new Ye(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)}isIntersection(t){for(let e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1}}class We{constructor(){We.constructor_.apply(this,arguments)}static constructor_(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(()=>Array(3)),this.setAll(V.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){const t=arguments[0];We.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof We){const t=arguments[0];We.constructor_.call(this),this._matrix[u.INTERIOR][u.INTERIOR]=t._matrix[u.INTERIOR][u.INTERIOR],this._matrix[u.INTERIOR][u.BOUNDARY]=t._matrix[u.INTERIOR][u.BOUNDARY],this._matrix[u.INTERIOR][u.EXTERIOR]=t._matrix[u.INTERIOR][u.EXTERIOR],this._matrix[u.BOUNDARY][u.INTERIOR]=t._matrix[u.BOUNDARY][u.INTERIOR],this._matrix[u.BOUNDARY][u.BOUNDARY]=t._matrix[u.BOUNDARY][u.BOUNDARY],this._matrix[u.BOUNDARY][u.EXTERIOR]=t._matrix[u.BOUNDARY][u.EXTERIOR],this._matrix[u.EXTERIOR][u.INTERIOR]=t._matrix[u.EXTERIOR][u.INTERIOR],this._matrix[u.EXTERIOR][u.BOUNDARY]=t._matrix[u.EXTERIOR][u.BOUNDARY],this._matrix[u.EXTERIOR][u.EXTERIOR]=t._matrix[u.EXTERIOR][u.EXTERIOR]}}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return e===V.SYM_DONTCARE||e===V.SYM_TRUE&&(t>=0||t===V.TRUE)||e===V.SYM_FALSE&&t===V.FALSE||e===V.SYM_P&&t===V.P||e===V.SYM_L&&t===V.L||e===V.SYM_A&&t===V.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){const t=arguments[1];return new We(arguments[0]).matches(t)}}static isTrue(t){return t>=0||t===V.TRUE}isIntersects(){return!this.isDisjoint()}isCovers(){return(We.isTrue(this._matrix[u.INTERIOR][u.INTERIOR])||We.isTrue(this._matrix[u.INTERIOR][u.BOUNDARY])||We.isTrue(this._matrix[u.BOUNDARY][u.INTERIOR])||We.isTrue(this._matrix[u.BOUNDARY][u.BOUNDARY]))&&this._matrix[u.EXTERIOR][u.INTERIOR]===V.FALSE&&this._matrix[u.EXTERIOR][u.BOUNDARY]===V.FALSE}isCoveredBy(){return(We.isTrue(this._matrix[u.INTERIOR][u.INTERIOR])||We.isTrue(this._matrix[u.INTERIOR][u.BOUNDARY])||We.isTrue(this._matrix[u.BOUNDARY][u.INTERIOR])||We.isTrue(this._matrix[u.BOUNDARY][u.BOUNDARY]))&&this._matrix[u.INTERIOR][u.EXTERIOR]===V.FALSE&&this._matrix[u.BOUNDARY][u.EXTERIOR]===V.FALSE}set(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<t.length;e++){const n=Math.trunc(e/3);this._matrix[n][e%3]=V.toDimensionValue(t.charAt(e))}}else 3===arguments.length&&(this._matrix[arguments[0]][arguments[1]]=arguments[2])}isContains(){return We.isTrue(this._matrix[u.INTERIOR][u.INTERIOR])&&this._matrix[u.EXTERIOR][u.INTERIOR]===V.FALSE&&this._matrix[u.EXTERIOR][u.BOUNDARY]===V.FALSE}setAtLeast(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<t.length;e++){const n=Math.trunc(e/3);this.setAtLeast(n,e%3,V.toDimensionValue(t.charAt(e)))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this._matrix[t][e]<n&&(this._matrix[t][e]=n)}}setAtLeastIfValid(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}isWithin(){return We.isTrue(this._matrix[u.INTERIOR][u.INTERIOR])&&this._matrix[u.INTERIOR][u.EXTERIOR]===V.FALSE&&this._matrix[u.BOUNDARY][u.EXTERIOR]===V.FALSE}isTouches(t,e){return t>e?this.isTouches(e,t):(t===V.A&&e===V.A||t===V.L&&e===V.L||t===V.L&&e===V.A||t===V.P&&e===V.A||t===V.P&&e===V.L)&&this._matrix[u.INTERIOR][u.INTERIOR]===V.FALSE&&(We.isTrue(this._matrix[u.INTERIOR][u.BOUNDARY])||We.isTrue(this._matrix[u.BOUNDARY][u.INTERIOR])||We.isTrue(this._matrix[u.BOUNDARY][u.BOUNDARY]))}isOverlaps(t,e){return t===V.P&&e===V.P||t===V.A&&e===V.A?We.isTrue(this._matrix[u.INTERIOR][u.INTERIOR])&&We.isTrue(this._matrix[u.INTERIOR][u.EXTERIOR])&&We.isTrue(this._matrix[u.EXTERIOR][u.INTERIOR]):t===V.L&&e===V.L&&1===this._matrix[u.INTERIOR][u.INTERIOR]&&We.isTrue(this._matrix[u.INTERIOR][u.EXTERIOR])&&We.isTrue(this._matrix[u.EXTERIOR][u.INTERIOR])}isEquals(t,e){return t===e&&We.isTrue(this._matrix[u.INTERIOR][u.INTERIOR])&&this._matrix[u.INTERIOR][u.EXTERIOR]===V.FALSE&&this._matrix[u.BOUNDARY][u.EXTERIOR]===V.FALSE&&this._matrix[u.EXTERIOR][u.INTERIOR]===V.FALSE&&this._matrix[u.EXTERIOR][u.BOUNDARY]===V.FALSE}toString(){const t=new _t("123456789");for(let e=0;e<3;e++)for(let n=0;n<3;n++)t.setCharAt(3*e+n,V.toDimensionSymbol(this._matrix[e][n]));return t.toString()}setAll(t){for(let e=0;e<3;e++)for(let n=0;n<3;n++)this._matrix[e][n]=t}get(t,e){return this._matrix[t][e]}transpose(){let t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}matches(t){if(9!==t.length)throw new a("Should be length 9: "+t);for(let e=0;e<3;e++)for(let n=0;n<3;n++)if(!We.matches(this._matrix[e][n],t.charAt(3*e+n)))return!1;return!0}add(t){for(let e=0;e<3;e++)for(let n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}isDisjoint(){return this._matrix[u.INTERIOR][u.INTERIOR]===V.FALSE&&this._matrix[u.INTERIOR][u.BOUNDARY]===V.FALSE&&this._matrix[u.BOUNDARY][u.INTERIOR]===V.FALSE&&this._matrix[u.BOUNDARY][u.BOUNDARY]===V.FALSE}isCrosses(t,e){return t===V.P&&e===V.L||t===V.P&&e===V.A||t===V.L&&e===V.A?We.isTrue(this._matrix[u.INTERIOR][u.INTERIOR])&&We.isTrue(this._matrix[u.INTERIOR][u.EXTERIOR]):t===V.L&&e===V.P||t===V.A&&e===V.P||t===V.A&&e===V.L?We.isTrue(this._matrix[u.INTERIOR][u.INTERIOR])&&We.isTrue(this._matrix[u.EXTERIOR][u.INTERIOR]):t===V.L&&e===V.L&&0===this._matrix[u.INTERIOR][u.INTERIOR]}get interfaces_(){return[m]}}class He{constructor(){He.constructor_.apply(this,arguments)}static constructor_(){this._data=null,this._size=0,0===arguments.length?He.constructor_.call(this,10):1===arguments.length&&(this._data=new Array(arguments[0]).fill(null))}size(){return this._size}addAll(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),gt.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}ensureCapacity(t){if(t<=this._data.length)return null;const e=Math.max(t,2*this._data.length);this._data=K.copyOf(this._data,e)}toArray(){const t=new Array(this._size).fill(null);return gt.arraycopy(this._data,0,t,0,this._size),t}add(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}class Je{static toIntArray(t){const e=new Array(t.size()).fill(null);for(let n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}getChainStartIndices(t){let e=0;const n=new He(Math.trunc(t.length/2));n.add(e);do{const i=this.findChainEnd(t,e);n.add(i),e=i}while(e<t.length-1);return n.toArray()}findChainEnd(t,e){const n=he.quadrant(t[e],t[e+1]);let i=e+1;for(;i<t.length&&he.quadrant(t[i-1],t[i])===n;)i++;return i-1}OLDgetChainStartIndices(t){let e=0;const n=new Z;n.add(e);do{const i=this.findChainEnd(t,e);n.add(i),e=i}while(e<t.length-1);return Je.toIntArray(n)}}class Ze{constructor(){Ze.constructor_.apply(this,arguments)}static constructor_(){this.e=null,this.pts=null,this.startIndex=null;const t=arguments[0];this.e=t,this.pts=t.getCoordinates();const e=new Je;this.startIndex=e.getChainStartIndices(this.pts)}getCoordinates(){return this.pts}getMaxX(t){const e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n}getMinX(t){const e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n}computeIntersectsForChain(){if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],arguments[3])}else if(6===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[4],o=arguments[5];if(e-t==1&&r-i==1)return o.addIntersections(this.e,t,n.e,i),null;if(!this.overlaps(t,e,n,i,r))return null;const s=Math.trunc((t+e)/2),a=Math.trunc((i+r)/2);t<s&&(i<a&&this.computeIntersectsForChain(t,s,n,i,a,o),a<r&&this.computeIntersectsForChain(t,s,n,a,r,o)),s<e&&(i<a&&this.computeIntersectsForChain(s,e,n,i,a,o),a<r&&this.computeIntersectsForChain(s,e,n,a,r,o))}}overlaps(t,e,n,i,r){return M.intersects(this.pts[t],this.pts[e],n.pts[i],n.pts[r])}getStartIndexes(){return this.startIndex}computeIntersects(t,e){for(let n=0;n<this.startIndex.length-1;n++)for(let i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)}}class Qe{constructor(){Qe.constructor_.apply(this,arguments)}static constructor_(){this._depth=Array(2).fill().map(()=>Array(3));for(let t=0;t<2;t++)for(let e=0;e<3;e++)this._depth[t][e]=Qe.NULL_VALUE}static depthAtLocation(t){return t===u.EXTERIOR?0:t===u.INTERIOR?1:Qe.NULL_VALUE}getDepth(t,e){return this._depth[t][e]}setDepth(t,e,n){this._depth[t][e]=n}isNull(){if(0===arguments.length){for(let t=0;t<2;t++)for(let e=0;e<3;e++)if(this._depth[t][e]!==Qe.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===Qe.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===Qe.NULL_VALUE:void 0}normalize(){for(let t=0;t<2;t++)if(!this.isNull(t)){let e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(let n=1;n<3;n++){let i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}}getDelta(t){return this._depth[t][St.RIGHT]-this._depth[t][St.LEFT]}getLocation(t,e){return this._depth[t][e]<=0?u.EXTERIOR:u.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<2;e++)for(let n=1;n<3;n++){const i=t.getLocation(e,n);i!==u.EXTERIOR&&i!==u.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=Qe.depthAtLocation(i):this._depth[e][n]+=Qe.depthAtLocation(i))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1];arguments[2]===u.INTERIOR&&this._depth[t][e]++}}}Qe.NULL_VALUE=-1;class Ke extends fe{constructor(){super(),Ke.constructor_.apply(this,arguments)}static constructor_(){if(this.pts=null,this._env=null,this.eiList=new Xe(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Qe,this._depthDelta=0,1===arguments.length)Ke.constructor_.call(this,arguments[0],null);else if(2===arguments.length){const t=arguments[1];this.pts=arguments[0],this._label=t}}static updateIM(){if(!(2===arguments.length&&arguments[1]instanceof We&&arguments[0]instanceof Jt))return super.updateIM.apply(this,arguments);{const t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,St.ON),t.getLocation(1,St.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,St.LEFT),t.getLocation(1,St.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,St.RIGHT),t.getLocation(1,St.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){const t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new Ke(t,Jt.toLineLabel(this._label))}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}setIsolated(t){this._isIsolated=t}setName(t){this._name=t}equals(t){if(!(t instanceof Ke))return!1;const e=t;if(this.pts.length!==e.pts.length)return!1;let n=!0,i=!0,r=this.pts.length;for(let o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0}getCoordinate(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0}print(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(let e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}computeIM(t){Ke.updateIM(this._label,t)}isCollapsed(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(t){t.print("edge "+this._name+": ");for(let e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new Ze(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new M;for(let t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}addIntersection(t,e,n,i){const r=new L(t.getIntersection(i));let o=e,s=t.getEdgeDistance(n,i);const a=o+1;a<this.pts.length&&r.equals2D(this.pts[a])&&(o=a,s=0),this.eiList.add(r,o,s)}toString(){const t=new _t;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(let e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(let e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}setDepthDelta(t){this._depthDelta=t}getEdgeIntersectionList(){return this.eiList}addIntersections(t,e,n){for(let i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}}class $e extends be{constructor(){super(),$e.constructor_.apply(this,arguments)}static constructor_(){if(this._parentGeom=null,this._lineEdgeMap=new Nt,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Oe,2===arguments.length)$e.constructor_.call(this,arguments[0],arguments[1],Ee.OGC_SFS_BOUNDARY_RULE);else if(3===arguments.length){const t=arguments[1],e=arguments[2];this._argIndex=arguments[0],this._parentGeom=t,this._boundaryNodeRule=e,null!==t&&this.add(t)}}static determineBoundary(t,e){return t.isInBoundary(e)?u.BOUNDARY:u.INTERIOR}insertBoundaryPoint(t,e){const n=this._nodes.addNode(e).getLabel();let i=1,r=u.NONE;r=n.getLocation(t,St.ON),r===u.BOUNDARY&&i++;const o=$e.determineBoundary(this._boundaryNodeRule,i);n.setLocation(t,o)}computeSelfNodes(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){const t=arguments[1],e=arguments[2],n=new Me(arguments[0],!0,!1);n.setIsDoneIfProperInt(e);const i=this.createEdgeSetIntersector(),r=this._parentGeom instanceof ut||this._parentGeom instanceof ot||this._parentGeom instanceof bt;return i.computeIntersections(this._edges,n,t||!r),this.addSelfIntersectionNodes(this._argIndex),n}}computeSplitEdges(t){for(let e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)}computeEdgeIntersections(t,e,n){const i=new Me(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof X){const t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,u.INTERIOR)}else arguments[0]instanceof L&&this.insertPoint(this._argIndex,arguments[0],u.INTERIOR)}addPolygon(t){this.addPolygonRing(t.getExteriorRing(),u.EXTERIOR,u.INTERIOR);for(let e=0;e<t.getNumInteriorRing();e++){const n=t.getInteriorRingN(e);this.addPolygonRing(n,u.INTERIOR,u.EXTERIOR)}}addEdge(t){this.insertEdge(t);const e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],u.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],u.BOUNDARY)}addLineString(t){const e=yt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;const n=new Ke(e,new Jt(this._argIndex,u.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),C.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){const t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null);let n=0;for(let i=t.iterator();i.hasNext();){const t=i.next();e[n++]=t.getCoordinate().copy()}return e}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(t,e,n){if(this.isBoundaryNode(t,e))return null;n===u.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)}addPolygonRing(t,e,n){if(t.isEmpty())return null;const i=yt.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;let r=e,o=n;it.isCCW(i)&&(r=n,o=e);const s=new Ke(i,new Jt(this._argIndex,u.BOUNDARY,r,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],u.BOUNDARY)}insertPoint(t,e,n){const i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new Jt(t,n):r.setLocation(t,n)}createEdgeSetIntersector(){return new Re}addSelfIntersectionNodes(t){for(let e=this._edges.iterator();e.hasNext();){const n=e.next(),i=n.getLabel().getLocation(t);for(let e=n.eiList.iterator();e.hasNext();){const n=e.next();this.addSelfIntersectionNode(t,n.coord,i)}}}add(){if(!(1===arguments.length&&arguments[0]instanceof R))return super.add.apply(this,arguments);{const t=arguments[0];if(t.isEmpty())return null;if(t instanceof bt&&(this._useBoundaryDeterminationRule=!1),t instanceof ot)this.addPolygon(t);else if(t instanceof U)this.addLineString(t);else if(t instanceof X)this.addPoint(t);else if(t instanceof at)this.addCollection(t);else if(t instanceof Ot)this.addCollection(t);else if(t instanceof bt)this.addCollection(t);else{if(!(t instanceof st))throw new h(t.getGeometryType());this.addCollection(t)}}}addCollection(t){for(let e=0;e<t.getNumGeometries();e++){const n=t.getGeometryN(e);this.add(n)}}locate(t){return D(this._parentGeom,rt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new je(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}findEdge(){return 1===arguments.length&&arguments[0]instanceof U?this._lineEdgeMap.get(arguments[0]):super.findEdge.apply(this,arguments)}}class tn{createEdgeEndForNext(t,e,n,i){const r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;let o=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(o=i.coord);const s=new me(t,n.coord,o,new Jt(t.getLabel()));e.add(s)}createEdgeEndForPrev(t,e,n,i){let r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}let o=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(o=i.coord);const s=new Jt(t.getLabel());s.flip();const a=new me(t,n.coord,o,s);e.add(a)}computeEdgeEnds(){if(1===arguments.length){const t=arguments[0],e=new Z;for(let n=t;n.hasNext();){const t=n.next();this.computeEdgeEnds(t,e)}return e}if(2===arguments.length){const t=arguments[0],e=arguments[1],n=t.getEdgeIntersectionList();n.addEndpoints();const i=n.iterator();let r=null,o=null;if(!i.hasNext())return null;let s=i.next();do{r=o,o=s,s=null,i.hasNext()&&(s=i.next()),null!==o&&(this.createEdgeEndForPrev(t,e,o,r),this.createEdgeEndForNext(t,e,o,s))}while(null!==o)}}}class en extends me{constructor(){super(),en.constructor_.apply(this,arguments)}static constructor_(){if(this._edgeEnds=new Z,1===arguments.length)en.constructor_.call(this,null,arguments[0]);else if(2===arguments.length){const t=arguments[1];me.constructor_.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new Jt(t.getLabel())),this.insert(t)}}insert(t){this._edgeEnds.add(t)}print(t){t.println("EdgeEndBundle--\x3e Label: "+this._label);for(let e=this.iterator();e.hasNext();)e.next().print(t),t.println()}iterator(){return this._edgeEnds.iterator()}getEdgeEnds(){return this._edgeEnds}computeLabelOn(t,e){let n=0,i=!1;for(let o=this.iterator();o.hasNext();){const e=o.next().getLabel().getLocation(t);e===u.BOUNDARY&&n++,e===u.INTERIOR&&(i=!0)}let r=u.NONE;i&&(r=u.INTERIOR),n>0&&(r=$e.determineBoundary(e,n)),this._label.setLocation(t,r)}computeLabelSide(t,e){for(let n=this.iterator();n.hasNext();){const i=n.next();if(i.getLabel().isArea()){const n=i.getLabel().getLocation(t,e);if(n===u.INTERIOR)return this._label.setLocation(t,e,u.INTERIOR),null;n===u.EXTERIOR&&this._label.setLocation(t,e,u.EXTERIOR)}}}getLabel(){return this._label}computeLabelSides(t){this.computeLabelSide(t,St.LEFT),this.computeLabelSide(t,St.RIGHT)}updateIM(t){Ke.updateIM(this._label,t)}computeLabel(t){let e=!1;for(let n=this.iterator();n.hasNext();)n.next().getLabel().isArea()&&(e=!0);this._label=e?new Jt(u.NONE,u.NONE,u.NONE):new Jt(u.NONE);for(let n=0;n<2;n++)this.computeLabelOn(n,t),e&&this.computeLabelSides(n)}}class nn extends ce{constructor(){super()}updateIM(t){for(let e=this.iterator();e.hasNext();)e.next().updateIM(t)}insert(t){let e=this._edgeMap.get(t);null===e?(e=new en(t),this.insertEdgeEnd(t,e)):e.insert(t)}}class rn extends de{constructor(){super(),rn.constructor_.apply(this,arguments)}static constructor_(){de.constructor_.call(this,arguments[0],arguments[1])}updateIMFromEdges(t){this._edges.updateIM(t)}computeIM(t){t.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}}class on extends ge{constructor(){super()}createNode(t){return new rn(t,new nn)}}class sn{constructor(){sn.constructor_.apply(this,arguments)}static constructor_(){this._nodes=new _e(new on)}insertEdgeEnds(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this._nodes.add(t)}}getNodeIterator(){return this._nodes.iterator()}copyNodesAndLabels(t,e){for(let n=t.getNodeIterator();n.hasNext();){const t=n.next();this._nodes.addNode(t.getCoordinate()).setLabel(e,t.getLabel().getLocation(e))}}build(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);const e=(new tn).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(e)}computeIntersectionNodes(t,e){for(let n=t.getEdgeIterator();n.hasNext();){const t=n.next(),i=t.getLabel().getLocation(e);for(let n=t.getEdgeIntersectionList().iterator();n.hasNext();){const t=n.next(),r=this._nodes.addNode(t.coord);i===u.BOUNDARY?r.setLabelBoundary(e):r.getLabel().isNull(e)&&r.setLabel(e,u.INTERIOR)}}}}class an{constructor(){an.constructor_.apply(this,arguments)}static constructor_(){this._li=new qt,this._geomGraph=null,this._nodeGraph=new sn,this._invalidPoint=null,this._geomGraph=arguments[0]}isNodeEdgeAreaLabelsConsistent(){for(let t=this._nodeGraph.getNodeIterator();t.hasNext();){const e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this._geomGraph))return this._invalidPoint=e.getCoordinate().copy(),!1}return!0}getInvalidPoint(){return this._invalidPoint}hasDuplicateRings(){for(let t=this._nodeGraph.getNodeIterator();t.hasNext();)for(let e=t.next().getEdges().iterator();e.hasNext();){const t=e.next();if(t.getEdgeEnds().size()>1)return this._invalidPoint=t.getEdge().getCoordinate(0),!0}return!1}isNodeConsistentArea(){const t=this._geomGraph.computeSelfNodes(this._li,!0,!0);return t.hasProperIntersection()?(this._invalidPoint=t.getProperIntersectionPoint(),!1):(this._nodeGraph.build(this._geomGraph),this.isNodeEdgeAreaLabelsConsistent())}}class un{getBounds(){}}class ln{constructor(){ln.constructor_.apply(this,arguments)}static constructor_(){this._bounds=null,this._item=null;const t=arguments[1];this._bounds=arguments[0],this._item=t}getItem(){return this._item}getBounds(){return this._bounds}get interfaces_(){return[un,v]}}class cn{constructor(){cn.constructor_.apply(this,arguments)}static constructor_(){this._size=null,this._items=null,this._size=0,this._items=new Z,this._items.add(null)}poll(){if(this.isEmpty())return null;const t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}size(){return this._size}reorder(t){let e=null;const n=this._items.get(t);for(;2*t<=this._size&&(e=2*t,e!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)}clear(){this._size=0,this._items.clear()}peek(){return this.isEmpty()?null:this._items.get(1)}isEmpty(){return 0===this._size}add(t){this._items.add(null),this._size+=1;let e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}class hn{insert(t,e){}remove(t,e){}query(){}}class pn{constructor(){pn.constructor_.apply(this,arguments)}static constructor_(){this._childBoundables=new Z,this._bounds=null,this._level=null,0===arguments.length||1===arguments.length&&(this._level=arguments[0])}getLevel(){return this._level}size(){return this._childBoundables.size()}getChildBoundables(){return this._childBoundables}addChildBoundable(t){C.isTrue(null===this._bounds),this._childBoundables.add(t)}isEmpty(){return this._childBoundables.isEmpty()}getBounds(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}get interfaces_(){return[un,v]}}class fn{static maxDistance(t,e,n,i,r,o,s,a){let u=fn.distance(t,e,r,o);return u=Math.max(u,fn.distance(t,e,s,a)),u=Math.max(u,fn.distance(n,i,r,o)),u=Math.max(u,fn.distance(n,i,s,a)),u}static distance(t,e,n,i){const r=n-t,o=i-e;return Math.sqrt(r*r+o*o)}static maximumDistance(t,e){const n=Math.min(t.getMinX(),e.getMinX()),i=Math.min(t.getMinY(),e.getMinY()),r=Math.max(t.getMaxX(),e.getMaxX()),o=Math.max(t.getMaxY(),e.getMaxY());return fn.distance(n,i,r,o)}static minMaxDistance(t,e){const n=t.getMinX(),i=t.getMinY(),r=t.getMaxX(),o=t.getMaxY(),s=e.getMinX(),a=e.getMinY(),u=e.getMaxX(),l=e.getMaxY();let c=fn.maxDistance(n,i,n,o,s,a,s,l);return c=Math.min(c,fn.maxDistance(n,i,n,o,s,a,u,a)),c=Math.min(c,fn.maxDistance(n,i,n,o,u,l,s,l)),c=Math.min(c,fn.maxDistance(n,i,n,o,u,l,u,a)),c=Math.min(c,fn.maxDistance(n,i,r,i,s,a,s,l)),c=Math.min(c,fn.maxDistance(n,i,r,i,s,a,u,a)),c=Math.min(c,fn.maxDistance(n,i,r,i,u,l,s,l)),c=Math.min(c,fn.maxDistance(n,i,r,i,u,l,u,a)),c=Math.min(c,fn.maxDistance(r,o,n,o,s,a,s,l)),c=Math.min(c,fn.maxDistance(r,o,n,o,s,a,u,a)),c=Math.min(c,fn.maxDistance(r,o,n,o,u,l,s,l)),c=Math.min(c,fn.maxDistance(r,o,n,o,u,l,u,a)),c=Math.min(c,fn.maxDistance(r,o,r,i,s,a,s,l)),c=Math.min(c,fn.maxDistance(r,o,r,i,s,a,u,a)),c=Math.min(c,fn.maxDistance(r,o,r,i,u,l,s,l)),c=Math.min(c,fn.maxDistance(r,o,r,i,u,l,u,a)),c}}class dn{constructor(){dn.constructor_.apply(this,arguments)}static constructor_(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;const t=arguments[1],e=arguments[2];this._boundable1=arguments[0],this._boundable2=t,this._itemDistance=e,this._distance=this.distance()}static area(t){return t.getBounds().getArea()}static isComposite(t){return t instanceof pn}maximumDistance(){return fn.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}expandToQueue(t,e){const n=dn.isComposite(this._boundable1),i=dn.isComposite(this._boundable2);if(n&&i)return dn.area(this._boundable1)>dn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new a("neither boundable is composite")}isLeaves(){return!(dn.isComposite(this._boundable1)||dn.isComposite(this._boundable2))}compareTo(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0}expand(t,e,n,i,r){for(let o=t.getChildBoundables().iterator();o.hasNext();){const t=o.next();let s=null;s=n?new dn(e,t,this._itemDistance):new dn(t,e,this._itemDistance),s.getDistance()<r&&i.add(s)}}getBoundable(t){return 0===t?this._boundable1:this._boundable2}getDistance(){return this._distance}distance(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}get interfaces_(){return[_]}}class gn{constructor(){gn.constructor_.apply(this,arguments)}static constructor_(){if(this._root=null,this._built=!1,this._itemBoundables=new Z,this._nodeCapacity=null,0===arguments.length)gn.constructor_.call(this,gn.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){const t=arguments[0];C.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}static compareDoubles(t,e){return t>e?1:t<e?-1:0}queryInternal(){if(D(arguments[2],Ae)&&arguments[0]instanceof Object&&arguments[1]instanceof pn){const t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables();for(let i=0;i<n.size();i++){const r=n.get(i);this.getIntersectsOp().intersects(r.getBounds(),t)&&(r instanceof pn?this.queryInternal(t,r,e):r instanceof ln?e.visitItem(r.getItem()):C.shouldNeverReachHere())}}else if(D(arguments[2],J)&&arguments[0]instanceof Object&&arguments[1]instanceof pn){const t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables();for(let i=0;i<n.size();i++){const r=n.get(i);this.getIntersectsOp().intersects(r.getBounds(),t)&&(r instanceof pn?this.queryInternal(t,r,e):r instanceof ln?e.add(r.getItem()):C.shouldNeverReachHere())}}}getNodeCapacity(){return this._nodeCapacity}lastNode(t){return t.get(t.size()-1)}size(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){let t=0;for(let e=arguments[0].getChildBoundables().iterator();e.hasNext();){const n=e.next();n instanceof pn?t+=this.size(n):n instanceof ln&&(t+=1)}return t}}removeItem(t,e){let n=null;for(let i=t.getChildBoundables().iterator();i.hasNext();){const t=i.next();t instanceof ln&&t.getItem()===e&&(n=t)}return null!==n&&(t.getChildBoundables().remove(n),!0)}itemsTree(){if(0===arguments.length){this.build();const t=this.itemsTree(this._root);return null===t?new Z:t}if(1===arguments.length){const t=arguments[0],e=new Z;for(let n=t.getChildBoundables().iterator();n.hasNext();){const t=n.next();if(t instanceof pn){const n=this.itemsTree(t);null!==n&&e.add(n)}else t instanceof ln?e.add(t.getItem()):C.shouldNeverReachHere()}return e.size()<=0?null:e}}insert(t,e){C.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new ln(t,e))}boundablesAtLevel(){if(1===arguments.length){const t=arguments[0],e=new Z;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];if(C.isTrue(t>-2),e.getLevel()===t)return n.add(e),null;for(let i=e.getChildBoundables().iterator();i.hasNext();){const e=i.next();e instanceof pn?this.boundablesAtLevel(t,e,n):(C.isTrue(e instanceof ln),-1===t&&n.add(e))}return null}}query(){if(1===arguments.length){const t=arguments[0];this.build();const e=new Z;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e)}}build(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}getRoot(){return this.build(),this._root}remove(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];let i=this.removeItem(e,n);if(i)return!0;let r=null;for(let o=e.getChildBoundables().iterator();o.hasNext();){const e=o.next();if(this.getIntersectsOp().intersects(e.getBounds(),t)&&e instanceof pn&&(i=this.remove(t,e,n),i)){r=e;break}}return null!==r&&r.getChildBoundables().isEmpty()&&e.getChildBoundables().remove(r),i}}createHigherLevels(t,e){C.isTrue(!t.isEmpty());const n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}depth(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){let t=0;for(let e=arguments[0].getChildBoundables().iterator();e.hasNext();){const n=e.next();if(n instanceof pn){const e=this.depth(n);e>t&&(t=e)}}return t+1}}createParentBoundables(t,e){C.isTrue(!t.isEmpty());const n=new Z;n.add(this.createNode(e));const i=new Z(t);Te.sort(i,this.getComparator());for(let r=i.iterator();r.hasNext();){const t=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(t)}return n}isEmpty(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}get interfaces_(){return[v]}}gn.IntersectsOp=function(){},gn.DEFAULT_NODE_CAPACITY=10;class yn{distance(t,e){}}class _n extends gn{constructor(){super(),_n.constructor_.apply(this,arguments)}static constructor_(){0===arguments.length?_n.constructor_.call(this,_n.DEFAULT_NODE_CAPACITY):1===arguments.length&&gn.constructor_.call(this,arguments[0])}static centreX(t){return _n.avg(t.getMinX(),t.getMaxX())}static avg(t,e){return(t+e)/2}static getItems(t){const e=new Array(t.size()).fill(null);let n=0;for(;!t.isEmpty();){const i=t.poll();e[n]=i.getBoundable(0).getItem(),n++}return e}static centreY(t){return _n.avg(t.getMinY(),t.getMaxY())}createParentBoundablesFromVerticalSlices(t,e){C.isTrue(t.length>0);const n=new Z;for(let i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n}nearestNeighbourK(){if(2===arguments.length)return this.nearestNeighbourK(arguments[0],E.POSITIVE_INFINITY,arguments[1]);if(3===arguments.length){const t=arguments[0],e=arguments[2];let n=arguments[1];const i=new cn;i.add(t);const r=new cn;for(;!i.isEmpty()&&n>=0;){const t=i.poll(),o=t.getDistance();if(o>=n)break;t.isLeaves()?r.size()<e?r.add(t):(r.peek().getDistance()>o&&(r.poll(),r.add(t)),n=r.peek().getDistance()):t.expandToQueue(i,n)}return _n.getItems(r)}}createNode(t){return new mn(t)}size(){return 0===arguments.length?super.size.call(this):super.size.apply(this,arguments)}insert(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof M))return super.insert.apply(this,arguments);{const t=arguments[0],e=arguments[1];if(t.isNull())return null;super.insert.call(this,t,e)}}getIntersectsOp(){return _n.intersectsOp}verticalSlices(t,e){const n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator();for(let o=0;o<e;o++){i[o]=new Z;let t=0;for(;r.hasNext()&&t<n;){const e=r.next();i[o].add(e),t++}}return i}query(){if(1===arguments.length)return super.query.call(this,arguments[0]);2===arguments.length&&super.query.call(this,arguments[0],arguments[1])}getComparator(){return _n.yComparator}createParentBoundablesFromVerticalSlice(t,e){return super.createParentBoundables.call(this,t,e)}remove(){return 2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof M?super.remove.call(this,arguments[0],arguments[1]):super.remove.apply(this,arguments)}depth(){return 0===arguments.length?super.depth.call(this):super.depth.apply(this,arguments)}createParentBoundables(t,e){C.isTrue(!t.isEmpty());const n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Z(t);Te.sort(i,_n.xComparator);const r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)}nearestNeighbour(){if(1===arguments.length){if(D(arguments[0],yn)){const t=arguments[0];if(this.isEmpty())return null;const e=new dn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof dn){const t=arguments[0];let e=E.POSITIVE_INFINITY,n=null;const i=new cn;for(i.add(t);!i.isEmpty()&&e>0;){const t=i.poll(),r=t.getDistance();if(r>=e)break;t.isLeaves()?(e=r,n=t):t.expandToQueue(i,e)}return null===n?null:[n.getBoundable(0).getItem(),n.getBoundable(1).getItem()]}}else{if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.isEmpty()||t.isEmpty())return null;const n=new dn(this.getRoot(),t.getRoot(),e);return this.nearestNeighbour(n)}if(3===arguments.length){const t=arguments[2],e=new ln(arguments[0],arguments[1]),n=new dn(this.getRoot(),e,t);return this.nearestNeighbour(n)[0]}if(4===arguments.length){const t=arguments[2],e=arguments[3],n=new ln(arguments[0],arguments[1]),i=new dn(this.getRoot(),n,t);return this.nearestNeighbourK(i,e)}}}isWithinDistance(){if(2===arguments.length){const t=arguments[0],e=arguments[1];let n=E.POSITIVE_INFINITY;const i=new cn;for(i.add(t);!i.isEmpty();){const t=i.poll(),r=t.getDistance();if(r>e)return!1;if(t.maximumDistance()<=e)return!0;if(t.isLeaves()){if(n=r,n<=e)return!0}else t.expandToQueue(i,n)}return!1}if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=new dn(this.getRoot(),t.getRoot(),e);return this.isWithinDistance(i,n)}}get interfaces_(){return[hn,v]}}class mn extends pn{constructor(){super(),mn.constructor_.apply(this,arguments)}static constructor_(){pn.constructor_.call(this,arguments[0])}computeBounds(){let t=null;for(let e=this.getChildBoundables().iterator();e.hasNext();){const n=e.next();null===t?t=new M(n.getBounds()):t.expandToInclude(n.getBounds())}return t}}_n.STRtreeNode=mn,_n.xComparator=new class{get interfaces_(){return[I]}compare(t,e){return gn.compareDoubles(_n.centreX(t.getBounds()),_n.centreX(e.getBounds()))}},_n.yComparator=new class{get interfaces_(){return[I]}compare(t,e){return gn.compareDoubles(_n.centreY(t.getBounds()),_n.centreY(e.getBounds()))}},_n.intersectsOp=new class{get interfaces_(){return[IntersectsOp]}intersects(t,e){return t.intersects(e)}},_n.DEFAULT_NODE_CAPACITY=10;class vn{constructor(){vn.constructor_.apply(this,arguments)}static constructor_(){this._graph=null,this._rings=new Z,this._totalEnv=new M,this._index=null,this._nestedPt=null,this._graph=arguments[0]}buildIndex(){this._index=new _n;for(let t=0;t<this._rings.size();t++){const e=this._rings.get(t),n=e.getEnvelopeInternal();this._index.insert(n,e)}}getNestedPoint(){return this._nestedPt}isNonNested(){this.buildIndex();for(let t=0;t<this._rings.size();t++){const e=this._rings.get(t),n=e.getCoordinates(),i=this._index.query(e.getEnvelopeInternal());for(let t=0;t<i.size();t++){const r=i.get(t),o=r.getCoordinates();if(e===r)continue;if(!e.getEnvelopeInternal().intersects(r.getEnvelopeInternal()))continue;const s=xn.findPtNotNode(n,r,this._graph);if(null!==s&&Xt.isInRing(s,o))return this._nestedPt=s,!1}}return!0}add(t){this._rings.add(t),this._totalEnv.expandToInclude(t.getEnvelopeInternal())}}class bn{constructor(){bn.constructor_.apply(this,arguments)}static constructor_(){if(this._errorType=null,this._pt=null,1===arguments.length)bn.constructor_.call(this,arguments[0],null);else if(2===arguments.length){const t=arguments[1];this._errorType=arguments[0],null!==t&&(this._pt=t.copy())}}getErrorType(){return this._errorType}getMessage(){return bn.errMsg[this._errorType]}getCoordinate(){return this._pt}toString(){let t="";return null!==this._pt&&(t=" at or near point "+this._pt),this.getMessage()+t}}bn.ERROR=0,bn.REPEATED_POINT=1,bn.HOLE_OUTSIDE_SHELL=2,bn.NESTED_HOLES=3,bn.DISCONNECTED_INTERIOR=4,bn.SELF_INTERSECTION=5,bn.RING_SELF_INTERSECTION=6,bn.NESTED_SHELLS=7,bn.DUPLICATE_RINGS=8,bn.TOO_FEW_POINTS=9,bn.INVALID_COORDINATE=10,bn.RING_NOT_CLOSED=11,bn.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];class xn{constructor(){xn.constructor_.apply(this,arguments)}static constructor_(){this._parentGeometry=null,this._isSelfTouchingRingFormingHoleValid=!1,this._validErr=null,this._parentGeometry=arguments[0]}static findPtNotNode(t,e,n){const i=n.findEdge(e).getEdgeIntersectionList();for(let r=0;r<t.length;r++){const e=t[r];if(!i.isIntersection(e))return e}return null}static isValid(){if(arguments[0]instanceof R)return new xn(arguments[0]).isValid();if(arguments[0]instanceof L){const t=arguments[0];return!(E.isNaN(t.x)||E.isInfinite(t.x)||E.isNaN(t.y)||E.isInfinite(t.y))}}checkInvalidCoordinates(){if(arguments[0]instanceof Array){const t=arguments[0];for(let e=0;e<t.length;e++)if(!xn.isValid(t[e]))return this._validErr=new bn(bn.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof ot){const t=arguments[0];if(this.checkInvalidCoordinates(t.getExteriorRing().getCoordinates()),null!==this._validErr)return null;for(let e=0;e<t.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(t.getInteriorRingN(e).getCoordinates()),null!==this._validErr)return null}}checkHolesNotNested(t,e){if(t.getNumInteriorRing()<=0)return null;const n=new vn(e);for(let i=0;i<t.getNumInteriorRing();i++){const e=t.getInteriorRingN(i);e.isEmpty()||n.add(e)}n.isNonNested()||(this._validErr=new bn(bn.NESTED_HOLES,n.getNestedPoint()))}checkConsistentArea(t){const e=new an(t);if(!e.isNodeConsistentArea())return this._validErr=new bn(bn.SELF_INTERSECTION,e.getInvalidPoint()),null;e.hasDuplicateRings()&&(this._validErr=new bn(bn.DUPLICATE_RINGS,e.getInvalidPoint()))}isValid(){return this.checkValid(this._parentGeometry),null===this._validErr}checkShellInsideHole(t,e,n){const i=t.getCoordinates(),r=e.getCoordinates(),o=xn.findPtNotNode(i,e,n);if(null!==o&&!Xt.isInRing(o,r))return o;const s=xn.findPtNotNode(r,t,n);return null!==s?Xt.isInRing(s,i)?s:null:(C.shouldNeverReachHere("points in shell and hole appear to be equal"),null)}checkNoSelfIntersectingRings(t){for(let e=t.getEdgeIterator();e.hasNext();){const t=e.next();if(this.checkNoSelfIntersectingRing(t.getEdgeIntersectionList()),null!==this._validErr)return null}}checkConnectedInteriors(t){const e=new xe(t);e.isInteriorsConnected()||(this._validErr=new bn(bn.DISCONNECTED_INTERIOR,e.getCoordinate()))}checkNoSelfIntersectingRing(t){const e=new d;let n=!0;for(let i=t.iterator();i.hasNext();){const t=i.next();if(n)n=!1;else{if(e.contains(t.coord))return this._validErr=new bn(bn.RING_SELF_INTERSECTION,t.coord),null;e.add(t.coord)}}}checkHolesInShell(t,e){if(t.getNumInteriorRing()<=0)return null;const n=t.getExteriorRing(),i=n.isEmpty(),r=new je(n);for(let o=0;o<t.getNumInteriorRing();o++){const s=t.getInteriorRingN(o);let a=null;if(!s.isEmpty()){if(a=xn.findPtNotNode(s.getCoordinates(),n,e),null===a)return null;if(i||u.EXTERIOR===r.locate(a))return this._validErr=new bn(bn.HOLE_OUTSIDE_SHELL,a),null}}}checkTooFewPoints(t){if(t.hasTooFewPoints())return this._validErr=new bn(bn.TOO_FEW_POINTS,t.getInvalidPoint()),null}getValidationError(){return this.checkValid(this._parentGeometry),this._validErr}checkValid(){if(arguments[0]instanceof X)this.checkInvalidCoordinates(arguments[0].getCoordinates());else if(arguments[0]instanceof at)this.checkInvalidCoordinates(arguments[0].getCoordinates());else if(arguments[0]instanceof ut){const t=arguments[0];if(this.checkInvalidCoordinates(t.getCoordinates()),null!==this._validErr)return null;if(this.checkClosedRing(t),null!==this._validErr)return null;const e=new $e(0,t);if(this.checkTooFewPoints(e),null!==this._validErr)return null;const n=new qt;e.computeSelfNodes(n,!0,!0),this.checkNoSelfIntersectingRings(e)}else if(arguments[0]instanceof U){const t=arguments[0];if(this.checkInvalidCoordinates(t.getCoordinates()),null!==this._validErr)return null;const e=new $e(0,t);this.checkTooFewPoints(e)}else if(arguments[0]instanceof ot){const t=arguments[0];if(this.checkInvalidCoordinates(t),null!==this._validErr)return null;if(this.checkClosedRings(t),null!==this._validErr)return null;const e=new $e(0,t);if(this.checkTooFewPoints(e),null!==this._validErr)return null;if(this.checkConsistentArea(e),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(e),null!==this._validErr))return null;if(this.checkHolesInShell(t,e),null!==this._validErr)return null;if(this.checkHolesNotNested(t,e),null!==this._validErr)return null;this.checkConnectedInteriors(e)}else if(arguments[0]instanceof bt){const t=arguments[0];for(let n=0;n<t.getNumGeometries();n++){const e=t.getGeometryN(n);if(this.checkInvalidCoordinates(e),null!==this._validErr)return null;if(this.checkClosedRings(e),null!==this._validErr)return null}const e=new $e(0,t);if(this.checkTooFewPoints(e),null!==this._validErr)return null;if(this.checkConsistentArea(e),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(e),null!==this._validErr))return null;for(let n=0;n<t.getNumGeometries();n++){const i=t.getGeometryN(n);if(this.checkHolesInShell(i,e),null!==this._validErr)return null}for(let n=0;n<t.getNumGeometries();n++){const i=t.getGeometryN(n);if(this.checkHolesNotNested(i,e),null!==this._validErr)return null}if(this.checkShellsNotNested(t,e),null!==this._validErr)return null;this.checkConnectedInteriors(e)}else if(arguments[0]instanceof st){const t=arguments[0];for(let e=0;e<t.getNumGeometries();e++){const n=t.getGeometryN(e);if(this.checkValid(n),null!==this._validErr)return null}}else if(arguments[0]instanceof R){const t=arguments[0];if(this._validErr=null,t.isEmpty())return null;if(t instanceof X)this.checkValid(t);else if(t instanceof at)this.checkValid(t);else if(t instanceof ut)this.checkValid(t);else if(t instanceof U)this.checkValid(t);else if(t instanceof ot)this.checkValid(t);else if(t instanceof bt)this.checkValid(t);else{if(!(t instanceof st))throw new h(t.getGeometryType());this.checkValid(t)}}}setSelfTouchingRingFormingHoleValid(t){this._isSelfTouchingRingFormingHoleValid=t}checkShellNotNested(t,e,n){const i=t.getCoordinates(),r=e.getExteriorRing();if(r.isEmpty())return null;const o=r.getCoordinates(),s=xn.findPtNotNode(i,r,n);if(null===s)return null;if(!Xt.isInRing(s,o))return null;if(e.getNumInteriorRing()<=0)return this._validErr=new bn(bn.NESTED_SHELLS,s),null;let a=null;for(let u=0;u<e.getNumInteriorRing();u++){const i=e.getInteriorRingN(u);if(a=this.checkShellInsideHole(t,i,n),null===a)return null}this._validErr=new bn(bn.NESTED_SHELLS,a)}checkClosedRings(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this._validErr)return null;for(let e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this._validErr)return null}checkClosedRing(t){if(t.isEmpty())return null;if(!t.isClosed()){let e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this._validErr=new bn(bn.RING_NOT_CLOSED,e)}}checkShellsNotNested(t,e){for(let n=0;n<t.getNumGeometries();n++){const i=t.getGeometryN(n).getExteriorRing();for(let r=0;r<t.getNumGeometries();r++){if(n===r)continue;const o=t.getGeometryN(r);if(this.checkShellNotNested(i,o,e),null!==this._validErr)return null}}}}function En(t){return[t.x,t.y]}class In{constructor(t,e){this.geometryFactory=t||new Pt,this.ol=e||"undefined"!=typeof ol&&ol}inject(t,e,n,i,r,o,s,a){this.ol={geom:{Point:t,LineString:e,LinearRing:n,Polygon:i,MultiPoint:r,MultiLineString:o,MultiPolygon:s,GeometryCollection:a}}}read(t){const e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0}convertFromPoint(t){const e=t.getCoordinates();return this.geometryFactory.createPoint(new L(e[0],e[1]))}convertFromLineString(t){return this.geometryFactory.createLineString(t.getCoordinates().map((function(t){return new L(t[0],t[1])})))}convertFromLinearRing(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map((function(t){return new L(t[0],t[1])})))}convertFromPolygon(t){const e=t.getLinearRings();let n=null;const i=[];for(let r=0;r<e.length;r++){const t=this.convertFromLinearRing(e[r]);0===r?n=t:i.push(t)}return this.geometryFactory.createPolygon(n,i)}convertFromMultiPoint(t){const e=t.getPoints().map((function(t){return this.convertFromPoint(t)}),this);return this.geometryFactory.createMultiPoint(e)}convertFromMultiLineString(t){const e=t.getLineStrings().map((function(t){return this.convertFromLineString(t)}),this);return this.geometryFactory.createMultiLineString(e)}convertFromMultiPolygon(t){const e=t.getPolygons().map((function(t){return this.convertFromPolygon(t)}),this);return this.geometryFactory.createMultiPolygon(e)}convertFromCollection(t){const e=t.getGeometries().map((function(t){return this.read(t)}),this);return this.geometryFactory.createGeometryCollection(e)}write(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0}convertToPoint(t){return new this.ol.geom.Point([t.x,t.y])}convertToLineString(t){const e=t._points._coordinates.map(En);return new this.ol.geom.LineString(e)}convertToLinearRing(t){const e=t._points._coordinates.map(En);return new this.ol.geom.LinearRing(e)}convertToPolygon(t){const e=[t._shell._points._coordinates.map(En)];for(let n=0;n<t._holes.length;n++)e.push(t._holes[n]._points._coordinates.map(En));return new this.ol.geom.Polygon(e)}convertToMultiPoint(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(En))}convertToMultiLineString(t){const e=[];for(let n=0;n<t._geometries.length;n++)e.push(this.convertToLineString(t._geometries[n]).getCoordinates());return new this.ol.geom.MultiLineString(e)}convertToMultiPolygon(t){const e=[];for(let n=0;n<t._geometries.length;n++)e.push(this.convertToPolygon(t._geometries[n]).getCoordinates());return new this.ol.geom.MultiPolygon(e)}convertToCollection(t){const e=[];for(let n=0;n<t._geometries.length;n++)e.push(this.write(t._geometries[n]));return new this.ol.geom.GeometryCollection(e)}}var Nn,wn=n("fdeV"),Cn=n("hatQ"),On=n("TOut"),Pn=n("FlXx"),Sn=n("vog+"),Ln=n("HK6I"),Tn=n("jekj"),Mn=(Nn=function(t,e){return(Nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Nn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Rn=function(t){function e(e){var n=t.call(this)||this;n.options=e,n.id=e.id,n.insertFirst=void 0===e.insertFirst||e.insertFirst,n.stopEvent=void 0===e.stopEvent||e.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==e.className?e.className:"ol-overlay-container "+Pn.d,n.element.style.position="absolute",n.element.style.pointerEvents="auto";var i=e.autoPan;return i&&"object"!=typeof i&&(i={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=i||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addEventListener(Object(Cn.b)("element"),n.handleElementChanged),n.addEventListener(Object(Cn.b)("map"),n.handleMapChanged),n.addEventListener(Object(Cn.b)("offset"),n.handleOffsetChanged),n.addEventListener(Object(Cn.b)("position"),n.handlePositionChanged),n.addEventListener(Object(Cn.b)("positioning"),n.handlePositioningChanged),void 0!==e.element&&n.setElement(e.element),n.setOffset(void 0!==e.offset?e.offset:[0,0]),n.setPositioning(void 0!==e.positioning?e.positioning:"top-left"),void 0!==e.position&&n.setPosition(e.position),n}return Mn(e,t),e.prototype.getElement=function(){return this.get("element")},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get("map")},e.prototype.getOffset=function(){return this.get("offset")},e.prototype.getPosition=function(){return this.get("position")},e.prototype.getPositioning=function(){return this.get("positioning")},e.prototype.handleElementChanged=function(){Object(Tn.d)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(Tn.e)(this.element),Object(Ln.c)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(Ln.a)(t,On.a.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set("element",t)},e.prototype.setMap=function(t){this.set("map",t)},e.prototype.setOffset=function(t){this.set("offset",t)},e.prototype.setPosition=function(t){this.set("position",t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get("position")){var n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),r=this.getRect(i,[Object(Tn.c)(i),Object(Tn.b)(i)]),o=t||{},s=void 0===o.margin?20:o.margin;if(!Object(Sn.g)(n,r)){var a=r[0]-n[0],u=n[2]-r[2],l=r[1]-n[1],c=n[3]-r[3],h=[0,0];if(a<0?h[0]=a-s:u<0&&(h[0]=Math.abs(u)+s),l<0?h[1]=l-s:c<0&&(h[1]=Math.abs(c)+s),0!==h[0]||0!==h[1]){var p=e.getView().getCenterInternal(),f=e.getPixelFromCoordinateInternal(p);if(!f)return;var d=[f[0]+h[0],f[1]+h[1]],g=o.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(d),duration:g.duration,easing:g.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top+window.pageYOffset;return[i,r,i+e[0],r+e[1]]},e.prototype.setPositioning=function(t){this.set("positioning",t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,i=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var o="0%",s="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?o="-100%":"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(o="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?s="-100%":"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(s="-50%");var a="translate("+o+", "+s+") translate("+Math.round(t[0]+i[0])+"px, "+Math.round(t[1]+i[1])+"px)";this.rendered.transform_!=a&&(this.rendered.transform_=a,n.transform=a,n.msTransform=a)},e.prototype.getOptions=function(){return this.options},e}(Cn.a),An=n("+cQG"),Dn=n("4KU7"),Fn=n("Qs0z"),kn=n("oVSo"),Gn=n("5urs"),Bn=n("hZ4F"),Vn=n("hWN6"),zn=n("vxo4"),jn=n("m+aV"),Un=n("5Oj5"),qn=n("heo9"),Yn=n("PooM"),Xn=n("ZdQP"),Wn=n("y1k7"),Hn=n("mTvk"),Jn=n("C05f"),Zn=n("KTx3"),Qn=n("XZLj"),Kn=n("DiD3"),$n=n("7Gkf"),ti=n("rKV5"),ei=n("fJCm"),ni=n("4oW2"),ii=n("Zhvk"),ri=n.n(ii);function oi(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function si(t,e){return t<e?-1:t>e?1:0}var ai=function(t,e,n,i,r){!function t(e,n,i,r,o){for(;r>i;){if(r-i>600){var s=r-i+1,a=n-i+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-a*l/s+c)),Math.min(r,Math.floor(n+(s-a)*l/s+c)),o)}var h=e[n],p=i,f=r;for(oi(e,i,n),o(e[r],h)>0&&oi(e,i,r);p<f;){for(oi(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;o(e[f],h)>0;)f--}0===o(e[i],h)?oi(e,i,f):oi(e,++f,r),f<=n&&(i=f+1),n<=f&&(r=f-1)}}(t,e,n||0,i||t.length-1,r||si)};function ui(t,e){if(!(this instanceof ui))return new ui(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function li(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function ci(t,e){hi(t,0,t.children.length,e,t)}function hi(t,e,n,i,r){r||(r=vi(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],pi(r,t.leaf?i(o):o);return r}function pi(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function fi(t,e){return t.minX-e.minX}function di(t,e){return t.minY-e.minY}function gi(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function yi(t){return t.maxX-t.minX+(t.maxY-t.minY)}function _i(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function mi(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function vi(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function bi(t,e,n,i,r){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(o=e+Math.ceil((n-e)/i/2)*i,ai(t,o,e,n,r),s.push(e,o,o,n))}ui.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!mi(t,e))return n;for(var r,o,s,a,u=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],mi(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):_i(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!mi(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],mi(t,s=e.leaf?n(o):o)){if(e.leaf||_i(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=vi([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),i=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(r=li(t,s.children,e)))return s.children.splice(r,1),u.push(s),this._condense(u),this;o||s.leaf||!_i(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(u.push(s),l.push(n),n=0,i=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:fi,compareMinY:di,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,s=this._maxEntries;if(o<=s)return ci(r=vi(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=vi([])).leaf=!1,r.height=i;var a,u,l,c,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(bi(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(bi(t,a,l=Math.min(a+p-1,n),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),r.children.push(this._build(t,u,c,i-1));return ci(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,u,l,c,h,p,f;i.push(e),!e.leaf&&i.length-1!==n;){for(c=h=1/0,r=0,o=e.children.length;r<o;r++)u=gi(s=e.children[r]),p=t,f=s,(l=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=n?t:(0,this.toBBox)(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),pi(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=vi(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,ci(n,this.toBBox),ci(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=vi([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ci(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,a,u,l,c,h,p,f,d,g,y;for(u=l=1/0,i=e;i<=n-e;i++)h=r=hi(t,0,i,this.toBBox),p=o=hi(t,i,n,this.toBBox),f=Math.max(h.minX,p.minX),d=Math.max(h.minY,p.minY),g=Math.min(h.maxX,p.maxX),y=Math.min(h.maxY,p.maxY),s=Math.max(0,g-f)*Math.max(0,y-d),a=gi(r)+gi(o),s<u?(u=s,c=i,l=a<l?a:l):s===u&&a<l&&(l=a,c=i);return c},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:fi,r=t.leaf?this.compareMinY:di;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,s=this.toBBox,a=hi(t,0,e,s),u=hi(t,n-e,n,s),l=yi(a)+yi(u);for(r=e;r<n-e;r++)o=t.children[r],pi(a,t.leaf?s(o):o),l+=yi(a);for(r=n-e-1;r>=e;r--)o=t.children[r],pi(u,t.leaf?s(o):o),l+=yi(u);return l},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)pi(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():ci(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var xi=ui;function Ei(t){var e=[t[0],t[1]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],[t[2],t[3]],[t[0],t[3]],e]]}}}function Ii(t){var e=[1/0,1/0,-1/0,-1/0];return Object(ni.coordEach)(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}var Ni=function(t){var e=xi(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=Ei(e)).bbox=e}else t.bbox=t.bbox?t.bbox:Ii(t);return xi.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var n=Ei(t);n.bbox=t,e.push(n)})):Object(ni.featureEach)(t,(function(t){t.bbox=t.bbox?t.bbox:Ii(t),e.push(t)})),xi.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=Ei(e)).bbox=e}return xi.prototype.remove.call(this,t)},e.clear=function(){return xi.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:xi.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return xi.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:xi.prototype.all.call(this)}},e.toJSON=function(){return xi.prototype.toJSON.call(this)},e.fromJSON=function(t){return xi.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Ii(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e};function wi(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=function t(e){var n={};return e?(Object.keys(e).forEach((function(i){var r=e[i];n[i]="object"==typeof r?null===r?null:r.length?r.map((function(t){return t})):t(r):r})),n):n}(t.properties),e.geometry=Ci(t.geometry),e}function Ci(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Ci(t)})),e):(e.coordinates=function t(e){return"object"!=typeof e[0]?e.slice():e.map((function(e){return t(e)}))}(t.coordinates),e)}var Oi={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function Pi(t,e,n){if(!Di(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&Fi(i),r&&ki(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function Si(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ai(t[0])||!Ai(t[1]))throw new Error("coordinates must contain numbers");return Pi({type:"Point",coordinates:t},e,n)}function Li(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!Ai(t[0][1])||!Ai(t[0][1]))throw new Error("coordinates must contain numbers");return Pi({type:"LineString",coordinates:t},e,n)}function Ti(t,e){if(!Di(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&Fi(n),i&&ki(i);var r={type:"FeatureCollection"};return i&&(r.id=i),n&&(r.bbox=n),r.features=t,r}function Mi(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function Ri(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function Ai(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Di(t){return!!t&&t.constructor===Object}function Fi(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!Ai(t))throw new Error("bbox must only contain numbers")}))}function ki(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function Gi(t,e,n){if(null!==t)for(var i,r,o,s,a,u,l,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,y=d?t.features.length:1,_=0;_<y;_++){a=(c=!!(l=d?t.features[_].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var v=0,b=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var x=s.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,p,_,v,b))return!1;p++,v++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],p,_,v,b))return!1;p++,"MultiPoint"===x&&v++}"LineString"===x&&v++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(r=0;r<u[i].length-h;r++){if(!1===e(u[i][r],p,_,v,b))return!1;p++}"MultiLineString"===x&&v++,"Polygon"===x&&b++}"Polygon"===x&&v++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for("MultiPolygon"===x&&(b=0),r=0;r<u[i].length;r++){for(o=0;o<u[i][r].length-h;o++){if(!1===e(u[i][r][o],p,_,v,b))return!1;p++}b++}v++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===Gi(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Bi(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Vi(t){var e=[];return Gi(t,(function(t){e.push(t)})),e}function zi(t,e){!function(t,e){var n,i,r,o,s,a,u,l,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(l=f?t.features[n].properties:d?t.properties:{},c=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(u=!!(a=f?t.features[n].geometry:d?t.geometry:t)&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=u?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,c,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],p,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,c,h))return!1;p++}}(t,(function(t,n,i,r,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Pi(t,i,{bbox:r,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++)if(!1===e(Pi({type:s,coordinates:t.coordinates[u]},i),n,u))return!1}))}function ji(t,e){zi(t,(function(t,n,i){var r=0;if(t.geometry){var o,s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s)return!1!==Gi(t,(function(s,a,u,l,c){if(void 0!==o){var h=Li([o,s],t.properties);if(!1===e(h,n,i,c,r))return!1;r++,o=s}else o=s}))&&void 0}}))}function Ui(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function qi(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Yi(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}var Xi=function(t){if(!t)throw new Error("geojson is required");var e=[];return zi(t,(function(t){!function(t,e){var n=[],i=t.geometry;switch(i.type){case"Polygon":n=qi(i);break;case"LineString":n=[qi(i)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,i){var r,o,s,a,u,l,c=Li([t,i],e);return c.bbox=[(s=(r=t)[0])<(u=(o=i)[0])?s:u,(a=r[1])<(l=o[1])?a:l,s>u?s:u,a>l?a:l],n.push(c),i})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),Ti(e)},Wi=function t(e,n,i){if(!Di(i=i||{}))throw new Error("options is invalid");if(!0===i.final)return function(e,n){return(t(n,e)+180)%360}(e,n);var r=Ui(e),o=Ui(n),s=Ri(r[0]),a=Ri(o[0]),u=Ri(r[1]),l=Ri(o[1]),c=Math.sin(a-s)*Math.cos(l),h=Math.cos(u)*Math.sin(l)-Math.sin(u)*Math.cos(l)*Math.cos(a-s);return Mi(Math.atan2(c,h))},Hi=function(t,e,n){if(!Di(n=n||{}))throw new Error("options is invalid");var i=n.units,r=Ui(t),o=Ui(e),s=Ri(o[1]-r[1]),a=Ri(o[0]-r[0]),u=Ri(r[1]),l=Ri(o[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(l);return function(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Oi[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),i)},Ji=function(t,e,n,i){if(!Di(i=i||{}))throw new Error("options is invalid");var r=i.units,o=i.properties,s=Ui(t),a=Ri(s[0]),u=Ri(s[1]),l=Ri(n),c=function(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Oi[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}(e,r),h=Math.asin(Math.sin(u)*Math.cos(c)+Math.cos(u)*Math.sin(c)*Math.cos(l));return Si([Mi(a+Math.atan2(Math.sin(l)*Math.sin(c)*Math.cos(u),Math.cos(c)-Math.sin(u)*Math.sin(h))),Mi(h)],o)};function Zi(t,e){var n=qi(t),i=qi(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],u=i[0][0],l=i[0][1],c=i[1][0],h=i[1][1],p=(h-l)*(s-r)-(c-u)*(a-o);if(0===p)return null;var f=((c-u)*(o-l)-(h-l)*(r-u))/p,d=((s-r)*(o-l)-(a-o)*(r-u))/p;return f>=0&&f<=1&&d>=0&&d<=1?Si([r+f*(s-r),o+f*(a-o)]):null}var Qi=function(t,e){var n={},i=[];if("LineString"===t.type&&(t=Pi(t)),"LineString"===e.type&&(e=Pi(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var r=Zi(t,e);return r&&i.push(r),Ti(i)}var o=Ni();return o.load(Xi(e)),Bi(Xi(t),(function(t){Bi(o.search(t),(function(e){var r=Zi(t,e);if(r){var o=qi(r).join(",");n[o]||(n[o]=!0,i.push(r))}}))})),Ti(i)},Ki=function(t,e,n){if(!Di(n=n||{}))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var r=Si([1/0,1/0],{dist:1/0}),o=0;return zi(t,(function(t){for(var i=qi(t),s=0;s<i.length-1;s++){var a=Si(i[s]);a.properties.dist=Hi(e,a,n);var u=Si(i[s+1]);u.properties.dist=Hi(e,u,n);var l=Hi(a,u,n),c=Math.max(a.properties.dist,u.properties.dist),h=Wi(a,u),p=Ji(e,c,h+90,n),f=Ji(e,c,h-90,n),d=Qi(Li([p.geometry.coordinates,f.geometry.coordinates]),Li([a.geometry.coordinates,u.geometry.coordinates])),g=null;d.features.length>0&&((g=d.features[0]).properties.dist=Hi(e,g,n),g.properties.location=o+Hi(a,g,n)),a.properties.dist<r.properties.dist&&((r=a).properties.index=s,r.properties.location=o),u.properties.dist<r.properties.dist&&((r=u).properties.index=s+1,r.properties.location=o+l),g&&g.properties.dist<r.properties.dist&&((r=g).properties.index=s),o+=l}})),r};function $i(t,e,n,i){var r=n[0],o=n[1],s=t[0],a=t[1],u=e[0],l=e[1],c=u-s,h=l-a;return 0==(n[0]-s)*h-(n[1]-a)*c&&(i?"start"===i?Math.abs(c)>=Math.abs(h)?c>0?s<r&&r<=u:u<=r&&r<s:h>0?a<o&&o<=l:l<=o&&o<a:"end"===i?Math.abs(c)>=Math.abs(h)?c>0?s<=r&&r<u:u<r&&r<=s:h>0?a<=o&&o<l:l<o&&o<=a:"both"===i?Math.abs(c)>=Math.abs(h)?c>0?s<r&&r<u:u<r&&r<s:h>0?a<o&&o<l:l<o&&o<a:void 0:Math.abs(c)>=Math.abs(h)?c>0?s<=r&&r<=u:u<=r&&r<=s:h>0?a<=o&&o<=l:l<=o&&o<=a)}var tr=function(t,e,n){var i=(n=n||{}).ignoreEndVertices;if(!Di(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var r=Ui(t),o=qi(e),s=0;s<o.length-1;s++){var a=!1;if(i&&(0===s&&(a="start"),s===o.length-2&&(a="end"),0===s&&s+1===o.length-1&&(a="both")),$i(o[s],o[s+1],r,a))return!0}return!1},er=Array.prototype.slice;function nr(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function ir(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?t===e:function(t,e,n){var i,r;if(rr(t)||rr(e))return!1;if(t.prototype!==e.prototype)return!1;if(nr(t))return!!nr(e)&&ir(t=er.call(t),e=er.call(e),n);if(or(t)){if(!or(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var o=Object.keys(t),s=Object.keys(e)}catch(a){return!1}if(o.length!==s.length)return!1;for(o.sort(),s.sort(),i=o.length-1;i>=0;i--)if(o[i]!==s[i])return!1;for(i=o.length-1;i>=0;i--)if(!ir(t[r=o[i]],e[r],n))return!1;return typeof t==typeof e}(t,e,n))}function rr(t){return null==t}function or(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function sr(t,e){var n=qi(e),i=qi(t),r=i[0],o=i[i.length-1],s=t.geometry.coordinates;return ir(n[0],r)?s.unshift(n[1]):ir(n[0],o)?s.push(n[1]):ir(n[1],r)?s.unshift(n[0]):ir(n[1],o)&&s.push(n[0]),t}var ar=n("WRQj"),ur=n.n(ar),lr=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=Yi(t);if(n!==Yi(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new ur.a({precision:6}).compare(t,e))return!1;var i=0;switch(n){case"MultiPoint":var r=Vi(t),o=Vi(e);r.forEach((function(t){o.forEach((function(e){t[0]===e[0]&&t[1]===e[1]&&i++}))}));break;case"LineString":case"MultiLineString":ji(t,(function(t){ji(e,(function(e){(function(t,e,n){if(!Di(n=n||{}))throw new Error("options is invalid");var i,r=n.tolerance||0,o=[],s=Ni();return s.load(Xi(t)),ji(e,(function(t){var e=!1;Bi(s.search(t),(function(n){if(!1===e){var o=qi(t).sort(),s=qi(n).sort();ir(o,s)||(0===r?tr(o[0],n)&&tr(o[1],n):Ki(n,o[0]).properties.dist<=r&&Ki(n,o[1]).properties.dist<=r)?(e=!0,i=i?sr(i,t):t):(0===r?tr(s[0],t)&&tr(s[1],t):Ki(t,s[0]).properties.dist<=r&&Ki(t,s[1]).properties.dist<=r)&&(i=i?sr(i,n):n)}})),!1===e&&i&&(o.push(i),i=void 0)})),i&&o.push(i),Ti(o)})(t,e).features.length&&i++}))}));break;case"Polygon":case"MultiPolygon":ji(t,(function(t){ji(e,(function(e){Qi(t,e).features.length&&i++}))}))}return i>0},cr=n("+4jp"),hr=function(){for(var t=new cr.GeoJSONReader,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=cr.UnionOp.union(e,t.read(JSON.stringify(arguments[n].geometry)));var i=new cr.GeoJSONWriter;return{type:"Feature",geometry:e=i.write(e),properties:arguments[0].properties}},pr=n("sOKj"),fr=n("q/Q7"),dr=n.n(fr),gr=n("mWib"),yr=n("OZ4H"),_r=n("W1gw"),mr=n("2kYt");const vr=["mapPopup"],br=["initDrawTooltip"],xr=["drawTooltip"],Er=["modifyTooltip"],Ir=["copyTooltip"],Nr=["copyIntersectingTooltip"];function wr(t,e){if(1&t){const t=i.Xb();i.Wb(0,"div",8),i.ec("click",(function(){return i.zc(t),i.ic().clipPolygons()})),i.Jc(1," Clip selected shapes "),i.Vb()}}function Cr(t,e){1&t&&(i.Wb(0,"div",12),i.Jc(1," Press ESC to remove vertex or press Backspace to start over "),i.Vb())}function Or(t,e){1&t&&(i.Wb(0,"div",12),i.Jc(1," Close shape to edit attributes "),i.Vb())}const Pr=function(){return{moveFullScreen:!0}};let Sr=(()=>{class t extends pr.a{constructor(t,e,n,r,o){super(t,e,r),this._dialog=t,this.mapService=e,this.snackBar=n,this.spinner=r,this.usersDatasetService=o,this.mode="erm",this.styleParameters={},this.readOnly=!1,this.drawingLayer=new Jn.a(null),this.isDrawingMode=new Jn.a(!1),this.createMinimumConvexPolygonEvent=new Jn.a(null),this.detailedDatasetIds=new Jn.a([]),this.occurrenceDatasetIds=new Jn.a([]),this.zoomToDatasetExtent=new Jn.a(null),this.deleteLayer=new Jn.a(null),this.speciesModelMap=new Jn.a({}),this.disableSpeciesModel=new Jn.a(void 0),this.unselectSelectedPolygons=new i.o,this.presentActiveLayer=new i.o,this.deletePolygon=new i.o(null),this.createPolygon=new i.o(null),this.createdPolygon=new i.o,this.updatedPolygons=new i.o,this.deletedPolygon=new i.o,this.activeLayerId=null,this.activeLayer=null,this.layerDatasetId="",this.layerMolidId="",this.vectorLayers={},this.draws={},this.selectedFeatures=[],this.currentDraw=null,this.currentModify=null,this.interactionStyle=new jn.c({fill:new Un.a({color:"rgba(255,108,47,0.4)"}),stroke:new qn.a({color:"#333333",width:2}),image:new Yn.a({radius:3,stroke:new qn.a({width:.2,color:"#333333"})})}),this.polygonNumberStyle=t=>new jn.c({text:new Xn.a({text:t,fill:new Un.a({color:"rgba(0,0,0,1)"}),scale:2})}),this.pointCount=0,this.selectedStyle=new jn.c({image:new Yn.a({radius:4,fill:new Un.a({color:"#ffffff"}),stroke:new qn.a({color:"#000000",width:2})}),geometry:t=>{const e=t.getGeometry();if(e instanceof Dn.a){const t=[];return e.getCoordinates().map(e=>e.map(e=>e.map(e=>t.push(e)))),new Fn.a(t)}}}),this.parser=new In,this.parser.inject(kn.a,Gn.a,Bn.a,Vn.a,Fn.a,zn.a,Dn.a)}get isEditPointCount(){return this.pointCount<3}ngOnInit(){super.ngOnInit(),this.drawingLayer.subscribe(t=>{t&&(this.toggleCurrentModifyLayers(!1),t&&this.activeLayerId!==t&&(this.activeLayer&&this.activeLayer.setVisible(!1),Object.keys(this.vectorLayers).includes(t)?(this.activeLayer=this.vectorLayers[t],this.activeLayerId=t,this.currentDraw=this.draws[t],this.vectorLayers[t].setVisible(!0)):(this.activeLayerId=t,this.addInteraction(t))))}),this.isDrawingMode.subscribe(t=>{this.toggleCurrentModifyLayers(!!t)}),this.createMinimumConvexPolygonEvent.subscribe(t=>{if(t){const t=this.map.getOccurenceVisibleFeatures();if(0!==t.length){const e=t.map(t=>{const e=t.getGeometry();return e instanceof Dn.a?Object(ei.multiPolygon)(e.getCoordinates()):e instanceof Vn.a?Object(ei.multiPolygon)(new Dn.a([e]).getCoordinates()):void 0}).filter(t=>!!t),n=function(t,e={}){e.concavity=e.concavity||1/0;const n=[];if(Object(ni.coordEach)(t,t=>{n.push([t[0],t[1]])}),!n.length)return null;const i=ri()(n,e.concavity);return i.length>3?Object(ei.polygon)([i]):null}(Object(ei.featureCollection)(e)),i=(new ti.a).readFeature(n.geometry),r=new Dn.a([]),o=i.getGeometry();o instanceof Vn.a&&(r.appendPolygon(o),i.setGeometry(r)),i.setStyle([this.interactionStyle,this.polygonNumberStyle(this.getCurrentPolygonNumber())]),this.activeLayer.getSource().addFeature(i),this.createdPolygon.emit({key:this.activeLayerId,value:i})}}}),this.presentActiveLayer.subscribe(t=>{this.selectedFeatures.map(t=>t.setStyle([this.interactionStyle,this.polygonNumberStyle(this.getPolygonIndexInLayer(t.ol_uid))])),this.selectedFeatures=[],this.modifyTooltipOverlay.setPosition(void 0),this.activeLayer.setVisible(t)}),this.deleteLayer.subscribe(t=>{t&&this.removeLayer(t)}),this.speciesModelMap.pipe(Object(gr.a)(500)).subscribe(({molid:t,threshold_raw:e,as_binary:n})=>{t&&e&&this.mapService.updateSpeciesModelMap(t,e,void 0,n)}),this.disableSpeciesModel.subscribe(()=>this.mapService.updateModelTileUrl("OFF")),this.unselectSelectedPolygons.subscribe(()=>{this.selectedFeatures.map(t=>t.setStyle([this.interactionStyle,this.polygonNumberStyle(this.getPolygonIndexInLayer(t.ol_uid))])),this.selectedFeatures=[]}),this.deletePolygon.subscribe(t=>{if(t){const e=this.activeLayer.getSource().getFeatures().find(e=>e.ol_uid===t);e&&(this.activeLayer.getSource().removeFeature(e),this.renameAllFeaturesFromActiveLayer())}}),this.createPolygon.subscribe(t=>{if(t){Object.keys(this.vectorLayers).includes(t.key)||this.addInteraction(t.key,!0);const e=t.value;e.setStyle([this.interactionStyle,this.polygonNumberStyle(this.getPolygonNumber(t.key))]),this.vectorLayers[t.key].getSource().addFeature(e),this.renameAllFeaturesFromActiveLayer()}}),this.detailedDatasetIds.subscribe(t=>{t&&this.activeLayerId&&(this.mapService.updateSelectedLayers(t),this.mapService.updateDetailedMap(this.activeLayerId,t,this.occurrenceDatasetIds.getValue()))}),this.zoomToDatasetExtent.subscribe(t=>{t&&this.mapService.zoomToDatasetExtent(t)})}clipPolygons(){if(2===this.selectedFeatures.length){const t=this.selectedFeatures.map(t=>{const e=t.getGeometry();if(e instanceof Dn.a)return Object(ei.multiPolygon)(e.getCoordinates())}),e=dr()(t[0],t[1]);if(e.geometry.coordinates.length>0&&"Polygon"===e.geometry.type){const t=new Dn.a([new Vn.a(e.geometry.coordinates)]),n=new wn.a(t);n.setId(e.id),n.setStyle([this.polygonNumberStyle(this.getCurrentPolygonNumber()),this.interactionStyle]),this.activeLayer.getSource().addFeature(n),this.createdPolygon.emit({key:this.activeLayerId,value:n}),this.selectedFeatures.forEach(t=>{this.activeLayer.getSource().removeFeature(t),this.renameAllFeaturesFromActiveLayer(),this.deletedPolygon.emit({key:this.activeLayerId,value:t})})}this.selectedFeatures.forEach(t=>{t.setStyle([this.interactionStyle])}),this.selectedFeatures=[],this.overlay.setPosition(void 0)}}dissolvePolygons(){if(this.selectedFeatures.length>1){const t=[];this.selectedFeatures.map(e=>{const n=e.getGeometry();n instanceof Dn.a&&n.getPolygons().map(e=>{e instanceof Vn.a&&t.push(Object(ei.polygon)(e.getCoordinates()))})});const e=function(t,e){if(!Di(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;!function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0;i<t.features.length;i++){var r=t.features[i];if(!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||"Polygon"!==r.geometry.type)throw new Error("Invalid input to "+n+": must be a Polygon, given "+r.geometry.type)}}(t,0,"dissolve");var i=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return wi(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return wi(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ci(t);default:throw new Error("unknown GeoJSON type")}}(t),r=i.features,o=[];r.forEach((function(t,e){t.properties.origIndexPosition=e}));var s=Ni();for(var a in s.load(i),r){var u=r[a],l=!1;if(s.search(u).features.forEach((function(t){u=r[a];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var i=function(t,e,n){var i,r;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach((function(e,n){var o=function(t,e){return t-e}(e,t);o>=0&&(void 0===r||o<r)&&(r=o,i=n)})),i}(e,o);0!==i&&(e-=i)}if(e!==+a){var c,h,p,f=r[e];f&&u&&(void 0!==n&&f.properties[n]!==u.properties[n]||lr(u,f)&&(c=f,h=Li(Vi(u)),p=Li(Vi(c)),Qi(h,p).features.length>0)&&(r[a]=hr(u,f),o.push(t.properties.origIndexPosition),o.sort((function(t,e){return t-e})),s.remove(t),r.splice(e,1),u.properties.origIndexPosition=a,s.remove(u,(function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition})),l=!0))}})),l){if(!u)continue;u.properties.origIndexPosition=a,s.insert(u),a--}}return r.forEach((function(t){delete t.properties.origIndexPosition,delete t.bbox})),i}(Object(ei.featureCollection)(t)),n=new Dn.a([]);e.features.map(t=>{n.appendPolygon(new Vn.a(t.geometry.coordinates))});const i=new wn.a(n);this.activeLayer.getSource().addFeature(i),this.createdPolygon.emit({key:this.activeLayerId,value:i}),this.selectedFeatures.forEach(t=>{this.activeLayer.getSource().removeFeature(t),this.selectedFeatures=[],this.deletedPolygon.emit({key:this.activeLayerId,value:t})}),this.renameAllFeaturesFromActiveLayer(),this.overlay.setPosition(void 0)}}ngAfterViewInit(){this.overlay=new Rn({element:this.popupElement.nativeElement,autoPan:!0,autoPanAnimation:{duration:250}}),this.map.map.addOverlay(this.overlay),this.drawTooltipOverlay=new Rn({element:this.drawTooltipElement.nativeElement,autoPan:!0,autoPanAnimation:{duration:250}}),this.map.map.addOverlay(this.drawTooltipOverlay),this.modifyTooltipOverlay=new Rn({element:this.modifyTooltipElement.nativeElement,autoPan:!0,autoPanAnimation:{duration:250}}),this.map.map.addOverlay(this.modifyTooltipOverlay),this.copyTooltipOverlay=new Rn({element:this.copyTooltipElement.nativeElement,autoPan:!0,autoPanAnimation:{duration:250}}),this.map.map.addOverlay(this.copyTooltipOverlay),this.copyIntersectingTooltipOverlay=new Rn({element:this.copyIntersectingTooltipElement.nativeElement,autoPan:!0,autoPanAnimation:{duration:250}}),this.map.map.addOverlay(this.copyIntersectingTooltipOverlay)}toggleCurrentModifyLayers(t){this.currentDraw&&this.currentDraw.setActive(t),this.currentModify&&this.currentModify.setActive(t)}getPolygonIndexInLayer(t){return(this.activeLayer.getSource().getFeatures().findIndex(e=>e.ol_uid===t)+1).toString()}renameAllFeaturesFromActiveLayer(){this.activeLayer.getSource().getFeatures().map((t,e)=>{t.setStyle([this.polygonNumberStyle((e+1).toString()),this.interactionStyle])})}getCurrentPolygonNumber(){return(this.activeLayer.getSource().getFeatures().length+1).toString()}getPolygonNumber(t){return(this.vectorLayers[t].getSource().getFeatures().length+1).toString()}addInteraction(t,e){const n=new Hn.a({source:new Wn.a({wrapX:!1}),style:[this.interactionStyle]});this.vectorLayers[t]=n,e?this.vectorLayers[t].setVisible(!1):this.activeLayer=n,this.map.addLayer(n);const i=new r.a({source:this.vectorLayers[t].getSource(),type:Kn.a.MULTI_POLYGON,geometryFunction:(t,e)=>{if(e)if(t[0][0].length){e.setCoordinates([t[0].concat([t[0][0]])]);const n=t[0].length-1;n!==this.pointCount&&(this.drawTooltipOverlay.setPosition(t[0][t[0].length-2]),this.pointCount=n)}else e.setCoordinates([]);else e=new Vn.a(t);return e}});i.on("drawstart",()=>{this.hideMouseTooltip()}),i.on("drawend",t=>{this.pointCount=0;const e=this.parser.read(t.feature.getGeometry()),n=new xn(e);n.isValid()?(t.feature.setStyle([this.interactionStyle,this.polygonNumberStyle(this.getCurrentPolygonNumber())]),this.createdPolygon.emit({key:this.activeLayerId,value:t.feature}),this.drawTooltipOverlay.setPosition(void 0)):(this.snackBar.open(n.getValidationError(e),"Dismiss"),this.drawTooltipOverlay.setPosition(void 0),this.activeLayer.getSource().once("addfeature",t=>{this.activeLayer.getSource().removeFeature(t.feature)}))}),this.currentDraw=i,this.draws[t]=i,this.map.addInteraction(i),this.isDrawingMode.getValue()||this.currentDraw.setActive(!1)}ngOnDestroy(){this.mapService.updateDetailedMap(this.activeLayerId,[],[]),super.ngOnDestroy()}ngOnChanges(t){super.ngOnChanges(t)}mouseOver(){!this.tooltipSubscription&&this.isDrawingMode.getValue()&&0===this.pointCount&&(this.tooltipSubscription=Object(Zn.a)(document,"mousemove").subscribe(t=>{this.showMouseTooltip(t.clientX,t.clientY)}))}mouseOut(){this.tooltipSubscription&&this.hideMouseTooltip()}showMouseTooltip(t,e){this.initDrawTooltipElement.nativeElement.style.display="block",this.initDrawTooltipElement.nativeElement.style.bottom=`calc(100% - ${e-55}px)`,this.initDrawTooltipElement.nativeElement.style.right=`calc(100vw - ${t}px - 230px)`}hideMouseTooltip(){this.tooltipSubscription&&this.tooltipSubscription.unsubscribe(),this.tooltipSubscription=null,this.initDrawTooltipElement.nativeElement.style.display="none"}addFeatureFromExistingDataset(){this.copyTooltipOverlay.setPosition(void 0),this.usersDatasetService.featureGeometry(this.layerDatasetId,this.layerMolidId).toPromise().then(t=>{const e=new Dn.a(t.records[0].geom.coordinates);e.transform("EPSG:4326","EPSG:3857");const n=new wn.a(e);n.setStyle([this.interactionStyle,this.polygonNumberStyle(this.getPolygonNumber(this.activeLayerId))]),this.activeLayer.getSource().addFeature(n),this.createdPolygon.emit({key:this.activeLayerId,value:n})},()=>this.snackBar.open("API Error: Error on fetching feature geometry","Dismiss"))}emptyClickHandler(t){this.copyTooltipOverlay.setPosition(void 0)}speciesClickHandler(t,e){if(!this.readOnly&&(this.copyTooltipOverlay.setPosition(void 0),this.copyIntersectingTooltipOverlay.setPosition(void 0),this.currentModify&&this.map.map.removeInteraction(this.currentModify),!this.isDrawingMode.getValue())){const n=t.filter(t=>void 0===t.get("layer")).filter(t=>!(t.getGeometry()instanceof kn.a)),i=t.filter(t=>void 0!==t.get("layer")&&"occurrence"!==t.get("layer"));n.length>=1?(this.overlay.setPosition(void 0),n.forEach(t=>{this.selectedFeatures.includes(t)?(t.setStyle([this.interactionStyle,this.polygonNumberStyle(this.getPolygonIndexInLayer(t.ol_uid))]),this.selectedFeatures.splice(this.selectedFeatures.indexOf(t),1),n.length<2&&this.overlay.setPosition(void 0),this.modifyTooltipOverlay.setPosition(void 0)):(t.setStyle([this.interactionStyle,this.selectedStyle,this.polygonNumberStyle(this.getPolygonIndexInLayer(t.ol_uid))]),this.selectedFeatures.push(t),this.modifyTooltipOverlay.setPosition(e.coordinate),this.selectedFeatures.length>1&&this.overlay.setPosition(e.coordinate));const i=new o.a({features:new An.a(this.selectedFeatures),deleteCondition:t=>Object($n.j)(t)&&Object($n.k)(t)});this.map.addInteraction(i),i.on("modifystart",t=>{this.modifyTooltipOverlay.setPosition(t.mapBrowserEvent.coordinate)}),i.on("modifyend",t=>{const e=t.features.getArray().filter((t,e,n)=>n.indexOf(t)===e);this.updatedPolygons.emit({key:this.activeLayerId,value:new An.a(e)})}),this.currentModify=i})):i.length>0&&(i.length>1?this.copyIntersectingTooltipOverlay.setPosition(void 0):(this.copyTooltipOverlay.setPosition(e.coordinate),this.layerDatasetId=i[0].getProperties().dataset_id,this.layerMolidId=i[0].getProperties().molid))}}deleteFeatures(t){"Delete"!==t.key&&"Backspace"!==t.key||this.isDrawingMode.getValue()||this.selectedFeatures.forEach(t=>{this.activeLayer.getSource().removeFeature(t),this.renameAllFeaturesFromActiveLayer(),this.pointCount=0,this.selectedFeatures=[],this.deletedPolygon.emit({key:this.activeLayerId,value:t})}),"Escape"===t.key&&this.isDrawingMode.getValue()&&this.currentDraw.removeLastPoint(),"Backspace"===t.key&&this.isDrawingMode.getValue()&&(this.currentDraw.abortDrawing(),setTimeout(()=>this.drawTooltipOverlay.setPosition(void 0),2e3))}removeLayer(t){return this.map.removeLayer(this.vectorLayers[t])}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(yr.b),i.Qb(Qn.d),i.Qb(_r.a),i.Qb(Qn.h),i.Qb(Qn.k))},t.\u0275cmp=i.Kb({type:t,selectors:[["mol-erm-map"]],viewQuery:function(t,e){var n;1&t&&(i.Pc(vr,!0),i.Pc(br,!0),i.Pc(xr,!0),i.Pc(Er,!0),i.Pc(Ir,!0),i.Pc(Nr,!0)),2&t&&(i.uc(n=i.fc())&&(e.popupElement=n.first),i.uc(n=i.fc())&&(e.initDrawTooltipElement=n.first),i.uc(n=i.fc())&&(e.drawTooltipElement=n.first),i.uc(n=i.fc())&&(e.modifyTooltipElement=n.first),i.uc(n=i.fc())&&(e.copyTooltipElement=n.first),i.uc(n=i.fc())&&(e.copyIntersectingTooltipElement=n.first))},hostBindings:function(t,e){1&t&&i.ec("mouseover",(function(){return e.mouseOver()}))("mouseout",(function(){return e.mouseOut()}))("keydown",(function(t){return e.deleteFeatures(t)}),!1,i.xc)},inputs:{styleParameters:"styleParameters",readOnly:"readOnly",drawingLayer:"drawingLayer",isDrawingMode:"isDrawingMode",createMinimumConvexPolygonEvent:"createMinimumConvexPolygonEvent",detailedDatasetIds:"detailedDatasetIds",occurrenceDatasetIds:"occurrenceDatasetIds",zoomToDatasetExtent:"zoomToDatasetExtent",deleteLayer:"deleteLayer",speciesModelMap:"speciesModelMap",disableSpeciesModel:"disableSpeciesModel",unselectSelectedPolygons:"unselectSelectedPolygons",presentActiveLayer:"presentActiveLayer",deletePolygon:"deletePolygon",createPolygon:"createPolygon"},outputs:{createdPolygon:"createdPolygon",updatedPolygons:"updatedPolygons",deletedPolygon:"deletedPolygon"},features:[i.zb,i.Ab],decls:34,vars:10,consts:[["id","map"],[1,"map-logos"],["href","https://google.com/","target","_blank","title","Google"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARAAAABcCAYAAACm5+q2AAAXGElEQVR4Ae1dC5QcVZm+OtOBwC6CwiqCCBIQkAWSqpqEkNhdt3uyQeJBgSi4uwoIihtchJgF5TGarpoJicACCkFANuGBBhcQH5DMJAH0CCjIQ1hYfBAeZPoRkklVdR6ZZHrvt+a4pLdn5r/Vdbuqh/udc0/nMdPTZ+rWV//9/+//fhYHZnat2yvtVEzueqdx159ju8Fltus73PF7xN/ni79fIta52e5gVtr1j053VXdnGhoa70ykezYfzJ3KedwN7rJd/8/itSqzMnlvu3h9Xnzvzdz1/ynd5e3LNDQ0xi7SCyoHcjf4ZiYfPAsSiHTlvSHxvqtsJzi7c9HQnkxDQ2NsgLvedNvx78u43g7c7KqXIJIB7voLpzvB/ixh0NAwf3hqdbTFGNOw8xun8nzwsCqiIEQlm2zXX4D8CtPQ0ATSGshdWfmgII4f4SZOxHK8fiRnmYaGJpAEo1p9F3eCM3GEwI2btAVSS3dt2JtpaGgCSRZwTOBusAw3aqJX3n8l2xNMZBoamkCSgdz8jYdxN3gpCQRBz414pzANDU0giUiUrldxk2fcoGi73muZfFDI5L0tUZd9oUNhGhqaQOJBxvWzGderRJCb+L14vZa7/ul2T3DsrK7qHvXyK9N6BvbhTqUDilTb9W8TP/uNsD8TJWUI0JiGhiaQ5iOb9zOIEsLewFCf2k5wORSpjSRt005liiCyGzN5P9DkoaEJpAXAXf+YjBtsDCnyesHO+2eIXpZ2FiEQndiu/y3uBr4mDw1NIAlFZ5f/d8hLhCAPnzv+10AccWlQNHloaAKJEbOXVdtsN1gtH3X4v84t2HRQk49YnxVE4mny0NAEkhBwJ7hUPlkZXG/cVE2xGJDt3nh4Jh/8tyYPDU0gCch78Ly3TSpR6gTfQKKTxQi0+cNDhGloaAKJB11d1Xdz139MkjzmMQ0NDU0gggw+L3lsuYYeeWhojFloApl57dBu3PXWSJRpVyHZyjQ0NDSBcCc4R4I81qGMyjQ0NDSBIPch0yQnkpVfYICGhoYmEPS6yGg9QDgM0NDQ0ATC88GdVAJBbwwDNDQ0NIGgI5baaZtx/Sd01aV1oKEJpNrF3o3FVAHiK2r0QVN5alTT6fZ13OgoZs15xax1d4Ebvy1ljULJtiqFrDWEV/wd/y7+/66ibX69nDUtfF8iPv9q1r6tr71jW2/7vG0r2u8e7Ev9duuKVGFrX6oi/lwVfx4UqzzY2/aM+LofiXWx+Nrj8X0sAcAwMu4EJ8Jo23aDXrjToaP8r3OG8kEJD0N0d4uv+czUK8t/2+oE0t95zJ6lrDVLrEUlbvSJ1zVij20Wr9W/LGOT2Hd/KtnGg0Vu5stZIxPJfoMEndgaX0l3Ff+GDQuNUtacKC7Wd0vcKuGiSS/bLIrX64ud1nEsBmxdnjpusDd1vSCKIohCdonvWze4IrVYvE5iMQAWltz1b0VDZwhX/5vT3QMTavqscpTvj4tAqoy9q9hpnCAI4U4QRLj9Zl65jk85oIHyrfcM1aiYadRF0TanCnbvxUWJcK0o5DqmsCYA0YOIKFbQyYJEJqu3LW8/gTUB9nz/Y9zxft64g503iDlDU64aGp90AunPTJpcyBqPRLLXbGuLIJIFiGLC5D920CTrlS8xjV3wZtrYV1yA23ERFK6lb2St9yk6quwryGMpbnhVS7z/XUO/YPupEz/63TiWRDwe5Bl0lSeRQN6cZeyBKFfJXrONP0s9tLLdFYv6S0273hFM468o2x28wK21+MWrXuJJ80YpZ6ZZhBD5i4zIXbyJm1z1Qv5ksK/NZhECNzh3vCdVGXLDCweWmkkikGJ64gRxVHle7V6zthW5dSajwHb9zxFDu83/p/3QKHHrnIJtbMcvvFkLP69om2dFkuvoTZ0tjhjbcXM3a+HnCcL6clS5Dhhwx+P2r4BA6Pm1cvP2nHEhgUCCS2hsHDzHNABW5tZc/IJjW9z8WoP5jgtxQ8e1BInMbbDlYhJ3gw3Yl+8UAunvNI8uZM31Td9rOevc0QjkKlr+w/8pU4y4N8E019tv9Mij44v4xca9ilkrVCvB1pWps3ATx70QAYUbLTJwKHeDMq7XO4VAimnrA+II+3oc+wxRb5l32CO07/u3ECOQO8Y6gWS7Nx3PRgCSS+JCDjYQEhbEjf9E0bZW4xUltEbOqdCNSEUeq9oni1zEtgaOIGvF62Pi5l+JV/Fe/Q3kRLZtW9k+lUmgc9HQntwNng97fdEACu2H+PNKeN5gjnLSCQQCsGLWXBlyv20qcOth8f03F7h5rdhv/1Hi5mPYO7L7du3M4/YbroS7lCggu2msE8hIQ7nXzezYq2hbr8ofN4ynxQX8l/U5o65P7Fp74oeL3JwjzrfPhtggr5SnTiUJoEQVZC8hCFsjfbP3pp5E3mKob/wBdd939fgDxft+RSRIn5Z9b3wefC66V42/WJ40vFdxTIflZT0FNUaNcNefi9EjSSQQ7I0Q5PG42E+ffW3KlPHD7WUcTSAqo7+nuWyYm9ZbQpztcvPYJ5DKsAk+MLhc6Ge9VuAdn4LQhywIypqnotoidZSxzatoFZfUNZJ5ilcH+8Z9slqlfX58nfj6TwtSeF2SSK6jiR29tOQwsQomA1A9evF1IBJMRUwKgUAiULCNjfS9YLxVso0zqHvulXR6d5lycNHumFEnAvG/TyKQfHD3mD/C5P2L6jJ2bvKRghB2SNTSHxyYNm0fFgLQe0CQJnVGtc2PshGwZcW4I8XxY4fEUeVn1V72HhYCQw+x94ojznKZysyWh8YdMarVxE6xI3H9EZKDsAlaVHeSQCCQpEtEo88jyg1ZUVxIjEKexZGqNiy8kpZE9R4c8xGIE1w8zIVcKnEh760aRoo1gOrso8YVs9ZPJH7mbWwEiGhiicSx4p5G+1mqT7KUeJ/7JKKdEfNrGcc7VYY8pjvB/qwBgHwybvBW0wmk9piRtXxiFPpfiFYa6dvCUZvysxBV1zqwzyUmUV8e6wRidwdfZzUo5yZ+kKr3KGTNJxEWMgJoakPjGaLIbBCZ+roRwYNsf7LeY0XqCZGT2I1FgKFfs/EiL/I7ahQytGL8sO528J8htlp4yHWwCCD2wow4CaTMjS8THyA+xGXhH1az29CAV7Ct39HIylodkt29QZwTx3YOxJ/DaoAuWeIvdqt4PZxFiH7b+hjIoRFtCDQXxJt4izjqHMYixJa+cUdRqz7o+q0fDfhH05WjwbksQqApLy4CKWTNR4nX/QIWAqiqFLl1MRLxsklaHJnDXaCeisEUAv0MKhZ6fcJaFQhi+A1Nl2F+hykAOnOJG+kxVgeIKohHiYVMAZAkpUY/9XMSfp5Yon02aqU0dyoHiL2ztdkEgvwZJeeGhDuOuzKdu5AioHcLD7zR3p+UuEdUQc88+3NZ6wEb4dPEI8wuWeYN6WP3Jl7IQRx1mAKgzEv6DEim1pR0kQilJE/h7YGjDlOAau/uBxE/w1D1l2yfOtWXp4gJ8H9kCmDng9ubTSBlbn6S+NDoovqEoPWCekwhPCxX1doZ/orYobi89cd00psFxQU6kVp1YQqBC0a6sDnrH3Z9+redSK26MIUQ799L05y0zWRvA7xniNGjj/Z7Fj2QC/lEswmkmLW+TUtoTj5mlOj1cPFe1wjiGGiUNBCxFG3jDthWIJKprcS4RFHOdkzsb0HD6HsJuoEdcLEK0/MiLtJXFRPIvBB5EPS8XESsgsxhCoE8DPFz/NuuT/+NU4mR8f0q7T4x5rWJBIIb/x5K8hQl1XoVFVRK4CUTkZx9jXgwXdLfefzw9z13vekSicYLWAsB6kNKXR+Dues8CRZTfsmqTX9KtvVxIoHcUJP/WEy8cTsUE8h0Yh5kccgpid9kCgENSjMJBDaXhNL9M7t+z+T3l7h1KQSMEbTzD4n1C1RnUKWh+Ee2Z9ygSBzp8Cd8PWsR2D3BscRNeFcdgc2PKb9wWg0+PGA3R7z499TcuD+m3LgQfzGFQH6FqEG5r+boeTHtaO3PVnwE/s/mRiDGK5Q8BI4SJd4xHZ67hP4WkpIVorKiPenQML+k68jVmLx/RuvM+vW/TdyE5/9/AjEfovziCSzdENDTECIXg9zDQ5QbV6VjN1BdxsYRczG9NV41DjEqtplCoI2jmQRC8dP930jDtp6L6JjyeDHb8XnsM+VPaiw0HiFf0CLT9v5I1LkcxWoAZ2sSgSi+AaFsJTbu9dUQSB+l+sEAtQTSRuzQXVVTwu2hPdC8jyvOod3YTAJpjmmQsbnArVvL9mQjQh1G8KiE8OoKlnBQM+iw/EeupM6T4H6SsAblU4VAfwyxV+G+miPM/aQjzHK2J1MIlGeJHiE/r4mKu4jl908whUApt5kEotD7A+X+l+E0Bq1JrPNhILCBrVyik6fwfqCFwAvrNxmZSygXBYpRtfaJkybRe2Lke2DQbKd8VAQtmbukRgk6p9Eu6ogerKuaSSDUvhTqgo4ID5cCNzrVRsu46RzvNxLS4ZcJA3liAVSl5C7c+f7fD0MgV9Dq8aaaYVvyLmiX1RDIFZQbd/vK1BmKdSBnEtWw80M+0L6n8p7AEKpmEgihkZJuYMXN/FszzA+xZgFzbyVNeB4i9Mg0FekFlQOp3ZQQ0Q1/45qnEy/WD5hCYGgQ0b/yM+xt2N6XOp1WPm27RXEZ9w7K58Dn3cWBLL/5EOI+fIkpQm6+d2SThWTYdz0NOvg/AkMhmsxdATBASnKGxtLZy6ptLAGAelGQ2m/JRzGncvKwEuD05IOJXbjrw3ThUmXI1Lbu2ifN5tW7HUysfrwlWviVfH7kV0Ry1KN8js3Ldzuk9ulPlRegCMAUABqTpitRc+YpIYjDL3HrezBfjv8mXBh8QJDIeslu1mUY8sNixMyudXtxN3hEInp6erQGLGq3YjlrfklRM92/EjfQH+o7sLe9QiSRcxRNvPsq5efjc9ZzP+P54E5iHutWBfN121FxbDaBIGkOMRdR9PVSMWt9hZDIby4wcFi6HT4fPAzyYTFgRn7Th0AIkg5kOTYK0EtATFS9WUwfFencYOEw9R6JGbuLGrEyhBWhiEIi/fxo5sNAKaL36jXDqKRPo7ZZoBQfcRXvrJja+aE+/iXlukPsyCRBc4G3jo8iEXlTiJGA/bgxm1yunUFJdNEtGuUrIFhFbkVqPI0qkIRf5bHDJDAnSfiT3hDx5LvbJKwNJw03ZZ+cz3L8x6PKx2HEB/ZUCxgKQUAYWRkbvTRwgd/ZAb6oIXEZjiRkN6g6YyBURyPCfep9oUjO9damu7x9qR4K8NogJ7C4dV5E5HEB3fnd+tXIZsepxyTGLZwb9dGFsOp6mdAFZTXTA6DpkUeNxUWwIk5HMhxJqIbKiFIJfqg0Y29ufL/2iIRer0aZ+A9hSATO2BhcBY/KaM+mG/a2neAbtXkaaqiLSpNkHmKWTCMSunNxMcJeRPE+F0kOmZo5SiQwS4JAhjCmgYUECEt68t3KthGfoOgAx14iP7yc4LtI6ocf1h0sS4CpMo7PrsSD68VGPGmgdhaRxy3D6UjQIyNZKKgppzne6w3MWxlEyzXsE1ElYSEwu6s6DkcV7vg/qN1MUsupnBeKmQmeHDXrdiTDpG3mbOuHctPUrd7RyAo3NWTikmMdlkBBGmLS/12SE+pWUkZHCFK4XPJar7Tzmz4sN29380foEbd6AoGhVck21kmUb19Hcx2TBJrnEMVSSCp0NJLuHpjAXW9NBMObBqG9gPrTdoKzc3lvGox8YB+HIwmiFXv+xo/CYgDt3AhfbTfopZAG4Vh1GQuJ8gzjCFkbuJ2zTC8f7cmAblu4S4noZYMkeWyh+rBidILIM2yVnET3liCSSwUxjHgUhSEyRGuCpDZIvv9WfC5GAHIhPB+8KJfU9zZxx1uEB+BoCXhMJ8DXJ2+wlHWmbEkXuiHk7vBgGW1Pi313ncy+RjQiiOrk0AItDNlO0kzSZvbuFLlxflh/hZ3eqtfDpAh5ErxiqA+8H2pKduSFRJukoOv8kCMtd4gqyePwN4VJESbV4VX82/XwMsWxJ8z7Ik/CJABP3lqPUpmSPXeCG+C8D+m77foXcje4Fu0OgjiGkjraEiRQ05NFXjsnzy2FQhmlXuw7mAPhqFLMGi+EfM/nMDGAhQWk69zxf9IqxIHNYbs+baMSjjKwdUvCcG3MOcXnkc1PkFSh6hfIYyk+Twhh1xdxXd9Jw7XR+IYmuLj3HJK1/Z0dh0TSJm87wTyC1VusK+MGGzNOcBKLEJAHE3xClK4CN3+GpFdYbw74hMQ8mX855s8o8HhpYQIh5CmyRn9cew4VoXLOMqN2appEsHuLZaEp0M4PHMoUACEcIaxUtIx7G6nNA9UH2B5o9Y8p8ngAQ6cabnBz/fnvJAIBMI8FidI4Ig+6b0iImjlmymbywUBCjiybYIWn2nYRLmRFbl3d5Au5ED83QpOfq5tKIL2p7xDGZpKBQVIqo2DkW1ASjp1AahLuyKc1cc/9vpA1P8JUA8IsVFZwA8dzXIH9v7cEGXXWRJSyHScpDi1RPluLERNMAUQn7kkiCdqvkjjw/pj0r0ZMWLFgK6FgP1VgVARVdZIIBHh55oTd8DBBRUQteZg3EBKm0RMJyqW2673WrIgD6kOUflmTUTMIeRHKqlHbzpWy5pWqG6VEPmIvER0swnjLSIkD74eoA5P+FQIzYWzX/1ZUD6+/VBr9Y5gAhUCQqFdCIIQ2iwK3Ho6aOBDhFHPGNBYnoASE8Mt2/Fu4G5QjJo1t8CHhTnBObsF6hZtTvgmpxK1uRCSNRhzFrOnUzOJQDug9xI3f3WhEsrOBrgf6kGZ3kUPPUdM7Q14Y/4GxJRAtvq0frJNy1FFGIITKYDlrZJCTG2UIPMlTF6prvGfizI0RaiJXYjvBPTCAgaRcooa/xna8BzkSZ05wIkHNGiuQpxDnxhxyJIWs9dRoA7Lx/5jsj5mjhZyVVe3yTsqP9LblkCMRR5ynMPpytOn6Ygre0yLa+Hfx2ll9kqWYIpBFZ27lU1Atw+92FNJYB/8bjIYAcYSx+cR7sAQADxyMsBRR6zJisrWMih4GktF7aRICJF+hEEw7lSk4a9qudwosBDDHVly0mZnuymRIi2PwGFHiql5MT5xQtjs4VHwl2zgDr/g7/h0dkCzBACEIc6IJomeFD/aOO3n7itTntq8cNxskAyUpSsMswZjWM7APHmAgA+wx7LWM66VzCzYdNErjHQjkC/ShZMkCpPCCTCaiV6rIjdPgWIcIoz8zaTKiZcWRhoaGBhTMBAJZxWqhoaGhgSP3aASCPB9rPWhoaCC/BkGjqveGJ+sYmxetoaExo2vgvdz152LyIMqoKsr46AgnakZOYBoaGskHOnI5qiuut3nXm9h/AAnRZk8ngPYkwYl+DQ0NlGXhDTPapEF8TWQ/06mYiGwI+Y+fMg0NjeQCvh1EvdBmyAJYg4BlRSYfvECcy/vPTENDI7nIzd94GFV4iKbORqb1Q6QIBzyiyHHDrK7qHkxDQyPZyLj+jVKtDiE6sjHdTsZxz3Z8l7UGNDR01QUlVclBZy9iOBSiipF6tuDLizEk6OiW6JsZwGdirQENDQ1I0cP6eogb/lHb8Rfbru8gckBEwx1vebjGOyx/DmstaGhogADiNq1CjgQiM9aK0NDQylNvaVzkge5eDLpiGhoaSQVhan4+uL3p5IG5z90bD2etDw0NHYkgl9FEAnmJYNLdStDQ0MDYDjiJqT22BHcqc77T0NCI3zCIO8F1UTu0Q40Ksys29qGhoQGHMe4EV6M028gkQ54P+uBaRpjwP9agoaEBb1PYYgoiuYY7/uMjDWbP5L0tUJ/arn8bRGcwZmYaGhoab59kh9Jr2vWP5k6lA/6o3PWO4q7/fq3naDVoaGhoaGhoaPwP1Ihp8Bm98aYAAAAASUVORK5CYII=",1,"google-logo"],["href","https://mol.org/","target","_self","rel","home","title","Home",1,"mol-logo"],["alt","Map of Life","src","https://mol.org/static/img/logo.png"],[1,"advanced-buttons-wrapper","noselect"],["mapPopup",""],[1,"advanced-button",3,"click"],["class","advanced-button",3,"click",4,"ngIf"],[1,"tooltip","init-draw-tooltip","noselect"],["initDrawTooltip",""],[1,"tooltip-content"],[1,"tooltip","edit-tooltip","noselect"],["drawTooltip",""],["class","tooltip-content",4,"ngIf"],[1,"tooltip","draw-tooltip","noselect"],["modifyTooltip",""],["copyTooltip",""],[1,"tooltip","copy-tooltip","noselect"],["copyIntersectingTooltip",""]],template:function(t,e){1&t&&(i.Wb(0,"div",0),i.jc(1,"async"),i.Vb(),i.Wb(2,"div",1),i.Wb(3,"a",2),i.Rb(4,"img",3),i.Vb(),i.Wb(5,"a",4),i.Rb(6,"img",5),i.Vb(),i.Vb(),i.Wb(7,"div",6,7),i.Wb(9,"div",8),i.ec("click",(function(){return e.dissolvePolygons()})),i.Jc(10," Dissolve selected shapes "),i.Vb(),i.Hc(11,wr,2,0,"div",9),i.Vb(),i.Wb(12,"div",10,11),i.Wb(14,"div",12),i.Jc(15," Click an origin point to start drawing. "),i.Rb(16,"br"),i.Jc(17,"Use `Shift` key to use freehand "),i.Vb(),i.Vb(),i.Wb(18,"div",13,14),i.Hc(20,Cr,2,0,"div",15),i.Hc(21,Or,2,0,"div",15),i.Vb(),i.Wb(22,"div",16,17),i.Wb(24,"div",12),i.Jc(25," To modify shape click on a vertex, to de-select click on the shape again "),i.Vb(),i.Vb(),i.Wb(26,"div",6,18),i.Wb(28,"div",8),i.ec("click",(function(){return e.addFeatureFromExistingDataset()})),i.Jc(29," Copy "),i.Vb(),i.Vb(),i.Wb(30,"div",19,20),i.Wb(32,"div",12),i.Jc(33,"Too many intersecting features"),i.Vb(),i.Vb()),2&t&&(i.Eb(i.qc(9,Pr)),i.Gb("drawing",i.kc(1,7,e.isDrawingMode)),i.Cb(11),i.oc("ngIf",2===e.selectedFeatures.length),i.Cb(9),i.oc("ngIf",e.isEditPointCount),i.Cb(1),i.oc("ngIf",!e.isEditPointCount))},directives:[mr.t],pipes:[mr.b],styles:['.ol-box{box-sizing:border-box;border-radius:2px;border:2px solid #00f}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:rgba(0,60,136,.3);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid #eee;color:#eee;font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-step-marker{width:1px;height:15px;background-color:#000;float:right;z-Index:10}.ol-scale-step-text{bottom:-5px;font-size:12px;z-Index:11}.ol-scale-step-text,.ol-scale-text{position:absolute;color:#000;text-shadow:-2px 0 #fff,0 2px #fff,2px 0 #fff,0 -2px #fff}.ol-scale-text{font-size:14px;text-align:center;bottom:25px}.ol-scale-singlebar{position:relative;height:10px;z-Index:9;box-sizing:border-box;border:1px solid #000}.ol-unsupported{display:none}.ol-unselectable,.ol-viewport{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:grab}.ol-control{position:absolute;background-color:hsla(0,0%,100%,.4);border-radius:4px;padding:2px}.ol-control:hover{background-color:hsla(0,0%,100%,.6)}.ol-zoom{top:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:#fff;font-size:1.14em;font-weight:700;text-decoration:none;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:rgba(0,60,136,.5);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;font-size:1.2em;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:focus,.ol-control button:hover{text-decoration:none;background-color:rgba(0,60,136,.7)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em)}.ol-attribution ul{margin:0;padding:0 .5em;color:#000;text-shadow:0 0 2px #fff}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button,.ol-attribution ul{display:inline-block}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:hsla(0,0%,100%,.8)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:inline-block}.ol-overviewmap .ol-overviewmap-map{border:1px solid #7b98bc;height:150px;margin:2px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:1px;left:2px;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:hsla(0,0%,100%,.8)}.ol-overviewmap-box{border:2px dotted rgba(0,60,136,.7)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.layer-switcher{top:3.5em;right:.5em;text-align:left}.layer-switcher .panel{margin:0;border:4px solid #eee;border-radius:4px;background-color:#fff;display:none;max-height:inherit;height:100%;box-sizing:border-box;overflow-y:auto}.layer-switcher button{float:right;z-index:1;width:38px;height:38px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAACE1BMVEX///8A//8AgICA//8AVVVAQID///8rVVVJtttgv98nTmJ2xNgkW1ttyNsmWWZmzNZYxM4gWGgeU2JmzNNr0N1Rwc0eU2VXxdEhV2JqytQeVmMhVmNoydUfVGUgVGQfVGQfVmVqy9hqy9dWw9AfVWRpydVry9YhVmMgVGNUw9BrytchVWRexdGw294gVWQgVmUhVWPd4N6HoaZsy9cfVmQgVGRrytZsy9cgVWQgVWMgVWRsy9YfVWNsy9YgVWVty9YgVWVry9UgVWRsy9Zsy9UfVWRsy9YgVWVty9YgVWRty9Vsy9aM09sgVWRTws/AzM0gVWRtzNYgVWRuy9Zsy9cgVWRGcHxty9bb5ORbxdEgVWRty9bn6OZTws9mydRfxtLX3Nva5eRix9NFcXxOd4JPeINQeIMiVmVUws9Vws9Vw9BXw9BYxNBaxNBbxNBcxdJexdElWWgmWmhjyNRlx9IqXGtoipNpytVqytVryNNrytZsjZUuX210k5t1y9R2zNR3y9V4lp57zth9zdaAnKOGoaeK0NiNpquV09mesrag1tuitbmj1tuj19uktrqr2d2svcCu2d2xwMO63N+7x8nA3uDC3uDFz9DK4eHL4eLN4eIyYnDX5OM5Z3Tb397e4uDf4uHf5uXi5ePi5+Xj5+Xk5+Xm5+Xm6OY6aHXQ19fT4+NfhI1Ww89gx9Nhx9Nsy9ZWw9Dpj2abAAAAWnRSTlMAAQICAwQEBgcIDQ0ODhQZGiAiIyYpKywvNTs+QklPUlNUWWJjaGt0dnd+hIWFh4mNjZCSm6CpsbW2t7nDzNDT1dje5efr7PHy9PT29/j4+Pn5+vr8/f39/f6DPtKwAAABTklEQVR4Xr3QVWPbMBSAUTVFZmZmhhSXMjNvkhwqMzMzMzPDeD+xASvObKePPa+ffHVl8PlsnE0+qPpBuQjVJjno6pZpSKXYl7/bZyFaQxhf98hHDKEppwdWIW1frFnrxSOWHFfWesSEWC6R/P4zOFrix3TzDFLlXRTR8c0fEEJ1/itpo7SVO9Jdr1DVxZ0USyjZsEY5vZfiiAC0UoTGOrm9PZLuRl8X+Dq1HQtoFbJZbv61i+Poblh/97TC7n0neCcK0ETNUrz1/xPHf+DNAW9Ac6t8O8WH3Vp98f5lCaYKAOFZMLyHL4Y0fe319idMNgMMp+zWVSybUed/+/h7I4wRAG1W6XDy4XmjR9HnzvDRZXUAYDFOhC1S/Hh+fIXxen+eO+AKqbs+wAo30zDTDvDxKoJN88sjUzDFAvBzEUGFsnADoIvAJzoh2BZ8sner+Ke/vwECuQAAAABJRU5ErkJggg==");background-repeat:no-repeat;background-position:2px;background-color:#fff;color:#000;border:none}.layer-switcher button:focus,.layer-switcher button:hover{background-color:#fff}.layer-switcher.shown{overflow-y:hidden}.layer-switcher.shown.ol-control{background-color:transparent}.layer-switcher.shown.ol-control:hover{background-color:transparent}.layer-switcher.shown .panel{display:block}.layer-switcher.shown button{display:none}.layer-switcher.shown.layer-switcher-activation-mode-click>button{display:block;background-image:unset;right:2px;position:absolute;background-color:#eee;margin:0 1px}.layer-switcher.shown button:focus,.layer-switcher.shown button:hover{background-color:#fafafa}.layer-switcher ul{list-style:none;margin:1.6em .4em;padding-left:0}.layer-switcher ul ul{padding-left:1.2em;margin:.1em 0 0}.layer-switcher li.group+li.group{margin-top:.4em}.layer-switcher li.group>label{font-weight:700}.layer-switcher.layer-switcher-group-select-style-none li.group>label{padding-left:1.2em}.layer-switcher li{position:relative;margin-top:.3em}.layer-switcher li input{position:absolute;left:1.2em;height:1em;width:1em;font-size:1em}.layer-switcher li label{padding-left:2.7em;padding-right:1.2em;display:inline-block;margin-top:1px}.layer-switcher label.disabled{opacity:.4}.layer-switcher input{margin:0}.layer-switcher.touch ::-webkit-scrollbar{width:4px}.layer-switcher.touch ::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:10px}.layer-switcher.touch ::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.5)}li.layer-switcher-base-group>label{padding-left:1.2em}.layer-switcher .group button{position:absolute;left:0;display:inline-block;vertical-align:top;float:none;font-size:1em;width:1em;height:1em;margin:0;background-position:center 2px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAW0lEQVR4nGNgGAWMyBwXFxcGBgaGeii3EU0tXHzPnj1wQRYsihqQ+I0ExDEMQAYNONgoAN0AmMkNaDSyQSheY8JiaCMOGzE04zIAmyFYNTMw4A+DRhzsUUBtAADw4BCeIZkGdwAAAABJRU5ErkJggg==");transition:transform .2s ease-in-out}.layer-switcher .group.layer-switcher-close button{transform:rotate(-90deg);-webkit-transform:rotate(-90deg)}.layer-switcher .group.layer-switcher-fold.layer-switcher-close>ul{overflow:hidden;height:0}.layer-switcher.shown.layer-switcher-activation-mode-click{padding-left:34px}.layer-switcher.shown.layer-switcher-activation-mode-click>button{left:0;border-right:0}:root{--topLine:3em}@media screen and (max-device-width:480px){:root{--topLine:0.1em}.layer-switcher>button{font-size:15px!important}}.layer-switcher{position:absolute;left:.5em;top:calc(var(--topLine) + 7em);border-radius:3px;background-color:transparent;width:60px}.layer-switcher.shown{width:unset}.layer-switcher button{width:60px;padding:2px;border-radius:3px;border:1px solid #000;line-height:25px;background-image:unset;font-weight:unset}.layer-switcher .panel{max-width:250px}.ol-scale-line{background-color:#fff;left:.9em}.ol-scale-line-inner{border:1px solid #000;border-top:none;background-color:#fff;color:#000}.ol-control button{border:1px solid #bbb;background-color:#fff;color:#000}.ol-control button:focus,.ol-control button:hover{background-color:#eee;color:#000}.ol-zoom{z-index:1000;top:calc(var(--topLine) + 0px);bottom:unset;left:.5em}.map-parent{position:relative}.ol-full-screen{left:.5em;top:calc(var(--topLine) + 4.5em);max-width:1.7em}#map{width:100%;height:100%;transition:0;position:relative}.drawing{cursor:url(https://mapoflife.github.io/experts-next/feather.f9ad4b07dac825fef883.svg) 2 20,auto}.ol-attribution{bottom:35px}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.google-logo{max-height:25px;z-index:10000}:host{position:relative}.map-logos{position:absolute;display:inline;bottom:5px;margin:0 auto;left:calc(50% - 50px);z-index:1}.map-logos a::-moz-selection{background-color:transparent}.map-logos a::selection,.map-logos a:active,.map-logos a:hover,.map-logos a:visited{background-color:transparent}.map-logos img{height:40px}.map-logos .mol-logo{padding-left:20px}.map-logos .mol-logo img{height:28px}#hatch{background-image:url(/libs/ui/src/assets/bw20.png)}.advanced-buttons-wrapper{margin-top:30px}.advanced-buttons-wrapper .advanced-button{width:195px;height:40px;background-color:#fff;box-shadow:0 2px 4px 0 #ddd;color:#000;text-align:center;line-height:40px;margin-bottom:6px;cursor:pointer}.tooltip{background-color:#000}.tooltip.init-draw-tooltip{display:none;position:absolute}.tooltip .tooltip-content{margin-left:8px;margin-right:8px;font-size:12px;color:#fff}'],encapsulation:2}),t})()},UV1p:function(t,e,n){"use strict";var i,r,o,s,a=n("V+Bs")()&&"symbol"==typeof Symbol.toStringTag;if(a){i=Function.call.bind(Object.prototype.hasOwnProperty),r=Function.call.bind(RegExp.prototype.exec),o={};var u=function(){throw o};s={toString:u,valueOf:u},"symbol"==typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=u)}var l=Object.prototype.toString,c=Object.getOwnPropertyDescriptor;t.exports=a?function(t){if(!t||"object"!=typeof t)return!1;var e=c(t,"lastIndex");if(!e||!i(e,"value"))return!1;try{r(t,s)}catch(n){return n===o}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===l.call(t)}},"V+Bs":function(t,e,n){"use strict";var i=global.Symbol,r=n("48gJ");t.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&r()}},WRQj:function(t,e,n){var i=n("06eB"),r=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:a};function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function s(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function a(t,e){return i(t,e,{strict:!0})}r.prototype.compare=function(t,e){if(t.type!==e.type||!s(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=o(t),r=o(e);return i.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),r)}}return!1},r.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},r.prototype.compareLine=function(t,e,n,i){if(!s(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var a=this.compareCoord(r[n],o[n]);return this.direction||a?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},r.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},r.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},r.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every((function(t){return this.some((function(e){return r.compareLine(t,e,1,!0)}))}),i)}return!1},r.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},r.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},r.prototype.removePseudo=function(t){return t},t.exports=r},WocS:function(t,e){t.exports=function(t,e){for(var n=t[0],i=t[1],r=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],l=e[s][1];u>i!=l>i&&n<(e[s][0]-a)*(i-u)/(l-u)+a&&(r=!r)}return r}},"YZE+":function(t,e,n){"use strict";var i=Object,r=TypeError;t.exports=function(){if(null!=this&&this!==i(this))throw new r("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t}},Z4rD:function(t,e,n){"use strict";var i=n("ARQ1");t.exports=function(){return"function"==typeof Object.is?Object.is:i}},Zhvk:function(t,e,n){"use strict";var i=n("MicU"),r=n("GM35"),o=n("WocS");const s=n("QrlV").orient2d;function a(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>i[0]&&(i=a),a[1]<n[1]&&(n=a),a[1]>r[1]&&(r=a)}var u=[e,n,i,r],l=u.slice();for(s=0;s<t.length;s++)o(t[s],u)||l.push(t[s]);return function(t){t.sort(v);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&f(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var i=[],r=t.length-1;r>=0;r--){for(;i.length>=2&&f(i[i.length-2],i[i.length-1],t[r])<=0;)i.pop();i.push(t[r])}return i.pop(),e.pop(),e.concat(i)}(l)}(t),s=new i(16);s.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},s.compareMinX=function(t,e){return t[0]-e[0]},s.compareMinY=function(t,e){return t[1]-e[1]},s.load(t);for(var a,l=[],c=0;c<r.length;c++){var h=r[c];s.remove(h),a=g(h,a),l.push(a)}var p=new i(16);for(c=0;c<l.length;c++)p.insert(d(l[c]));for(var _=e*e,m=n*n;l.length;){var b=l.shift(),x=b.p,E=b.next.p,I=y(x,E);if(!(I<m)){var N=I/_;(h=u(s,b.prev.p,x,E,b.next.next.p,N,p))&&Math.min(y(h,x),y(h,E))<=N&&(l.push(b),l.push(g(h,b)),s.remove(h),p.remove(b),p.insert(d(b)),p.insert(d(b.next)))}}b=a;var w=[];do{w.push(b.p),b=b.next}while(b!==a);return w.push(b.p),w}function u(t,e,n,i,o,s,a){for(var u=new r([],l),h=t.data;h;){for(var f=0;f<h.children.length;f++){var d=h.children[f],g=h.leaf?_(d,n,i):c(n,i,d);g>s||u.push({node:d,dist:g})}for(;u.length&&!u.peek().node.children;){var y=u.pop(),m=y.node,v=_(m,e,n),b=_(m,i,o);if(y.dist<v&&y.dist<b&&p(n,m,a)&&p(i,m,a))return m}(h=u.pop())&&(h=h.node)}return null}function l(t,e){return t.dist-e.dist}function c(t,e,n){if(h(t,n)||h(e,n))return 0;var i=m(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=m(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=m(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=m(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(i,r,o,s)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function p(t,e,n){for(var i,r,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:a,minY:u,maxX:l,maxY:c}),p=0;p<h.length;p++)if(r=h[p].next.p,o=t,(i=h[p].p)!==(s=e)&&r!==o&&f(i,r,o)>0!=f(i,r,s)>0&&f(o,s,i)>0!=f(o,s,r)>0)return!1;return!0}function f(t,e,n){return s(t[0],t[1],e[0],e[1],n[0],n[1])}function d(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function g(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function y(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function _(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return(o=t[0]-i)*o+(s=t[1]-r)*s}function m(t,e,n,i,r,o,s,a){var u,l,c,h,p=n-t,f=i-e,d=s-r,g=a-o,y=t-r,_=e-o,m=p*p+f*f,v=p*d+f*g,b=d*d+g*g,x=p*y+f*_,E=d*y+g*_,I=m*b-v*v,N=I,w=I;0===I?(l=0,N=1,h=E,w=b):(h=m*E-v*x,(l=v*E-b*x)<0?(l=0,h=E,w=b):l>N&&(l=N,h=E+v,w=b)),h<0?(h=0,-x<0?l=0:-x>m?l=N:(l=-x,N=m)):h>w&&(h=w,-x+v<0?l=0:-x+v>m?l=N:(l=-x+v,N=m));var C=(1-(c=0===h?0:h/w))*r+c*s-((1-(u=0===l?0:l/N))*t+u*n),O=(1-c)*o+c*a-((1-u)*e+u*i);return C*C+O*O}function v(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}r.default&&(r=r.default),t.exports=a,t.exports.default=a},aYSr:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},aiQ1:function(t,e,n){var i=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}})),u=r[n];n<o;u=r[++n])d(u)||!v(u)?a+=" "+u:a+=" "+s(u);return a},e.deprecate=function(t,n){if(_(global.process))return function(){return e.deprecate(t,n).apply(this,arguments)};if(!0===process.noDeprecation)return t;var i=!1;return function(){if(!i){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),i=!0}return t.apply(this,arguments)}};var r,o={};function s(t,n){var i={seen:[],stylize:u};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),f(n)?i.showHidden=n:n&&e._extend(i,n),_(i.showHidden)&&(i.showHidden=!1),_(i.depth)&&(i.depth=2),_(i.colors)&&(i.colors=!1),_(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=a),l(i,t,i.depth)}function a(t,e){var n=s.styles[e];return n?"\x1b["+s.colors[n][0]+"m"+t+"\x1b["+s.colors[n][1]+"m":t}function u(t,e){return t}function l(t,n,i){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return y(r)||(r=l(t,r,i)),r}var o=function(t,e){if(_(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):f(e)?t.stylize(""+e,"boolean"):d(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),x(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(n);if(0===s.length){if(E(n))return t.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(m(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return t.stylize(Date.prototype.toString.call(n),"date");if(x(n))return c(n)}var u,v="",I=!1,N=["{","}"];return p(n)&&(I=!0,N=["[","]"]),E(n)&&(v=" [Function"+(n.name?": "+n.name:"")+"]"),m(n)&&(v=" "+RegExp.prototype.toString.call(n)),b(n)&&(v=" "+Date.prototype.toUTCString.call(n)),x(n)&&(v=" "+c(n)),0!==s.length||I&&0!=n.length?i<0?m(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=I?function(t,e,n,i,r){for(var o=[],s=0,a=e.length;s<a;++s)O(e,String(s))?o.push(h(t,e,n,i,String(s),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(h(t,e,n,i,r,!0))})),o}(t,n,i,a,s):s.map((function(e){return h(t,n,i,a,e,I)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(u,v,N)):N[0]+v+N[1]}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,i,r,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?a=t.stylize(u.set?"[Getter/Setter]":"[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),O(i,r)||(s="["+r+"]"),a||(t.seen.indexOf(u.value)<0?(a=d(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),_(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function d(t){return null===t}function g(t){return"number"==typeof t}function y(t){return"string"==typeof t}function _(t){return void 0===t}function m(t){return v(t)&&"[object RegExp]"===I(t)}function v(t){return"object"==typeof t&&null!==t}function b(t){return v(t)&&"[object Date]"===I(t)}function x(t){return v(t)&&("[object Error]"===I(t)||t instanceof Error)}function E(t){return"function"==typeof t}function I(t){return Object.prototype.toString.call(t)}function N(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(_(r)&&(r=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(r)){var n=process.pid;o[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else o[t]=function(){};return o[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=f,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=_,e.isRegExp=m,e.isObject=v,e.isDate=b,e.isError=x,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n("FGo3");var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var t=new Date,e=[N(t.getHours()),N(t.getMinutes()),N(t.getSeconds())].join(":");return[t.getDate(),w[t.getMonth()],e].join(" ")}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",C(),e.format.apply(e,arguments))},e.inherits=n("5EX2"),e._extend=function(t,e){if(!e||!v(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}},cTt9:function(t,e,n){"use strict";var i=Object.prototype.toString;t.exports=function(t){var e=i.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===i.call(t.callee)),n}},eYkv:function(t,e,n){"use strict";var i=n("zT+L"),r=n("vY6e"),o=n("ARQ1"),s=n("Z4rD"),a=n("Mi3R"),u=r(s(),Object);i(u,{getPolyfill:s,implementation:o,shim:a}),t.exports=u},ey2t:function(t,e,n){"use strict";var i=Array.prototype.slice,r=n("cTt9"),o=Object.keys,s=o?function(t){return o(t)}:n("F3Ih"),a=Object.keys;s.shim=function(){return Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return r(t)?a(i.call(t)):a(t)}):Object.keys=s,Object.keys||s},t.exports=s},fJCm:function(t,e,n){"use strict";function i(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function r(t,e,n){return void 0===n&&(n={}),i({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var r=0,o=t;r<o.length;r++){var s=o[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:t},e,n)}function s(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:t},e,n)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,n){return void 0===n&&(n={}),i({type:"MultiLineString",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),i({type:"MultiPoint",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),i({type:"MultiPolygon",coordinates:t},e,n)}function h(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t*i}function p(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t/i}function f(t){return t%(2*Math.PI)*180/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=i,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return s(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return r(t,e)})),n)},e.polygon=o,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return o(t,e)})),n)},e.lineString=s,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return s(t,e)})),n)},e.featureCollection=a,e.multiLineString=u,e.multiPoint=l,e.multiPolygon=c,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),i({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=h,e.lengthToRadians=p,e.lengthToDegrees=function(t,e){return f(p(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return h(p(t,e),n)},e.convertArea=function(t,n,i){if(void 0===n&&(n="meters"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=e.areaFactors[n];if(!r)throw new Error("invalid original units");var o=e.areaFactors[i];if(!o)throw new Error("invalid final units");return t/r*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},hoKw:function(t,e,n){"use strict";var i=Date.prototype.getDay,r=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return i.call(t),!0}catch(e){return!1}}(t):"[object Date]"===r.call(t))}},i2fC:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("fJCm");e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&i.isNumber(e[0])&&i.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0,r=t.features;i<r.length;i++){var o=r[i];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},nkxq:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));const i=t=>{const e=new Date(t),n=60*e.getTimezoneOffset()*1e3;return parseInt(new Date(e.getTime()+n).getFullYear().toString(),10)},r=t=>new Date(Date.UTC(t,0,1)).toISOString().slice(0,10)},nsO7:function(t,e,n){(function(t){var i;(function(){var r="Expected a function",o="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],a="[object Arguments]",u="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Error]",p="[object Function]",f="[object GeneratorFunction]",d="[object Map]",g="[object Number]",y="[object Object]",_="[object RegExp]",m="[object Set]",v="[object String]",b="[object Symbol]",x="[object WeakMap]",E="[object ArrayBuffer]",I="[object DataView]",N="[object Float32Array]",w="[object Float64Array]",C="[object Int8Array]",O="[object Int16Array]",P="[object Int32Array]",S="[object Uint8Array]",L="[object Uint16Array]",T="[object Uint32Array]",M=/\b__p \+= '';/g,R=/\b(__p \+=) '' \+/g,A=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>"']/g,k=RegExp(D.source),G=RegExp(F.source),B=/<%-([\s\S]+?)%>/g,V=/<%([\s\S]+?)%>/g,z=/<%=([\s\S]+?)%>/g,j=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,U=/^\w*$/,q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,X=RegExp(Y.source),W=/^\s+/,H=/\s/,J=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Z=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,K=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$=/[()=,{}\[\]\/\s]/,tt=/\\(\\)?/g,et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nt=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,rt=/^0b[01]+$/i,ot=/^\[object .+?Constructor\]$/,st=/^0o[0-7]+$/i,at=/^(?:0|[1-9]\d*)$/,ut=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lt=/($^)/,ct=/['\n\r\u2028\u2029\\]/g,ht="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ft="["+pt+"]",dt="["+ht+"]",gt="\\d+",yt="[a-z\\xdf-\\xf6\\xf8-\\xff]",_t="[^\\ud800-\\udfff"+pt+gt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",mt="\\ud83c[\\udffb-\\udfff]",vt="[^\\ud800-\\udfff]",bt="(?:\\ud83c[\\udde6-\\uddff]){2}",xt="[\\ud800-\\udbff][\\udc00-\\udfff]",Et="[A-Z\\xc0-\\xd6\\xd8-\\xde]",It="(?:"+yt+"|"+_t+")",Nt="(?:"+Et+"|"+_t+")",wt="(?:"+dt+"|"+mt+")?",Ct="[\\ufe0e\\ufe0f]?"+wt+"(?:\\u200d(?:"+[vt,bt,xt].join("|")+")[\\ufe0e\\ufe0f]?"+wt+")*",Ot="(?:"+["[\\u2700-\\u27bf]",bt,xt].join("|")+")"+Ct,Pt="(?:"+[vt+dt+"?",dt,bt,xt,"[\\ud800-\\udfff]"].join("|")+")",St=RegExp("['\u2019]","g"),Lt=RegExp(dt,"g"),Tt=RegExp(mt+"(?="+mt+")|"+Pt+Ct,"g"),Mt=RegExp([Et+"?"+yt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[ft,Et,"$"].join("|")+")",Nt+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[ft,Et+It,"$"].join("|")+")",Et+"?"+It+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Et+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gt,Ot].join("|"),"g"),Rt=RegExp("[\\u200d\\ud800-\\udfff"+ht+"\\ufe0e\\ufe0f]"),At=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ft=-1,kt={};kt[N]=kt[w]=kt[C]=kt[O]=kt[P]=kt[S]=kt["[object Uint8ClampedArray]"]=kt[L]=kt[T]=!0,kt[a]=kt[u]=kt[E]=kt[l]=kt[I]=kt[c]=kt[h]=kt[p]=kt[d]=kt[g]=kt[y]=kt[_]=kt[m]=kt[v]=kt[x]=!1;var Gt={};Gt[a]=Gt[u]=Gt[E]=Gt[I]=Gt[l]=Gt[c]=Gt[N]=Gt[w]=Gt[C]=Gt[O]=Gt[P]=Gt[d]=Gt[g]=Gt[y]=Gt[_]=Gt[m]=Gt[v]=Gt[b]=Gt[S]=Gt["[object Uint8ClampedArray]"]=Gt[L]=Gt[T]=!0,Gt[h]=Gt[p]=Gt[x]=!1;var Bt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vt=parseFloat,zt=parseInt,jt="object"==typeof global&&global&&global.Object===Object&&global,Ut="object"==typeof self&&self&&self.Object===Object&&self,qt=jt||Ut||Function("return this")(),Yt=e&&!e.nodeType&&e,Xt=Yt&&"object"==typeof t&&t&&!t.nodeType&&t,Wt=Xt&&Xt.exports===Yt,Ht=Wt&&jt.process,Jt=function(){try{return Xt&&Xt.require&&Xt.require("util").types||Ht&&Ht.binding&&Ht.binding("util")}catch(t){}}(),Zt=Jt&&Jt.isArrayBuffer,Qt=Jt&&Jt.isDate,Kt=Jt&&Jt.isMap,$t=Jt&&Jt.isRegExp,te=Jt&&Jt.isSet,ee=Jt&&Jt.isTypedArray;function ne(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ie(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(i,s,n(s),t)}return i}function re(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function oe(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function se(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function ae(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}function ue(t,e){return!(null==t||!t.length)&&me(t,e,0)>-1}function le(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function ce(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function he(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function pe(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function fe(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function de(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var ge=Ee("length");function ye(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function _e(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function me(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):_e(t,be,n)}function ve(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function be(t){return t!=t}function xe(t,e){var n=null==t?0:t.length;return n?we(t,e)/n:NaN}function Ee(t){return function(e){return null==e?void 0:e[t]}}function Ie(t){return function(e){return null==t?void 0:t[e]}}function Ne(t,e,n,i,r){return r(t,(function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)})),n}function we(t,e){for(var n,i=-1,r=t.length;++i<r;){var o=e(t[i]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Ce(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Oe(t){return t?t.slice(0,Ye(t)+1).replace(W,""):t}function Pe(t){return function(e){return t(e)}}function Se(t,e){return ce(e,(function(e){return t[e]}))}function Le(t,e){return t.has(e)}function Te(t,e){for(var n=-1,i=t.length;++n<i&&me(e,t[n],0)>-1;);return n}function Me(t,e){for(var n=t.length;n--&&me(e,t[n],0)>-1;);return n}function Re(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var Ae=Ie({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),De=Ie({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Fe(t){return"\\"+Bt[t]}function ke(t){return Rt.test(t)}function Ge(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function Be(t,e){return function(n){return t(e(n))}}function Ve(t,e){for(var n=-1,i=t.length,r=0,s=[];++n<i;){var a=t[n];a!==e&&a!==o||(t[n]=o,s[r++]=n)}return s}function ze(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function je(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function Ue(t){return ke(t)?function(t){for(var e=Tt.lastIndex=0;Tt.test(t);)++e;return e}(t):ge(t)}function qe(t){return ke(t)?function(t){return t.match(Tt)||[]}(t):function(t){return t.split("")}(t)}function Ye(t){for(var e=t.length;e--&&H.test(t.charAt(e)););return e}var Xe=Ie({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),We=function t(e){var n,i=(e=null==e?qt:We.defaults(qt.Object(),e,We.pick(qt,Dt))).Array,H=e.Date,ht=e.Error,pt=e.Function,ft=e.Math,dt=e.Object,gt=e.RegExp,yt=e.String,_t=e.TypeError,mt=i.prototype,vt=dt.prototype,bt=e["__core-js_shared__"],xt=pt.prototype.toString,Et=vt.hasOwnProperty,It=0,Nt=(n=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",wt=vt.toString,Ct=xt.call(dt),Ot=qt._,Pt=gt("^"+xt.call(Et).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tt=Wt?e.Buffer:void 0,Rt=e.Symbol,Bt=e.Uint8Array,jt=Tt?Tt.allocUnsafe:void 0,Ut=Be(dt.getPrototypeOf,dt),Yt=dt.create,Xt=vt.propertyIsEnumerable,Ht=mt.splice,Jt=Rt?Rt.isConcatSpreadable:void 0,ge=Rt?Rt.iterator:void 0,Ie=Rt?Rt.toStringTag:void 0,He=function(){try{var t=Kr(dt,"defineProperty");return t({},"",{}),t}catch(e){}}(),Je=e.clearTimeout!==qt.clearTimeout&&e.clearTimeout,Ze=H&&H.now!==qt.Date.now&&H.now,Qe=e.setTimeout!==qt.setTimeout&&e.setTimeout,Ke=ft.ceil,$e=ft.floor,tn=dt.getOwnPropertySymbols,en=Tt?Tt.isBuffer:void 0,nn=e.isFinite,rn=mt.join,on=Be(dt.keys,dt),sn=ft.max,an=ft.min,un=H.now,ln=e.parseInt,cn=ft.random,hn=mt.reverse,pn=Kr(e,"DataView"),fn=Kr(e,"Map"),dn=Kr(e,"Promise"),gn=Kr(e,"Set"),yn=Kr(e,"WeakMap"),_n=Kr(dt,"create"),mn=yn&&new yn,vn={},bn=Po(pn),xn=Po(fn),En=Po(dn),In=Po(gn),Nn=Po(yn),wn=Rt?Rt.prototype:void 0,Cn=wn?wn.valueOf:void 0,On=wn?wn.toString:void 0;function Pn(t){if(Ys(t)&&!As(t)&&!(t instanceof Mn)){if(t instanceof Tn)return t;if(Et.call(t,"__wrapped__"))return So(t)}return new Tn(t)}var Sn=function(){function t(){}return function(e){if(!qs(e))return{};if(Yt)return Yt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Ln(){}function Tn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Mn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Rn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function An(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Dn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Fn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Dn;++e<n;)this.add(t[e])}function kn(t){var e=this.__data__=new An(t);this.size=e.size}function Gn(t,e){var n=As(t),i=!n&&Rs(t),r=!n&&!i&&Gs(t),o=!n&&!i&&!r&&$s(t),s=n||i||r||o,a=s?Ce(t.length,yt):[],u=a.length;for(var l in t)!e&&!Et.call(t,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||oo(l,u))||a.push(l);return a}function Bn(t){var e=t.length;return e?t[Di(0,e-1)]:void 0}function Vn(t,e){return Io(yr(t),Jn(e,0,t.length))}function zn(t){return Io(yr(t))}function jn(t,e,n){(void 0!==n&&!Ls(t[e],n)||void 0===n&&!(e in t))&&Wn(t,e,n)}function Un(t,e,n){var i=t[e];Et.call(t,e)&&Ls(i,n)&&(void 0!==n||e in t)||Wn(t,e,n)}function qn(t,e){for(var n=t.length;n--;)if(Ls(t[n][0],e))return n;return-1}function Yn(t,e,n,i){return ti(t,(function(t,r,o){e(i,t,n(t),o)})),i}function Xn(t,e){return t&&_r(e,xa(e),t)}function Wn(t,e,n){"__proto__"==e&&He?He(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Hn(t,e){for(var n=-1,r=e.length,o=i(r),s=null==t;++n<r;)o[n]=s?void 0:ya(t,e[n]);return o}function Jn(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Zn(t,e,n,i,r,o){var s,u=1&e,h=2&e,x=4&e;if(n&&(s=r?n(t,i,r,o):n(t)),void 0!==s)return s;if(!qs(t))return t;var M=As(t);if(M){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Et.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return yr(t,s)}else{var R=eo(t),A=R==p||R==f;if(Gs(t))return cr(t,u);if(R==y||R==a||A&&!r){if(s=h||A?{}:io(t),!u)return h?function(t,e){return _r(t,to(t),e)}(t,function(t,e){return t&&_r(e,Ea(e),t)}(s,t)):function(t,e){return _r(t,$r(t),e)}(t,Xn(s,t))}else{if(!Gt[R])return r?t:{};s=function(t,e,n){var i=t.constructor;switch(e){case E:return hr(t);case l:case c:return new i(+t);case I:return function(t,e){var n=e?hr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case N:case w:case C:case O:case P:case S:case"[object Uint8ClampedArray]":case L:case T:return pr(t,n);case d:return new i;case g:case v:return new i(t);case _:return function(t){var e=new t.constructor(t.source,nt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case m:return new i;case b:return Cn?dt(Cn.call(t)):{}}}(t,R,u)}}o||(o=new kn);var D=o.get(t);if(D)return D;o.set(t,s),Zs(t)?t.forEach((function(i){s.add(Zn(i,e,n,i,t,o))})):Xs(t)&&t.forEach((function(i,r){s.set(r,Zn(i,e,n,r,t,o))}));var F=M?void 0:(x?h?Yr:qr:h?Ea:xa)(t);return re(F||t,(function(i,r){F&&(i=t[r=i]),Un(s,r,Zn(i,e,n,r,t,o))})),s}function Qn(t,e,n){var i=n.length;if(null==t)return!i;for(t=dt(t);i--;){var r=n[i],o=t[r];if(void 0===o&&!(r in t)||!(0,e[r])(o))return!1}return!0}function Kn(t,e,n){if("function"!=typeof t)throw new _t(r);return vo((function(){t.apply(void 0,n)}),e)}function $n(t,e,n,i){var r=-1,o=ue,s=!0,a=t.length,u=[],l=e.length;if(!a)return u;n&&(e=ce(e,Pe(n))),i?(o=le,s=!1):e.length>=200&&(o=Le,s=!1,e=new Fn(e));t:for(;++r<a;){var c=t[r],h=null==n?c:n(c);if(c=i||0!==c?c:0,s&&h==h){for(var p=l;p--;)if(e[p]===h)continue t;u.push(c)}else o(e,h,i)||u.push(c)}return u}Pn.templateSettings={escape:B,evaluate:V,interpolate:z,variable:"",imports:{_:Pn}},(Pn.prototype=Ln.prototype).constructor=Pn,(Tn.prototype=Sn(Ln.prototype)).constructor=Tn,(Mn.prototype=Sn(Ln.prototype)).constructor=Mn,Rn.prototype.clear=function(){this.__data__=_n?_n(null):{},this.size=0},Rn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Rn.prototype.get=function(t){var e=this.__data__;if(_n){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Et.call(e,t)?e[t]:void 0},Rn.prototype.has=function(t){var e=this.__data__;return _n?void 0!==e[t]:Et.call(e,t)},Rn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=_n&&void 0===e?"__lodash_hash_undefined__":e,this},An.prototype.clear=function(){this.__data__=[],this.size=0},An.prototype.delete=function(t){var e=this.__data__,n=qn(e,t);return!(n<0||(n==e.length-1?e.pop():Ht.call(e,n,1),--this.size,0))},An.prototype.get=function(t){var e=this.__data__,n=qn(e,t);return n<0?void 0:e[n][1]},An.prototype.has=function(t){return qn(this.__data__,t)>-1},An.prototype.set=function(t,e){var n=this.__data__,i=qn(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Dn.prototype.clear=function(){this.size=0,this.__data__={hash:new Rn,map:new(fn||An),string:new Rn}},Dn.prototype.delete=function(t){var e=Zr(this,t).delete(t);return this.size-=e?1:0,e},Dn.prototype.get=function(t){return Zr(this,t).get(t)},Dn.prototype.has=function(t){return Zr(this,t).has(t)},Dn.prototype.set=function(t,e){var n=Zr(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Fn.prototype.add=Fn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Fn.prototype.has=function(t){return this.__data__.has(t)},kn.prototype.clear=function(){this.__data__=new An,this.size=0},kn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},kn.prototype.get=function(t){return this.__data__.get(t)},kn.prototype.has=function(t){return this.__data__.has(t)},kn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof An){var i=n.__data__;if(!fn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Dn(i)}return n.set(t,e),this.size=n.size,this};var ti=br(ui),ei=br(li,!0);function ni(t,e){var n=!0;return ti(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function ii(t,e,n){for(var i=-1,r=t.length;++i<r;){var o=t[i],s=e(o);if(null!=s&&(void 0===a?s==s&&!Ks(s):n(s,a)))var a=s,u=o}return u}function ri(t,e){var n=[];return ti(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function oi(t,e,n,i,r){var o=-1,s=t.length;for(n||(n=ro),r||(r=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?oi(a,e-1,n,i,r):he(r,a):i||(r[r.length]=a)}return r}var si=xr(),ai=xr(!0);function ui(t,e){return t&&si(t,e,xa)}function li(t,e){return t&&ai(t,e,xa)}function ci(t,e){return ae(e,(function(e){return zs(t[e])}))}function hi(t,e){for(var n=0,i=(e=sr(e,t)).length;null!=t&&n<i;)t=t[Oo(e[n++])];return n&&n==i?t:void 0}function pi(t,e,n){var i=e(t);return As(t)?i:he(i,n(t))}function fi(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ie&&Ie in dt(t)?function(t){var e=Et.call(t,Ie),n=t[Ie];try{t[Ie]=void 0;var i=!0}catch(o){}var r=wt.call(t);return i&&(e?t[Ie]=n:delete t[Ie]),r}(t):function(t){return wt.call(t)}(t)}function di(t,e){return t>e}function gi(t,e){return null!=t&&Et.call(t,e)}function yi(t,e){return null!=t&&e in dt(t)}function _i(t,e,n){for(var r=n?le:ue,o=t[0].length,s=t.length,a=s,u=i(s),l=1/0,c=[];a--;){var h=t[a];a&&e&&(h=ce(h,Pe(e))),l=an(h.length,l),u[a]=!n&&(e||o>=120&&h.length>=120)?new Fn(a&&h):void 0}h=t[0];var p=-1,f=u[0];t:for(;++p<o&&c.length<l;){var d=h[p],g=e?e(d):d;if(d=n||0!==d?d:0,!(f?Le(f,g):r(c,g,n))){for(a=s;--a;){var y=u[a];if(!(y?Le(y,g):r(t[a],g,n)))continue t}f&&f.push(g),c.push(d)}}return c}function mi(t,e,n){var i=null==(t=go(t,e=sr(e,t)))?t:t[Oo(Vo(e))];return null==i?void 0:ne(i,t,n)}function vi(t){return Ys(t)&&fi(t)==a}function bi(t,e,n,i,r){return t===e||(null==t||null==e||!Ys(t)&&!Ys(e)?t!=t&&e!=e:function(t,e,n,i,r,o){var s=As(t),p=As(e),f=s?u:eo(t),x=p?u:eo(e),N=(f=f==a?y:f)==y,w=(x=x==a?y:x)==y,C=f==x;if(C&&Gs(t)){if(!Gs(e))return!1;s=!0,N=!1}if(C&&!N)return o||(o=new kn),s||$s(t)?jr(t,e,n,i,r,o):function(t,e,n,i,r,o,s){switch(n){case I:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case E:return!(t.byteLength!=e.byteLength||!o(new Bt(t),new Bt(e)));case l:case c:case g:return Ls(+t,+e);case h:return t.name==e.name&&t.message==e.message;case _:case v:return t==e+"";case d:var a=Ge;case m:if(a||(a=ze),t.size!=e.size&&!(1&i))return!1;var u=s.get(t);if(u)return u==e;i|=2,s.set(t,e);var p=jr(a(t),a(e),i,r,o,s);return s.delete(t),p;case b:if(Cn)return Cn.call(t)==Cn.call(e)}return!1}(t,e,f,n,i,r,o);if(!(1&n)){var O=N&&Et.call(t,"__wrapped__"),P=w&&Et.call(e,"__wrapped__");if(O||P){var S=O?t.value():t,L=P?e.value():e;return o||(o=new kn),r(S,L,n,i,o)}}return!!C&&(o||(o=new kn),function(t,e,n,i,r,o){var s=1&n,a=qr(t),u=a.length;if(u!=qr(e).length&&!s)return!1;for(var l=u;l--;){var c=a[l];if(!(s?c in e:Et.call(e,c)))return!1}var h=o.get(t),p=o.get(e);if(h&&p)return h==e&&p==t;var f=!0;o.set(t,e),o.set(e,t);for(var d=s;++l<u;){var g=t[c=a[l]],y=e[c];if(i)var _=s?i(y,g,c,e,t,o):i(g,y,c,t,e,o);if(!(void 0===_?g===y||r(g,y,n,i,o):_)){f=!1;break}d||(d="constructor"==c)}if(f&&!d){var m=t.constructor,v=e.constructor;m==v||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,i,r,o))}(t,e,n,i,bi,r))}function xi(t,e,n,i){var r=n.length,o=r,s=!i;if(null==t)return!o;for(t=dt(t);r--;){var a=n[r];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<o;){var u=(a=n[r])[0],l=t[u],c=a[1];if(s&&a[2]){if(void 0===l&&!(u in t))return!1}else{var h=new kn;if(i)var p=i(l,c,u,t,e,h);if(!(void 0===p?bi(c,l,3,i,h):p))return!1}}return!0}function Ei(t){return!(!qs(t)||(e=t,Nt&&Nt in e))&&(zs(t)?Pt:ot).test(Po(t));var e}function Ii(t){return"function"==typeof t?t:null==t?Wa:"object"==typeof t?As(t)?Pi(t[0],t[1]):Oi(t):nu(t)}function Ni(t){if(!co(t))return on(t);var e=[];for(var n in dt(t))Et.call(t,n)&&"constructor"!=n&&e.push(n);return e}function wi(t,e){return t<e}function Ci(t,e){var n=-1,r=Fs(t)?i(t.length):[];return ti(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Oi(t){var e=Qr(t);return 1==e.length&&e[0][2]?po(e[0][0],e[0][1]):function(n){return n===t||xi(n,t,e)}}function Pi(t,e){return ao(t)&&ho(e)?po(Oo(t),e):function(n){var i=ya(n,t);return void 0===i&&i===e?_a(n,t):bi(e,i,3)}}function Si(t,e,n,i,r){t!==e&&si(e,(function(o,s){if(r||(r=new kn),qs(o))!function(t,e,n,i,r,o,s){var a=_o(t,n),u=_o(e,n),l=s.get(u);if(l)jn(t,n,l);else{var c=o?o(a,u,n+"",t,e,s):void 0,h=void 0===c;if(h){var p=As(u),f=!p&&Gs(u),d=!p&&!f&&$s(u);c=u,p||f||d?As(a)?c=a:ks(a)?c=yr(a):f?(h=!1,c=cr(u,!0)):d?(h=!1,c=pr(u,!0)):c=[]:Hs(u)||Rs(u)?(c=a,Rs(a)?c=aa(a):qs(a)&&!zs(a)||(c=io(u))):h=!1}h&&(s.set(u,c),r(c,u,i,o,s),s.delete(u)),jn(t,n,c)}}(t,e,s,n,Si,i,r);else{var a=i?i(_o(t,s),o,s+"",t,e,r):void 0;void 0===a&&(a=o),jn(t,s,a)}}),Ea)}function Li(t,e){var n=t.length;if(n)return oo(e+=e<0?n:0,n)?t[e]:void 0}function Ti(t,e,n){e=e.length?ce(e,(function(t){return As(t)?function(e){return hi(e,1===t.length?t[0]:t)}:t})):[Wa];var i=-1;return e=ce(e,Pe(Jr())),function(t,e){var i=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,s=r.length,a=n.length;++i<s;){var u=fr(r[i],o[i]);if(u)return i>=a?u:u*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}));i--;)t[i]=t[i].value;return t}(Ci(t,(function(t,n,r){return{criteria:ce(e,(function(e){return e(t)})),index:++i,value:t}})))}function Mi(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var s=e[i],a=hi(t,s);n(a,s)&&Vi(o,sr(s,t),a)}return o}function Ri(t,e,n,i){var r=i?ve:me,o=-1,s=e.length,a=t;for(t===e&&(e=yr(e)),n&&(a=ce(t,Pe(n)));++o<s;)for(var u=0,l=e[o],c=n?n(l):l;(u=r(a,c,u,i))>-1;)a!==t&&Ht.call(a,u,1),Ht.call(t,u,1);return t}function Ai(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;oo(r)?Ht.call(t,r,1):Ki(t,r)}}return t}function Di(t,e){return t+$e(cn()*(e-t+1))}function Fi(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=$e(e/2))&&(t+=t)}while(e);return n}function ki(t,e){return bo(fo(t,e,Wa),t+"")}function Gi(t){return Bn(La(t))}function Bi(t,e){var n=La(t);return Io(n,Jn(e,0,n.length))}function Vi(t,e,n,i){if(!qs(t))return t;for(var r=-1,o=(e=sr(e,t)).length,s=o-1,a=t;null!=a&&++r<o;){var u=Oo(e[r]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(r!=s){var c=a[u];void 0===(l=i?i(c,u,a):void 0)&&(l=qs(c)?c:oo(e[r+1])?[]:{})}Un(a,u,l),a=a[u]}return t}var zi=mn?function(t,e){return mn.set(t,e),t}:Wa,ji=He?function(t,e){return He(t,"toString",{configurable:!0,enumerable:!1,value:qa(e),writable:!0})}:Wa;function Ui(t){return Io(La(t))}function qi(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=i(o);++r<o;)s[r]=t[r+e];return s}function Yi(t,e){var n;return ti(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function Xi(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,s=t[o];null!==s&&!Ks(s)&&(n?s<=e:s<e)?i=o+1:r=o}return r}return Wi(t,e,Wa,n)}function Wi(t,e,n,i){var r=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!=e,a=null===e,u=Ks(e),l=void 0===e;r<o;){var c=$e((r+o)/2),h=n(t[c]),p=void 0!==h,f=null===h,d=h==h,g=Ks(h);if(s)var y=i||d;else y=l?d&&(i||p):a?d&&p&&(i||!f):u?d&&p&&!f&&(i||!g):!f&&!g&&(i?h<=e:h<e);y?r=c+1:o=c}return an(o,4294967294)}function Hi(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n],a=e?e(s):s;if(!n||!Ls(a,u)){var u=a;o[r++]=0===s?0:s}}return o}function Ji(t){return"number"==typeof t?t:Ks(t)?NaN:+t}function Zi(t){if("string"==typeof t)return t;if(As(t))return ce(t,Zi)+"";if(Ks(t))return On?On.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Qi(t,e,n){var i=-1,r=ue,o=t.length,s=!0,a=[],u=a;if(n)s=!1,r=le;else if(o>=200){var l=e?null:Fr(t);if(l)return ze(l);s=!1,r=Le,u=new Fn}else u=e?[]:a;t:for(;++i<o;){var c=t[i],h=e?e(c):c;if(c=n||0!==c?c:0,s&&h==h){for(var p=u.length;p--;)if(u[p]===h)continue t;e&&u.push(h),a.push(c)}else r(u,h,n)||(u!==a&&u.push(h),a.push(c))}return a}function Ki(t,e){return null==(t=go(t,e=sr(e,t)))||delete t[Oo(Vo(e))]}function $i(t,e,n,i){return Vi(t,e,n(hi(t,e)),i)}function tr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?qi(t,i?0:o,i?o+1:r):qi(t,i?o+1:0,i?r:o)}function er(t,e){var n=t;return n instanceof Mn&&(n=n.value()),pe(e,(function(t,e){return e.func.apply(e.thisArg,he([t],e.args))}),n)}function nr(t,e,n){var r=t.length;if(r<2)return r?Qi(t[0]):[];for(var o=-1,s=i(r);++o<r;)for(var a=t[o],u=-1;++u<r;)u!=o&&(s[o]=$n(s[o]||a,t[u],e,n));return Qi(oi(s,1),e,n)}function ir(t,e,n){for(var i=-1,r=t.length,o=e.length,s={};++i<r;)n(s,t[i],i<o?e[i]:void 0);return s}function rr(t){return ks(t)?t:[]}function or(t){return"function"==typeof t?t:Wa}function sr(t,e){return As(t)?t:ao(t,e)?[t]:Co(ua(t))}var ar=ki;function ur(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:qi(t,e,n)}var lr=Je||function(t){return qt.clearTimeout(t)};function cr(t,e){if(e)return t.slice();var n=t.length,i=jt?jt(n):new t.constructor(n);return t.copy(i),i}function hr(t){var e=new t.constructor(t.byteLength);return new Bt(e).set(new Bt(t)),e}function pr(t,e){var n=e?hr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function fr(t,e){if(t!==e){var n=void 0!==t,i=null===t,r=t==t,o=Ks(t),s=void 0!==e,a=null===e,u=e==e,l=Ks(e);if(!a&&!l&&!o&&t>e||o&&s&&u&&!a&&!l||i&&s&&u||!n&&u||!r)return 1;if(!i&&!o&&!l&&t<e||l&&n&&r&&!i&&!o||a&&n&&r||!s&&r||!u)return-1}return 0}function dr(t,e,n,r){for(var o=-1,s=t.length,a=n.length,u=-1,l=e.length,c=sn(s-a,0),h=i(l+c),p=!r;++u<l;)h[u]=e[u];for(;++o<a;)(p||o<s)&&(h[n[o]]=t[o]);for(;c--;)h[u++]=t[o++];return h}function gr(t,e,n,r){for(var o=-1,s=t.length,a=-1,u=n.length,l=-1,c=e.length,h=sn(s-u,0),p=i(h+c),f=!r;++o<h;)p[o]=t[o];for(var d=o;++l<c;)p[d+l]=e[l];for(;++a<u;)(f||o<s)&&(p[d+n[a]]=t[o++]);return p}function yr(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function _r(t,e,n,i){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=i?i(n[a],t[a],a,n,t):void 0;void 0===u&&(u=t[a]),r?Wn(n,a,u):Un(n,a,u)}return n}function mr(t,e){return function(n,i){var r=As(n)?ie:Yn,o=e?e():{};return r(n,t,Jr(i,2),o)}}function vr(t){return ki((function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,s&&so(n[0],n[1],s)&&(o=r<3?void 0:o,r=1),e=dt(e);++i<r;){var a=n[i];a&&t(e,a,i,o)}return e}))}function br(t,e){return function(n,i){if(null==n)return n;if(!Fs(n))return t(n,i);for(var r=n.length,o=e?r:-1,s=dt(n);(e?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function xr(t){return function(e,n,i){for(var r=-1,o=dt(e),s=i(e),a=s.length;a--;){var u=s[t?a:++r];if(!1===n(o[u],u,o))break}return e}}function Er(t){return function(e){var n=ke(e=ua(e))?qe(e):void 0,i=n?n[0]:e.charAt(0),r=n?ur(n,1).join(""):e.slice(1);return i[t]()+r}}function Ir(t){return function(e){return pe(za(Ra(e).replace(St,"")),t,"")}}function Nr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Sn(t.prototype),i=t.apply(n,e);return qs(i)?i:n}}function wr(t){return function(e,n,i){var r=dt(e);if(!Fs(e)){var o=Jr(n,3);e=xa(e),n=function(t){return o(r[t],t,r)}}var s=t(e,n,i);return s>-1?r[o?e[s]:s]:void 0}}function Cr(t){return Ur((function(e){var n=e.length,i=n,o=Tn.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new _t(r);if(o&&!a&&"wrapper"==Wr(s))var a=new Tn([],!0)}for(i=a?i:n;++i<n;){var u=Wr(s=e[i]),l="wrapper"==u?Xr(s):void 0;a=l&&uo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[Wr(l[0])].apply(a,l[3]):1==s.length&&uo(s)?a[u]():a.thru(s)}return function(){var t=arguments,i=t[0];if(a&&1==t.length&&As(i))return a.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}}))}function Or(t,e,n,r,o,s,a,u,l,c){var h=128&e,p=1&e,f=2&e,d=24&e,g=512&e,y=f?void 0:Nr(t);return function _(){for(var m=arguments.length,v=i(m),b=m;b--;)v[b]=arguments[b];if(d)var x=Hr(_),E=Re(v,x);if(r&&(v=dr(v,r,o,d)),s&&(v=gr(v,s,a,d)),m-=E,d&&m<c){var I=Ve(v,x);return Ar(t,e,Or,_.placeholder,n,v,I,u,l,c-m)}var N=p?n:this,w=f?N[t]:t;return m=v.length,u?v=yo(v,u):g&&m>1&&v.reverse(),h&&l<m&&(v.length=l),this&&this!==qt&&this instanceof _&&(w=y||Nr(w)),w.apply(N,v)}}function Pr(t,e){return function(n,i){return function(t,e,n,i){return ui(t,(function(t,r,o){e(i,n(t),r,o)})),i}(n,t,e(i),{})}}function Sr(t,e){return function(n,i){var r;if(void 0===n&&void 0===i)return e;if(void 0!==n&&(r=n),void 0!==i){if(void 0===r)return i;"string"==typeof n||"string"==typeof i?(n=Zi(n),i=Zi(i)):(n=Ji(n),i=Ji(i)),r=t(n,i)}return r}}function Lr(t){return Ur((function(e){return e=ce(e,Pe(Jr())),ki((function(n){var i=this;return t(e,(function(t){return ne(t,i,n)}))}))}))}function Tr(t,e){var n=(e=void 0===e?" ":Zi(e)).length;if(n<2)return n?Fi(e,t):e;var i=Fi(e,Ke(t/Ue(e)));return ke(e)?ur(qe(i),0,t).join(""):i.slice(0,t)}function Mr(t){return function(e,n,r){return r&&"number"!=typeof r&&so(e,n,r)&&(n=r=void 0),e=ia(e),void 0===n?(n=e,e=0):n=ia(n),function(t,e,n,r){for(var o=-1,s=sn(Ke((e-t)/(n||1)),0),a=i(s);s--;)a[r?s:++o]=t,t+=n;return a}(e,n,r=void 0===r?e<n?1:-1:ia(r),t)}}function Rr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=sa(e),n=sa(n)),t(e,n)}}function Ar(t,e,n,i,r,o,s,a,u,l){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var h=[t,e,r,c?o:void 0,c?s:void 0,c?void 0:o,c?void 0:s,a,u,l],p=n.apply(void 0,h);return uo(t)&&mo(p,h),p.placeholder=i,xo(p,t,e)}function Dr(t){var e=ft[t];return function(t,n){if(t=sa(t),(n=null==n?0:an(ra(n),292))&&nn(t)){var i=(ua(t)+"e").split("e");return+((i=(ua(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Fr=gn&&1/ze(new gn([,-0]))[1]==1/0?function(t){return new gn(t)}:Ka;function kr(t){return function(e){var n=eo(e);return n==d?Ge(e):n==m?je(e):function(t,e){return ce(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Gr(t,e,n,s,a,u,l,c){var h=2&e;if(!h&&"function"!=typeof t)throw new _t(r);var p=s?s.length:0;if(p||(e&=-97,s=a=void 0),l=void 0===l?l:sn(ra(l),0),c=void 0===c?c:ra(c),p-=a?a.length:0,64&e){var f=s,d=a;s=a=void 0}var g=h?void 0:Xr(t),y=[t,e,n,s,a,f,d,u,l,c];if(g&&function(t,e){var n=t[1],i=e[1],r=n|i;if(!(r<131||128==i&&8==n||128==i&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n))return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var s=e[3];if(s){var a=t[3];t[3]=a?dr(a,s,e[4]):s,t[4]=a?Ve(t[3],o):e[4]}(s=e[5])&&(t[5]=(a=t[5])?gr(a,s,e[6]):s,t[6]=a?Ve(t[5],o):e[6]),(s=e[7])&&(t[7]=s),128&i&&(t[8]=null==t[8]?e[8]:an(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(y,g),t=y[0],e=y[1],n=y[2],s=y[3],a=y[4],!(c=y[9]=void 0===y[9]?h?0:t.length:sn(y[9]-p,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||16==e?function(t,e,n){var r=Nr(t);return function o(){for(var s=arguments.length,a=i(s),u=s,l=Hr(o);u--;)a[u]=arguments[u];var c=s<3&&a[0]!==l&&a[s-1]!==l?[]:Ve(a,l);if((s-=c.length)<n)return Ar(t,e,Or,o.placeholder,void 0,a,c,void 0,void 0,n-s);var h=this&&this!==qt&&this instanceof o?r:t;return ne(h,this,a)}}(t,e,c):32!=e&&33!=e||a.length?Or.apply(void 0,y):function(t,e,n,r){var o=1&e,s=Nr(t);return function e(){for(var a=-1,u=arguments.length,l=-1,c=r.length,h=i(c+u),p=this&&this!==qt&&this instanceof e?s:t;++l<c;)h[l]=r[l];for(;u--;)h[l++]=arguments[++a];return ne(p,o?n:this,h)}}(t,e,n,s);else var _=function(t,e,n){var i=1&e,r=Nr(t);return function e(){var o=this&&this!==qt&&this instanceof e?r:t;return o.apply(i?n:this,arguments)}}(t,e,n);return xo((g?zi:mo)(_,y),t,e)}function Br(t,e,n,i){return void 0===t||Ls(t,vt[n])&&!Et.call(i,n)?e:t}function Vr(t,e,n,i,r,o){return qs(t)&&qs(e)&&(o.set(e,t),Si(t,e,void 0,Vr,o),o.delete(e)),t}function zr(t){return Hs(t)?void 0:t}function jr(t,e,n,i,r,o){var s=1&n,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var l=o.get(t),c=o.get(e);if(l&&c)return l==e&&c==t;var h=-1,p=!0,f=2&n?new Fn:void 0;for(o.set(t,e),o.set(e,t);++h<a;){var d=t[h],g=e[h];if(i)var y=s?i(g,d,h,e,t,o):i(d,g,h,t,e,o);if(void 0!==y){if(y)continue;p=!1;break}if(f){if(!de(e,(function(t,e){if(!Le(f,e)&&(d===t||r(d,t,n,i,o)))return f.push(e)}))){p=!1;break}}else if(d!==g&&!r(d,g,n,i,o)){p=!1;break}}return o.delete(t),o.delete(e),p}function Ur(t){return bo(fo(t,void 0,Do),t+"")}function qr(t){return pi(t,xa,$r)}function Yr(t){return pi(t,Ea,to)}var Xr=mn?function(t){return mn.get(t)}:Ka;function Wr(t){for(var e=t.name+"",n=vn[e],i=Et.call(vn,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function Hr(t){return(Et.call(Pn,"placeholder")?Pn:t).placeholder}function Jr(){var t=Pn.iteratee||Ha;return t=t===Ha?Ii:t,arguments.length?t(arguments[0],arguments[1]):t}function Zr(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Qr(t){for(var e=xa(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,ho(r)]}return e}function Kr(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Ei(n)?n:void 0}var $r=tn?function(t){return null==t?[]:(t=dt(t),ae(tn(t),(function(e){return Xt.call(t,e)})))}:ou,to=tn?function(t){for(var e=[];t;)he(e,$r(t)),t=Ut(t);return e}:ou,eo=fi;function no(t,e,n){for(var i=-1,r=(e=sr(e,t)).length,o=!1;++i<r;){var s=Oo(e[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&Us(r)&&oo(s,r)&&(As(t)||Rs(t))}function io(t){return"function"!=typeof t.constructor||co(t)?{}:Sn(Ut(t))}function ro(t){return As(t)||Rs(t)||!!(Jt&&t&&t[Jt])}function oo(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&at.test(t))&&t>-1&&t%1==0&&t<e}function so(t,e,n){if(!qs(n))return!1;var i=typeof e;return!!("number"==i?Fs(n)&&oo(e,n.length):"string"==i&&e in n)&&Ls(n[e],t)}function ao(t,e){if(As(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ks(t))||U.test(t)||!j.test(t)||null!=e&&t in dt(e)}function uo(t){var e=Wr(t),n=Pn[e];if("function"!=typeof n||!(e in Mn.prototype))return!1;if(t===n)return!0;var i=Xr(n);return!!i&&t===i[0]}(pn&&eo(new pn(new ArrayBuffer(1)))!=I||fn&&eo(new fn)!=d||dn&&"[object Promise]"!=eo(dn.resolve())||gn&&eo(new gn)!=m||yn&&eo(new yn)!=x)&&(eo=function(t){var e=fi(t),n=e==y?t.constructor:void 0,i=n?Po(n):"";if(i)switch(i){case bn:return I;case xn:return d;case En:return"[object Promise]";case In:return m;case Nn:return x}return e});var lo=bt?zs:su;function co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||vt)}function ho(t){return t==t&&!qs(t)}function po(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in dt(n))}}function fo(t,e,n){return e=sn(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,s=sn(r.length-e,0),a=i(s);++o<s;)a[o]=r[e+o];o=-1;for(var u=i(e+1);++o<e;)u[o]=r[o];return u[e]=n(a),ne(t,this,u)}}function go(t,e){return e.length<2?t:hi(t,qi(e,0,-1))}function yo(t,e){for(var n=t.length,i=an(e.length,n),r=yr(t);i--;){var o=e[i];t[i]=oo(o,n)?r[o]:void 0}return t}function _o(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var mo=Eo(zi),vo=Qe||function(t,e){return qt.setTimeout(t,e)},bo=Eo(ji);function xo(t,e,n){var i=e+"";return bo(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(J,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return re(s,(function(n){var i="_."+n[0];e&n[1]&&!ue(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(Z);return e?e[1].split(Q):[]}(i),n)))}function Eo(t){var e=0,n=0;return function(){var i=un(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Io(t,e){var n=-1,i=t.length,r=i-1;for(e=void 0===e?i:e;++n<e;){var o=Di(n,r),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var No,wo,Co=(No=Ns((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(q,(function(t,n,i,r){e.push(i?r.replace(tt,"$1"):n||t)})),e}),(function(t){return 500===wo.size&&wo.clear(),t})),wo=No.cache,No);function Oo(t){if("string"==typeof t||Ks(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Po(t){if(null!=t){try{return xt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function So(t){if(t instanceof Mn)return t.clone();var e=new Tn(t.__wrapped__,t.__chain__);return e.__actions__=yr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Lo=ki((function(t,e){return ks(t)?$n(t,oi(e,1,ks,!0)):[]})),To=ki((function(t,e){var n=Vo(e);return ks(n)&&(n=void 0),ks(t)?$n(t,oi(e,1,ks,!0),Jr(n,2)):[]})),Mo=ki((function(t,e){var n=Vo(e);return ks(n)&&(n=void 0),ks(t)?$n(t,oi(e,1,ks,!0),void 0,n):[]}));function Ro(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ra(n);return r<0&&(r=sn(i+r,0)),_e(t,Jr(e,3),r)}function Ao(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return void 0!==n&&(r=ra(n),r=n<0?sn(i+r,0):an(r,i-1)),_e(t,Jr(e,3),r,!0)}function Do(t){return null!=t&&t.length?oi(t,1):[]}function Fo(t){return t&&t.length?t[0]:void 0}var ko=ki((function(t){var e=ce(t,rr);return e.length&&e[0]===t[0]?_i(e):[]})),Go=ki((function(t){var e=Vo(t),n=ce(t,rr);return e===Vo(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?_i(n,Jr(e,2)):[]})),Bo=ki((function(t){var e=Vo(t),n=ce(t,rr);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?_i(n,void 0,e):[]}));function Vo(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var zo=ki(jo);function jo(t,e){return t&&t.length&&e&&e.length?Ri(t,e):t}var Uo=Ur((function(t,e){var n=null==t?0:t.length,i=Hn(t,e);return Ai(t,ce(e,(function(t){return oo(t,n)?+t:t})).sort(fr)),i}));function qo(t){return null==t?t:hn.call(t)}var Yo=ki((function(t){return Qi(oi(t,1,ks,!0))})),Xo=ki((function(t){var e=Vo(t);return ks(e)&&(e=void 0),Qi(oi(t,1,ks,!0),Jr(e,2))})),Wo=ki((function(t){var e=Vo(t);return e="function"==typeof e?e:void 0,Qi(oi(t,1,ks,!0),void 0,e)}));function Ho(t){if(!t||!t.length)return[];var e=0;return t=ae(t,(function(t){if(ks(t))return e=sn(t.length,e),!0})),Ce(e,(function(e){return ce(t,Ee(e))}))}function Jo(t,e){if(!t||!t.length)return[];var n=Ho(t);return null==e?n:ce(n,(function(t){return ne(e,void 0,t)}))}var Zo=ki((function(t,e){return ks(t)?$n(t,e):[]})),Qo=ki((function(t){return nr(ae(t,ks))})),Ko=ki((function(t){var e=Vo(t);return ks(e)&&(e=void 0),nr(ae(t,ks),Jr(e,2))})),$o=ki((function(t){var e=Vo(t);return e="function"==typeof e?e:void 0,nr(ae(t,ks),void 0,e)})),ts=ki(Ho),es=ki((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Jo(t,n)}));function ns(t){var e=Pn(t);return e.__chain__=!0,e}function is(t,e){return e(t)}var rs=Ur((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Hn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Mn&&oo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:is,args:[r],thisArg:void 0}),new Tn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(r)})),os=mr((function(t,e,n){Et.call(t,n)?++t[n]:Wn(t,n,1)})),ss=wr(Ro),as=wr(Ao);function us(t,e){return(As(t)?re:ti)(t,Jr(e,3))}function ls(t,e){return(As(t)?oe:ei)(t,Jr(e,3))}var cs=mr((function(t,e,n){Et.call(t,n)?t[n].push(e):Wn(t,n,[e])})),hs=ki((function(t,e,n){var r=-1,o="function"==typeof e,s=Fs(t)?i(t.length):[];return ti(t,(function(t){s[++r]=o?ne(e,t,n):mi(t,e,n)})),s})),ps=mr((function(t,e,n){Wn(t,n,e)}));function fs(t,e){return(As(t)?ce:Ci)(t,Jr(e,3))}var ds=mr((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),gs=ki((function(t,e){if(null==t)return[];var n=e.length;return n>1&&so(t,e[0],e[1])?e=[]:n>2&&so(e[0],e[1],e[2])&&(e=[e[0]]),Ti(t,oi(e,1),[])})),ys=Ze||function(){return qt.Date.now()};function _s(t,e,n){return e=n?void 0:e,Gr(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function ms(t,e){var n;if("function"!=typeof e)throw new _t(r);return t=ra(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var vs=ki((function(t,e,n){var i=1;if(n.length){var r=Ve(n,Hr(vs));i|=32}return Gr(t,i,e,n,r)})),bs=ki((function(t,e,n){var i=3;if(n.length){var r=Ve(n,Hr(bs));i|=32}return Gr(e,i,t,n,r)}));function xs(t,e,n){var i,o,s,a,u,l,c=0,h=!1,p=!1,f=!0;if("function"!=typeof t)throw new _t(r);function d(e){var n=i,r=o;return i=o=void 0,c=e,a=t.apply(r,n)}function g(t){return c=t,u=vo(_,e),h?d(t):a}function y(t){var n=t-l;return void 0===l||n>=e||n<0||p&&t-c>=s}function _(){var t=ys();if(y(t))return m(t);u=vo(_,function(t){var n=e-(t-l);return p?an(n,s-(t-c)):n}(t))}function m(t){return u=void 0,f&&i?d(t):(i=o=void 0,a)}function v(){var t=ys(),n=y(t);if(i=arguments,o=this,l=t,n){if(void 0===u)return g(l);if(p)return lr(u),u=vo(_,e),d(l)}return void 0===u&&(u=vo(_,e)),a}return e=sa(e)||0,qs(n)&&(h=!!n.leading,s=(p="maxWait"in n)?sn(sa(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f),v.cancel=function(){void 0!==u&&lr(u),c=0,i=l=o=u=void 0},v.flush=function(){return void 0===u?a:m(ys())},v}var Es=ki((function(t,e){return Kn(t,1,e)})),Is=ki((function(t,e,n){return Kn(t,sa(e)||0,n)}));function Ns(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new _t(r);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Ns.Cache||Dn),n}function ws(t){if("function"!=typeof t)throw new _t(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ns.Cache=Dn;var Cs=ar((function(t,e){var n=(e=1==e.length&&As(e[0])?ce(e[0],Pe(Jr())):ce(oi(e,1),Pe(Jr()))).length;return ki((function(i){for(var r=-1,o=an(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return ne(t,this,i)}))})),Os=ki((function(t,e){return Gr(t,32,void 0,e,Ve(e,Hr(Os)))})),Ps=ki((function(t,e){return Gr(t,64,void 0,e,Ve(e,Hr(Ps)))})),Ss=Ur((function(t,e){return Gr(t,256,void 0,void 0,void 0,e)}));function Ls(t,e){return t===e||t!=t&&e!=e}var Ts=Rr(di),Ms=Rr((function(t,e){return t>=e})),Rs=vi(function(){return arguments}())?vi:function(t){return Ys(t)&&Et.call(t,"callee")&&!Xt.call(t,"callee")},As=i.isArray,Ds=Zt?Pe(Zt):function(t){return Ys(t)&&fi(t)==E};function Fs(t){return null!=t&&Us(t.length)&&!zs(t)}function ks(t){return Ys(t)&&Fs(t)}var Gs=en||su,Bs=Qt?Pe(Qt):function(t){return Ys(t)&&fi(t)==c};function Vs(t){if(!Ys(t))return!1;var e=fi(t);return e==h||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Hs(t)}function zs(t){if(!qs(t))return!1;var e=fi(t);return e==p||e==f||"[object AsyncFunction]"==e||"[object Proxy]"==e}function js(t){return"number"==typeof t&&t==ra(t)}function Us(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function qs(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ys(t){return null!=t&&"object"==typeof t}var Xs=Kt?Pe(Kt):function(t){return Ys(t)&&eo(t)==d};function Ws(t){return"number"==typeof t||Ys(t)&&fi(t)==g}function Hs(t){if(!Ys(t)||fi(t)!=y)return!1;var e=Ut(t);if(null===e)return!0;var n=Et.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&xt.call(n)==Ct}var Js=$t?Pe($t):function(t){return Ys(t)&&fi(t)==_},Zs=te?Pe(te):function(t){return Ys(t)&&eo(t)==m};function Qs(t){return"string"==typeof t||!As(t)&&Ys(t)&&fi(t)==v}function Ks(t){return"symbol"==typeof t||Ys(t)&&fi(t)==b}var $s=ee?Pe(ee):function(t){return Ys(t)&&Us(t.length)&&!!kt[fi(t)]},ta=Rr(wi),ea=Rr((function(t,e){return t<=e}));function na(t){if(!t)return[];if(Fs(t))return Qs(t)?qe(t):yr(t);if(ge&&t[ge])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ge]());var e=eo(t);return(e==d?Ge:e==m?ze:La)(t)}function ia(t){return t?(t=sa(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ra(t){var e=ia(t),n=e%1;return e==e?n?e-n:e:0}function oa(t){return t?Jn(ra(t),0,4294967295):0}function sa(t){if("number"==typeof t)return t;if(Ks(t))return NaN;if(qs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=qs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Oe(t);var n=rt.test(t);return n||st.test(t)?zt(t.slice(2),n?2:8):it.test(t)?NaN:+t}function aa(t){return _r(t,Ea(t))}function ua(t){return null==t?"":Zi(t)}var la=vr((function(t,e){if(co(e)||Fs(e))_r(e,xa(e),t);else for(var n in e)Et.call(e,n)&&Un(t,n,e[n])})),ca=vr((function(t,e){_r(e,Ea(e),t)})),ha=vr((function(t,e,n,i){_r(e,Ea(e),t,i)})),pa=vr((function(t,e,n,i){_r(e,xa(e),t,i)})),fa=Ur(Hn),da=ki((function(t,e){t=dt(t);var n=-1,i=e.length,r=i>2?e[2]:void 0;for(r&&so(e[0],e[1],r)&&(i=1);++n<i;)for(var o=e[n],s=Ea(o),a=-1,u=s.length;++a<u;){var l=s[a],c=t[l];(void 0===c||Ls(c,vt[l])&&!Et.call(t,l))&&(t[l]=o[l])}return t})),ga=ki((function(t){return t.push(void 0,Vr),ne(Na,void 0,t)}));function ya(t,e,n){var i=null==t?void 0:hi(t,e);return void 0===i?n:i}function _a(t,e){return null!=t&&no(t,e,yi)}var ma=Pr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=wt.call(e)),t[e]=n}),qa(Wa)),va=Pr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=wt.call(e)),Et.call(t,e)?t[e].push(n):t[e]=[n]}),Jr),ba=ki(mi);function xa(t){return Fs(t)?Gn(t):Ni(t)}function Ea(t){return Fs(t)?Gn(t,!0):function(t){if(!qs(t))return function(t){var e=[];if(null!=t)for(var n in dt(t))e.push(n);return e}(t);var e=co(t),n=[];for(var i in t)("constructor"!=i||!e&&Et.call(t,i))&&n.push(i);return n}(t)}var Ia=vr((function(t,e,n){Si(t,e,n)})),Na=vr((function(t,e,n,i){Si(t,e,n,i)})),wa=Ur((function(t,e){var n={};if(null==t)return n;var i=!1;e=ce(e,(function(e){return e=sr(e,t),i||(i=e.length>1),e})),_r(t,Yr(t),n),i&&(n=Zn(n,7,zr));for(var r=e.length;r--;)Ki(n,e[r]);return n})),Ca=Ur((function(t,e){return null==t?{}:function(t,e){return Mi(t,e,(function(e,n){return _a(t,n)}))}(t,e)}));function Oa(t,e){if(null==t)return{};var n=ce(Yr(t),(function(t){return[t]}));return e=Jr(e),Mi(t,n,(function(t,n){return e(t,n[0])}))}var Pa=kr(xa),Sa=kr(Ea);function La(t){return null==t?[]:Se(t,xa(t))}var Ta=Ir((function(t,e,n){return e=e.toLowerCase(),t+(n?Ma(e):e)}));function Ma(t){return Va(ua(t).toLowerCase())}function Ra(t){return(t=ua(t))&&t.replace(ut,Ae).replace(Lt,"")}var Aa=Ir((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Da=Ir((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Fa=Er("toLowerCase"),ka=Ir((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ga=Ir((function(t,e,n){return t+(n?" ":"")+Va(e)})),Ba=Ir((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Va=Er("toUpperCase");function za(t,e,n){return t=ua(t),void 0===(e=n?void 0:e)?function(t){return At.test(t)}(t)?function(t){return t.match(Mt)||[]}(t):function(t){return t.match(K)||[]}(t):t.match(e)||[]}var ja=ki((function(t,e){try{return ne(t,void 0,e)}catch(n){return Vs(n)?n:new ht(n)}})),Ua=Ur((function(t,e){return re(e,(function(e){e=Oo(e),Wn(t,e,vs(t[e],t))})),t}));function qa(t){return function(){return t}}var Ya=Cr(),Xa=Cr(!0);function Wa(t){return t}function Ha(t){return Ii("function"==typeof t?t:Zn(t,1))}var Ja=ki((function(t,e){return function(n){return mi(n,t,e)}})),Za=ki((function(t,e){return function(n){return mi(t,n,e)}}));function Qa(t,e,n){var i=xa(e),r=ci(e,i);null!=n||qs(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=ci(e,xa(e)));var o=!(qs(n)&&"chain"in n&&!n.chain),s=zs(t);return re(r,(function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=yr(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,he([this.value()],arguments))})})),t}function Ka(){}var $a=Lr(ce),tu=Lr(se),eu=Lr(de);function nu(t){return ao(t)?Ee(Oo(t)):function(t){return function(e){return hi(e,t)}}(t)}var iu=Mr(),ru=Mr(!0);function ou(){return[]}function su(){return!1}var au,uu=Sr((function(t,e){return t+e}),0),lu=Dr("ceil"),cu=Sr((function(t,e){return t/e}),1),hu=Dr("floor"),pu=Sr((function(t,e){return t*e}),1),fu=Dr("round"),du=Sr((function(t,e){return t-e}),0);return Pn.after=function(t,e){if("function"!=typeof e)throw new _t(r);return t=ra(t),function(){if(--t<1)return e.apply(this,arguments)}},Pn.ary=_s,Pn.assign=la,Pn.assignIn=ca,Pn.assignInWith=ha,Pn.assignWith=pa,Pn.at=fa,Pn.before=ms,Pn.bind=vs,Pn.bindAll=Ua,Pn.bindKey=bs,Pn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return As(t)?t:[t]},Pn.chain=ns,Pn.chunk=function(t,e,n){e=(n?so(t,e,n):void 0===e)?1:sn(ra(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var o=0,s=0,a=i(Ke(r/e));o<r;)a[s++]=qi(t,o,o+=e);return a},Pn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},Pn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return he(As(n)?yr(n):[n],oi(e,1))},Pn.cond=function(t){var e=null==t?0:t.length,n=Jr();return t=e?ce(t,(function(t){if("function"!=typeof t[1])throw new _t(r);return[n(t[0]),t[1]]})):[],ki((function(n){for(var i=-1;++i<e;){var r=t[i];if(ne(r[0],this,n))return ne(r[1],this,n)}}))},Pn.conforms=function(t){return function(t){var e=xa(t);return function(n){return Qn(n,t,e)}}(Zn(t,1))},Pn.constant=qa,Pn.countBy=os,Pn.create=function(t,e){var n=Sn(t);return null==e?n:Xn(n,e)},Pn.curry=function t(e,n,i){var r=Gr(e,8,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=t.placeholder,r},Pn.curryRight=function t(e,n,i){var r=Gr(e,16,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=t.placeholder,r},Pn.debounce=xs,Pn.defaults=da,Pn.defaultsDeep=ga,Pn.defer=Es,Pn.delay=Is,Pn.difference=Lo,Pn.differenceBy=To,Pn.differenceWith=Mo,Pn.drop=function(t,e,n){var i=null==t?0:t.length;return i?qi(t,(e=n||void 0===e?1:ra(e))<0?0:e,i):[]},Pn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?qi(t,0,(e=i-(e=n||void 0===e?1:ra(e)))<0?0:e):[]},Pn.dropRightWhile=function(t,e){return t&&t.length?tr(t,Jr(e,3),!0,!0):[]},Pn.dropWhile=function(t,e){return t&&t.length?tr(t,Jr(e,3),!0):[]},Pn.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&so(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=ra(n))<0&&(n=-n>r?0:r+n),(i=void 0===i||i>r?r:ra(i))<0&&(i+=r),i=n>i?0:oa(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Pn.filter=function(t,e){return(As(t)?ae:ri)(t,Jr(e,3))},Pn.flatMap=function(t,e){return oi(fs(t,e),1)},Pn.flatMapDeep=function(t,e){return oi(fs(t,e),1/0)},Pn.flatMapDepth=function(t,e,n){return n=void 0===n?1:ra(n),oi(fs(t,e),n)},Pn.flatten=Do,Pn.flattenDeep=function(t){return null!=t&&t.length?oi(t,1/0):[]},Pn.flattenDepth=function(t,e){return null!=t&&t.length?oi(t,e=void 0===e?1:ra(e)):[]},Pn.flip=function(t){return Gr(t,512)},Pn.flow=Ya,Pn.flowRight=Xa,Pn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Pn.functions=function(t){return null==t?[]:ci(t,xa(t))},Pn.functionsIn=function(t){return null==t?[]:ci(t,Ea(t))},Pn.groupBy=cs,Pn.initial=function(t){return null!=t&&t.length?qi(t,0,-1):[]},Pn.intersection=ko,Pn.intersectionBy=Go,Pn.intersectionWith=Bo,Pn.invert=ma,Pn.invertBy=va,Pn.invokeMap=hs,Pn.iteratee=Ha,Pn.keyBy=ps,Pn.keys=xa,Pn.keysIn=Ea,Pn.map=fs,Pn.mapKeys=function(t,e){var n={};return e=Jr(e,3),ui(t,(function(t,i,r){Wn(n,e(t,i,r),t)})),n},Pn.mapValues=function(t,e){var n={};return e=Jr(e,3),ui(t,(function(t,i,r){Wn(n,i,e(t,i,r))})),n},Pn.matches=function(t){return Oi(Zn(t,1))},Pn.matchesProperty=function(t,e){return Pi(t,Zn(e,1))},Pn.memoize=Ns,Pn.merge=Ia,Pn.mergeWith=Na,Pn.method=Ja,Pn.methodOf=Za,Pn.mixin=Qa,Pn.negate=ws,Pn.nthArg=function(t){return t=ra(t),ki((function(e){return Li(e,t)}))},Pn.omit=wa,Pn.omitBy=function(t,e){return Oa(t,ws(Jr(e)))},Pn.once=function(t){return ms(2,t)},Pn.orderBy=function(t,e,n,i){return null==t?[]:(As(e)||(e=null==e?[]:[e]),As(n=i?void 0:n)||(n=null==n?[]:[n]),Ti(t,e,n))},Pn.over=$a,Pn.overArgs=Cs,Pn.overEvery=tu,Pn.overSome=eu,Pn.partial=Os,Pn.partialRight=Ps,Pn.partition=ds,Pn.pick=Ca,Pn.pickBy=Oa,Pn.property=nu,Pn.propertyOf=function(t){return function(e){return null==t?void 0:hi(t,e)}},Pn.pull=zo,Pn.pullAll=jo,Pn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ri(t,e,Jr(n,2)):t},Pn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ri(t,e,void 0,n):t},Pn.pullAt=Uo,Pn.range=iu,Pn.rangeRight=ru,Pn.rearg=Ss,Pn.reject=function(t,e){return(As(t)?ae:ri)(t,ws(Jr(e,3)))},Pn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Jr(e,3);++i<o;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return Ai(t,r),n},Pn.rest=function(t,e){if("function"!=typeof t)throw new _t(r);return ki(t,e=void 0===e?e:ra(e))},Pn.reverse=qo,Pn.sampleSize=function(t,e,n){return e=(n?so(t,e,n):void 0===e)?1:ra(e),(As(t)?Vn:Bi)(t,e)},Pn.set=function(t,e,n){return null==t?t:Vi(t,e,n)},Pn.setWith=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:Vi(t,e,n,i)},Pn.shuffle=function(t){return(As(t)?zn:Ui)(t)},Pn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&so(t,e,n)?(e=0,n=i):(e=null==e?0:ra(e),n=void 0===n?i:ra(n)),qi(t,e,n)):[]},Pn.sortBy=gs,Pn.sortedUniq=function(t){return t&&t.length?Hi(t):[]},Pn.sortedUniqBy=function(t,e){return t&&t.length?Hi(t,Jr(e,2)):[]},Pn.split=function(t,e,n){return n&&"number"!=typeof n&&so(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=ua(t))&&("string"==typeof e||null!=e&&!Js(e))&&!(e=Zi(e))&&ke(t)?ur(qe(t),0,n):t.split(e,n):[]},Pn.spread=function(t,e){if("function"!=typeof t)throw new _t(r);return e=null==e?0:sn(ra(e),0),ki((function(n){var i=n[e],r=ur(n,0,e);return i&&he(r,i),ne(t,this,r)}))},Pn.tail=function(t){var e=null==t?0:t.length;return e?qi(t,1,e):[]},Pn.take=function(t,e,n){return t&&t.length?qi(t,0,(e=n||void 0===e?1:ra(e))<0?0:e):[]},Pn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?qi(t,(e=i-(e=n||void 0===e?1:ra(e)))<0?0:e,i):[]},Pn.takeRightWhile=function(t,e){return t&&t.length?tr(t,Jr(e,3),!1,!0):[]},Pn.takeWhile=function(t,e){return t&&t.length?tr(t,Jr(e,3)):[]},Pn.tap=function(t,e){return e(t),t},Pn.throttle=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new _t(r);return qs(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),xs(t,e,{leading:i,maxWait:e,trailing:o})},Pn.thru=is,Pn.toArray=na,Pn.toPairs=Pa,Pn.toPairsIn=Sa,Pn.toPath=function(t){return As(t)?ce(t,Oo):Ks(t)?[t]:yr(Co(ua(t)))},Pn.toPlainObject=aa,Pn.transform=function(t,e,n){var i=As(t),r=i||Gs(t)||$s(t);if(e=Jr(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:qs(t)&&zs(o)?Sn(Ut(t)):{}}return(r?re:ui)(t,(function(t,i,r){return e(n,t,i,r)})),n},Pn.unary=function(t){return _s(t,1)},Pn.union=Yo,Pn.unionBy=Xo,Pn.unionWith=Wo,Pn.uniq=function(t){return t&&t.length?Qi(t):[]},Pn.uniqBy=function(t,e){return t&&t.length?Qi(t,Jr(e,2)):[]},Pn.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Qi(t,void 0,e):[]},Pn.unset=function(t,e){return null==t||Ki(t,e)},Pn.unzip=Ho,Pn.unzipWith=Jo,Pn.update=function(t,e,n){return null==t?t:$i(t,e,or(n))},Pn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:$i(t,e,or(n),i)},Pn.values=La,Pn.valuesIn=function(t){return null==t?[]:Se(t,Ea(t))},Pn.without=Zo,Pn.words=za,Pn.wrap=function(t,e){return Os(or(e),t)},Pn.xor=Qo,Pn.xorBy=Ko,Pn.xorWith=$o,Pn.zip=ts,Pn.zipObject=function(t,e){return ir(t||[],e||[],Un)},Pn.zipObjectDeep=function(t,e){return ir(t||[],e||[],Vi)},Pn.zipWith=es,Pn.entries=Pa,Pn.entriesIn=Sa,Pn.extend=ca,Pn.extendWith=ha,Qa(Pn,Pn),Pn.add=uu,Pn.attempt=ja,Pn.camelCase=Ta,Pn.capitalize=Ma,Pn.ceil=lu,Pn.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=sa(n))==n?n:0),void 0!==e&&(e=(e=sa(e))==e?e:0),Jn(sa(t),e,n)},Pn.clone=function(t){return Zn(t,4)},Pn.cloneDeep=function(t){return Zn(t,5)},Pn.cloneDeepWith=function(t,e){return Zn(t,5,e="function"==typeof e?e:void 0)},Pn.cloneWith=function(t,e){return Zn(t,4,e="function"==typeof e?e:void 0)},Pn.conformsTo=function(t,e){return null==e||Qn(t,e,xa(e))},Pn.deburr=Ra,Pn.defaultTo=function(t,e){return null==t||t!=t?e:t},Pn.divide=cu,Pn.endsWith=function(t,e,n){t=ua(t),e=Zi(e);var i=t.length,r=n=void 0===n?i:Jn(ra(n),0,i);return(n-=e.length)>=0&&t.slice(n,r)==e},Pn.eq=Ls,Pn.escape=function(t){return(t=ua(t))&&G.test(t)?t.replace(F,De):t},Pn.escapeRegExp=function(t){return(t=ua(t))&&X.test(t)?t.replace(Y,"\\$&"):t},Pn.every=function(t,e,n){var i=As(t)?se:ni;return n&&so(t,e,n)&&(e=void 0),i(t,Jr(e,3))},Pn.find=ss,Pn.findIndex=Ro,Pn.findKey=function(t,e){return ye(t,Jr(e,3),ui)},Pn.findLast=as,Pn.findLastIndex=Ao,Pn.findLastKey=function(t,e){return ye(t,Jr(e,3),li)},Pn.floor=hu,Pn.forEach=us,Pn.forEachRight=ls,Pn.forIn=function(t,e){return null==t?t:si(t,Jr(e,3),Ea)},Pn.forInRight=function(t,e){return null==t?t:ai(t,Jr(e,3),Ea)},Pn.forOwn=function(t,e){return t&&ui(t,Jr(e,3))},Pn.forOwnRight=function(t,e){return t&&li(t,Jr(e,3))},Pn.get=ya,Pn.gt=Ts,Pn.gte=Ms,Pn.has=function(t,e){return null!=t&&no(t,e,gi)},Pn.hasIn=_a,Pn.head=Fo,Pn.identity=Wa,Pn.includes=function(t,e,n,i){t=Fs(t)?t:La(t),n=n&&!i?ra(n):0;var r=t.length;return n<0&&(n=sn(r+n,0)),Qs(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&me(t,e,n)>-1},Pn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ra(n);return r<0&&(r=sn(i+r,0)),me(t,e,r)},Pn.inRange=function(t,e,n){return e=ia(e),void 0===n?(n=e,e=0):n=ia(n),function(t,e,n){return t>=an(e,n)&&t<sn(e,n)}(t=sa(t),e,n)},Pn.invoke=ba,Pn.isArguments=Rs,Pn.isArray=As,Pn.isArrayBuffer=Ds,Pn.isArrayLike=Fs,Pn.isArrayLikeObject=ks,Pn.isBoolean=function(t){return!0===t||!1===t||Ys(t)&&fi(t)==l},Pn.isBuffer=Gs,Pn.isDate=Bs,Pn.isElement=function(t){return Ys(t)&&1===t.nodeType&&!Hs(t)},Pn.isEmpty=function(t){if(null==t)return!0;if(Fs(t)&&(As(t)||"string"==typeof t||"function"==typeof t.splice||Gs(t)||$s(t)||Rs(t)))return!t.length;var e=eo(t);if(e==d||e==m)return!t.size;if(co(t))return!Ni(t).length;for(var n in t)if(Et.call(t,n))return!1;return!0},Pn.isEqual=function(t,e){return bi(t,e)},Pn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===i?bi(t,e,void 0,n):!!i},Pn.isError=Vs,Pn.isFinite=function(t){return"number"==typeof t&&nn(t)},Pn.isFunction=zs,Pn.isInteger=js,Pn.isLength=Us,Pn.isMap=Xs,Pn.isMatch=function(t,e){return t===e||xi(t,e,Qr(e))},Pn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,xi(t,e,Qr(e),n)},Pn.isNaN=function(t){return Ws(t)&&t!=+t},Pn.isNative=function(t){if(lo(t))throw new ht("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ei(t)},Pn.isNil=function(t){return null==t},Pn.isNull=function(t){return null===t},Pn.isNumber=Ws,Pn.isObject=qs,Pn.isObjectLike=Ys,Pn.isPlainObject=Hs,Pn.isRegExp=Js,Pn.isSafeInteger=function(t){return js(t)&&t>=-9007199254740991&&t<=9007199254740991},Pn.isSet=Zs,Pn.isString=Qs,Pn.isSymbol=Ks,Pn.isTypedArray=$s,Pn.isUndefined=function(t){return void 0===t},Pn.isWeakMap=function(t){return Ys(t)&&eo(t)==x},Pn.isWeakSet=function(t){return Ys(t)&&"[object WeakSet]"==fi(t)},Pn.join=function(t,e){return null==t?"":rn.call(t,e)},Pn.kebabCase=Aa,Pn.last=Vo,Pn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return void 0!==n&&(r=(r=ra(n))<0?sn(i+r,0):an(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):_e(t,be,r,!0)},Pn.lowerCase=Da,Pn.lowerFirst=Fa,Pn.lt=ta,Pn.lte=ea,Pn.max=function(t){return t&&t.length?ii(t,Wa,di):void 0},Pn.maxBy=function(t,e){return t&&t.length?ii(t,Jr(e,2),di):void 0},Pn.mean=function(t){return xe(t,Wa)},Pn.meanBy=function(t,e){return xe(t,Jr(e,2))},Pn.min=function(t){return t&&t.length?ii(t,Wa,wi):void 0},Pn.minBy=function(t,e){return t&&t.length?ii(t,Jr(e,2),wi):void 0},Pn.stubArray=ou,Pn.stubFalse=su,Pn.stubObject=function(){return{}},Pn.stubString=function(){return""},Pn.stubTrue=function(){return!0},Pn.multiply=pu,Pn.nth=function(t,e){return t&&t.length?Li(t,ra(e)):void 0},Pn.noConflict=function(){return qt._===this&&(qt._=Ot),this},Pn.noop=Ka,Pn.now=ys,Pn.pad=function(t,e,n){t=ua(t);var i=(e=ra(e))?Ue(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Tr($e(r),n)+t+Tr(Ke(r),n)},Pn.padEnd=function(t,e,n){t=ua(t);var i=(e=ra(e))?Ue(t):0;return e&&i<e?t+Tr(e-i,n):t},Pn.padStart=function(t,e,n){t=ua(t);var i=(e=ra(e))?Ue(t):0;return e&&i<e?Tr(e-i,n)+t:t},Pn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),ln(ua(t).replace(W,""),e||0)},Pn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&so(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=ia(t),void 0===e?(e=t,t=0):e=ia(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=cn();return an(t+r*(e-t+Vt("1e-"+((r+"").length-1))),e)}return Di(t,e)},Pn.reduce=function(t,e,n){var i=As(t)?pe:Ne,r=arguments.length<3;return i(t,Jr(e,4),n,r,ti)},Pn.reduceRight=function(t,e,n){var i=As(t)?fe:Ne,r=arguments.length<3;return i(t,Jr(e,4),n,r,ei)},Pn.repeat=function(t,e,n){return e=(n?so(t,e,n):void 0===e)?1:ra(e),Fi(ua(t),e)},Pn.replace=function(){var t=arguments,e=ua(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Pn.result=function(t,e,n){var i=-1,r=(e=sr(e,t)).length;for(r||(r=1,t=void 0);++i<r;){var o=null==t?void 0:t[Oo(e[i])];void 0===o&&(i=r,o=n),t=zs(o)?o.call(t):o}return t},Pn.round=fu,Pn.runInContext=t,Pn.sample=function(t){return(As(t)?Bn:Gi)(t)},Pn.size=function(t){if(null==t)return 0;if(Fs(t))return Qs(t)?Ue(t):t.length;var e=eo(t);return e==d||e==m?t.size:Ni(t).length},Pn.snakeCase=ka,Pn.some=function(t,e,n){var i=As(t)?de:Yi;return n&&so(t,e,n)&&(e=void 0),i(t,Jr(e,3))},Pn.sortedIndex=function(t,e){return Xi(t,e)},Pn.sortedIndexBy=function(t,e,n){return Wi(t,e,Jr(n,2))},Pn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=Xi(t,e);if(i<n&&Ls(t[i],e))return i}return-1},Pn.sortedLastIndex=function(t,e){return Xi(t,e,!0)},Pn.sortedLastIndexBy=function(t,e,n){return Wi(t,e,Jr(n,2),!0)},Pn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Xi(t,e,!0)-1;if(Ls(t[n],e))return n}return-1},Pn.startCase=Ga,Pn.startsWith=function(t,e,n){return t=ua(t),n=null==n?0:Jn(ra(n),0,t.length),e=Zi(e),t.slice(n,n+e.length)==e},Pn.subtract=du,Pn.sum=function(t){return t&&t.length?we(t,Wa):0},Pn.sumBy=function(t,e){return t&&t.length?we(t,Jr(e,2)):0},Pn.template=function(t,e,n){var i=Pn.templateSettings;n&&so(t,e,n)&&(e=void 0),t=ua(t),e=ha({},e,i,Br);var r,o,s=ha({},e.imports,i.imports,Br),a=xa(s),u=Se(s,a),l=0,c=e.interpolate||lt,h="__p += '",p=gt((e.escape||lt).source+"|"+c.source+"|"+(c===z?et:lt).source+"|"+(e.evaluate||lt).source+"|$","g"),f="//# sourceURL="+(Et.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ft+"]")+"\n";t.replace(p,(function(e,n,i,s,a,u){return i||(i=s),h+=t.slice(l,u).replace(ct,Fe),n&&(r=!0,h+="' +\n__e("+n+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),h+="';\n";var d=Et.call(e,"variable")&&e.variable;if(d){if($.test(d))throw new ht("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(M,""):h).replace(R,"$1").replace(A,"$1;"),h="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=ja((function(){return pt(a,f+"return "+h).apply(void 0,u)}));if(g.source=h,Vs(g))throw g;return g},Pn.times=function(t,e){if((t=ra(t))<1||t>9007199254740991)return[];var n=4294967295,i=an(t,4294967295);t-=4294967295;for(var r=Ce(i,e=Jr(e));++n<t;)e(n);return r},Pn.toFinite=ia,Pn.toInteger=ra,Pn.toLength=oa,Pn.toLower=function(t){return ua(t).toLowerCase()},Pn.toNumber=sa,Pn.toSafeInteger=function(t){return t?Jn(ra(t),-9007199254740991,9007199254740991):0===t?t:0},Pn.toString=ua,Pn.toUpper=function(t){return ua(t).toUpperCase()},Pn.trim=function(t,e,n){if((t=ua(t))&&(n||void 0===e))return Oe(t);if(!t||!(e=Zi(e)))return t;var i=qe(t),r=qe(e);return ur(i,Te(i,r),Me(i,r)+1).join("")},Pn.trimEnd=function(t,e,n){if((t=ua(t))&&(n||void 0===e))return t.slice(0,Ye(t)+1);if(!t||!(e=Zi(e)))return t;var i=qe(t);return ur(i,0,Me(i,qe(e))+1).join("")},Pn.trimStart=function(t,e,n){if((t=ua(t))&&(n||void 0===e))return t.replace(W,"");if(!t||!(e=Zi(e)))return t;var i=qe(t);return ur(i,Te(i,qe(e))).join("")},Pn.truncate=function(t,e){var n=30,i="...";if(qs(e)){var r="separator"in e?e.separator:r;n="length"in e?ra(e.length):n,i="omission"in e?Zi(e.omission):i}var o=(t=ua(t)).length;if(ke(t)){var s=qe(t);o=s.length}if(n>=o)return t;var a=n-Ue(i);if(a<1)return i;var u=s?ur(s,0,a).join(""):t.slice(0,a);if(void 0===r)return u+i;if(s&&(a+=u.length-a),Js(r)){if(t.slice(a).search(r)){var l,c=u;for(r.global||(r=gt(r.source,ua(nt.exec(r))+"g")),r.lastIndex=0;l=r.exec(c);)var h=l.index;u=u.slice(0,void 0===h?a:h)}}else if(t.indexOf(Zi(r),a)!=a){var p=u.lastIndexOf(r);p>-1&&(u=u.slice(0,p))}return u+i},Pn.unescape=function(t){return(t=ua(t))&&k.test(t)?t.replace(D,Xe):t},Pn.uniqueId=function(t){var e=++It;return ua(t)+e},Pn.upperCase=Ba,Pn.upperFirst=Va,Pn.each=us,Pn.eachRight=ls,Pn.first=Fo,Qa(Pn,(au={},ui(Pn,(function(t,e){Et.call(Pn.prototype,e)||(au[e]=t)})),au),{chain:!1}),Pn.VERSION="4.17.21",re(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Pn[t].placeholder=Pn})),re(["drop","take"],(function(t,e){Mn.prototype[t]=function(n){n=void 0===n?1:sn(ra(n),0);var i=this.__filtered__&&!e?new Mn(this):this.clone();return i.__filtered__?i.__takeCount__=an(n,i.__takeCount__):i.__views__.push({size:an(n,4294967295),type:t+(i.__dir__<0?"Right":"")}),i},Mn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),re(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Mn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Jr(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),re(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Mn.prototype[t]=function(){return this[n](1).value()[0]}})),re(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Mn.prototype[t]=function(){return this.__filtered__?new Mn(this):this[n](1)}})),Mn.prototype.compact=function(){return this.filter(Wa)},Mn.prototype.find=function(t){return this.filter(t).head()},Mn.prototype.findLast=function(t){return this.reverse().find(t)},Mn.prototype.invokeMap=ki((function(t,e){return"function"==typeof t?new Mn(this):this.map((function(n){return mi(n,t,e)}))})),Mn.prototype.reject=function(t){return this.filter(ws(Jr(t)))},Mn.prototype.slice=function(t,e){t=ra(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Mn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=ra(e))<0?n.dropRight(-e):n.take(e-t)),n)},Mn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Mn.prototype.toArray=function(){return this.take(4294967295)},ui(Mn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=Pn[i?"take"+("last"==e?"Right":""):e],o=i||/^find/.test(e);r&&(Pn.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,a=e instanceof Mn,u=s[0],l=a||As(e),c=function(t){var e=r.apply(Pn,he([t],s));return i&&h?e[0]:e};l&&n&&"function"==typeof u&&1!=u.length&&(a=l=!1);var h=this.__chain__,p=!!this.__actions__.length,f=o&&!h,d=a&&!p;if(!o&&l){e=d?e:new Mn(this);var g=t.apply(e,s);return g.__actions__.push({func:is,args:[c],thisArg:void 0}),new Tn(g,h)}return f&&d?t.apply(this,s):(g=this.thru(c),f?i?g.value()[0]:g.value():g)})})),re(["pop","push","shift","sort","splice","unshift"],(function(t){var e=mt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Pn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(As(r)?r:[],t)}return this[n]((function(n){return e.apply(As(n)?n:[],t)}))}})),ui(Mn.prototype,(function(t,e){var n=Pn[e];if(n){var i=n.name+"";Et.call(vn,i)||(vn[i]=[]),vn[i].push({name:e,func:n})}})),vn[Or(void 0,2).name]=[{name:"wrapper",func:void 0}],Mn.prototype.clone=function(){var t=new Mn(this.__wrapped__);return t.__actions__=yr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=yr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=yr(this.__views__),t},Mn.prototype.reverse=function(){if(this.__filtered__){var t=new Mn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Mn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=As(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=an(e,t+s);break;case"takeRight":t=sn(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=o.start,a=o.end,u=a-s,l=i?a:s-1,c=this.__iteratees__,h=c.length,p=0,f=an(u,this.__takeCount__);if(!n||!i&&r==u&&f==u)return er(t,this.__actions__);var d=[];t:for(;u--&&p<f;){for(var g=-1,y=t[l+=e];++g<h;){var _=c[g],m=_.type,v=(0,_.iteratee)(y);if(2==m)y=v;else if(!v){if(1==m)continue t;break t}}d[p++]=y}return d},Pn.prototype.at=rs,Pn.prototype.chain=function(){return ns(this)},Pn.prototype.commit=function(){return new Tn(this.value(),this.__chain__)},Pn.prototype.next=function(){void 0===this.__values__&&(this.__values__=na(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Pn.prototype.plant=function(t){for(var e,n=this;n instanceof Ln;){var i=So(n);i.__index__=0,i.__values__=void 0,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},Pn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Mn){var e=t;return this.__actions__.length&&(e=new Mn(this)),(e=e.reverse()).__actions__.push({func:is,args:[qo],thisArg:void 0}),new Tn(e,this.__chain__)}return this.thru(qo)},Pn.prototype.toJSON=Pn.prototype.valueOf=Pn.prototype.value=function(){return er(this.__wrapped__,this.__actions__)},Pn.prototype.first=Pn.prototype.head,ge&&(Pn.prototype[ge]=function(){return this}),Pn}();qt._=We,void 0===(i=(function(){return We}).call(e,n,e,t))||(t.exports=i)}).call(this)}).call(this,n("aYSr")(t))},"q/Q7":function(t,e,n){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var r=n("fJCm"),o=n("i2fC"),s=i(n("wQqx"));e.default=function t(e,n,i){void 0===i&&(i={});var a=o.getGeom(e),u=o.getGeom(n);if("Polygon"===a.type&&"Polygon"===u.type){var l=s.intersection(a.coordinates,u.coordinates);if(null===l||0===l.length)return null;if(1===l.length){var c=l[0][0][0],h=l[0][0][l[0][0].length-1];return c[0]===h[0]&&c[1]===h[1]?r.polygon(l[0],i.properties):null}return r.multiPolygon(l,i.properties)}if("MultiPolygon"===a.type){for(var p=[],f=0,d=a.coordinates;f<d.length;f++){var g=t(o.getGeom(r.polygon(d[f])),u);if(g){var y=o.getGeom(g);if("Polygon"===y.type)p.push(y.coordinates);else{if("MultiPolygon"!==y.type)throw new Error("intersection is invalid");p=p.concat(y.coordinates)}}}return 0===p.length?null:1===p.length?r.polygon(p[0],i.properties):r.multiPolygon(p,i.properties)}if("MultiPolygon"===u.type)return t(u,a);throw new Error("poly1 and poly2 must be either polygons or multiPolygons")}},qnX1:function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,r=Object.prototype.toString,o=function(t){return!(i&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===r.call(t)},s=function(t){return!!o(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==r.call(t)&&"[object Function]"===r.call(t.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,t.exports=a?o:s},usjY:function(t,e,n){"use strict";var i=TypeError,r=Object.getOwnPropertyDescriptor;if(r)try{r({},"")}catch(y){r=null}var o=function(){throw new i},s=r?function(){try{return o}catch(t){try{return r(arguments,"callee").get}catch(e){return o}}}():o,a=n("V+Bs")(),u=Object.getPrototypeOf||function(t){return t.__proto__},l="undefined"==typeof Uint8Array?void 0:u(Uint8Array),c={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":a?u([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":a?u(u([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&a?u((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&a?u((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":a?u(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":a?Symbol:void 0,"%SymbolPrototype%":a?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":s,"%TypedArray%":l,"%TypedArrayPrototype%":l?l.prototype:void 0,"%TypeError%":i,"%TypeErrorPrototype%":i.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},h=n("5L5q").call(Function.call,String.prototype.replace),p=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,f=/\\(\\)?/g,d=function(t){var e=[];return h(t,p,(function(t,n,i,r){e[e.length]=i?h(r,f,"$1"):n||t})),e},g=function(t,e){if(!(t in c))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===c[t]&&!e)throw new i("intrinsic "+t+" exists, but is not available. Please file an issue!");return c[t]};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var n=d(t),o=g("%"+(n.length>0?n[0]:"")+"%",e),s=1;s<n.length;s+=1)if(null!=o)if(r&&s+1>=n.length){var a=r(o,n[s]);if(!e&&!(n[s]in o))throw new i("base intrinsic for "+t+" exists, but the property is not available.");o=a?a.get||a.value:o[n[s]]}else o=o[n[s]];return o}},vY6e:function(t,e,n){"use strict";var i=n("5L5q"),r=n("usjY"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||i.call(s,o);t.exports=function(){return a(i,s,arguments)},t.exports.apply=function(){return a(i,o,arguments)}},wQqx:function(t,e,n){!function(t){"use strict";function e(t,e){return t>e?1:t<e?-1:0}var n=function(t,n){void 0===t&&(t=e),void 0===n&&(n=!1),this._compare=t,this._root=null,this._size=0,this._noDuplicates=!!n},i={size:{configurable:!0}};function r(t,e,n){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!o(e,n)||e.isVertical()?e.prevInResult:e)),t.inResult=o(t,n)}function o(t,e){switch(t.type){case 0:switch(e){case 0:return!t.otherInOut;case 1:return t.otherInOut;case 2:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case 3:return!0}break;case 2:return 0===e||1===e;case 3:return 2===e;case 1:return!1}return!1}n.prototype.rotateLeft=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e},n.prototype.rotateRight=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e},n.prototype._splay=function(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}},n.prototype.splay=function(t){for(var e,n,i,r,o;t.parent;)(n=(e=t.parent).parent)&&n.parent?((i=n.parent).left===n?i.left=t:i.right=t,t.parent=i):(t.parent=null,this._root=t),r=t.left,o=t.right,t===e.left?(n&&(n.left===e?(e.right?(n.left=e.right,n.left.parent=n):n.left=null,e.right=n,n.parent=e):(r?(n.right=r,r.parent=n):n.right=null,t.left=n,n.parent=t)),o?(e.left=o,o.parent=e):e.left=null,t.right=e,e.parent=t):(n&&(n.right===e?(e.left?(n.right=e.left,n.right.parent=n):n.right=null,e.left=n,n.parent=e):(o?(n.left=o,o.parent=n):n.left=null,t.right=n,n.parent=t)),r?(e.right=r,r.parent=e):e.right=null,t.left=e,e.parent=t)},n.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)},n.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},n.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},n.prototype.insert=function(t,e){var n=this._root,i=null,r=this._compare;if(this._noDuplicates)for(;n;){if(i=n,0===r(n.key,t))return;n=r(n.key,t)<0?n.right:n.left}else for(;n;)i=n,n=r(n.key,t)<0?n.right:n.left;return n={key:t,data:e,left:null,right:null,parent:i},i?r(i.key,n.key)<0?i.right=n:i.left=n:this._root=n,this.splay(n),this._size++,n},n.prototype.find=function(t){for(var e=this._root,n=this._compare;e;){var i=n(e.key,t);if(i<0)e=e.right;else{if(!(i>0))return e;e=e.left}}return null},n.prototype.contains=function(t){for(var e=this._root,n=this._compare;e;){var i=n(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},n.prototype.remove=function(t){var e=this.find(t);if(!e)return!1;if(this.splay(e),e.left)if(e.right){var n=this.minNode(e.right);n.parent!==e&&(this.replace(n,n.right),n.right=e.right,n.right.parent=n),this.replace(e,n),n.left=e.left,n.left.parent=n}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0},n.prototype.removeNode=function(t){if(!t)return!1;if(this.splay(t),t.left)if(t.right){var e=this.minNode(t.right);e.parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0},n.prototype.erase=function(t){var e=this.find(t);if(e){this.splay(e);var n=e.left,i=e.right,r=null;n&&(n.parent=null,r=this.maxNode(n),this.splay(r),this._root=r),i&&(n?r.right=i:this._root=i,i.parent=r),this._size--}},n.prototype.pop=function(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},n.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)t=e,e=e.parent;return e},n.prototype.prev=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)t=e,e=e.parent;return e},n.prototype.forEach=function(t){for(var e=this._root,n=[],i=!1,r=0;!i;)e?(n.push(e),e=e.left):n.length>0?(t(e=n.pop(),r++),e=e.right):i=!0;return this},n.prototype.range=function(t,e,n,i){for(var r=[],o=this._compare,s=this._root;0!==r.length||s;)if(s)r.push(s),s=s.left;else{if(o((s=r.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(i,s))return this;s=s.right}return this},n.prototype.keys=function(){for(var t=this._root,e=[],n=[],i=!1;!i;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),n.push(t.key),t=t.right):i=!0;return n},n.prototype.values=function(){for(var t=this._root,e=[],n=[],i=!1;!i;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),n.push(t.data),t=t.right):i=!0;return n},n.prototype.at=function(t){for(var e=this._root,n=[],i=!1,r=0;!i;)if(e)n.push(e),e=e.left;else if(n.length>0){if(e=n.pop(),r===t)return e;r++,e=e.right}else i=!0;return null},n.prototype.load=function(t,e,n){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===n&&(n=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var i=t.length;return n&&function t(e,n,i,r,o){if(!(i>=r)){for(var s=e[i+r>>1],a=i-1,u=r+1;;){do{a++}while(o(e[a],s)<0);do{u--}while(o(e[u],s)>0);if(a>=u)break;var l=e[a];e[a]=e[u],e[u]=l,l=n[a],n[a]=n[u],n[u]=l}t(e,n,i,u,o),t(e,n,u+1,r,o)}}(t,e,0,i-1,this._compare),this._root=function t(e,n,i,r,o){var s=o-r;if(s>0){var a=r+Math.floor(s/2),u={key:n[a],data:i[a],parent:e};return u.left=t(u,n,i,r,a),u.right=t(u,n,i,a+1,o),u}return null}(null,t,e,0,i),this._size=i,this},n.prototype.min=function(){var t=this.minNode(this._root);return t?t.key:null},n.prototype.max=function(){var t=this.maxNode(this._root);return t?t.key:null},n.prototype.isEmpty=function(){return null===this._root},i.size.get=function(){return this._size},n.createTree=function(t,e,i,r,o){return new n(i,o).load(t,e,r)},Object.defineProperties(n.prototype,i);var s=function(t,e,n,i,r){this.left=e,this.point=t,this.otherEvent=n,this.isSubject=i,this.type=r||0,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1,this.isExteriorRing=!0};function a(t,e){return t[0]===e[0]&&t[1]===e[1]}function u(t,e,n){return(t[0]-n[0])*(e[1]-n[1])-(e[0]-n[0])*(t[1]-n[1])}function l(t,e){var n=t.point,i=e.point;return n[0]>i[0]?1:n[0]<i[0]?-1:n[1]!==i[1]?n[1]>i[1]?1:-1:function(t,e,n,i){return t.left!==e.left?t.left?1:-1:0!==u(n,t.otherEvent.point,e.otherEvent.point)?t.isBelow(e.otherEvent.point)?-1:1:!t.isSubject&&e.isSubject?1:-1}(t,e,n)}function c(t,e,n){var i=new s(e,!1,t,t.isSubject),r=new s(e,!0,t.otherEvent,t.isSubject);return a(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),i.contourId=r.contourId=t.contourId,l(r,t.otherEvent)>0&&(t.otherEvent.left=!0,r.left=!1),t.otherEvent.otherEvent=r,t.otherEvent=i,n.push(r),n.push(i),n}function h(t,e){return t[0]*e[1]-t[1]*e[0]}function p(t,e){return t[0]*e[0]+t[1]*e[1]}function f(t,e,n){var i=function(t,e,n,i,r){var o=[e[0]-t[0],e[1]-t[1]],s=[i[0]-n[0],i[1]-n[1]];function a(t,e,n){return[t[0]+e*n[0],t[1]+e*n[1]]}var u=[n[0]-t[0],n[1]-t[1]],l=h(o,s),c=l*l,f=p(o,o);if(c>0){var d=h(u,s)/l;if(d<0||d>1)return null;var g=h(u,o)/l;return g<0||g>1?null:0===d||1===d?[a(t,d,o)]:0===g||1===g?[a(n,g,s)]:[a(t,d,o)]}if((c=(l=h(u,o))*l)>0)return null;var y=p(o,u)/f,_=y+p(o,s)/f,m=Math.min(y,_),v=Math.max(y,_);return m<=1&&v>=0?1===m?[a(t,m>0?m:0,o)]:0===v?[a(t,v<1?v:1,o)]:[a(t,m>0?m:0,o),a(t,v<1?v:1,o)]:null}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),r=i?i.length:0;if(0===r)return 0;if(1===r&&(a(t.point,e.point)||a(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===r&&t.isSubject===e.isSubject)return 0;if(1===r)return a(t.point,i[0])||a(t.otherEvent.point,i[0])||c(t,i[0],n),a(e.point,i[0])||a(e.otherEvent.point,i[0])||c(e,i[0],n),1;var o=[],s=!1,u=!1;return a(t.point,e.point)?s=!0:1===l(t,e)?o.push(e,t):o.push(t,e),a(t.otherEvent.point,e.otherEvent.point)?u=!0:1===l(t.otherEvent,e.otherEvent)?o.push(e.otherEvent,t.otherEvent):o.push(t.otherEvent,e.otherEvent),s&&u||s?(e.type=1,t.type=e.inOut===t.inOut?2:3,s&&!u&&c(o[1].otherEvent,o[0].point,n),2):u?(c(o[0],o[1].point,n),3):o[0]!==o[3].otherEvent?(c(o[0],o[1].point,n),c(o[1],o[2].point,n),3):(c(o[0],o[1].point,n),c(o[3].otherEvent,o[2].point,n),3)}function d(t,e){if(t===e)return 0;if(0!==u(t.point,t.otherEvent.point,e.point)||0!==u(t.point,t.otherEvent.point,e.otherEvent.point))return a(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===l(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;var n=t.point,i=e.point;return n[0]===i[0]&&n[1]===i[1]?(n=t.otherEvent.point)[0]===(i=e.otherEvent.point)[0]&&n[1]===i[1]?0:t.contourId>e.contourId?1:-1:1===l(t,e)?1:-1}function g(t,e,n,i){var r=t+1,o=e.length;if(r>o-1)return t-1;for(var s=e[t].point,a=e[r].point;r<o&&a[0]===s[0]&&a[1]===s[1];){if(!n[r])return r;a=e[++r].point}for(r=t-1;n[r]&&r>=i;)r--;return r}s.prototype.isBelow=function(t){var e=this.point,n=this.otherEvent.point;return this.left?(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])>0:(n[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(n[1]-t[1])>0},s.prototype.isAbove=function(t){return!this.isBelow(t)},s.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},s.prototype.clone=function(){var t=new s(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.inResult=this.inResult,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t};var y=m,_=m;function m(t,e){if(!(this instanceof m))return new m(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||v,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function v(t,e){return t<e?-1:t>e?1:0}m.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,r)>=0)break;e[t]=a,t=o}e[t]=r}},y.default=_;var b=Math.max,x=Math.min,E=0;function I(t,e,n,i,r,o){var a,u,c,h,p,f;for(a=0,u=t.length-1;a<u;a++)if(h=t[a+1],p=new s(c=t[a],!1,void 0,e),f=new s(h,!1,p,e),p.otherEvent=f,c[0]!==h[0]||c[1]!==h[1]){p.contourId=f.contourId=n,o||(p.isExteriorRing=!1,f.isExteriorRing=!1),l(p,f)>0?f.left=!0:p.left=!0;var d=c[0],g=c[1];r[0]=x(r[0],d),r[1]=x(r[1],g),r[2]=b(r[2],d),r[3]=b(r[3],g),i.push(p),i.push(f)}}var N=[];function w(t,e,i){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);var o=function(t,e,n){var i=null;return t.length*e.length==0&&(0===n?i=N:2===n?i=t:1!==n&&3!==n||(i=0===t.length?e:t)),i}(t,e,i);if(o)return o===N?null:o;var s=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],u=function(t,e,n,i,r){var o,s,a,u,c,h,p=new y(null,l);for(a=0,u=t.length;a<u;a++)for(c=0,h=(o=t[a]).length;c<h;c++)(s=0===c)&&E++,I(o[c],!0,E,p,n,s);for(a=0,u=e.length;a<u;a++)for(c=0,h=(o=e[a]).length;c<h;c++)s=0===c,2===r&&(s=!1),s&&E++,I(o[c],!1,E,p,i,s);return p}(t,e,s,a,i);return(o=function(t,e,n,i,r){var o=null;return(n[0]>i[2]||i[0]>n[2]||n[1]>i[3]||i[1]>n[3])&&(0===r?o=N:2===r?o=t:1!==r&&3!==r||(o=t.concat(e))),o}(t,e,s,a,i))?o===N?null:o:function(t,e){var n,i,r,o=function(t){var e,n,i,r,o=[];for(n=0,i=t.length;n<i;n++)((e=t[n]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&o.push(e);for(var s=!1;!s;)for(s=!0,n=0,i=o.length;n<i;n++)n+1<i&&1===l(o[n],o[n+1])&&(r=o[n],o[n]=o[n+1],o[n+1]=r,s=!1);for(n=0,i=o.length;n<i;n++)(e=o[n]).pos=n;for(n=0,i=o.length;n<i;n++)(e=o[n]).left||(r=e.pos,e.pos=e.otherEvent.pos,e.otherEvent.pos=r);return o}(t),s={},a=[];for(n=0,i=o.length;n<i;n++)if(!s[n]){var u=[[]];o[n].isExteriorRing?2===e&&!o[n].isSubject&&a.length>1?a[a.length-1].push(u[0]):a.push(u):2!==e||o[n].isSubject||0!==a.length?0===a.length?a.push([[u]]):a[a.length-1].push(u[0]):a.push(u);var c=a.length-1,h=n;for(u[0].push(o[n].point);h>=n;)r=o[h],s[h]=!0,r.left?(r.resultInOut=!1,r.contourId=c):(r.otherEvent.resultInOut=!0,r.otherEvent.contourId=c),s[h=r.pos]=!0,u[0].push(o[h].point),h=g(h,o,s,n);s[h=-1===h?n:h]=s[(r=o[h]).pos]=!0,r.otherEvent.resultInOut=!0,r.otherEvent.contourId=c}return a}(function(t,e,i,o,s,a){for(var u,l,c,h=new n(d),p=[],g=Math.min(o[2],s[2]);0!==t.length;){var y=t.pop();if(p.push(y),0===a&&y.point[0]>g||2===a&&y.point[0]>o[2])break;if(y.left){l=u=h.insert(y),u=u!==(c=h.minNode())?h.prev(u):null,l=h.next(l);var _=u?u.key:null;if(r(y,_,a),l&&2===f(y,l.key,t)&&(r(y,_,a),r(y,l.key,a)),u&&2===f(u.key,y,t)){var m=u;r(_,(m=m!==c?h.prev(m):null)?m.key:null,a),r(y,_,a)}}else l=u=h.find(y=y.otherEvent),u&&l&&(u=u!==c?h.prev(u):null,l=h.next(l),h.remove(y),l&&u&&f(u.key,l.key,t))}return p}(u,0,0,s,a,i),i)}t.union=function(t,e){return w(t,e,1)},t.diff=function(t,e){return w(t,e,2)},t.xor=function(t,e){return w(t,e,3)},t.intersection=function(t,e){return w(t,e,0)},t.operations={UNION:1,DIFFERENCE:2,INTERSECTION:0,XOR:3},Object.defineProperty(t,"__esModule",{value:!0})}(e)},"zT+L":function(t,e,n){"use strict";var i=n("ey2t"),r="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,u=a&&function(){var t={};try{for(var e in a(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(n){return!1}}(),l=function(t,e,n,i){var r;(!(e in t)||"function"==typeof(r=i)&&"[object Function]"===o.call(r)&&i())&&(u?a(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},c=function(t,e){var n=arguments.length>2?arguments[2]:{},o=i(e);r&&(o=s.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)l(t,o[a],e[o[a]],n[o[a]])};c.supportsDescriptors=!!u,t.exports=c}}]);