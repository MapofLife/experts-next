(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"/GEF":function(t,e,n){"use strict";var o,i=n("j/Z9"),r=n("BMqo"),a=n("DiD3"),s=n("vog+"),l=n("HK6I"),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e){var n=t.call(this)||this;return n.geometries_=e||null,n.changeEventsKeys_=[],n.listenGeometriesChange_(),n}return c(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(l.c),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(Object(l.a)(this.geometries_[t],i.a.CHANGE,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,o){if(o<Object(s.e)(this.getExtent(),t,e))return o;for(var i=this.geometries_,r=0,a=i.length;r<a;++r)o=i[r].closestPointXY(t,e,n,o);return o},e.prototype.containsXY=function(t,e){for(var n=this.geometries_,o=0,i=n.length;o<i;++o)if(n[o].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Object(s.l)(t);for(var e=this.geometries_,n=0,o=e.length;n<o;++n)Object(s.q)(t,e[n].getExtent());return t},e.prototype.getGeometries=function(){return h(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,n=0,o=e.length;n<o;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],o=this.geometries_,i=!1,r=0,a=o.length;r<a;++r){var s=o[r],l=s.getSimplifiedGeometry(t);n.push(l),l!==s&&(i=!0)}if(i){var c=new e(null);return c.setGeometriesArray(n),c}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return a.a.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,n=0,o=e.length;n<o;++n)if(e[n].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var n=this.geometries_,o=0,i=n.length;o<i;++o)n[o].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,n){var o=n;o||(o=Object(s.x)(this.getExtent()));for(var i=this.geometries_,r=0,a=i.length;r<a;++r)i[r].scale(t,e,o);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(h(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,n=0,o=e.length;n<o;++n)e[n].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var n=this.geometries_,o=0,i=n.length;o<i;++o)n[o].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(r.a);function h(t){for(var e=[],n=0,o=t.length;n<o;++n)e.push(t[n].clone());return e}e.a=u},"1PGm":function(t,e,n){"use strict";var o,i=n("70ZC"),r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.map=n,i.frameState=void 0!==o?o:null,i}return r(e,t),e}(i.a);e.a=a},"4tdA":function(t,e,n){"use strict";var o=n("hatQ"),i=n("DiD3"),r=n("zYA+"),a=n("vY6g"),s=n("ejHg"),l=n("A5l+"),c=n("h7by"),u=n("61KW"),h=n("SHzd"),p=n("QRdp"),d=n("0eRI");function f(t,e,n){return function(o,i,r,a,s){if(o){var l=e?0:r[0]*i,c=e?0:r[1]*i,u=s?s[0]:0,h=s?s[1]:0,p=t[0]+l/2+u,f=t[2]-l/2+u,g=t[1]+c/2+h,y=t[3]-c/2+h;p>f&&(f=p=(f+p)/2),g>y&&(y=g=(y+g)/2);var m=Object(d.a)(o[0],p,f),v=Object(d.a)(o[1],g,y),_=30*i;return a&&n&&(m+=-_*Math.log(1+Math.max(0,p-o[0])/_)+_*Math.log(1+Math.max(0,o[0]-f)/_),v+=-_*Math.log(1+Math.max(0,g-o[1])/_)+_*Math.log(1+Math.max(0,o[1]-y)/_)),[m,v]}}}function g(t){return t}var y=n("vog+"),m=n("I/d5");function v(t,e,n,o){var i=Object(y.E)(e)/n[0],r=Object(y.A)(e)/n[1];return o?Math.min(t,Math.max(i,r)):Math.min(t,Math.min(i,r))}function _(t,e,n){var o=Math.min(t,e);return o*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(o=Math.max(o,n),o/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Object(d.a)(o,n/2,2*e)}function b(t,e,n,o,i){return function(r,a,s,l){if(void 0!==r){var c=o?v(t,o,s,i):t;return(void 0===n||n)&&l?_(r,c,e):Object(d.a)(r,e,c)}}}var E,w=n("SMMa"),C=n("sQKY"),x=n("hWN6"),O=(E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),R=function(t){function e(e){var n=t.call(this)||this,o=Object(p.a)({},e);return n.hints_=[0,0],n.animations_=[],n.projection_=Object(l.b)(o.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.cancelAnchor_=void 0,o.center&&(o.center=Object(l.e)(o.center,n.projection_)),o.extent&&(o.extent=Object(l.f)(o.extent,n.projection_)),n.applyOptions_(o),n}return O(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,n,o,i=void 0!==t.minZoom?t.minZoom:0,a=void 0!==t.maxZoom?t.maxZoom:28,c=void 0!==t.zoomFactor?t.zoomFactor:2,u=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,p=void 0!==t.showFullExtent&&t.showFullExtent,f=Object(l.b)(t.projection,"EPSG:3857"),g=f.getExtent(),E=t.constrainOnlyCenter,w=t.extent;if(u||w||!f.isGlobal()||(E=!1,w=g),void 0!==t.resolutions){var C=t.resolutions;n=C[i],o=void 0!==C[a]?C[a]:C[C.length-1],e=t.constrainResolution?function(t,e,n,o){return function(i,r,a,s){if(void 0!==i){var l=t[0],c=t[t.length-1],u=n?v(l,n,a,o):l;if(s)return void 0===e||e?_(i,u,c):Object(d.a)(i,c,u);var h=Math.min(u,i),p=Math.floor(Object(m.e)(t,h,r));return t[p]>u&&p<t.length-1?t[p+1]:t[p]}}}(C,h,!E&&w,p):b(n,o,h,!E&&w,p)}else{var x=(g?Math.max(Object(y.E)(g),Object(y.A)(g)):360*l.a[r.b.DEGREES]/f.getMetersPerUnit())/s.b/Math.pow(2,0),O=x/Math.pow(2,28);void 0!==(n=t.maxResolution)?i=0:n=x/Math.pow(c,i),void 0===(o=t.minResolution)&&(o=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(c,a):x/Math.pow(c,a):O),a=i+Math.floor(Math.log(n/o)/Math.log(c)),o=n/Math.pow(c,a-i),e=t.constrainResolution?function(t,e,n,o,i,r){return function(a,s,l,c){if(void 0!==a){var u=i?v(e,i,l,r):e,h=void 0!==n?n:0;if(c)return void 0===o||o?_(a,u,h):Object(d.a)(a,h,u);var p=Math.ceil(Math.log(e/u)/Math.log(t)-1e-9),f=-s*(.5-1e-9)+.5,g=Math.min(u,a),y=Math.floor(Math.log(e/g)/Math.log(t)+f),m=Math.max(p,y),b=e/Math.pow(t,m);return Object(d.a)(b,h,u)}}}(c,n,o,h,!E&&w,p):b(n,o,h,!E&&w,p)}return{constraint:e,maxResolution:n,minResolution:o,minZoom:i,zoomFactor:c}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.padding=t.padding,this.minZoom_=e.minZoom;var n=function(t){if(void 0!==t.extent)return f(t.extent,t.constrainOnlyCenter,void 0===t.smoothExtentConstraint||t.smoothExtentConstraint);var e=Object(l.b)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){var n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,f(n,!1,!1)}return g}(t),o=e.constraint,i=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?Object(w.b)():!1===e?w.d:"number"==typeof e?Object(w.a)(e):w.d}return w.c}(t);this.constraints_={center:n,resolution:o,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=Object(p.a)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object(p.a)({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var o=arguments[n];o.center&&((o=Object(p.a)({},o)).center=Object(l.e)(o.center,this.getProjection())),o.anchor&&((o=Object(p.a)({},o)).anchor=Object(l.e)(o.anchor,this.getProjection())),e[n]=o}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var o=arguments[n-1];return o.center&&this.setCenterInternal(o.center),void 0!==o.zoom&&this.setZoom(o.zoom),void 0!==o.rotation&&this.setRotation(o.rotation),void(e&&j(e,!0))}for(var i=Date.now(),r=this.targetCenter_.slice(),s=this.targetResolution_,l=this.targetRotation_,c=[],u=0;u<n;++u){var h=arguments[u],p={start:i,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||C.c,callback:e};if(h.center&&(p.sourceCenter=r,p.targetCenter=h.center.slice(),r=p.targetCenter),void 0!==h.zoom?(p.sourceResolution=s,p.targetResolution=this.getResolutionForZoom(h.zoom),s=p.targetResolution):h.resolution&&(p.sourceResolution=s,p.targetResolution=h.resolution,s=p.targetResolution),void 0!==h.rotation){p.sourceRotation=l;var f=Object(d.e)(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=l+f,l=p.targetRotation}A(p)?p.complete=!0:i+=p.duration,c.push(p)}this.animations_.push(c),this.setHint(a.a.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[a.a.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[a.a.INTERACTING]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(a.a.ANIMATING,-this.hints_[a.a.ANIMATING]);for(var e=0,n=this.animations_.length;e<n;++e){var o=this.animations_[e];if(o[0].callback&&j(o[0].callback,!1),!t)for(var i=0,r=o.length;i<r;++i){var s=o[i];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var o=this.animations_[n],i=!0,r=0,s=o.length;r<s;++r){var l=o[r];if(!l.complete){var c=l.duration>0?(t-l.start)/l.duration:1;c>=1?(l.complete=!0,c=1):i=!1;var u=l.easing(c);if(l.sourceCenter){var h=l.sourceCenter[0],p=l.sourceCenter[1];this.targetCenter_=[h+u*(l.targetCenter[0]-h),p+u*(l.targetCenter[1]-p)]}if(l.sourceResolution&&l.targetResolution){var f=1===u?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){var g=this.getViewportSize_(this.getRotation()),y=this.constraints_.resolution(f,0,g,!0);this.targetCenter_=this.calculateCenterZoom(y,l.anchor)}this.targetResolution_=f,this.applyTargetState_(!0)}if(void 0!==l.sourceRotation&&void 0!==l.targetRotation){var m=1===u?Object(d.e)(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){var v=this.constraints_.rotation(m,!0);this.targetCenter_=this.calculateCenterRotate(v,l.anchor)}this.targetRotation_=m}if(this.applyTargetState_(!0),e=!0,!l.complete)break}}if(i){this.animations_[n]=null,this.setHint(a.a.ANIMATING,-1);var _=o[0].callback;_&&j(_,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,o=this.getCenterInternal();return void 0!==o&&(n=[o[0]-e[0],o[1]-e[1]],Object(u.f)(n,t-this.getRotation()),Object(u.a)(n,e)),n},e.prototype.calculateCenterZoom=function(t,e){var n,o=this.getCenterInternal(),i=this.getResolution();return void 0!==o&&void 0!==i&&(n=[e[0]-t*(e[0]-o[0])/i,e[1]-t*(e[1]-o[1])/i]),n},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],o=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Object(l.m)(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get("center")},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=this.calculateExtentInternal(t);return Object(l.n)(e,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),n=this.getCenterInternal();Object(h.a)(n,1);var o=this.getResolution();Object(h.a)(void 0!==o,2);var i=this.getRotation();return Object(h.a)(void 0!==i,3),Object(y.z)(n,o,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get("resolution")},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Object(l.f)(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSize_(),o=Object(y.E)(t)/n[0],i=Object(y.A)(t)/n[1];return Math.max(o,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),o=Math.log(n/this.minResolution_)/Math.log(e);return function(t){return n/Math.pow(e,t*o)}},e.prototype.getRotation=function(){return this.get("rotation")},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),o=Math.log(n/this.minResolution_)/e;return function(t){return Math.log(n/t)/e/o}},e.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),n=this.padding;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),o=this.getCenterInternal(),i=this.padding;if(i){var r=this.getViewportSizeMinusPadding_();o=I(o,this.getViewportSize_(),[r[0]/2+i[3],r[1]/2+i[0]],e,n)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,o=this.minZoom_||0;if(this.resolutions_){var i=Object(m.e)(this.resolutions_,t,1);o=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return o+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Object(d.a)(Math.floor(t),0,this.resolutions_.length-2);return this.resolutions_[e]/Math.pow(this.resolutions_[e]/this.resolutions_[e+1],Object(d.a)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n;if(Object(h.a)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){Object(h.a)(!Object(y.H)(t),25);var o=Object(l.f)(t,this.getProjection());n=Object(x.c)(o)}else if(t.getType()===i.a.CIRCLE)o=Object(l.f)(t.getExtent(),this.getProjection()),(n=Object(x.c)(o)).rotate(this.getRotation(),Object(y.x)(o));else{var r=Object(l.k)();n=r?t.clone().transform(r,this.getProjection()):t}this.fitInternal(n,e)},e.prototype.fitInternal=function(t,e){var n=e||{},o=n.size;o||(o=this.getViewportSizeMinusPadding_());var i,r=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0!==n.nearest&&n.nearest;i=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;for(var s=t.getFlatCoordinates(),l=this.getRotation(),u=Math.cos(-l),h=Math.sin(-l),p=1/0,d=1/0,f=-1/0,g=-1/0,y=t.getStride(),m=0,v=s.length;m<v;m+=y){var _=s[m]*u-s[m+1]*h,b=s[m]*h+s[m+1]*u;p=Math.min(p,_),d=Math.min(d,b),f=Math.max(f,_),g=Math.max(g,b)}var E=this.getResolutionForExtentInternal([p,d,f,g],[o[0]-r[1]-r[3],o[1]-r[0]-r[2]]);E=isNaN(E)?i:Math.max(E,i),E=this.getConstrainedResolution(E,a?0:1);var w=(p+f)/2,C=(d+g)/2,x=this.getConstrainedCenter([(w+=(r[1]-r[3])/2*E)*u-(C+=(r[0]-r[2])/2*E)*(h=-h),C*u+w*h],E),O=n.callback?n.callback:c.c;void 0!==n.duration?this.animateInternal({resolution:E,center:x,duration:n.duration,easing:n.easing},O):(this.targetResolution_=E,this.targetCenter_=x,this.applyTargetState_(!1,!0),j(O,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(Object(l.e)(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){this.setCenterInternal(I(t,e,n,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,n,o){var i,r=this.padding;if(r&&t){var a=this.getViewportSizeMinusPadding_(-n),s=I(t,o,[a[0]/2+r[3],a[1]/2+r[0]],e,n);i=[t[0]-s[0],t[1]-s[1]]}return i},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Object(l.m)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&Object(l.e)(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,o,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Object(l.e)(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(Object(l.e)(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,o=this.constraints_.rotation(this.targetRotation_,n),i=this.getViewportSize_(o),r=this.constraints_.resolution(this.targetResolution_,0,i,n),a=this.constraints_.center(this.targetCenter_,r,i,n,this.calculateCenterShift(this.targetCenter_,r,o,i));this.get("rotation")!==o&&this.set("rotation",o),this.get("resolution")!==r&&this.set("resolution",r),this.get("center")&&Object(u.d)(this.get("center"),a)||this.set("center",a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,n){var o=void 0!==t?t:200,i=e||0,r=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,i,a),l=this.constraints_.center(this.targetCenter_,s,a,!1,this.calculateCenterShift(this.targetCenter_,s,r,a));if(0===o&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();var c=n||(0===o?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===r&&this.getCenterInternal()&&Object(u.d)(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:s,duration:o,easing:C.b,anchor:c}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(a.a.INTERACTING,1)},e.prototype.endInteraction=function(t,e,n){var o=n&&Object(l.e)(n,this.getProjection());this.endInteractionInternal(t,e,o)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(a.a.INTERACTING,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,o)},e}(o.a);function j(t,e){setTimeout((function(){t(e)}),0)}function A(t){return!(t.sourceCenter&&t.targetCenter&&!Object(u.d)(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function I(t,e,n,o,i){var r=Math.cos(-i),a=Math.sin(-i),s=t[0]*r-t[1]*a,l=t[1]*r+t[0]*a;return[(s+=(e[0]/2-n[0])*o)*r-(l+=(n[1]-e[1]/2)*o)*(a=-a),l*r+s*a]}e.a=R},"7Gkf":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"d",(function(){return h})),n.d(e,"f",(function(){return p})),n.d(e,"k",(function(){return d})),n.d(e,"h",(function(){return f})),n.d(e,"j",(function(){return g})),n.d(e,"l",(function(){return y})),n.d(e,"g",(function(){return m})),n.d(e,"i",(function(){return v}));var o=n("mm/l"),i=n("h7by"),r=n("8JWR"),a=n("SHzd");function s(t){var e=arguments;return function(t){for(var n=!0,o=0,i=e.length;o<i&&(n=n&&e[o](t));++o);return n}}var l=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},c=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},u=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){return t.target.getTargetElement().contains(document.activeElement)}(t)},h=i.b,p=function(t){var e=t.originalEvent;return 0==e.button&&!(r.f&&r.d&&e.ctrlKey)},d=function(t){return t.type==o.a.SINGLECLICK},f=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},g=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},y=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},m=function(t){var e=t.originalEvent;return Object(a.a)(void 0!==e,56),"mouse"==e.pointerType},v=function(t){var e=t.originalEvent;return Object(a.a)(void 0!==e,56),e.isPrimary&&0===e.button}},"8f5B":function(t,e,n){"use strict";e.a={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},H40N:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o,i=n("nSfQ"),r=n("mm/l"),a=n("QRdp"),s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e){var n=this,o=e||{};return n=t.call(this,o)||this,o.handleDownEvent&&(n.handleDownEvent=o.handleDownEvent),o.handleDragEvent&&(n.handleDragEvent=o.handleDragEvent),o.handleMoveEvent&&(n.handleMoveEvent=o.handleMoveEvent),o.handleUpEvent&&(n.handleUpEvent=o.handleUpEvent),o.stopDown&&(n.stopDown=o.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return s(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==r.a.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==r.a.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==r.a.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,e=this.stopDown(o)}else t.type==r.a.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===r.a.POINTERDOWN||e===r.a.POINTERDRAG||e===r.a.POINTERUP}(t)){var e=t.originalEvent,n=e.pointerId.toString();t.type==r.a.POINTERUP?delete this.trackedPointers_[n]:(t.type==r.a.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=Object(a.c)(this.trackedPointers_)}},e}(i.a);function c(t){for(var e=t.length,n=0,o=0,i=0;i<e;i++)n+=t[i].clientX,o+=t[i].clientY;return[n/e,o/e]}e.b=l},"Pda+":function(t,e,n){"use strict";n.d(e,"a",(function(){return U}));var o,i=n("+cQG"),r=n("nSfQ"),a=n("mm/l"),s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:250,n}return s(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==a.a.DBLCLICK){var n=t.originalEvent,o=t.coordinate,i=n.shiftKey?-this.delta_:this.delta_,s=t.map.getView();Object(r.c)(s,i,o,this.duration_),n.preventDefault(),e=!0}return!e},e}(r.a),c=n("H40N"),u=n("h7by"),h=n("7Gkf"),p=n("sQKY"),d=n("61KW"),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g=function(t){function e(e){var n=t.call(this,{stopDown:u.a})||this,o=e||{};n.kinetic_=o.kinetic,n.lastCentroid=null,n.panning_=!1;var i=o.condition?o.condition:Object(h.a)(h.h,h.i);return n.condition_=o.onFocusOnly?Object(h.a)(h.e,i):i,n.noKinetic_=!1,n}return f(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,n=Object(c.a)(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var o=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();Object(d.g)(o,i.getResolution()),Object(d.f)(o,i.getRotation()),i.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(r),s=e.getCoordinateFromPixelInternal([a[0]-o*Math.cos(i),a[1]-o*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:p.b})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(c.b),y=n("SMMa"),m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=function(t){function e(e){var n=this,o=e||{};return(n=t.call(this,{stopDown:u.a})||this).condition_=o.condition?o.condition:h.c,n.lastAngle_=void 0,n.duration_=void 0!==o.duration?o.duration:250,n}return m(e,t),e.prototype.handleDragEvent=function(t){if(Object(h.g)(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==y.c){var o=e.getSize(),i=t.pixel,r=Math.atan2(o[1]/2-i[1],i[0]-o[0]/2);void 0!==this.lastAngle_&&n.adjustRotationInternal(-(r-this.lastAngle_)),this.lastAngle_=r}}},e.prototype.handleUpEvent=function(t){return!Object(h.g)(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!(!Object(h.g)(t)||!Object(h.f)(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(c.b),_=n("70ZC"),b=n("nh1Y"),E=n("hWN6"),w=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),C=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return w(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new E.a([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(b.a),x=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.coordinate=n,i.mapBrowserEvent=o,i}return x(e,t),e}(_.a),R=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.box_=new C(o.className||"ol-dragbox"),n.minArea_=void 0!==o.minArea?o.minArea:64,o.onBoxEnd&&(n.onBoxEnd=o.onBoxEnd),n.startPixel_=null,n.condition_=o.condition?o.condition:h.f,n.boxEndCondition_=o.boxEndCondition?o.boxEndCondition:n.defaultBoxEndCondition,n}return x(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var o=n[0]-e[0],i=n[1]-e[1];return o*o+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new O("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new O(e?"boxend":"boxcancel",t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new O("boxstart",t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(c.b),j=n("vog+"),A=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),I=function(t){function e(e){var n=this,o=e||{};return(n=t.call(this,{condition:o.condition?o.condition:h.j,className:o.className||"ol-dragzoom",minArea:o.minArea})||this).duration_=void 0!==o.duration?o.duration:200,n.out_=void 0!==o.out&&o.out,n}return A(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap(),n=e.getView(),o=e.getSize(),i=this.getGeometry().getExtent();if(this.out_){var r=n.calculateExtentInternal(o),a=Object(j.n)([e.getPixelFromCoordinateInternal(Object(j.v)(i)),e.getPixelFromCoordinateInternal(Object(j.D)(i))]),s=n.getResolutionForExtentInternal(a,o);Object(j.J)(r,1/s),i=r}var l=n.getConstrainedResolution(n.getResolutionForExtentInternal(i,o)),c=n.getConstrainedCenter(Object(j.x)(i),l);n.animateInternal({resolution:l,center:c,duration:this.duration_,easing:p.b})},e}(R),P=n("j/Z9"),S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),T=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.defaultCondition_=function(t){return Object(h.h)(t)&&Object(h.l)(t)},n.condition_=void 0!==o.condition?o.condition:n.defaultCondition_,n.duration_=void 0!==o.duration?o.duration:100,n.pixelDelta_=void 0!==o.pixelDelta?o.pixelDelta:128,n}return S(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==P.a.KEYDOWN){var n=t.originalEvent,o=n.keyCode;if(this.condition_(t)&&(40==o||37==o||39==o||38==o)){var i=t.map.getView(),a=i.getResolution()*this.pixelDelta_,s=0,l=0;40==o?l=-a:37==o?s=-a:39==o?s=a:l=a;var c=[s,l];Object(d.f)(c,i.getRotation()),Object(r.b)(i,c,this.duration_),n.preventDefault(),e=!0}}return!e},e}(r.a),M=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),k=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.condition_=o.condition?o.condition:h.l,n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:100,n}return M(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==P.a.KEYDOWN||t.type==P.a.KEYPRESS){var n=t.originalEvent,o=n.charCode;if(this.condition_(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var i=t.map,a=o=="+".charCodeAt(0)?this.delta_:-this.delta_,s=i.getView();Object(r.c)(s,a,void 0,this.duration_),n.preventDefault(),e=!0}}return!e},e}(r.a),L=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var o=this.points_[e+2]-this.points_[n+2];if(o<1e3/60)return!1;var i=this.points_[e]-this.points_[n],r=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(r,i),this.initialVelocity_=Math.sqrt(i*i+r*r)/o,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),F=n("8JWR"),N=n("0eRI"),D=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),G=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,o)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==o.maxDelta?o.maxDelta:1,n.duration_=void 0!==o.duration?o.duration:250,n.timeout_=void 0!==o.timeout?o.timeout:80,n.useAnchor_=void 0===o.useAnchor||o.useAnchor,n.constrainResolution_=void 0!==o.constrainResolution&&o.constrainResolution;var i=o.condition?o.condition:h.d;return n.condition_=o.onFocusOnly?Object(h.a)(h.e,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.mode_=void 0,n.trackpadEventGap_=400,n.deltaPerZoom_=300,n}return D(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==P.a.WHEEL)return!0;var e,n=t.map,o=t.originalEvent;if(o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==P.a.WHEEL&&(e=o.deltaY,F.b&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=F.a),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?"trackpad":"wheel");var r=n.getView();if("trackpad"===this.mode_&&!r.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-Object(N.a)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Object(r.c)(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(r.a),V=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),z=function(t){function e(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=u.a),(n=t.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==o.threshold?o.threshold:.3,n.duration_=void 0!==o.duration?o.duration:250,n}return V(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],o=this.targetPointers[1],i=Math.atan2(o.clientY-n.clientY,o.clientX-n.clientX);if(void 0!==this.lastAngle_){var r=i-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=r}this.lastAngle_=i;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==y.c){var l=a.getViewport().getBoundingClientRect(),u=Object(c.a)(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.anchor_=a.getCoordinateFromPixelInternal(u),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(c.b),K=n("re9t");function U(t){var e=t||{},n=new i.a,o=new L(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new v),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new l({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new g({onFocusOnly:e.onFocusOnly,kinetic:o})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new z),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new K.a({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new T),n.push(new k({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new G({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new I({duration:e.zoomDuration})),n}},Rznk:function(t,e,n){"use strict";var o,i=n("nu7S"),r=n("j/Z9"),a=n("FlXx"),s=n("I/d5"),l=n("CtKy"),c=n("jekj"),u=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===o.collapsed||o.collapsed,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=void 0!==o.collapsible,n.collapsible_=void 0===o.collapsible||o.collapsible,n.collapsible_||(n.collapsed_=!1);var i=void 0!==o.className?o.className:"ol-attribution",s=void 0!==o.tipLabel?o.tipLabel:"Attributions",l=void 0!==o.expandClassName?o.expandClassName:i+"-expand",c=void 0!==o.collapseLabel?o.collapseLabel:"\xbb",u=void 0!==o.collapseClassName?o.collapseClassName:i+"-collpase";"string"==typeof c?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=c,n.collapseLabel_.className=u):n.collapseLabel_=c;var h=void 0!==o.label?o.label:"i";"string"==typeof h?(n.label_=document.createElement("span"),n.label_.textContent=h,n.label_.className=l):n.label_=h;var p=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_,d=document.createElement("button");d.setAttribute("type","button"),d.title=s,d.appendChild(p),d.addEventListener(r.a.CLICK,n.handleClick_.bind(n),!1);var f=n.element;return f.className=i+" "+a.e+" "+a.b+(n.collapsed_&&n.collapsible_?" "+a.a:"")+(n.collapsible_?"":" ol-uncollapsible"),f.appendChild(n.ulElement_),f.appendChild(d),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return u(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],o=!0,i=t.layerStatesArray,r=0,a=i.length;r<a;++r){var s=i[r];if(Object(l.b)(s,t.viewState)){var c=s.layer.getSource();if(c){var u=c.getAttributions();if(u){var h=u(t);if(h)if(o=o&&!1!==c.getAttributionsCollapsible(),Array.isArray(h))for(var p=0,d=h.length;p<d;++p)h[p]in e||(n.push(h[p]),e[h[p]]=!0);else h in e||(n.push(h),e[h]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Object(s.b)(e,this.renderedAttributions_)){Object(c.d)(this.ulElement_);for(var o=0,i=e.length;o<i;++o){var r=document.createElement("li");r.innerHTML=e[o],this.ulElement_.appendChild(r)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(a.a),this.collapsed_?Object(c.g)(this.collapseLabel_,this.label_):Object(c.g)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(i.default);e.a=h},SMMa:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var o=n("0eRI");function i(t){return void 0!==t?0:void 0}function r(t){return void 0!==t?t:void 0}function a(t){var e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function s(t){var e=t||Object(o.j)(5);return function(t,n){return n?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}}},TEsn:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var o,i=n("Rznk"),r=n("+cQG"),a=n("nu7S"),s=n("j/Z9"),l=n("FlXx"),c=n("sQKY"),u=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(e){var n=this,o=e||{};n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var i=void 0!==o.className?o.className:"ol-rotate",r=void 0!==o.label?o.label:"\u21e7",a=void 0!==o.compassClassName?o.compassClassName:"ol-compass";n.label_=null,"string"==typeof r?(n.label_=document.createElement("span"),n.label_.className=a,n.label_.textContent=r):(n.label_=r,n.label_.classList.add(a));var c=o.tipLabel?o.tipLabel:"Reset rotation",u=document.createElement("button");u.className=i+"-reset",u.setAttribute("type","button"),u.title=c,u.appendChild(n.label_),u.addEventListener(s.a.CLICK,n.handleClick_.bind(n),!1);var h=n.element;return h.className=i+" "+l.e+" "+l.b,h.appendChild(u),n.callResetNorth_=o.resetNorth?o.resetNorth:void 0,n.duration_=void 0!==o.duration?o.duration:250,n.autoHide_=void 0===o.autoHide||o.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(l.c),n}return u(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:c.b}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var o="rotate("+n+"rad)";if(this.autoHide_){var i=this.element.classList.contains(l.c);i||0!==n?i&&0!==n&&this.element.classList.remove(l.c):this.element.classList.add(l.c)}this.label_.style.transform=o}this.rotation_=n}},e}(a.default),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(t){function e(e){var n=this,o=e||{};n=t.call(this,{element:document.createElement("div"),target:o.target})||this;var i=void 0!==o.className?o.className:"ol-zoom",r=void 0!==o.delta?o.delta:1,a=void 0!==o.zoomInClassName?o.zoomInClassName:i+"-in",c=void 0!==o.zoomOutClassName?o.zoomOutClassName:i+"-out",u=void 0!==o.zoomInLabel?o.zoomInLabel:"+",h=void 0!==o.zoomOutLabel?o.zoomOutLabel:"\u2212",p=void 0!==o.zoomInTipLabel?o.zoomInTipLabel:"Zoom in",d=void 0!==o.zoomOutTipLabel?o.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=a,f.setAttribute("type","button"),f.title=p,f.appendChild("string"==typeof u?document.createTextNode(u):u),f.addEventListener(s.a.CLICK,n.handleClick_.bind(n,r),!1);var g=document.createElement("button");g.className=c,g.setAttribute("type","button"),g.title=d,g.appendChild("string"==typeof h?document.createTextNode(h):h),g.addEventListener(s.a.CLICK,n.handleClick_.bind(n,-r),!1);var y=n.element;return y.className=i+" "+l.e+" "+l.b,y.appendChild(f),y.appendChild(g),n.duration_=void 0!==o.duration?o.duration:250,n}return p(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var o=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:o,duration:this.duration_,easing:c.b})):e.setZoom(o)}}},e}(a.default);function f(t){var e=t||{},n=new r.a;return(void 0===e.zoom||e.zoom)&&n.push(new d(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new h(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new i.a(e.attributionOptions)),n}},TOut:function(t,e,n){"use strict";e.a={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},ax4G:function(t,e,n){"use strict";var o,i=n("nu7S"),r=n("zYA+"),a=n("FlXx"),s=n("A5l+"),l=n("SHzd"),c=n("hatQ"),u=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=[1,2,5],p=function(t){function e(e){var n=this,o=e||{},i=void 0!==o.className?o.className:o.bar?"ol-scale-bar":"ol-scale-line";return(n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this).innerElement_=document.createElement("div"),n.innerElement_.className=i+"-inner",n.element.className=i+" "+a.e,n.element.appendChild(n.innerElement_),n.viewState_=null,n.minWidth_=void 0!==o.minWidth?o.minWidth:64,n.renderedVisible_=!1,n.renderedWidth_=void 0,n.renderedHTML_="",n.addEventListener(Object(c.b)("units"),n.handleUnitsChanged_),n.setUnits(o.units||"metric"),n.scaleBar_=o.bar||!1,n.scaleBarSteps_=o.steps||4,n.scaleBarText_=o.text||!1,n.dpi_=o.dpi||void 0,n}return u(e,t),e.prototype.getUnits=function(){return this.get("units")},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set("units",t)},e.prototype.setDpi=function(t){this.dpi_=t},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,n=t.projection,o=this.getUnits(),i="degrees"==o?r.b.DEGREES:r.b.METERS,a=Object(s.h)(n,t.resolution,e,i),c=this.minWidth_*(this.dpi_||25.4/.28)/(25.4/.28),u=c*a,p="";if("degrees"==o){var d=s.a[r.b.DEGREES];(u*=d)<d/60?(p="\u2033",a*=3600):u<d?(p="\u2032",a*=60):p="\xb0"}else"imperial"==o?u<.9144?(p="in",a/=.0254):u<1609.344?(p="ft",a/=.3048):(p="mi",a/=1609.344):"nautical"==o?(a/=1852,p="nm"):"metric"==o?u<.001?(p="\u03bcm",a*=1e6):u<1?(p="mm",a*=1e3):u<1e3?p="m":(p="km",a/=1e3):"us"==o?u<.9144?(p="in",a*=39.37):u<1609.344?(p="ft",a/=.30480061):(p="mi",a/=1609.3472):Object(l.a)(!1,33);for(var f,g,y,m,v=3*Math.floor(Math.log(c*a)/Math.log(10));;){y=Math.floor(v/3);var _=Math.pow(10,y);if(f=h[(v%3+3)%3]*_,g=Math.round(f/a),isNaN(g))return this.element.style.display="none",void(this.renderedVisible_=!1);if(g>=c)break;++v}m=this.scaleBar_?this.createScaleBar(g,f,p):f.toFixed(y<0?-y:0)+" "+p,this.renderedHTML_!=m&&(this.innerElement_.innerHTML=m,this.renderedHTML_=m),this.renderedWidth_!=g&&(this.innerElement_.style.width=g+"px",this.renderedWidth_=g),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,n){for(var o="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),i=[],r=t/this.scaleBarSteps_,a="#ffffff",s=0;s<this.scaleBarSteps_;s++)0===s&&i.push(this.createMarker("absolute",s)),i.push('<div><div class="ol-scale-singlebar" style="width: '+r+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.scaleBarSteps_?this.createStepText(s,t,!1,e,n):"")+"</div>"),s===this.scaleBarSteps_-1&&i.push(this.createStepText(s+1,t,!0,e,n)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+o+"</div>":"")+i.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,n,o,i){var r=0===t?0:Math.round(o/this.scaleBarSteps_*t*100)/100;return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(n?e+"px":"unset")+';">'+r+(0===t?"":" "+i)+"</div>"},e.prototype.getScaleForResolution=function(){var t=Object(s.h)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center),e=this.dpi_||25.4/.28,n=this.viewState_.projection.getMetersPerUnit();return parseFloat(t.toString())*n*(1e3/25.4)*e},e.prototype.render=function(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()},e}(i.default);e.a=p},bM1K:function(t,e,n){"use strict";var o,i=n("nh1Y"),r=n("h7by"),a=n("lRKV"),s=n("zqV8"),l=n("vog+"),c=n("nKUj"),u=n("CtKy"),h=n("61KW"),p=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function d(t,e){c.a.expire()}var f=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n}return p(e,t),e.prototype.dispatchRenderEvent=function(t,e){Object(a.b)()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;Object(s.b)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(s.d)(o,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,i,r,a,s){var c,p=e.viewState;function d(t,e,n,o){return i.call(r,e,t?n:null,o)}var f=p.projection,g=Object(h.j)(t.slice(),f),y=[[0,0]];if(f.canWrapX()&&o){var m=f.getExtent(),v=Object(l.E)(m);y.push([-v,0],[v,0])}for(var _=e.layerStatesArray,b=_.length,E=[],w=[],C=0;C<y.length;C++)for(var x=b-1;x>=0;--x){var O=_[x],R=O.layer;if(R.hasRenderer()&&Object(u.b)(O,p)&&a.call(s,R)){var j=R.getRenderer(),A=R.getSource();if(j&&A){var I=A.getWrapX()?g:t,P=d.bind(null,O.managed);w[0]=I[0]+y[C][0],w[1]=I[1]+y[C][1],c=j.forEachFeatureAtCoordinate(w,e,n,P,E)}if(c)return c}}if(0!==E.length){var S=1/E.length;return E.forEach((function(t,e){return t.distanceSq+=e*S})),E.sort((function(t,e){return t.distanceSq-e.distanceSq})),E.some((function(t){return c=t.callback(t.feature,t.layer,t.geometry)})),c}},e.prototype.forEachLayerAtPixel=function(t,e,n,o,i){return Object(a.b)()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,o,i,a){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,o,r.b,this,i,a)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){Object(a.b)()},e.prototype.scheduleExpireIconCache=function(t){c.a.canExpireCache()&&t.postRenderFunctions.push(d)},e}(i.a),g=n("fzNE"),y=n("XqO+"),m=n("eXX1"),v=n("MMQm"),_=n("FlXx"),b=n("wINb"),E=n("HK6I"),w=n("jekj"),C=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),x=function(t){function e(e){var n=t.call(this,e)||this;n.fontChangeListenerKey_=Object(E.a)(b.a,g.a.PROPERTYCHANGE,e.redrawText.bind(e)),n.element_=document.createElement("div");var o=n.element_.style;o.position="absolute",o.width="100%",o.height="100%",o.zIndex="0",n.element_.className=_.e+" ol-layers";var i=e.getViewport();return i.insertBefore(n.element_,i.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return C(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var o=new y.a(t,void 0,e);n.dispatchEvent(o)}},e.prototype.disposeInternal=function(){Object(E.c)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(m.a.PRECOMPOSE,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;for(var o=[],i=null,r=0,a=e.length;r<a;++r){var s=e[r];if(t.layerIndex=r,Object(u.b)(s,n)&&(s.sourceState==v.a.READY||s.sourceState==v.a.UNDEFINED)){var l=s.layer,c=l.render(t,i);c&&(c!==i&&(this.children_.push(c),i=c),"getDeclutter"in l&&o.push(l))}}for(r=o.length-1;r>=0;--r)o[r].renderDeclutter(t);Object(w.f)(this.element_,this.children_),this.dispatchRenderEvent(m.a.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,o,i){for(var r=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var l=a[s],c=l.layer;if(c.hasRenderer()&&Object(u.b)(l,r)&&i(c)){var h=c.getRenderer().getDataAtPixel(t,e,n);if(h){var p=o(c,h);if(p)return p}}}},e}(f),O=n("hatQ"),R=n("+cQG"),j=n("rjvG"),A=n("j/Z9"),I=n("tUlR"),P=n("skP8"),S=n("XnQF"),T=n("mm/l"),M=n("8JWR"),k=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),L=function(t){function e(e,n){var o=t.call(this,e)||this;o.map_=e,o.emulateClicks_=!1,o.dragging_=!1,o.dragListenerKeys_=[],o.moveTolerance_=n?n*M.a:M.a,o.down_=null;var i=o.map_.getViewport();return o.activePointers_=0,o.trackedTouches_={},o.element_=i,o.pointerdownListenerKey_=Object(E.a)(i,"pointerdown",o.handlePointerDown_,o),o.relayedListenerKey_=Object(E.a)(i,"pointermove",o.relayEvent_,o),o.boundHandleTouchMove_=o.handleTouchMove_.bind(o),o.element_.addEventListener(A.a.TOUCHMOVE,o.boundHandleTouchMove_,!!M.e&&{passive:!1}),o}return k(e,t),e.prototype.emulateClick_=function(t){var e=new P.a(T.a.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new P.a(T.a.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((function(){this.clickTimeoutId_=void 0;var e=new P.a(T.a.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}).bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==T.a.POINTERUP||e.type==T.a.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==T.a.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new P.a(T.a.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.propagationStopped&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(E.c),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new P.a(T.a.POINTERDOWN,this.map_,t);if(this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length){var n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Object(E.a)(n,T.a.POINTERMOVE,this.handlePointerMove_,this),Object(E.a)(n,T.a.POINTERUP,this.handlePointerUp_,this),Object(E.a)(this.element_,T.a.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Object(E.a)(this.element_.getRootNode(),T.a.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new P.a(T.a.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new P.a(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(E.c)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(A.a.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Object(E.c)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(E.c),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(S.a),F=n("1PGm"),N=n("TOut"),D=n("SHzd"),G=n("QRdp"),V=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(G.b)(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var o=this.keyFunction_(n);return delete this.queuedElements_[o],n},t.prototype.enqueue=function(t){Object(D.a)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,o=e.length,i=e[t],r=n[t],a=t;t<o>>1;){var s=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),c=l<o&&n[l]<n[s]?l:s;e[t]=e[c],n[t]=n[c],t=c}e[t]=i,n[t]=r,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,o=this.priorities_,i=n[e],r=o[e];e>t;){var a=this.getParentIndex_(e);if(!(o[a]>r))break;n[e]=n[a],o[e]=o[a],e=a}n[e]=i,o[e]=r},t.prototype.reprioritize=function(){var t,e,n,o=this.priorityFunction_,i=this.elements_,r=this.priorities_,a=0,s=i.length;for(e=0;e<s;++e)(n=o(t=i[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(r[a]=n,i[a++]=t);i.length=a,r.length=a,this.heapify_()},t}(),z=n("UqCr"),K=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),U=function(t){function e(e,n){var o=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return o.boundHandleTileChange_=o.handleTileChange.bind(o),o.tileChangeCallback_=n,o.tilesLoading_=0,o.tilesLoadingKeys_={},o}return K(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);return n&&e[0].addEventListener(A.a.CHANGE,this.boundHandleTileChange_),n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(e.hifi&&n===z.a.LOADED||n===z.a.ERROR||n===z.a.EMPTY){e.removeEventListener(A.a.CHANGE,this.boundHandleTileChange_);var o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,o,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),n.getState()!==z.a.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,n.load())},e}(V),H=n("4tdA"),Z=n("vY6g"),B=n("A5l+"),W=n("yAfB"),Q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Y=function(t){function e(e){var n=t.call(this)||this,o=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,o,i,r={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new I.a({layers:t.layers});return r.layergroup=a,r.target=t.target,r.view=void 0!==t.view?t.view:new H.a,void 0!==t.controls&&(Array.isArray(t.controls)?n=new R.a(t.controls.slice()):(Object(D.a)("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new R.a(t.interactions.slice()):(Object(D.a)("function"==typeof t.interactions.getArray,48),o=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?i=new R.a(t.overlays.slice()):(Object(D.a)("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new R.a,{controls:n,interactions:o,keyboardEventTarget:e,overlays:i,values:r}}(e);return n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:M.a,n.animationDelay_=(function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}).bind(n),n.coordinateToPixelTransform_=Object(s.c)(),n.pixelToCoordinateTransform_=Object(s.c)(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=e.moveTolerance,n.keyboardEventTarget_=o.keyboardEventTarget,n.keyHandlerKeys_=null,n.controls=o.controls||new R.a,n.interactions=o.interactions||new R.a,n.overlays_=o.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new U(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addEventListener(Object(O.b)("layergroup"),n.handleLayerGroupChanged_),n.addEventListener(Object(O.b)("view"),n.handleViewChanged_),n.addEventListener(Object(O.b)("size"),n.handleSizeChanged_),n.addEventListener(Object(O.b)("target"),n.handleTargetChanged_),n.setProperties(o.values),n.controls.forEach((function(t){t.setMap(this)}).bind(n)),n.controls.addEventListener(j.a.ADD,(function(t){t.element.setMap(this)}).bind(n)),n.controls.addEventListener(j.a.REMOVE,(function(t){t.element.setMap(null)}).bind(n)),n.interactions.forEach((function(t){t.setMap(this)}).bind(n)),n.interactions.addEventListener(j.a.ADD,(function(t){t.element.setMap(this)}).bind(n)),n.interactions.addEventListener(j.a.REMOVE,(function(t){t.element.setMap(null)}).bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n.overlays_.addEventListener(j.a.ADD,(function(t){this.addOverlayInternal_(t.element)}).bind(n)),n.overlays_.addEventListener(j.a.REMOVE,(function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}).bind(n)),n}return Q(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var o=this.getCoordinateFromPixelInternal(t);return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,!1!==n.checkWrapped,e,null,void 0!==n.layerFilter?n.layerFilter:r.b,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var o=n||{};return this.renderer_.forEachLayerAtPixel(t,this.frameState_,void 0!==o.hitTolerance?o.hitTolerance:0,e,o.layerFilter||r.b)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t);return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,void 0!==(e=void 0!==e?e:{}).hitTolerance?e.hitTolerance:0,!1!==e.checkWrapped,void 0!==e.layerFilter?e.layerFilter:r.b,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get("target")},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Object(B.m)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?Object(s.a)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get("layergroup")},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var o=t[e].layer.getSource();if(o&&o.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Object(B.e)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?Object(s.a)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get("size")},e.prototype.getView=function(){return this.get("view")},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){return this.getTargetElement()?this.getTargetElement().ownerDocument:document},e.prototype.getTilePriority=function(t,e,n,o){return function(t,e,n,o,i){if(!t||!(n in t.wantedTiles))return 1/0;if(!t.wantedTiles[n][e.getKey()])return 1/0;var r=t.viewState.center,a=o[0]-r[0],s=o[1]-r[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i}(this.frameState_,t,e,n,o)},e.prototype.handleBrowserEvent=function(t,e){var n=new P.a(e||t.type,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,n=e.type;if("pointerdown"===n||n===A.a.WHEEL||n===A.a.KEYDOWN){var o=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():o,r="host"in i?i.elementFromPoint(e.clientX,e.clientY):e.target;if(this.overlayContainerStopEvent_.contains(r)||!(i===o?o.documentElement:i).contains(r))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var a=this.getInteractions().getArray().slice(),s=a.length-1;s>=0;s--){var l=a[s];if(l.getMap()===this&&l.getActive()&&this.getTargetElement()&&(!l.handleEvent(t)||t.propagationStopped))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,o=n;if(t){var i=t.viewHints;if(i[Z.a.ANIMATING]||i[Z.a.INTERACTING]){var r=!M.c&&Date.now()-t.time>8;n=r?0:8,o=r?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,o))}!t||!this.hasListener(m.a.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(m.a.RENDERCOMPLETE,t);for(var a=this.postRenderFunctions_,s=0,l=a.length;s<l;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e)Object(E.c)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(A.a.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(A.a.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(A.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Object(w.e)(this.viewport_)}if(t){for(var o in t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new L(this,this.moveTolerance_),T.a)this.mapBrowserEventHandler_.addEventListener(T.a[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(A.a.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(A.a.WHEEL,this.boundHandleBrowserEvent_,!!M.e&&{passive:!1});var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Object(E.a)(i,A.a.KEYDOWN,this.handleBrowserEvent,this),Object(E.a)(i,A.a.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(A.a.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(E.c)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(E.c)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Object(E.a)(t,g.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(E.a)(t,A.a.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(E.c),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Object(E.a)(t,g.a.PROPERTYCHANGE,this.render,this),Object(E.a)(t,A.a.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var o=t[e].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this,n=this.getSize(),o=this.getView(),i=this.frameState_,r=null;if(void 0!==n&&Object(W.b)(n)&&o&&o.isDef()){var a=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=o.getState();r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Object(l.z)(s.center,s.resolution,s.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:a,wantedTiles:{}}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),i&&(!this.previousExtent_||!Object(l.H)(this.previousExtent_)&&!Object(l.p)(r.extent,this.previousExtent_))&&(this.dispatchEvent(new F.a(N.a.MOVESTART,this,i)),this.previousExtent_=Object(l.l)(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Z.a.ANIMATING]&&!r.viewHints[Z.a.INTERACTING]&&!Object(l.p)(r.extent,this.previousExtent_)&&(this.dispatchEvent(new F.a(N.a.MOVEEND,this,r)),Object(l.d)(r.extent,this.previousExtent_))),this.dispatchEvent(new F.a(N.a.POSTRENDER,this,r)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){e.postRenderTimeoutHandle_=void 0,e.handlePostRender()}),0))},e.prototype.setLayerGroup=function(t){this.set("layergroup",t)},e.prototype.setSize=function(t){this.set("size",t)},e.prototype.setTarget=function(t){this.set("target",t)},e.prototype.setView=function(t){this.set("view",t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(O.a),J=n("TEsn"),X=n("Pda+"),q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$=function(t){function e(e){return(e=Object(G.a)({},e)).controls||(e.controls=Object(J.a)()),e.interactions||(e.interactions=Object(X.a)({onFocusOnly:!0})),t.call(this,e)||this}return q(e,t),e.prototype.createRenderer=function(){return new x(this)},e}(Y);e.a=$},fdeV:function(t,e,n){"use strict";var o,i=n("hatQ"),r=n("j/Z9"),a=n("SHzd"),s=n("HK6I"),l=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e){var n=t.call(this)||this;return n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addEventListener(Object(i.b)(n.geometryName_),n.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?n.setGeometry(e):n.setProperties(e)),n}return l(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var o=this.getStyle();return o&&t.setStyle(o),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(s.c)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(s.a)(t,r.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){var e,n;this.style_=t,this.styleFunction_=t?"function"==typeof(e=t)?e:(Array.isArray(e)?n=e:(Object(a.a)("function"==typeof e.getZIndex,41),n=[e]),function(){return n}):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(Object(i.b)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(Object(i.b)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(i.a);e.a=c},l8fJ:function(t,e,n){"use strict";var o,i=n("nu7S"),r=n("j/Z9"),a=n("FlXx"),s=n("HK6I"),l=n("jekj"),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],h=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,{element:document.createElement("div"),target:o.target})||this).cssClassName_=void 0!==o.className?o.className:"ol-full-screen",n.activeClassName_=void 0!==o.activeClassName?o.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=void 0!==o.inactiveClassName?o.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var i=void 0!==o.label?o.label:"\u2922";n.labelNode_="string"==typeof i?document.createTextNode(i):i;var s=void 0!==o.labelActive?o.labelActive:"\xd7";n.labelActiveNode_="string"==typeof s?document.createTextNode(s):s,n.button_=document.createElement("button");var l=o.tipLabel?o.tipLabel:"Toggle full-screen";n.setClassName_(n.button_,d()),n.button_.setAttribute("type","button"),n.button_.title=l,n.button_.appendChild(n.labelNode_),n.button_.addEventListener(r.a.CLICK,n.handleClick_.bind(n),!1);var c=n.cssClassName_+" "+a.e+" "+a.b+" "+(p()?"":a.f),u=n.element;return u.className=c,u.appendChild(n.button_),n.keys_=void 0!==o.keys&&o.keys,n.source_=o.source,n}return c(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(p()){var t=this.getMap();if(t)if(d())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e;e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():f(t)}(e):f(e)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();d()?(this.setClassName_(this.button_,!0),Object(l.g)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):(this.setClassName_(this.button_,!1),Object(l.g)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),t&&t.updateSize()},e.prototype.setClassName_=function(t,e){var n,o,i,r=this.activeClassName_,a=this.inactiveClassName_,s=e?r:a;(n=t.classList).remove.apply(n,r),(o=t.classList).remove.apply(o,a),(i=t.classList).add.apply(i,s)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e)for(var n=0,o=u.length;n<o;++n)this.listenerKeys.push(Object(s.a)(document,u[n],this.handleFullScreenChange_,this))},e}(i.default);function p(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function d(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function f(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}e.a=h},mTvk:function(t,e,n){"use strict";var o,i=n("KLY9"),r=n("JtbZ"),a=n("sDFk"),s=n("QZ7v"),l=n("vY6g"),c=n("zqV8"),u=n("vog+"),h=n("SbUa"),p=n("waAw"),d=n("A5l+"),f=n("lRKV"),g=n("61KW"),y=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){function e(e){var n=t.call(this,e)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.dirty_=!1,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=Object(u.j)(),n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n}return y(e,t),e.prototype.useContainer=function(e,n,o){o<1&&(e=null),t.prototype.useContainer.call(this,e,n,o)},e.prototype.renderWorlds=function(t,e,n){var o=e.extent,i=e.viewState,r=i.center,a=i.resolution,s=i.projection,c=i.rotation,h=s.getExtent(),p=this.getLayer().getSource(),d=e.pixelRatio,f=e.viewHints,g=!(f[l.a.ANIMATING]||f[l.a.INTERACTING]),y=this.context,m=Math.round(e.size[0]*d),v=Math.round(e.size[1]*d),_=p.getWrapX()&&s.canWrapX(),b=_?Object(u.E)(h):null,E=_?Math.ceil((o[2]-h[2])/b)+1:1,w=_?Math.floor((o[0]-h[0])/b):0;do{var C=this.getRenderTransform(r,a,c,d,m,v,w*b);t.execute(y,1,C,c,g,void 0,n)}while(++w<E)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,e){var n=t.pixelRatio,o=t.layerStatesArray[t.layerIndex];Object(c.e)(this.pixelTransform,1/n,1/n),Object(c.d)(this.inversePixelTransform,this.pixelTransform);var i=Object(c.j)(this.pixelTransform);this.useContainer(e,i,o.opacity);var r=this.context,a=r.canvas,s=this.replayGroup_,l=this.declutterExecutorGroup;if((!s||s.isEmpty())&&(!l||l.isEmpty()))return!this.containerReused&&a.width>0&&(a.width=0),this.container;var h=Math.round(t.size[0]*n),p=Math.round(t.size[1]*n);a.width!=h||a.height!=p?(a.width=h,a.height=p,a.style.transform!==i&&(a.style.transform=i)):this.containerReused||r.clearRect(0,0,h,p),this.preRender(r,t);var f=t.viewState,g=f.projection,y=!1;if(o.extent&&this.clipping){var m=Object(d.f)(o.extent,g);(y=!Object(u.g)(m,t.extent)&&Object(u.F)(m,t.extent))&&this.clipUnrotated(r,t,m)}this.renderWorlds(s,t),y&&r.restore(),this.postRender(r,t);var v=o.opacity,_=this.container;return v!==parseFloat(_.style.opacity)&&(_.style.opacity=1===v?"":String(v)),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise((function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];Object(c.a)(this.pixelTransform,n);var o=this.renderedCenter_,i=this.renderedResolution_,r=this.renderedRotation_,a=this.renderedProjection_,s=this.renderedExtent_,l=this.getLayer(),p=[],d=n[0]/2,f=n[1]/2;p.push(this.getRenderTransform(o,i,r,.5,d,f,0).slice());var g=l.getSource(),y=a.getExtent();if(g.getWrapX()&&a.canWrapX()&&!Object(u.g)(y,s)){for(var m=s[0],v=Object(u.E)(y),_=0;m<y[0];)--_,p.push(this.getRenderTransform(o,i,r,.5,d,f,v*_).slice()),m+=v;for(_=0,m=s[2];m>y[2];)++_,p.push(this.getRenderTransform(o,i,r,.5,d,f,v*_).slice()),m-=v}this.hitDetectionImageData_=Object(h.a)(n,p,this.renderedFeatures_,l.getStyleFunction(),s,i,r)}e(Object(h.b)(t,this.renderedFeatures_,this.hitDetectionImageData_))}).bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,i){var r=this;if(this.replayGroup_){var a,s=e.viewState.resolution,l=e.viewState.rotation,c=this.getLayer(),u={},h=function(t,e,n){var r=Object(f.c)(t),a=u[r];if(a){if(!0!==a&&n<a.distanceSq){if(0===n)return u[r]=!0,i.splice(i.lastIndexOf(a),1),o(t,c,e);a.geometry=e,a.distanceSq=n}}else{if(0===n)return u[r]=!0,o(t,c,e);i.push(u[r]={feature:t,layer:c,geometry:e,distanceSq:n,callback:o})}},p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some((function(o){return a=o.forEachFeatureAtCoordinate(t,s,l,n,h,o===r.declutterExecutorGroup?e.declutterTree.all().map((function(t){return t.value})):null)})),a}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),n=e.getSource();if(!n)return!1;var o=t.viewHints[l.a.ANIMATING],i=t.viewHints[l.a.INTERACTING],a=e.getUpdateWhileAnimating(),c=e.getUpdateWhileInteracting();if(!this.dirty_&&!a&&o||!c&&i)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var h=t.extent,f=t.viewState,y=f.projection,m=f.resolution,v=t.pixelRatio,_=e.getRevision(),b=e.getRenderBuffer(),E=e.getRenderOrder();void 0===E&&(E=p.a);var w=f.center.slice(),C=Object(u.c)(h,b*m),x=[C.slice()],O=y.getExtent();if(n.getWrapX()&&y.canWrapX()&&!Object(u.g)(O,t.extent)){var R=Object(u.E)(O),j=Math.max(Object(u.E)(C)/2,R);C[0]=O[0]-j,C[2]=O[2]+j,Object(g.j)(w,y);var A=Object(u.K)(x[0],y);A[0]<O[0]&&A[2]<O[2]?x.push([A[0]+R,A[1],A[2]+R,A[3]]):A[0]>O[0]&&A[2]>O[2]&&x.push([A[0]-R,A[1],A[2]-R,A[3]])}if(!this.dirty_&&this.renderedResolution_==m&&this.renderedRevision_==_&&this.renderedRenderOrder_==E&&Object(u.g)(this.renderedExtent_,C))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var I,P=new r.a(Object(p.c)(m,v),C,m,v);this.getLayer().getDeclutter()&&(I=new r.a(Object(p.c)(m,v),C,m,v));var S,T=Object(d.k)();if(T){for(var M=0,k=x.length;M<k;++M)n.loadFeatures(Object(d.n)(x[M],y),m,T);S=Object(d.j)(T,y)}else for(M=0,k=x.length;M<k;++M)n.loadFeatures(x[M],m,y);var L=Object(p.b)(m,v),F=(function(t){var n,o=t.getStyleFunction()||e.getStyleFunction();if(o&&(n=o(t,m)),n){var i=this.renderFeature(t,L,n,P,S,I);this.dirty_=this.dirty_||i}}).bind(this),N=Object(d.n)(C,y),D=n.getFeaturesInExtent(N);for(E&&D.sort(E),M=0,k=D.length;M<k;++M)F(D[M]);this.renderedFeatures_=D;var G=P.finish(),V=new s.a(C,m,v,n.getOverlaps(),G,e.getRenderBuffer());return I&&(this.declutterExecutorGroup=new s.a(C,m,v,n.getOverlaps(),I.finish(),e.getRenderBuffer())),this.renderedResolution_=m,this.renderedRevision_=_,this.renderedRenderOrder_=E,this.renderedExtent_=C,this.renderedCenter_=w,this.renderedProjection_=y,this.replayGroup_=V,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,n,o,i,r){if(!n)return!1;var a=!1;if(Array.isArray(n))for(var s=0,l=n.length;s<l;++s)a=Object(p.d)(o,t,n[s],e,this.boundHandleStyleImageChange_,i,r)||a;else a=Object(p.d)(o,t,n,e,this.boundHandleStyleImageChange_,i,r);return a},e}(a.a),v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=function(t){function e(e){return t.call(this,e)||this}return v(e,t),e.prototype.createRenderer=function(){return new m(this)},e}(i.a);e.a=_},"mm/l":function(t,e,n){"use strict";var o=n("j/Z9");e.a={SINGLECLICK:"singleclick",CLICK:o.a.CLICK,DBLCLICK:o.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},nSfQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return u}));var o,i=n("hatQ"),r=n("qBMe"),a=n("sQKY"),s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e){var n=t.call(this)||this;return e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return s(e,t),e.prototype.getActive=function(){return this.get(r.a.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(r.a.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(i.a);function c(t,e,n){var o=t.getCenterInternal();o&&t.animateInternal({duration:void 0!==n?n:250,easing:a.d,center:t.getConstrainedCenter([o[0]+e[0],o[1]+e[1]])})}function u(t,e,n,o){var i=t.getZoom();if(void 0!==i){var r=t.getConstrainedZoom(i+e),s=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:n,duration:void 0!==o?o:250,easing:a.b})}}e.a=l},nu7S:function(t,e,n){"use strict";n.r(e);var o,i=n("hatQ"),r=n("TOut"),a=n("h7by"),s=n("HK6I"),l=n("jekj"),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e){var n=t.call(this)||this,o=e.element;return!o||e.target||o.style.pointerEvents||(o.style.pointerEvents="auto"),n.element=o||null,n.target_=null,n.map_=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return c(e,t),e.prototype.disposeInternal=function(){Object(l.e)(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Object(l.e)(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)Object(s.c)(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==a.c&&this.listenerKeys.push(Object(s.a)(t,r.a.POSTRENDER,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(i.a);e.default=u},qBMe:function(t,e,n){"use strict";e.a={ACTIVE:"active"}},r56K:function(t,e,n){t.exports=function(t,e){"use strict";t="default"in t?t.default:t;var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),o="layer-switcher-",i=function(t){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var e=t||{},n=e.tipLabel?e.tipLabel:"Legend",r=e.collapseTipLabel?e.collapseTipLabel:"Collapse legend",a=document.createElement("div"),s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,{element:a,target:e.target}));s.activationMode=e.activationMode||"mouseover",s.startActive=!0===e.startActive;var l=void 0!==e.label?e.label:"",c=void 0!==e.collapseLabel?e.collapseLabel:"\xbb";s.groupSelectStyle=i.getGroupSelectStyle(e.groupSelectStyle),s.reverse=!1!==e.reverse,s.mapListeners=[],s.hiddenClassName="ol-unselectable ol-control layer-switcher",i.isTouchDevice_()&&(s.hiddenClassName+=" touch"),s.shownClassName="shown",a.className=s.hiddenClassName;var u=document.createElement("button");u.setAttribute("title",n),u.setAttribute("aria-label",n),a.appendChild(u),s.panel=document.createElement("div"),s.panel.className="panel",a.appendChild(s.panel),i.enableTouchScroll_(s.panel);var h=s;return u.textContent=l,a.classList.add(o+"group-select-style-"+s.groupSelectStyle),a.classList.add(o+"activation-mode-"+s.activationMode),"click"===s.activationMode?(a.classList.add("activationModeClick"),s.startActive&&(u.textContent=c,u.setAttribute("title",r),u.setAttribute("aria-label",r)),u.onclick=function(t){t=t||window.event,h.element.classList.contains(h.shownClassName)?(h.hidePanel(),u.textContent=l,u.setAttribute("title",n),u.setAttribute("aria-label",n)):(h.showPanel(),u.textContent=c,u.setAttribute("title",r),u.setAttribute("aria-label",r)),t.preventDefault()}):(u.onmouseover=function(t){h.showPanel()},u.onclick=function(t){t=t||window.event,h.showPanel(),t.preventDefault()},h.panel.onmouseout=function(t){t=t||window.event,h.panel.contains(t.toElement||t.relatedTarget)||h.hidePanel()}),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,t),n(i,[{key:"setMap",value:function(t){for(var n=0;n<this.mapListeners.length;n++)e.unByKey(this.mapListeners[n]);if(this.mapListeners.length=0,function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"setMap",this).call(this,t),t&&(this.startActive?this.showPanel():this.renderPanel(),"click"!==this.activationMode)){var o=this;this.mapListeners.push(t.on("pointerdown",(function(){o.hidePanel()})))}}},{key:"showPanel",value:function(){this.element.classList.contains(this.shownClassName)||(this.element.classList.add(this.shownClassName),this.renderPanel())}},{key:"hidePanel",value:function(){this.element.classList.contains(this.shownClassName)&&this.element.classList.remove(this.shownClassName)}},{key:"renderPanel",value:function(){this.dispatchEvent({type:"render"}),i.renderPanel(this.getMap(),this.panel,{groupSelectStyle:this.groupSelectStyle,reverse:this.reverse}),this.dispatchEvent({type:"rendercomplete"})}}],[{key:"renderPanel",value:function(t,e,n){var o=new Event("render");for(e.dispatchEvent(o),(n=n||{}).groupSelectStyle=i.getGroupSelectStyle(n.groupSelectStyle),i.ensureTopVisibleBaseLayerShown_(t);e.firstChild;)e.removeChild(e.firstChild);i.forEachRecursive(t,(function(t,e,n){t.set("indeterminate",!1)})),"children"===n.groupSelectStyle||"none"===n.groupSelectStyle?i.setGroupVisibility(t):"group"===n.groupSelectStyle&&i.setChildVisibility(t);var r=document.createElement("ul");e.appendChild(r),i.renderLayers_(t,t,r,n,(function(o){i.renderPanel(t,e,n)}));var a=new Event("rendercomplete");e.dispatchEvent(a)}},{key:"isBaseGroup",value:function(t){var e=t.getLayers?t.getLayers().getArray():[];return e.length&&"base"===e[0].get("type")}},{key:"setGroupVisibility",value:function(t){i.getGroupsAndLayers(t,(function(t){return t.getLayers&&!t.get("combine")&&!i.isBaseGroup(t)})).reverse().forEach((function(t){var e=t.getLayersArray().map((function(t){return t.getVisible()}));e.every((function(t){return!0===t}))?(t.setVisible(!0),t.set("indeterminate",!1)):e.every((function(t){return!1===t}))?(t.setVisible(!1),t.set("indeterminate",!1)):(t.setVisible(!0),t.set("indeterminate",!0))}))}},{key:"setChildVisibility",value:function(t){i.getGroupsAndLayers(t,(function(t){return t.getLayers&&!t.get("combine")&&!i.isBaseGroup(t)})).forEach((function(t){var e=t.getVisible(),n=t.get("indeterminate");t.getLayers().getArray().forEach((function(t){t.set("indeterminate",!1),e&&!n||!t.getVisible()||t.set("indeterminate",!0)}))}))}},{key:"ensureTopVisibleBaseLayerShown_",value:function(t){var e;i.forEachRecursive(t,(function(t,n,o){"base"===t.get("type")&&t.getVisible()&&(e=t)})),e&&i.setVisible_(t,e,!0)}},{key:"getGroupsAndLayers",value:function(t,e){var n=[];return e=e||function(t,e,n){return!0},i.forEachRecursive(t,(function(t,o,i){t.get("title")&&e(t,o,i)&&n.push(t)})),n}},{key:"setVisible_",value:function(t,e,n,o){e.setVisible(n),n&&"base"===e.get("type")&&i.forEachRecursive(t,(function(t,n,o){t!=e&&"base"===t.get("type")&&t.setVisible(!1)})),e.getLayers&&!e.get("combine")&&"children"===o&&e.getLayers().forEach((function(n){i.setVisible_(t,n,e.getVisible(),o)}))}},{key:"renderLayer_",value:function(t,e,n,r,a){var s=document.createElement("li"),l=e.get("title"),c=i.uuid(),u=document.createElement("label");if(e.getLayers&&!e.get("combine")){var h=i.isBaseGroup(e);if(s.classList.add("group"),h&&s.classList.add(o+"base-group"),e.get("fold")){s.classList.add(o+"fold"),s.classList.add(o+e.get("fold"));var p=document.createElement("button");p.onclick=function(t){t=t||window.event,i.toggleFold_(e,s),t.preventDefault()},s.appendChild(p)}if(!h&&"none"!=r.groupSelectStyle){var d=document.createElement("input");d.type="checkbox",d.id=c,d.checked=e.getVisible(),d.indeterminate=e.get("indeterminate"),d.onchange=function(n){i.setVisible_(t,e,n.target.checked,r.groupSelectStyle),a(e)},s.appendChild(d),u.htmlFor=c}u.innerHTML=l,s.appendChild(u);var f=document.createElement("ul");s.appendChild(f),i.renderLayers_(t,e,f,r,a)}else{s.className="layer";var g=document.createElement("input");"base"===e.get("type")?(g.type="radio",g.name="base"):g.type="checkbox",g.id=c,g.checked=e.get("visible"),g.indeterminate=e.get("indeterminate"),g.onchange=function(n){i.setVisible_(t,e,n.target.checked,r.groupSelectStyle),a(e)},s.appendChild(g),u.htmlFor=c,u.innerHTML=l;var y=t.getView().getResolution();(y>e.getMaxResolution()||y<e.getMinResolution())&&(u.className+=" disabled"),s.appendChild(u)}return s}},{key:"renderLayers_",value:function(t,e,n,o,r){var a=e.getLayers().getArray().slice();o.reverse&&(a=a.reverse());for(var s,l=0;l<a.length;l++)(s=a[l]).get("title")&&n.appendChild(i.renderLayer_(t,s,l,o,r))}},{key:"forEachRecursive",value:function(t,e){t.getLayers().forEach((function(t,n,o){e(t,n,o),t.getLayers&&i.forEachRecursive(t,e)}))}},{key:"uuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}},{key:"enableTouchScroll_",value:function(t){if(i.isTouchDevice_()){var e=0;t.addEventListener("touchstart",(function(t){e=this.scrollTop+t.touches[0].pageY}),!1),t.addEventListener("touchmove",(function(t){this.scrollTop=e-t.touches[0].pageY}),!1)}}},{key:"isTouchDevice_",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}},{key:"toggleFold_",value:function(t,e){e.classList.remove(o+t.get("fold")),t.set("fold","open"===t.get("fold")?"close":"open"),e.classList.add(o+t.get("fold"))}},{key:"getGroupSelectStyle",value:function(t){return["none","children","group"].indexOf(t)>=0?t:"children"}}]),i}(t);return window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=i),i}(n("nu7S"),n("GTHH"))},rHrS:function(t,e,n){"use strict";var o=n("MicU"),i=n.n(o),r=n("vog+"),a=n("lRKV"),s=n("QRdp"),l=function(){function t(t){this.rbush_=new i.a(t),this.items_={}}return t.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Object(a.c)(e)]=n},t.prototype.load=function(t,e){for(var n=new Array(e.length),o=0,i=e.length;o<i;o++){var r=t[o],s=e[o],l={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:s};n[o]=l,this.items_[Object(a.c)(s)]=l}this.rbush_.load(n)},t.prototype.remove=function(t){var e=Object(a.c)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},t.prototype.update=function(t,e){var n=this.items_[Object(a.c)(e)],o=[n.minX,n.minY,n.maxX,n.maxY];Object(r.p)(o,t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var n,o=0,i=t.length;o<i;o++)if(n=e(t[o]))return n;return n},t.prototype.isEmpty=function(){return Object(s.d)(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Object(r.k)(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}();e.a=l},rKV5:function(t,e,n){"use strict";var o,i=n("fdeV"),r=n("/GEF"),a=n("DiD3"),s=n("jFox"),l=n("yki2"),c=n("lRKV"),u=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function h(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}var p=function(t){function e(){return t.call(this)||this}return u(e,t),e.prototype.getType=function(){return l.a.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(h(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(h(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return Object(c.b)()},e.prototype.readFeaturesFromObject=function(t,e){return Object(c.b)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(h(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return Object(c.b)()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(h(t))},e.prototype.readProjectionFromObject=function(t){return Object(c.b)()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return Object(c.b)()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return Object(c.b)()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return Object(c.b)()},e}(s.a),d=n("5urs"),f=n("vxo4"),g=n("Qs0z"),y=n("4KU7"),m=n("oVSo"),v=n("hWN6"),_=n("SHzd"),b=n("QRdp"),E=n("A5l+"),w=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),C=function(t){function e(e){var n=this,o=e||{};return(n=t.call(this)||this).dataProjection=Object(E.g)(o.dataProjection?o.dataProjection:"EPSG:4326"),o.featureProjection&&(n.defaultFeatureProjection=Object(E.g)(o.featureProjection)),n.geometryName_=o.geometryName,n.extractGeometryName_=o.extractGeometryName,n}return w(e,t),e.prototype.readFeatureFromObject=function(t,e){var n,o=x((n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),r=new i.a;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&r.setGeometryName(n.geometry_name),r.setGeometry(o),"id"in n&&r.setId(n.id),n.properties&&r.setProperties(n.properties,!0),r},e.prototype.readFeaturesFromObject=function(t,e){var n=null;if("FeatureCollection"===t.type){n=[];for(var o=t.features,i=0,r=o.length;i<r;++i)n.push(this.readFeatureFromObject(o[i],e))}else n=[this.readFeatureFromObject(t,e)];return n},e.prototype.readGeometryFromObject=function(t,e){return x(t,e)},e.prototype.readProjectionFromObject=function(t){var e,n=t.crs;return n?"name"==n.type?e=Object(E.g)(n.properties.name):"EPSG"===n.type?e=Object(E.g)("EPSG:"+n.properties.code):Object(_.a)(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={type:"Feature",geometry:null,properties:null},o=t.getId();if(void 0!==o&&(n.id=o),!t.hasProperties())return n;var i=t.getProperties(),r=t.getGeometry();return r&&(n.geometry=O(r,e),delete i[t.getGeometryName()]),Object(b.d)(i)||(n.properties=i),n},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],o=0,i=t.length;o<i;++o)n.push(this.writeFeatureObject(t[o],e));return{type:"FeatureCollection",features:n}},e.prototype.writeGeometryObject=function(t,e){return O(t,this.adaptOptions(e))},e}(p);function x(t,e){if(!t)return null;var n;switch(t.type){case a.a.POINT:n=function(t){return new m.a(t.coordinates)}(t);break;case a.a.LINE_STRING:n=function(t){return new d.a(t.coordinates)}(t);break;case a.a.POLYGON:n=function(t){return new v.a(t.coordinates)}(t);break;case a.a.MULTI_POINT:n=function(t){return new g.a(t.coordinates)}(t);break;case a.a.MULTI_LINE_STRING:n=function(t){return new f.a(t.coordinates)}(t);break;case a.a.MULTI_POLYGON:n=function(t){return new y.a(t.coordinates)}(t);break;case a.a.GEOMETRY_COLLECTION:n=function(t,e){var n=t.geometries.map((function(t){return x(t,void 0)}));return new r.a(n)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return Object(s.b)(n,!1,e)}function O(t,e){var n,o=(t=Object(s.b)(t,!0,e)).getType();switch(o){case a.a.POINT:n=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case a.a.LINE_STRING:n=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case a.a.POLYGON:n=function(t,e){var n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case a.a.MULTI_POINT:n=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case a.a.MULTI_LINE_STRING:n=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case a.a.MULTI_POLYGON:n=function(t,e){var n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case a.a.GEOMETRY_COLLECTION:n=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var n=Object(b.a)({},e);return delete n.featureProjection,O(t,n)}))}}(t,e);break;case a.a.CIRCLE:n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+o)}return n}e.a=C},re9t:function(t,e,n){"use strict";var o,i=n("H40N"),r=n("h7by"),a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=r.a),(n=t.call(this,i)||this).anchor_=null,n.duration_=void 0!==o.duration?o.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return a(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],o=this.targetPointers[1],r=n.clientX-o.clientX,a=n.clientY-o.clientY,s=Math.sqrt(r*r+a*a);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var l=t.map,c=l.getView();1!=e&&(this.lastScaleDelta_=e);var u=l.getViewport().getBoundingClientRect(),h=Object(i.a)(this.targetPointers);h[0]-=u.left,h[1]-=u.top,this.anchor_=l.getCoordinateFromPixelInternal(h),l.render(),c.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(i.b);e.a=s},sOKj:function(t,e,n){"use strict";n.d(e,"a",(function(){return zt}));var o=n("A5l+"),i=n("ckkg"),r=n("FU6l"),a=n("5uGe"),s=n("pBDD"),l=n("mW0F"),c=n("sWLk");class u{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new h(t,this.resultSelector))}}class h extends a.a{constructor(t,e,n=Object.create(null)){super(t),this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:null,this.values=n}_next(t){const e=this.iterators;Object(r.a)(t)?e.push(new d(t)):e.push("function"==typeof t[c.a]?new p(t[c.a]()):new f(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe(e,n)):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let r=0;r<e;r++){let e=t[r];if("function"==typeof e.hasValue&&!e.hasValue())return}let o=!1;const i=[];for(let r=0;r<e;r++){let e=t[r],a=e.next();if(e.hasCompleted()&&(o=!0),a.done)return void n.complete();i.push(a.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),o&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class p{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return t&&t.done}}class d{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[c.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class f extends s.a{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[c.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t,e,n,o,i){this.buffer.push(e),this.parent.checkIterators()}subscribe(t,e){return Object(l.a)(this,this.observable,this,e)}}var g=n("iAde"),y=n("OZ4H"),m=n("XZLj"),v=n("EM62"),_=n("Y2X+"),b=n("bFHC"),E=n("29Wa"),w=n("R7+U"),C=n("2kYt"),x=n("mFH5"),O=n("nKqi"),R=n("s2Ay");function j(t,e){if(1&t&&(v.Vb(0,"div",14),v.Ic(1),v.ic(2,"translate"),v.Ub()),2&t){const t=v.hc().$implicit,e=v.hc();v.Cb(1),v.Kc(" ",v.jc(2,1,"src_"+e.datasetNameMap[t].product_type)," ")}}function A(t,e){if(1&t&&(v.Vb(0,"div",14),v.Ic(1),v.Ub()),2&t){const t=v.hc().$implicit,e=v.hc();v.Cb(1),v.Kc(" ",e.datasetNameMap[t].type_title," ")}}function I(t,e){if(1&t&&(v.Vb(0,"mat-option",8),v.Vb(1,"div",9),v.Qb(2,"img",10),v.Vb(3,"div",11),v.Vb(4,"div",12),v.Ic(5),v.Ub(),v.Gc(6,j,3,3,"div",13),v.Gc(7,A,2,1,"div",13),v.Ub(),v.Ub(),v.Ub()),2&t){const t=e.$implicit,n=v.hc();v.nc("value",t),v.Cb(2),v.nc("src","https://cdn.mol.org/static/images/legends/datatypes/"+n.datasetNameMap[t].product_type+".png",v.Ac),v.Cb(3),v.Kc(" ",n.datasetNameMap[t].dataset_title," "),v.Cb(1),v.nc("ngIf","alienchecklist"!==n.datasetNameMap[t].product_type),v.Cb(1),v.nc("ngIf","alienchecklist"===n.datasetNameMap[t].product_type)}}function P(t,e){if(1&t&&(v.Vb(0,"tr"),v.Vb(1,"td",15),v.Ic(2),v.Ub(),v.Vb(3,"td"),v.Qb(4,"span",16),v.Ub(),v.Ub()),2&t){const t=e.$implicit;v.Cb(2),v.Jc(t.k),v.Cb(2),v.nc("innerHTML",t.v,v.zc)}}function S(t,e){if(1&t&&(v.Vb(0,"mat-list"),v.Vb(1,"table"),v.Gc(2,P,5,2,"tr",4),v.Ub(),v.Ub()),2&t){const t=e.$implicit;v.Cb(2),v.nc("ngForOf",t.metadataArray)}}let T=(()=>{class t{constructor(t,e,n,o,i){this.dialogRef=t,this.data=e,this.scientificname=n,this.translate=o,this.species=i,this.activeInfoPageDataChunk=[],this.datasetNameMap={},this.results=[],this.modalTitle="Feature information",this.modalType="",this.datasetIds=[],this.selected="",this.gbifKeysToRemove=["dataset_title","dataset_key","publishing_title","publishing_key","source_id"]}ngOnInit(){this.scientificname=this.data.scientificname,this.results=this.data.datasetResults.concat(this.data.geohashResults),this.results.forEach(t=>{if(t.metadataArray=[],Object.keys(t.metadata).forEach(e=>{"attributes"===e?Object.keys(t.metadata.attributes).forEach(e=>{t.metadataArray.push({k:e,v:t.metadata.attributes[e]})}):t.metadataArray.push({k:e,v:t.metadata[e]})}),"9905692e-6a28-4310-b01e-476a471e5bf8"==t.dataset_id){const e=t.metadataArray.find(t=>"dataset_title"===t.k),n=t.metadataArray.find(t=>"dataset_key"===t.k),o=t.metadataArray.find(t=>"publishing_title"===t.k),i=t.metadataArray.find(t=>"publishing_key"===t.k),r=t.metadataArray.find(t=>"source_id"===t.k),a=`<a href="https://www.gbif.org/dataset/${n.v}" target="_blank">${e.v}</a>`,s=`<a href="https://www.gbif.org/publisher/${i.v}" target="_blank">${o.v}</a>`,l=`<a href="https://www.gbif.org/occurrence/${r.v}" target="_blank">Occurrence Record</a>`;t.metadataArray=t.metadataArray.filter(t=>-1===this.gbifKeysToRemove.indexOf(t.k)),t.metadataArray.push({k:"dataset_title",v:a}),t.metadataArray.push({k:"publishing_title",v:s}),t.metadataArray.push({k:"source",v:l})}if("794adb49-7458-41c4-a1c0-56537fdbec1d"==t.dataset_id){const e=t.metadataArray.find(t=>"checklist_complete"===t.k);e&&(e.v="1"===e.v?"True":"False");const n=t.metadataArray.find(t=>"sampling_event_identifier"===t.k),o=`<a href="https://ebird.org/checklist/${n.v}" target="_blank">${n.v}</a>`;t.metadataArray=t.metadataArray.filter(t=>-1===["sampling_event_identifier"].indexOf(t.k)),t.metadataArray.push({k:"sampling_event_identifier",v:o})}const e=t.metadataArray.find(t=>"uncertainty_m"===t.k);e&&e.v&&(e.v=1*e.v<1e3?e.v+" m":e.v/1e3+" km"),t.metadataArray=t.metadataArray.filter(t=>Boolean(t.v)),t.metadataArray.sort((t,e)=>"eventdate"===t.k?-1:1),t.metadataArray.forEach(t=>{t.k=t.k.replaceAll("_"," "),"aid"===t.k?t.k="Animal ID":"eventdate"===t.k&&(t.k="Event Date")})}),this.species.getDatasets(this.scientificname).subscribe(t=>{t.forEach(t=>{this.datasetNameMap[t.dataset_id]=t}),this.datasetIds=new Array(...new Set(this.results.map(t=>t.dataset_id)))})}ngAfterViewInit(){setTimeout(()=>{this.paginator.length=this.results.length,this.activeInfoPageDataChunk=this.results.slice(0,1),this.paginator.firstPage(),this.updateTitle(this.activeInfoPageDataChunk[0].dataset_id)})}onInfoPageChanged(t){this.pageEvent=t;const e=t.pageIndex*t.pageSize;this.activeInfoPageDataChunk=this.results.slice(e,e+t.pageSize),this.updateTitle(this.activeInfoPageDataChunk[0].dataset_id)}datasetSelectionChanged(t){const e=t.value,n=this.results.findIndex(t=>t.dataset_id===e);this.paginator.pageIndex=n,this.onInfoPageChanged({pageIndex:n,pageSize:1})}updateTitle(t){const e=this.datasetNameMap[t];this.selected=t,e?(this.modalTitle=e.dataset_title,this.modalType=e.type_title):"794adb49-7458-41c4-a1c0-56537fdbec1d"===t?(this.modalTitle="eBird",this.modalType="Occurrences"):"9905692e-6a28-4310-b01e-476a471e5bf8"===t?(this.modalTitle="GBIF",this.modalType="Occurrences"):(this.modalTitle="Dataset title missing",this.modalType="Dataset type missing")}}return t.\u0275fac=function(e){return new(e||t)(v.Pb(y.g),v.Pb(y.a),v.Pb(y.a),v.Pb(m.j),v.Pb(m.g))},t.\u0275cmp=v.Jb({type:t,selectors:[["mol-feature-metadata-popup"]],viewQuery:function(t,e){var n;1&t&&v.Nc(g.a,!0),2&t&&v.tc(n=v.ec())&&(e.paginator=n.first)},decls:14,vars:7,consts:[["mat-icon-button","","mat-dialog-close","","matTooltipPosition","right","matTooltipClass","tooltip","matTooltip","Close the popup","aria-label","Close the popup",1,"popup-close-button"],[1,"dataset-select",3,"value","selectionChange","valueChange"],[3,"value",4,"ngFor","ngForOf"],[1,"content"],[4,"ngFor","ngForOf"],["align","end"],[3,"pageSize","showFirstLastButtons","hidePageSize","page"],["paginator",""],[3,"value"],[1,"dataset-dropdown"],[1,"product-type-logo",3,"src"],[1,"ds-text"],[1,"dataset-title"],["class","dataset-type-title",4,"ngIf"],[1,"dataset-type-title"],[1,"title"],[3,"innerHTML"]],template:function(t,e){1&t&&(v.Vb(0,"button",0),v.Vb(1,"mat-icon"),v.Ic(2,"close"),v.Ub(),v.Ub(),v.Vb(3,"div"),v.Vb(4,"mat-form-field"),v.Vb(5,"mat-select",1),v.dc("selectionChange",(function(t){return e.datasetSelectionChanged(t)}))("valueChange",(function(t){return e.selected=t})),v.Vb(6,"mat-select-trigger"),v.Ic(7),v.Ub(),v.Gc(8,I,8,5,"mat-option",2),v.Ub(),v.Ub(),v.Ub(),v.Vb(9,"mat-dialog-content",3),v.Gc(10,S,3,1,"mat-list",4),v.Ub(),v.Vb(11,"mat-dialog-actions",5),v.Vb(12,"mat-paginator",6,7),v.dc("page",(function(t){return e.onInfoPageChanged(t)})),v.Ub(),v.Ub()),2&t&&(v.Cb(5),v.nc("value",e.selected),v.Cb(2),v.Kc(" ",null==e.datasetNameMap[e.selected]?null:e.datasetNameMap[e.selected].dataset_title," "),v.Cb(1),v.nc("ngForOf",e.datasetIds),v.Cb(2),v.nc("ngForOf",e.activeInfoPageDataChunk),v.Cb(2),v.nc("pageSize",1)("showFirstLastButtons",!0)("hidePageSize",!0))},directives:[y.d,_.a,b.a,E.c,w.a,w.c,C.s,y.e,y.c,g.a,x.n,C.t,O.a],pipes:[R.d],styles:[".popup-close-button[_ngcontent-%COMP%]{float:right;background-color:#fff}.title[_ngcontent-%COMP%]{font-weight:400;padding:3px;text-transform:capitalize}.dataset-select[_ngcontent-%COMP%]{font-size:16px}.dataset-select[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:auto!important}.dataset-select[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{max-width:100%;width:auto}.mat-option[_ngcontent-%COMP%]{height:40px;padding:5px 0}.mat-option[_ngcontent-%COMP%]   .dataset-dropdown[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.mat-option[_ngcontent-%COMP%]   .dataset-dropdown[_ngcontent-%COMP%]   .product-type-logo[_ngcontent-%COMP%]{height:25px;width:25px;padding:5px}.mat-option[_ngcontent-%COMP%]   .ds-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;line-height:17px}.mat-option[_ngcontent-%COMP%]   .ds-text[_ngcontent-%COMP%]   .dataset-title[_ngcontent-%COMP%]{font-size:18px}.mat-option[_ngcontent-%COMP%]   .ds-text[_ngcontent-%COMP%]   .dataset-type-title[_ngcontent-%COMP%]{font-size:12px;line-height:10px;font-weight:300}.info-title[_ngcontent-%COMP%]{font-weight:500;min-width:500px;font-size:1.2em;padding-right:15px}.modal-title[_ngcontent-%COMP%]{margin-bottom:5px}.modal-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-right:5px;margin-bottom:-8px}.modal-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 3px;font-size:.7em;font-weight:300}.content[_ngcontent-%COMP%]{max-height:400px}table[_ngcontent-%COMP%]{padding:0 3px;table-layout:fixed}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word}@media screen and (max-device-width:480px){tr[_ngcontent-%COMP%]{display:flex;flex-direction:column}}"]}),t})();var M=n("bM1K"),k=n("4tdA"),L=n("TEsn"),F=n("Rznk"),N=n("l8fJ"),D=n("ax4G"),G=n("Pda+"),V=n("re9t"),z=n("r56K"),K=n.n(z),U=n("u8oz"),H=n("pWH9"),Z=n("Fe00"),B=n("U3AP"),W=n("sL3s"),Q=n("RlRc"),Y=n("y1k7"),J=n("rye+"),X=n("tUlR"),q=n("5Oj5"),$=n("heo9"),tt=n("m+aV"),et=n("PooM"),nt=n("CBkX"),ot=n("dTzw"),it=n("mS1D");const rt=it.j,at=new Image;at.src="https://storage.googleapis.com/cdn.mol.org/static/images/hatching/bw20.png",at.width=512,at.height=512;const st=document.createElement("canvas").getContext("2d").createPattern(at,"repeat");function lt(t=!1,e=!1){const n=new q.a({color:""}),o=new $.a({color:"#CCCCCC",width:1}),i=(new tt.c({fill:n}),new tt.c({fill:n,stroke:o})),r=(new tt.c({stroke:o}),new tt.c({image:new et.a({fill:new q.a({color:"#F60C1577"}),stroke:new $.a({color:"#CCCCCC",width:.6}),radius:17}),fill:new q.a({color:"#FA4141"})})),a=new tt.c({image:new et.a({fill:new q.a({color:rt[0]}),stroke:new $.a({color:"#CCCCCC",width:1}),radius:1}),fill:new q.a({color:"#FA4141"})}),s=[];return function(e,l){let c=0,u=e.get("layer");"tile"===u&&(u=e.get("product_type")),e.get("product_type"),e.get("presence");const h=e.get("uncertainty"),p=e.getGeometry().getType();if("nodata"==u)n.setColor(st),s[c++]=i;else if("coverage"==u)n.setColor("rgba(255,255,255, 0)"),s[c++]=i;else if("range"==u){const t=e.get("seasonality");n.setColor(it.c.range.seasonality[t]),s[c++]=i}else if("localinv"==u)n.setColor(it.c.localinv.color),o.setWidth(.7),s[c++]=i;else if("regionalchecklist"==u)n.setColor(it.c.regionalchecklist.color),s[c++]=i;else if("griddedrangeatlas"==u)n.setColor(it.c.griddedrangeatlas.color),o.setWidth(.1),s[c++]=i;else if("alienchecklist"==u)n.setColor(it.c.alienchecklist.color),n.setColor("rgba(255, 208, 215, 0.7)"),s[c++]=i;else if("movement"==u);else if("buffer"==u&&t)n.setColor(h>=16e4?"rgba(51, 51, 51, 0.15)":h<16e4?"rgba(51, 51, 51, 0.2)":h<=8e4?"rgba(51, 51, 51, 0.25)":h<=4e4?"rgba(51, 51, 51, 0.30)":h<=2e4?"rgba(51, 51, 51, 0.35)":h<=1e4?"rgba(51, 51, 51, 0.40)":h<=5e3?"rgba(51, 51, 51, 0.45)":h<=2500?"rgba(51, 51, 51, 0.5)":h<=1250?"rgba(51, 51, 51, 0.55)":h<=625?"rgba(51, 51, 51, 0.6)":"rgba(51, 51, 51, 0.5)"),s[c++]=i;else if("points"==u)a.getImage().setRadius(4),s[c++]=a;else if("occurrence"==u){const t=Math.trunc(Math.min(8,Math.floor(Math.log(e.get("total")))));if("Polygon"==p)n.setColor(rt[t]+"AA"),o.setWidth(.2),o.setColor("#333"),s[c++]=i;else{const e=Math.floor(2*t+3);r.getImage().setRadius(e),r.getImage().getFill().setColor(rt[t]),s[c++]=r}}else"spp_data"==u&&(n.setColor("rgba(68, 136, 51, 0.6)"),s[c++]=i);return s.length=c,s}}function ct(t=[],e={threshold:.1,showCellProtectedArea:!0}){const n=new q.a({color:"#f44444aa"}),o=new $.a({color:"#EEEEEE",width:.3}),i=new tt.c({stroke:new $.a({color:"#000000",width:.5}),fill:new q.a({color:"#ffffff00"})}),r=new tt.c({stroke:new $.a({color:"#FFFFFF",width:1})}),a=new tt.c({fill:n,stroke:o});return function(t,n){const o=t.getProperties();if("layer"===o.layer)return a.getFill().setColor(it.i[o.map_color]),a;if("region"===o.layer&&"data"===o.type){if(!e.showCellProtectedArea)return;return parseFloat(o.prop)>=e.threshold?i:void 0}if("region"===o.layer&&"mask"===o.type){if(!e.showCellProtectedArea)return;return r}if("region"===o.layer)return i;if("pattern"===o.layer){const t=a.getFill();if(o.pct_value)t.setColor(it.e[Math.round(o.pct_value)]+"77");else if("sr_mrx"===o.ptype||"ph_mrx"===o.ptype)t.setColor("0"===o.pvalue?"#00000000":Object(it.g)(parseFloat(o.pvalue))+"88");else if("disc_srunk"===o.ptype){let e=parseFloat(o.pvalue);t.setColor("#00000000");let n=Object(it.d)(e).replace("rgb","rgba").replace(")"," ,0.6)");t.setColor(n),a.getStroke().setColor("#00000000")}else if("richness"===o.ptype){var s=Object(it.a)(parseInt(o.map_color,10));t.setColor(s),a.getStroke().setColor("#00000000")}else if(o.map_color){const e=parseInt(o.map_color,10);e<2e3?t.setColor(it.e[e-1e3]+"88"):e>=2e3&&t.setColor(it.f[e-2e3]+"88")}else o.label&&t.setColor(Object(it.h)(o.label)+"aa")}return a}}var ut=n("fdeV"),ht=n("mTvk");const pt=[];for(let Kt=0;Kt<=14;++Kt)pt.push(156543.03392804097/Math.pow(2,2*Kt));const dt=new Z.a({extent:Object(o.g)("EPSG:3857").getExtent(),resolutions:pt,tileSize:512}),ft=new W.a({format:new H.a({featureClass:ut.a}),projection:"EPSG:3857",tileGrid:dt,transition:0}),gt=new B.a({title:"Vector tile - Species",visible:!1,source:ft,renderMode:"image",style:lt()}),yt=new W.a({format:new H.a({featureClass:ut.a}),projection:"EPSG:3857",tileGrid:dt,transition:0}),mt=new B.a({title:"Vector tile - Species",visible:!1,source:yt,renderMode:"image",style:function(){var t=new q.a({color:"rgba(251, 120, 84, 0.6)"}),e=new $.a({color:"#FA4141",width:1});new tt.c({image:new nt.a({fill:t,stroke:e,points:3,radius:4,rotation:Math.PI/4,angle:0})});var n=new q.a({color:"rgba(255,255,255,0.4)"}),o=new $.a({color:"#3399CC",width:1.25}),i=(new tt.c({image:new et.a({fill:n,stroke:o,radius:5}),fill:n,stroke:o}),new tt.c({image:new ot.a({opacity:.4,src:'data:image/svg+xml;utf8,\n<svg width="100" height="100" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  <style>\n  polygon {\n    fill: white;\n    stroke: darkgrey;\n    stroke-width: 20px;\n  }\n  </style>\n\n  <polygon color="white" points="100,100 50,0 0,100" class="triangle" />\n  </svg>\n',color:"rgb(241, 147, 121)",scale:.1})}));return()=>i}()}),vt=new Y.a,_t=new ht.a({source:vt,style:function(){const t=new tt.c({image:new et.a({stroke:new $.a({color:[0,120,120],width:2}),radius:1})}),e=new tt.c({image:new et.a({stroke:new $.a({color:[33,33,255],width:2}),radius:1})});return n=>"Occurrence"===n.get("what")?e:t}(),opacity:.6}),bt=new W.a({format:new H.a({featureClass:ut.a}),projection:"EPSG:3857",tileGrid:dt,transition:0}),Et=new B.a({title:"Vector tile - Occurrence",visible:!1,source:bt,renderMode:"image",style:lt()}),wt=new J.a({tileGrid:dt}),Ct=new Q.a({title:"Raster version",visible:!1,opacity:.7,source:wt}),xt=new J.a({tileGrid:dt}),Ot=new Q.a({title:"Rangemap layer",visible:!1,opacity:.8,source:xt}),Rt=new X.a({fold:"open",type:"overlay",layers:[Ct,gt,Et,mt,Ot,_t]});var jt=n("rKV5");const At=[];for(let Kt=0;Kt<=5;++Kt)At.push(156543.03392804097/Math.pow(2,2*Kt));const It=new Z.a({extent:Object(o.g)("EPSG:3857").getExtent(),resolutions:At,tileSize:512}),Pt=new W.a({attributions:'\xa9 <a href="https://mol.org">MOL</a>',format:new H.a,projection:"EPSG:3857",tileGrid:It}),St=new B.a({title:"Vector tile - Indicators",visible:!1,source:Pt,style:ct()}),Tt=new X.a({fold:"open",type:"overlay",layers:[St]});function Mt(t=[]){if(0===t.length)return function(t,e){};const e=it.b,n=Math.min(t.length,e.length),o=new q.a({color:"#f44444aa"}),i=new $.a({color:"#EEEEEE",width:.2}),r=new tt.c({fill:o,stroke:i});return function(i,a){return o.setColor(function(o){for(let i=0;i<n;i++)if(o<=t[i])return e[i];return"#000000"}(i.get("ct"))+"88"),r}}const kt=[];for(let Kt=0;Kt<=1;++Kt)kt.push(156543.03392804097/Math.pow(2,2*Kt));const Lt=new Z.a({extent:Object(o.g)("EPSG:3857").getExtent(),resolutions:kt,tileSize:512}),Ft=new W.a({attributions:'\xa9 <a href="https://mol.org">MOL</a>',format:new H.a,projection:"EPSG:3857",tileGrid:Lt,transition:0}),Nt=new B.a({title:"Vector tile - Datasets",visible:!1,source:Ft,minZoom:1,maxZoom:8,transition:0,style:Mt()}),Dt=(new B.a({title:"Vector tile - Models",visible:!1,source:Ft,minZoom:1,maxZoom:8,transition:0,style:Mt()}),new X.a({fold:"open",type:"overlay",layers:[Nt]}));class Gt{constructor(t={zoom:2,center:[10,30],maxZoom:14},e,n,o="species",i=(t=>{})){this.mode="species",this.overlaySource=[ft,bt,wt,yt],this.overlayLayer=[gt,Et,Ct,mt],this.tileLoadStartRef=null,this.tileLoadEndRef=null,this.tileLoadErrorRef=null,this.clickHandlerRef=null,this.pointerMoveHandlerRef=null,this.mode=o,this.initMap(t),this.mapClickCallback=e,this.mapMouseOverCallback=n,this.tileLoad=i}initMap(t){let e=Rt;"indicators"===this.mode||"patterns"===this.mode?e=Tt:"datasets"===this.mode&&(e=Dt),this.map=new M.a({target:"map",interactions:Object(G.a)().extend([new V.a]),layers:[U.a,e],view:new k.a({center:Object(o.d)(t.center||[10,30]),zoom:t.zoom||2,projection:"EPSG:3857",maxZoom:t.maxZoom,minZoom:2}),controls:Object(L.a)({attribution:!1}).extend([new F.a({collapsible:!1}),new N.a,new D.a])});const n=new K.a({label:"Layers",reverse:!0});this.map.addControl(n);const i=this;this.clickHandlerRef=function(t){const e=t.map.getFeaturesAtPixel(t.pixel);i.mapClickCallback&&i.mapClickCallback(e,t.coordinate,t)},this.pointerMoveHandlerRef=function(t){if(t.dragging)return;const e=t.map.getFeaturesAtPixel(t.pixel);i.mapMouseOverCallback&&i.mapMouseOverCallback(e,t.coordinate,t)},this.map.on("singleclick",this.clickHandlerRef),this.map.on("pointermove",this.pointerMoveHandlerRef)}dispose(){this.map.getLayers().forEach(t=>{this.map.removeLayer(t),t&&t.dispose()}),this.map.getInteractions().forEach(t=>{this.map.removeInteraction(t)}),this.map.setTarget(null),this.map.setView(null),this.map.un("singleclick",this.clickHandlerRef),this.map.un("pointermove",this.pointerMoveHandlerRef)}addInteraction(t){this.map.addInteraction(t)}removeInteraction(t){return this.map.removeInteraction(t)}removeLayer(t){return this.map.removeLayer(t)}getInteractions(){return this.map.getInteractions()}addLayer(t){return this.map.addLayer(t)}getLayers(){return this.map.getLayers()}getPixelFromCoordinate(t){return this.map.getPixelFromCoordinate(t)}setTileUrl(t,e=0){"OFF"===t||("species"===this.mode||"erm"===this.mode?this.speciesTileUrl(t,e):"experts"===this.mode?this.expertsTileUrl(t):"indicators"===this.mode||"patterns"===this.mode?this.indicatorsTileUrl(t):"datasets"===this.mode&&this.datasetTileUrl(t)),this.overlayLayer&&(this.overlayLayer.length<=e||(this.overlayLayer[e].setVisible(t.length>0&&"OFF"!==t),this.mapLoadingHandlers(),this.overlayLayer[e].getVisible()&&(this.overlaySource[e].setTileUrlFunction((function(e){return t.replace("{proj}","3857").replace("{z}",String(2*e[0]-1)).replace("{x}",String(e[1])).replace("{y}",String(e[2]))})),this.overlaySource[e].refresh())))}removeTileLoadHandlers(t){this.overlaySource.forEach((e,n)=>{void 0!==t&&t!==n||(e.un("tileloadstart",this.tileLoadStartRef),e.un("tileloadend",this.tileLoadEndRef),e.un("tileloaderror",this.tileLoadErrorRef))})}setView(t,e,n){t&&this.map.getView().setZoom(t),e&&this.map.getView().setCenter(Object(o.d)(e)),n&&this.map.getView().fit(n)}restyle(t){let e;if("patterns"===this.mode)e=ct(void 0,{threshold:t.pa/100,showCellProtectedArea:t.showCellProtectedArea});else{if("datasets"!==this.mode)return;e=Mt(t.breaks)}this.overlayLayer.forEach(t=>{t instanceof B.a&&t.setStyle(e)})}updateLayerOpacity(t,e){this.overlayLayer[e].setOpacity(t)}indicatorsTileUrl(t){this.overlaySource=[Pt],this.overlayLayer=[St]}datasetTileUrl(t){this.overlaySource=[Ft],this.overlayLayer=[Nt]}getOccurenceVisibleFeatures(){const t=[];return Et.getVisible()&&t.push(...bt.getFeaturesInExtent(this.map.getView().calculateExtent(this.map.getSize()))),gt.getVisible()&&t.push(...ft.getFeaturesInExtent(this.map.getView().calculateExtent(this.map.getSize()))),t}speciesTileUrl(t,e){t.indexOf(".mvt")>-1||e>0?(this.overlaySource=[ft,bt,wt,yt],this.overlayLayer=[gt,Et,Ct,mt]):(this.overlaySource=[wt],this.overlayLayer=[Ct],gt.setVisible(!1),Et.setVisible(!1))}expertsTileUrl(t){this.overlaySource=[wt,xt,vt],this.overlayLayer=[Ct,Ot,_t],gt.setVisible(!1),Et.setVisible(!1),mt.setVisible(!1)}setSimpleLayerGeoJson(t){vt.clear(),vt.addFeatures(new jt.a({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeatures(t))}mapLoadingHandlers(){if(null===this.tileLoadStartRef){const t=this;this.tileLoadStartRef=function(){t.tileLoad("start")},this.tileLoadEndRef=function(){t.tileLoad("end")},this.tileLoadErrorRef=function(){t.tileLoad("error")}}this.overlaySource.forEach(t=>{t.un("tileloadstart",this.tileLoadStartRef),t.un("tileloadend",this.tileLoadEndRef),t.un("tileloaderror",this.tileLoadErrorRef),t.on("tileloadstart",this.tileLoadStartRef),t.on("tileloadend",this.tileLoadEndRef),t.on("tileloaderror",this.tileLoadErrorRef)})}zoomToExtent(t,e=100){this.map.getView().fit(Object(o.p)(t,"EPSG:4326","EPSG:3857"),{padding:[e,e,e,e]})}updateSpeciesStyles(t=!1){Et.setStyle(lt(t))}setBaseLayer(t){}addWebGLFeatures(t){console.log("turn back on addFeatures to speciesWebGLMovementSource")}}const Vt=function(){return{moveFullScreen:!0}};let zt=(()=>{class t{constructor(t,e,n){this._dialog=t,this.mapService=e,this.spinner=n,this.mode="species",this.styleParameters={},this.selectedDatasetIds=[],this.subscriptions=[],this.activeTileUrls={}}ngOnInit(){const t=this;let e;["patterns","indicators","datasets"].indexOf(this.mode)>-1&&(e=function(e,n){t.handleMouseOver(e,n)});const n=["species","erm","experts"].indexOf(this.mode)>-1?14:8;this.map=new Gt({maxZoom:n},(function(e,n,o){t.handleClick(e,n,o)}),e,this.mode,this.getTileLoadHandler()),this.subscriptions.push(this.mapService.scientificname.subscribe(t=>{this.scientificname=t,this.updateMap(),this._dialog.closeAll()})),this.subscriptions.push(this.mapService.selectedLayers.subscribe(t=>{this.selectedDatasetIds=t,this.updateMap()})),this.subscriptions.push(this.mapService.zoomToExtent.subscribe(t=>{t&&t.southWest&&this.map.zoomToExtent([t.southWest.lng,t.southWest.lat,t.northEast.lng,t.northEast.lat],t.buffer?t.buffer:void 0)}));let o=t=>{((null==t?void 0:t.url)||""===(null==t?void 0:t.url))&&this.activeTileUrls[t.index]!==t.url&&(this.activeTileUrls[t.index]=t.url,this.map.setTileUrl(t.url,t.index))};this.subscriptions.push(this.mapService.tileUrl.subscribe(t=>{o({url:t,index:0})})),this.subscriptions.push(this.mapService.secondaryTileUrl.subscribe(t=>{o({url:t,index:1})})),this.subscriptions.push(this.mapService.modelTileUrl.subscribe(t=>{o({url:t,index:2})})),this.subscriptions.push(this.mapService.tileParam.subscribe(o)),this.subscriptions.push(this.mapService.displayUncertainty.subscribe(t=>{this.map.updateSpeciesStyles(t)})),this.subscriptions.push(this.mapService.opacity.subscribe(t=>{t&&this.map.updateLayerOpacity(t.opacity,t.index)})),this.subscriptions.push(this.mapService.geojsonFeatures.subscribe(t=>{t&&this.map.setSimpleLayerGeoJson(t)}))}ngOnDestroy(){this._dialog.closeAll(),this.subscriptions.forEach(t=>t.unsubscribe()),this.mapService.updateTileUrl(""),this.mapService.updateSecondaryTileUrl(""),this.map.dispose(),this.map=null,document.getElementById("map").remove()}ngOnChanges(t){t.styleParameters&&(t.styleParameters.firstChange||this.map.restyle(t.styleParameters.currentValue))}updateMap(){}handleClick(t,e,n){t&&t.length>0?("erm"===this.mode&&this.speciesClickHandler(t,n),"species"===this.mode&&this.speciesClickHandler(t),"indicators"===this.mode&&this.indicatorsClickHandler(t),"patterns"===this.mode&&this.indicatorsClickHandler(t),"datasets"===this.mode&&this.indicatorsClickHandler(t)):this.emptyClickHandler(n),this.mapService.updateClickEvent(Object(o.l)(e))}handleMouseOver(t,e){this.mapService.updateMouseOverFeatures(t)}indicatorsClickHandler(t){this.mapService.updateClickedFeatures(t)}emptyClickHandler(t){}speciesClickHandler(t,e){const n=t.filter(t=>t.get("molid")).map(t=>t.get("molid"));let o=t.filter(t=>t.get("hash")).map(t=>t.get("hash"));if(o.length>1){const t=o.map(t=>6==t.length?t:t.slice(0,-1));o=[...new Set(t)]}o.length>0&&n.length>0?function(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(i.a)(t,void 0).lift(new u(e))}(this.mapService.getFeaturesMetadata(n),this.mapService.getSpeciesGeohashMetadata(this.scientificname,o)).subscribe(([t,e])=>{this.displayMetadata(t,e)}):n.length>0?this.mapService.getFeaturesMetadata(n).subscribe(t=>{this.displayMetadata(t,[])}):o.length>0&&this.mapService.getSpeciesGeohashMetadata(this.scientificname,o).subscribe(t=>{this.displayMetadata([],t)})}displayMetadata(t,e){this._dialog.closeAll(),this._dialog.open(T,{minWidth:420,width:"40%",maxWidth:700,position:{bottom:"0px"},data:{datasetResults:t,geohashResults:e,scientificname:this.scientificname},hasBackdrop:!1})}getTileLoadHandler(){const t=this;return e=>{"start"===e?t.spinner.increaseActiveRequests():t.spinner.decreaseActiveRequests()}}}return t.\u0275fac=function(e){return new(e||t)(v.Pb(y.b),v.Pb(m.d),v.Pb(m.h))},t.\u0275cmp=v.Jb({type:t,selectors:[["mol-map"]],inputs:{mode:"mode",styleParameters:"styleParameters"},features:[v.Ab],decls:6,vars:3,consts:[["id","map"],[1,"map-logos"],["href","https://google.com/","target","_blank","title","Google"],["src","data:image/png;base64,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",1,"google-logo"],["href","https://mol.org/","target","_self","rel","home","title","Home",1,"mol-logo"],["alt","Map of Life","src","https://mol.org/static/img/logo.png"]],template:function(t,e){1&t&&(v.Vb(0,"div",0),v.Vb(1,"div",1),v.Vb(2,"a",2),v.Qb(3,"img",3),v.Ub(),v.Vb(4,"a",4),v.Qb(5,"img",5),v.Ub(),v.Ub(),v.Ub()),2&t&&v.Eb(v.pc(2,Vt))},styles:['.ol-box{box-sizing:border-box;border-radius:2px;border:2px solid #00f}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:rgba(0,60,136,.3);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid #eee;color:#eee;font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-step-marker{width:1px;height:15px;background-color:#000;float:right;z-Index:10}.ol-scale-step-text{bottom:-5px;font-size:12px;z-Index:11}.ol-scale-step-text,.ol-scale-text{position:absolute;color:#000;text-shadow:-2px 0 #fff,0 2px #fff,2px 0 #fff,0 -2px #fff}.ol-scale-text{font-size:14px;text-align:center;bottom:25px}.ol-scale-singlebar{position:relative;height:10px;z-Index:9;box-sizing:border-box;border:1px solid #000}.ol-unsupported{display:none}.ol-unselectable,.ol-viewport{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:grab}.ol-control{position:absolute;background-color:hsla(0,0%,100%,.4);border-radius:4px;padding:2px}.ol-control:hover{background-color:hsla(0,0%,100%,.6)}.ol-zoom{top:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:#fff;font-size:1.14em;font-weight:700;text-decoration:none;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:rgba(0,60,136,.5);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;font-size:1.2em;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:focus,.ol-control button:hover{text-decoration:none;background-color:rgba(0,60,136,.7)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em)}.ol-attribution ul{margin:0;padding:0 .5em;color:#000;text-shadow:0 0 2px #fff}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button,.ol-attribution ul{display:inline-block}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:hsla(0,0%,100%,.8)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:inline-block}.ol-overviewmap .ol-overviewmap-map{border:1px solid #7b98bc;height:150px;margin:2px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:1px;left:2px;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:hsla(0,0%,100%,.8)}.ol-overviewmap-box{border:2px dotted rgba(0,60,136,.7)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.layer-switcher{top:3.5em;right:.5em;text-align:left}.layer-switcher .panel{margin:0;border:4px solid #eee;border-radius:4px;background-color:#fff;display:none;max-height:inherit;height:100%;box-sizing:border-box;overflow-y:auto}.layer-switcher button{float:right;z-index:1;width:38px;height:38px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAACE1BMVEX///8A//8AgICA//8AVVVAQID///8rVVVJtttgv98nTmJ2xNgkW1ttyNsmWWZmzNZYxM4gWGgeU2JmzNNr0N1Rwc0eU2VXxdEhV2JqytQeVmMhVmNoydUfVGUgVGQfVGQfVmVqy9hqy9dWw9AfVWRpydVry9YhVmMgVGNUw9BrytchVWRexdGw294gVWQgVmUhVWPd4N6HoaZsy9cfVmQgVGRrytZsy9cgVWQgVWMgVWRsy9YfVWNsy9YgVWVty9YgVWVry9UgVWRsy9Zsy9UfVWRsy9YgVWVty9YgVWRty9Vsy9aM09sgVWRTws/AzM0gVWRtzNYgVWRuy9Zsy9cgVWRGcHxty9bb5ORbxdEgVWRty9bn6OZTws9mydRfxtLX3Nva5eRix9NFcXxOd4JPeINQeIMiVmVUws9Vws9Vw9BXw9BYxNBaxNBbxNBcxdJexdElWWgmWmhjyNRlx9IqXGtoipNpytVqytVryNNrytZsjZUuX210k5t1y9R2zNR3y9V4lp57zth9zdaAnKOGoaeK0NiNpquV09mesrag1tuitbmj1tuj19uktrqr2d2svcCu2d2xwMO63N+7x8nA3uDC3uDFz9DK4eHL4eLN4eIyYnDX5OM5Z3Tb397e4uDf4uHf5uXi5ePi5+Xj5+Xk5+Xm5+Xm6OY6aHXQ19fT4+NfhI1Ww89gx9Nhx9Nsy9ZWw9Dpj2abAAAAWnRSTlMAAQICAwQEBgcIDQ0ODhQZGiAiIyYpKywvNTs+QklPUlNUWWJjaGt0dnd+hIWFh4mNjZCSm6CpsbW2t7nDzNDT1dje5efr7PHy9PT29/j4+Pn5+vr8/f39/f6DPtKwAAABTklEQVR4Xr3QVWPbMBSAUTVFZmZmhhSXMjNvkhwqMzMzMzPDeD+xASvObKePPa+ffHVl8PlsnE0+qPpBuQjVJjno6pZpSKXYl7/bZyFaQxhf98hHDKEppwdWIW1frFnrxSOWHFfWesSEWC6R/P4zOFrix3TzDFLlXRTR8c0fEEJ1/itpo7SVO9Jdr1DVxZ0USyjZsEY5vZfiiAC0UoTGOrm9PZLuRl8X+Dq1HQtoFbJZbv61i+Poblh/97TC7n0neCcK0ETNUrz1/xPHf+DNAW9Ac6t8O8WH3Vp98f5lCaYKAOFZMLyHL4Y0fe319idMNgMMp+zWVSybUed/+/h7I4wRAG1W6XDy4XmjR9HnzvDRZXUAYDFOhC1S/Hh+fIXxen+eO+AKqbs+wAo30zDTDvDxKoJN88sjUzDFAvBzEUGFsnADoIvAJzoh2BZ8sner+Ke/vwECuQAAAABJRU5ErkJggg==");background-repeat:no-repeat;background-position:2px;background-color:#fff;color:#000;border:none}.layer-switcher button:focus,.layer-switcher button:hover{background-color:#fff}.layer-switcher.shown{overflow-y:hidden}.layer-switcher.shown.ol-control{background-color:transparent}.layer-switcher.shown.ol-control:hover{background-color:transparent}.layer-switcher.shown .panel{display:block}.layer-switcher.shown button{display:none}.layer-switcher.shown.layer-switcher-activation-mode-click>button{display:block;background-image:unset;right:2px;position:absolute;background-color:#eee;margin:0 1px}.layer-switcher.shown button:focus,.layer-switcher.shown button:hover{background-color:#fafafa}.layer-switcher ul{list-style:none;margin:1.6em .4em;padding-left:0}.layer-switcher ul ul{padding-left:1.2em;margin:.1em 0 0}.layer-switcher li.group+li.group{margin-top:.4em}.layer-switcher li.group>label{font-weight:700}.layer-switcher.layer-switcher-group-select-style-none li.group>label{padding-left:1.2em}.layer-switcher li{position:relative;margin-top:.3em}.layer-switcher li input{position:absolute;left:1.2em;height:1em;width:1em;font-size:1em}.layer-switcher li label{padding-left:2.7em;padding-right:1.2em;display:inline-block;margin-top:1px}.layer-switcher label.disabled{opacity:.4}.layer-switcher input{margin:0}.layer-switcher.touch ::-webkit-scrollbar{width:4px}.layer-switcher.touch ::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:10px}.layer-switcher.touch ::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.5)}li.layer-switcher-base-group>label{padding-left:1.2em}.layer-switcher .group button{position:absolute;left:0;display:inline-block;vertical-align:top;float:none;font-size:1em;width:1em;height:1em;margin:0;background-position:center 2px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAW0lEQVR4nGNgGAWMyBwXFxcGBgaGeii3EU0tXHzPnj1wQRYsihqQ+I0ExDEMQAYNONgoAN0AmMkNaDSyQSheY8JiaCMOGzE04zIAmyFYNTMw4A+DRhzsUUBtAADw4BCeIZkGdwAAAABJRU5ErkJggg==");transition:transform .2s ease-in-out}.layer-switcher .group.layer-switcher-close button{transform:rotate(-90deg);-webkit-transform:rotate(-90deg)}.layer-switcher .group.layer-switcher-fold.layer-switcher-close>ul{overflow:hidden;height:0}.layer-switcher.shown.layer-switcher-activation-mode-click{padding-left:34px}.layer-switcher.shown.layer-switcher-activation-mode-click>button{left:0;border-right:0}:root{--topLine:3em}@media screen and (max-device-width:480px){:root{--topLine:0.1em}.layer-switcher>button{font-size:15px!important}}.layer-switcher{position:absolute;left:.5em;top:calc(var(--topLine) + 7em);border-radius:3px;background-color:transparent;width:60px}.layer-switcher.shown{width:unset}.layer-switcher button{width:60px;padding:2px;border-radius:3px;border:1px solid #000;line-height:25px;background-image:unset;font-weight:unset}.layer-switcher .panel{max-width:250px}.ol-scale-line{background-color:#fff;left:.9em}.ol-scale-line-inner{border:1px solid #000;border-top:none;background-color:#fff;color:#000}.ol-control button{border:1px solid #bbb;background-color:#fff;color:#000}.ol-control button:focus,.ol-control button:hover{background-color:#eee;color:#000}.ol-zoom{z-index:1000;top:calc(var(--topLine) + 0px);bottom:unset;left:.5em}.map-parent{position:relative}.ol-full-screen{left:.5em;top:calc(var(--topLine) + 4.5em);max-width:1.7em}.ol-attribution{bottom:35px}#map{width:100%;height:100%;transition:0;position:relative}.drawing{cursor:url(https://mapoflife.github.io/experts-next/feather.f9ad4b07dac825fef883.svg) 2 20,auto}.google-logo{max-height:25px;z-index:10000}:host{position:relative}.map-logos{position:absolute;display:inline;bottom:5px;margin:0 auto;left:calc(50% - 50px);z-index:1}.map-logos a::-moz-selection{background-color:transparent}.map-logos:focus,.map-logos a::selection,.map-logos a:active,.map-logos a:hover,.map-logos a:visited{background-color:transparent}.map-logos img{height:40px}.map-logos .mol-logo{padding-left:20px}.map-logos .mol-logo img{height:28px}#hatch{background-image:url(/libs/ui/src/assets/bw20.png)}@media screen and (max-device-width:480px){.map-logos{left:35%;bottom:1px}.map-logos img{height:20px}.map-logos .mol-logo{padding-left:10px}.map-logos .mol-logo img{height:17px}}'],encapsulation:2}),t})()},skP8:function(t,e,n){"use strict";var o,i=n("1PGm"),r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e,n,o,i,r){var a=t.call(this,e,n,r)||this;return a.originalEvent=o,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==i&&i,a}return r(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(i.a);e.a=a},y1k7:function(t,e,n){"use strict";var o=n("+cQG"),i=n("rjvG"),r=n("70ZC"),a=n("j/Z9"),s=n("fzNE"),l=n("rHrS"),c=n("qsAS"),u=n("MMQm"),h=n("8f5B"),p=n("h7by");function d(t,e){return[[-1/0,-1/0,1/0,1/0]]}var f,g=n("SHzd"),y=n("vog+"),m=n("I/d5"),v=n("lRKV"),_=n("QRdp"),b=n("HK6I"),E=n("6IIn"),w=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),C=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.feature=n,i.features=o,i}return w(e,t),e}(r.a),x=function(t){function e(e){var n=this,i=e||{};(n=t.call(this,{attributions:i.attributions,projection:void 0,state:u.a.READY,wrapX:void 0===i.wrapX||i.wrapX})||this).loader_=p.c,n.format_=i.format,n.overlaps_=void 0===i.overlaps||i.overlaps,n.url_=i.url,void 0!==i.loader?n.loader_=i.loader:void 0!==n.url_&&(Object(g.a)(n.format_,7),n.loader_=Object(E.b)(n.url_,n.format_)),n.strategy_=void 0!==i.strategy?i.strategy:d;var r,a,s=void 0===i.useSpatialIndex||i.useSpatialIndex;return n.featuresRtree_=s?new l.a:null,n.loadedExtentsRtree_=new l.a,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null,Array.isArray(i.features)?a=i.features:i.features&&(a=(r=i.features).getArray()),s||void 0!==r||(r=new o.a(a)),void 0!==a&&n.addFeaturesInternal(a),void 0!==r&&n.bindFeaturesCollection_(r),n}return w(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(v.c)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var o=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new C(h.a.ADDFEATURE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(b.a)(e,a.a.CHANGE,this.handleFeatureChange_,this),Object(b.a)(e,s.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var n=!0,o=e.getId();return void 0!==o&&(o.toString()in this.idIndex_?n=!1:this.idIndex_[o.toString()]=e),n&&(Object(g.a)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],o=[],i=0,r=t.length;i<r;i++){var a=t[i],s=Object(v.c)(a);this.addToIndex_(s,a)&&n.push(a)}i=0;for(var l=n.length;i<l;i++){a=n[i],s=Object(v.c)(a),this.setupChangeEvents_(s,a);var c=a.getGeometry();if(c){var u=c.getExtent();e.push(u),o.push(a)}else this.nullGeometryFeatures_[s]=a}this.featuresRtree_&&this.featuresRtree_.load(e,o),i=0;for(var p=n.length;i<p;i++)this.dispatchEvent(new C(h.a.ADDFEATURE,n[i]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(h.a.ADDFEATURE,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(h.a.REMOVEFEATURE,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(i.a.ADD,(function(t){e||(e=!0,this.addFeature(t.element),e=!1)}).bind(this)),t.addEventListener(i.a.REMOVE,(function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}).bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(b.c);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var o=new C(h.a.CLEAR);this.dispatchEvent(o),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],(function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){var o=e(n);if(o)return o}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(_.d)(this.nullGeometryFeatures_)||Object(m.c)(t,Object(_.c)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0],o=t[1],i=null,r=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],l=e||p.b;return this.featuresRtree_.forEachInExtent(s,(function(t){if(l(t)){var e=t.getGeometry(),c=a;if((a=e.closestPointXY(n,o,r,a))<c){i=t;var u=Math.sqrt(a);s[0]=n-u,s[1]=o-u,s[2]=n+u,s[3]=o+u}}})),i},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,n=Object(v.c)(e),o=e.getGeometry();if(o){var i=o.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(i,e)):this.featuresRtree_&&this.featuresRtree_.update(i,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var r=e.getId();if(void 0!==r){var a=r.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new C(h.a.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(v.c)(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(_.d)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,n){var o=this.loadedExtentsRtree_,i=this.strategy_(t,e);this.loading=!1;for(var r=function(t,r){var s=i[t];o.forEachInExtent(s,(function(t){return Object(y.g)(t.extent,s)}))||(a.dispatchEvent(new C(h.a.FEATURESLOADSTART)),a.loader_.call(a,s,e,n,(function(t){this.dispatchEvent(new C(h.a.FEATURESLOADEND,void 0,t))}).bind(a),(function(){this.dispatchEvent(new C(h.a.FEATURESLOADERROR))}).bind(a)),o.insert(s,{extent:s.slice()}),a.loading=a.loader_!==p.c)},a=this,s=0,l=i.length;s<l;++s)r(s)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,n=this.loadedExtentsRtree_;n.forEachInExtent(t,(function(n){if(Object(y.p)(n.extent,t))return e=n,!0})),e&&n.remove(e)},e.prototype.removeFeature=function(t){var e=Object(v.c)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Object(v.c)(t);this.featureChangeKeys_[e].forEach(b.c),delete this.featureChangeKeys_[e];var n=t.getId();void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new C(h.a.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Object(g.a)(this.format_,7),this.setLoader(Object(E.b)(t,this.format_))},e}(c.a);e.a=x}}]);